var Jd=Object.defineProperty;var Qd=(n,e,t)=>e in n?Jd(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var $n=(n,e,t)=>Qd(n,typeof e!="symbol"?e+"":e,t);import{j as v,T as Os,r as Pu}from"./index-zpbvjSkd.js";import{V as Wo,r as C,R as Ut}from"./iframe-l7c0Uwyw.js";import"./index-DSIxRGzY.js";const is={black:"#000",white:"#fff"},nn={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},sn={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},on={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},an={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},ln={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Wn={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},ep={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function ur(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const wa="$$material";function vi(){return vi=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},vi.apply(null,arguments)}function tp(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function rp(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var np=function(){function n(t){var r=this;this._insertTag=function(s){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,i),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rp(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=tp(s);try{i.insertRule(r,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Je="-ms-",bi="-moz-",ce="-webkit-",Eu="comm",Sa="rule",_a="decl",sp="@import",Mu="@keyframes",ip="@layer",op=Math.abs,Bi=String.fromCharCode,ap=Object.assign;function lp(n,e){return Ge(n,0)^45?(((e<<2^Ge(n,0))<<2^Ge(n,1))<<2^Ge(n,2))<<2^Ge(n,3):0}function Du(n){return n.trim()}function cp(n,e){return(n=e.exec(n))?n[0]:n}function ue(n,e,t){return n.replace(e,t)}function zo(n,e){return n.indexOf(e)}function Ge(n,e){return n.charCodeAt(e)|0}function os(n,e,t){return n.slice(e,t)}function Vt(n){return n.length}function Ta(n){return n.length}function Ps(n,e){return e.push(n),n}function up(n,e){return n.map(e).join("")}var Ni=1,kn=1,Ru=0,gt=0,$e=0,Mn="";function $i(n,e,t,r,s,i,o){return{value:n,root:e,parent:t,type:r,props:s,children:i,line:Ni,column:kn,length:o,return:""}}function zn(n,e){return ap($i("",null,null,"",null,null,0),n,{length:-n.length},e)}function hp(){return $e}function dp(){return $e=gt>0?Ge(Mn,--gt):0,kn--,$e===10&&(kn=1,Ni--),$e}function Ct(){return $e=gt<Ru?Ge(Mn,gt++):0,kn++,$e===10&&(kn=1,Ni++),$e}function Kt(){return Ge(Mn,gt)}function li(){return gt}function gs(n,e){return os(Mn,n,e)}function as(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ju(n){return Ni=kn=1,Ru=Vt(Mn=n),gt=0,[]}function Au(n){return Mn="",n}function ci(n){return Du(gs(gt-1,qo(n===91?n+2:n===40?n+1:n)))}function pp(n){for(;($e=Kt())&&$e<33;)Ct();return as(n)>2||as($e)>3?"":" "}function fp(n,e){for(;--e&&Ct()&&!($e<48||$e>102||$e>57&&$e<65||$e>70&&$e<97););return gs(n,li()+(e<6&&Kt()==32&&Ct()==32))}function qo(n){for(;Ct();)switch($e){case n:return gt;case 34:case 39:n!==34&&n!==39&&qo($e);break;case 40:n===41&&qo(n);break;case 92:Ct();break}return gt}function gp(n,e){for(;Ct()&&n+$e!==57;)if(n+$e===84&&Kt()===47)break;return"/*"+gs(e,gt-1)+"*"+Bi(n===47?n:Ct())}function mp(n){for(;!as(Kt());)Ct();return gs(n,gt)}function yp(n){return Au(ui("",null,null,null,[""],n=ju(n),0,[0],n))}function ui(n,e,t,r,s,i,o,a,l){for(var c=0,u=0,h=o,d=0,p=0,f=0,g=1,m=1,b=1,_=0,x="",S=s,w=i,O=r,M=x;m;)switch(f=_,_=Ct()){case 40:if(f!=108&&Ge(M,h-1)==58){zo(M+=ue(ci(_),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:M+=ci(_);break;case 9:case 10:case 13:case 32:M+=pp(f);break;case 92:M+=fp(li()-1,7);continue;case 47:switch(Kt()){case 42:case 47:Ps(vp(gp(Ct(),li()),e,t),l);break;default:M+="/"}break;case 123*g:a[c++]=Vt(M)*b;case 125*g:case 59:case 0:switch(_){case 0:case 125:m=0;case 59+u:b==-1&&(M=ue(M,/\f/g,"")),p>0&&Vt(M)-h&&Ps(p>32?El(M+";",r,t,h-1):El(ue(M," ","")+";",r,t,h-2),l);break;case 59:M+=";";default:if(Ps(O=Pl(M,e,t,c,u,s,a,x,S=[],w=[],h),i),_===123)if(u===0)ui(M,e,O,O,S,i,h,a,w);else switch(d===99&&Ge(M,3)===110?100:d){case 100:case 108:case 109:case 115:ui(n,O,O,r&&Ps(Pl(n,O,O,0,0,s,a,x,s,S=[],h),w),s,w,h,a,r?S:w);break;default:ui(M,O,O,O,[""],w,0,a,w)}}c=u=p=0,g=b=1,x=M="",h=o;break;case 58:h=1+Vt(M),p=f;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&dp()==125)continue}switch(M+=Bi(_),_*g){case 38:b=u>0?1:(M+="\f",-1);break;case 44:a[c++]=(Vt(M)-1)*b,b=1;break;case 64:Kt()===45&&(M+=ci(Ct())),d=Kt(),u=h=Vt(x=M+=mp(li())),_++;break;case 45:f===45&&Vt(M)==2&&(g=0)}}return i}function Pl(n,e,t,r,s,i,o,a,l,c,u){for(var h=s-1,d=s===0?i:[""],p=Ta(d),f=0,g=0,m=0;f<r;++f)for(var b=0,_=os(n,h+1,h=op(g=o[f])),x=n;b<p;++b)(x=Du(g>0?d[b]+" "+_:ue(_,/&\f/g,d[b])))&&(l[m++]=x);return $i(n,e,t,s===0?Sa:a,l,c,u)}function vp(n,e,t){return $i(n,e,t,Eu,Bi(hp()),os(n,2,-2),0)}function El(n,e,t,r){return $i(n,e,t,_a,os(n,0,r),os(n,r+1,-1),r)}function xn(n,e){for(var t="",r=Ta(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function bp(n,e,t,r){switch(n.type){case ip:if(n.children.length)break;case sp:case _a:return n.return=n.return||n.value;case Eu:return"";case Mu:return n.return=n.value+"{"+xn(n.children,r)+"}";case Sa:n.value=n.props.join(",")}return Vt(t=xn(n.children,r))?n.return=n.value+"{"+t+"}":""}function xp(n){var e=Ta(n);return function(t,r,s,i){for(var o="",a=0;a<e;a++)o+=n[a](t,r,s,i)||"";return o}}function Cp(n){return function(e){e.root||(e=e.return)&&n(e)}}function Fu(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var wp=function(e,t,r){for(var s=0,i=0;s=i,i=Kt(),s===38&&i===12&&(t[r]=1),!as(i);)Ct();return gs(e,gt)},Sp=function(e,t){var r=-1,s=44;do switch(as(s)){case 0:s===38&&Kt()===12&&(t[r]=1),e[r]+=wp(gt-1,t,r);break;case 2:e[r]+=ci(s);break;case 4:if(s===44){e[++r]=Kt()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Bi(s)}while(s=Ct());return e},_p=function(e,t){return Au(Sp(ju(e),t))},Ml=new WeakMap,Tp=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!Ml.get(r))&&!s){Ml.set(e,!0);for(var i=[],o=_p(t,i),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=i[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},kp=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Iu(n,e){switch(lp(n,e)){case 5103:return ce+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ce+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ce+n+bi+n+Je+n+n;case 6828:case 4268:return ce+n+Je+n+n;case 6165:return ce+n+Je+"flex-"+n+n;case 5187:return ce+n+ue(n,/(\w+).+(:[^]+)/,ce+"box-$1$2"+Je+"flex-$1$2")+n;case 5443:return ce+n+Je+"flex-item-"+ue(n,/flex-|-self/,"")+n;case 4675:return ce+n+Je+"flex-line-pack"+ue(n,/align-content|flex-|-self/,"")+n;case 5548:return ce+n+Je+ue(n,"shrink","negative")+n;case 5292:return ce+n+Je+ue(n,"basis","preferred-size")+n;case 6060:return ce+"box-"+ue(n,"-grow","")+ce+n+Je+ue(n,"grow","positive")+n;case 4554:return ce+ue(n,/([^-])(transform)/g,"$1"+ce+"$2")+n;case 6187:return ue(ue(ue(n,/(zoom-|grab)/,ce+"$1"),/(image-set)/,ce+"$1"),n,"")+n;case 5495:case 3959:return ue(n,/(image-set\([^]*)/,ce+"$1$`$1");case 4968:return ue(ue(n,/(.+:)(flex-)?(.*)/,ce+"box-pack:$3"+Je+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ce+n+n;case 4095:case 3583:case 4068:case 2532:return ue(n,/(.+)-inline(.+)/,ce+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Vt(n)-1-e>6)switch(Ge(n,e+1)){case 109:if(Ge(n,e+4)!==45)break;case 102:return ue(n,/(.+:)(.+)-([^]+)/,"$1"+ce+"$2-$3$1"+bi+(Ge(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~zo(n,"stretch")?Iu(ue(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ge(n,e+1)!==115)break;case 6444:switch(Ge(n,Vt(n)-3-(~zo(n,"!important")&&10))){case 107:return ue(n,":",":"+ce)+n;case 101:return ue(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ce+(Ge(n,14)===45?"inline-":"")+"box$3$1"+ce+"$2$3$1"+Je+"$2box$3")+n}break;case 5936:switch(Ge(n,e+11)){case 114:return ce+n+Je+ue(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ce+n+Je+ue(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ce+n+Je+ue(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ce+n+Je+n+n}return n}var Op=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case _a:e.return=Iu(e.value,e.length);break;case Mu:return xn([zn(e,{value:ue(e.value,"@","@"+ce)})],s);case Sa:if(e.length)return up(e.props,function(i){switch(cp(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return xn([zn(e,{props:[ue(i,/:(read-\w+)/,":"+bi+"$1")]})],s);case"::placeholder":return xn([zn(e,{props:[ue(i,/:(plac\w+)/,":"+ce+"input-$1")]}),zn(e,{props:[ue(i,/:(plac\w+)/,":"+bi+"$1")]}),zn(e,{props:[ue(i,/:(plac\w+)/,Je+"input-$1")]})],s)}return""})}},Pp=[Op],Ep=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var m=g.getAttribute("data-emotion");m.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=e.stylisPlugins||Pp,i={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(g){for(var m=g.getAttribute("data-emotion").split(" "),b=1;b<m.length;b++)i[m[b]]=!0;a.push(g)});var l,c=[Tp,kp];{var u,h=[bp,Cp(function(g){u.insert(g)})],d=xp(c.concat(s,h)),p=function(m){return xn(yp(m),d)};l=function(m,b,_,x){u=_,p(m?m+"{"+b.styles+"}":b.styles),x&&(f.inserted[b.name]=!0)}}var f={key:t,sheet:new np({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return f.sheet.hydrate(a),f},ho={exports:{}},he={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl;function Mp(){if(Dl)return he;Dl=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,p=n?Symbol.for("react.memo"):60115,f=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,m=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(w){if(typeof w=="object"&&w!==null){var O=w.$$typeof;switch(O){case e:switch(w=w.type,w){case l:case c:case r:case i:case s:case h:return w;default:switch(w=w&&w.$$typeof,w){case a:case u:case f:case p:case o:return w;default:return O}}case t:return O}}}function S(w){return x(w)===c}return he.AsyncMode=l,he.ConcurrentMode=c,he.ContextConsumer=a,he.ContextProvider=o,he.Element=e,he.ForwardRef=u,he.Fragment=r,he.Lazy=f,he.Memo=p,he.Portal=t,he.Profiler=i,he.StrictMode=s,he.Suspense=h,he.isAsyncMode=function(w){return S(w)||x(w)===l},he.isConcurrentMode=S,he.isContextConsumer=function(w){return x(w)===a},he.isContextProvider=function(w){return x(w)===o},he.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},he.isForwardRef=function(w){return x(w)===u},he.isFragment=function(w){return x(w)===r},he.isLazy=function(w){return x(w)===f},he.isMemo=function(w){return x(w)===p},he.isPortal=function(w){return x(w)===t},he.isProfiler=function(w){return x(w)===i},he.isStrictMode=function(w){return x(w)===s},he.isSuspense=function(w){return x(w)===h},he.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===c||w===i||w===s||w===h||w===d||typeof w=="object"&&w!==null&&(w.$$typeof===f||w.$$typeof===p||w.$$typeof===o||w.$$typeof===a||w.$$typeof===u||w.$$typeof===m||w.$$typeof===b||w.$$typeof===_||w.$$typeof===g)},he.typeOf=x,he}var Rl;function Dp(){return Rl||(Rl=1,ho.exports=Mp()),ho.exports}var po,jl;function Rp(){if(jl)return po;jl=1;var n=Dp(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[n.ForwardRef]=r,i[n.Memo]=s;function o(f){return n.isMemo(f)?s:i[f.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;function p(f,g,m){if(typeof g!="string"){if(d){var b=h(g);b&&b!==d&&p(f,b,m)}var _=l(g);c&&(_=_.concat(c(g)));for(var x=o(f),S=o(g),w=0;w<_.length;++w){var O=_[w];if(!t[O]&&!(m&&m[O])&&!(S&&S[O])&&!(x&&x[O])){var M=u(g,O);try{a(f,O,M)}catch{}}}}return f}return po=p,po}Rp();var jp=!0;function Lu(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var ka=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||jp===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},Oa=function(e,t,r){ka(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?"."+s:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function Ap(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Fp={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ip=/[A-Z]|^ms/g,Lp=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Bu=function(e){return e.charCodeAt(1)===45},Al=function(e){return e!=null&&typeof e!="boolean"},fo=Fu(function(n){return Bu(n)?n:n.replace(Ip,"-$&").toLowerCase()}),Fl=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(Lp,function(r,s,i){return Xt={name:s,styles:i,next:Xt},s})}return Fp[e]!==1&&!Bu(e)&&typeof t=="number"&&t!==0?t+"px":t};function ls(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Xt={name:s.name,styles:s.styles,next:Xt},s.name;var i=t;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Xt={name:o.name,styles:o.styles,next:Xt},o=o.next;var a=i.styles+";";return a}return Bp(n,e,t)}case"function":{if(n!==void 0){var l=Xt,c=t(n);return Xt=l,ls(n,e,c)}break}}var u=t;if(e==null)return u;var h=e[u];return h!==void 0?h:u}function Bp(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=ls(n,e,t[s])+";";else for(var i in t){var o=t[i];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=i+"{"+e[a]+"}":Al(a)&&(r+=fo(i)+":"+Fl(i,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)Al(o[l])&&(r+=fo(i)+":"+Fl(i,o[l])+";");else{var c=ls(n,e,o);switch(i){case"animation":case"animationName":{r+=fo(i)+":"+c+";";break}default:r+=i+"{"+c+"}"}}}return r}var Il=/label:\s*([^\s;{]+)\s*(;|$)/g,Xt;function ms(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Xt=void 0;var i=n[0];if(i==null||i.raw===void 0)r=!1,s+=ls(t,e,i);else{var o=i;s+=o[0]}for(var a=1;a<n.length;a++)if(s+=ls(t,e,n[a]),r){var l=i;s+=l[a]}Il.lastIndex=0;for(var c="",u;(u=Il.exec(s))!==null;)c+="-"+u[1];var h=Ap(s)+c;return{name:h,styles:s,next:Xt}}var Np=function(e){return e()},Nu=Wo.useInsertionEffect?Wo.useInsertionEffect:!1,$u=Nu||Np,Ll=Nu||C.useLayoutEffect,Wu=C.createContext(typeof HTMLElement<"u"?Ep({key:"css"}):null);Wu.Provider;var Pa=function(e){return C.forwardRef(function(t,r){var s=C.useContext(Wu);return e(t,s,r)})},Wi=C.createContext({}),Ea={}.hasOwnProperty,Vo="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",$p=function(e,t){var r={};for(var s in t)Ea.call(t,s)&&(r[s]=t[s]);return r[Vo]=e,r},Wp=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return ka(t,r,s),$u(function(){return Oa(t,r,s)}),null},zp=Pa(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[Vo],i=[r],o="";typeof n.className=="string"?o=Lu(e.registered,i,n.className):n.className!=null&&(o=n.className+" ");var a=ms(i,void 0,C.useContext(Wi));o+=e.key+"-"+a.name;var l={};for(var c in n)Ea.call(n,c)&&c!=="css"&&c!==Vo&&(l[c]=n[c]);return l.className=o,t&&(l.ref=t),C.createElement(C.Fragment,null,C.createElement(Wp,{cache:e,serialized:a,isStringTag:typeof s=="string"}),C.createElement(s,l))}),qp=zp,Bl=function(e,t){var r=arguments;if(t==null||!Ea.call(t,"css"))return C.createElement.apply(void 0,r);var s=r.length,i=new Array(s);i[0]=qp,i[1]=$p(e,t);for(var o=2;o<s;o++)i[o]=r[o];return C.createElement.apply(null,i)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(Bl||(Bl={}));var Vp=Pa(function(n,e){var t=n.styles,r=ms([t],void 0,C.useContext(Wi)),s=C.useRef();return Ll(function(){var i=e.key+"-global",o=new e.sheet.constructor({key:i,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",i),o.hydrate([l])),s.current=[o,a],function(){o.flush()}},[e]),Ll(function(){var i=s.current,o=i[0],a=i[1];if(a){i[1]=!1;return}if(r.next!==void 0&&Oa(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Ma(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ms(e)}function ys(){var n=Ma.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Xp=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Hp=Fu(function(n){return Xp.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Yp=Hp,Up=function(e){return e!=="theme"},Nl=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Yp:Up},$l=function(e,t,r){var s;if(t){var i=t.shouldForwardProp;s=e.__emotion_forwardProp&&i?function(o){return e.__emotion_forwardProp(o)&&i(o)}:i}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},Gp=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return ka(t,r,s),$u(function(){return Oa(t,r,s)}),null},Kp=function n(e,t){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,i,o;t!==void 0&&(i=t.label,o=t.target);var a=$l(e,t,r),l=a||Nl(s),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var d=u[0];h.push(d[0]);for(var p=u.length,f=1;f<p;f++)h.push(u[f],d[f])}var g=Pa(function(m,b,_){var x=c&&m.as||s,S="",w=[],O=m;if(m.theme==null){O={};for(var M in m)O[M]=m[M];O.theme=C.useContext(Wi)}typeof m.className=="string"?S=Lu(b.registered,w,m.className):m.className!=null&&(S=m.className+" ");var P=ms(h.concat(w),b.registered,O);S+=b.key+"-"+P.name,o!==void 0&&(S+=" "+o);var L=c&&a===void 0?Nl(x):l,y={};for(var E in m)c&&E==="as"||L(E)&&(y[E]=m[E]);return y.className=S,_&&(y.ref=_),C.createElement(C.Fragment,null,C.createElement(Gp,{cache:b,serialized:P,isStringTag:typeof x=="string"}),C.createElement(x,y))});return g.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=h,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(m,b){var _=n(m,vi({},t,b,{shouldForwardProp:$l(g,b,!0)}));return _.apply(void 0,h)},g}},Zp=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Xo=Kp.bind(null);Zp.forEach(function(n){Xo[n]=Xo(n)});function Jp(n){return n==null||Object.keys(n).length===0}function Qp(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?s=>e(Jp(s)?t:s):e;return v.jsx(Vp,{styles:r})}/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ef(n,e){return Xo(n,e)}function tf(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const Wl=[];function zl(n){return Wl[0]=n,ms(Wl)}var go={exports:{}},me={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ql;function rf(){if(ql)return me;ql=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),p=Symbol.for("react.client.reference");function f(g){if(typeof g=="object"&&g!==null){var m=g.$$typeof;switch(m){case n:switch(g=g.type,g){case t:case s:case r:case l:case c:return g;default:switch(g=g&&g.$$typeof,g){case o:case a:case h:case u:return g;case i:return g;default:return m}}case e:return m}}}return me.ContextConsumer=i,me.ContextProvider=o,me.Element=n,me.ForwardRef=a,me.Fragment=t,me.Lazy=h,me.Memo=u,me.Portal=e,me.Profiler=s,me.StrictMode=r,me.Suspense=l,me.SuspenseList=c,me.isContextConsumer=function(g){return f(g)===i},me.isContextProvider=function(g){return f(g)===o},me.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===n},me.isForwardRef=function(g){return f(g)===a},me.isFragment=function(g){return f(g)===t},me.isLazy=function(g){return f(g)===h},me.isMemo=function(g){return f(g)===u},me.isPortal=function(g){return f(g)===e},me.isProfiler=function(g){return f(g)===s},me.isStrictMode=function(g){return f(g)===r},me.isSuspense=function(g){return f(g)===l},me.isSuspenseList=function(g){return f(g)===c},me.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===t||g===s||g===r||g===l||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===a||g.$$typeof===p||g.getModuleId!==void 0)},me.typeOf=f,me}var Vl;function nf(){return Vl||(Vl=1,go.exports=rf()),go.exports}var zu=nf();function Ht(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function qu(n){if(C.isValidElement(n)||zu.isValidElementType(n)||!Ht(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=qu(n[t])}),e}function et(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Ht(n)&&Ht(e)&&Object.keys(e).forEach(s=>{C.isValidElement(e[s])||zu.isValidElementType(e[s])?r[s]=e[s]:Ht(e[s])&&Object.prototype.hasOwnProperty.call(n,s)&&Ht(n[s])?r[s]=et(n[s],e[s],t):t.clone?r[s]=Ht(e[s])?qu(e[s]):e[s]:r[s]=e[s]}),r}const sf=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function of(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...s}=n,i=sf(e),o=Object.keys(i);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${t})`}function c(d,p){const f=o.indexOf(p);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t}) and (max-width:${(f!==-1&&typeof e[o[f]]=="number"?e[o[f]]:p)-r/100}${t})`}function u(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function h(d){const p=o.indexOf(d);return p===0?a(o[1]):p===o.length-1?l(o[p]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:a,down:l,between:c,only:u,not:h,unit:t,...s}}function af(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var o,a;const i=/min-width:\s*([0-9.]+)/;return+(((o=r.match(i))==null?void 0:o[1])||0)-+(((a=s.match(i))==null?void 0:a[1])||0)});return t.length?t.reduce((r,s)=>{const i=e[s];return delete r[s],r[s]=i,r},{...e}):e}function lf(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function cf(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,s]=t,i=Number.isNaN(+r)?r||0:+r;return n.containerQueries(s).up(i)}function uf(n){const e=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function t(i,o){i.up=(...a)=>e(n.breakpoints.up(...a),o),i.down=(...a)=>e(n.breakpoints.down(...a),o),i.between=(...a)=>e(n.breakpoints.between(...a),o),i.only=(...a)=>e(n.breakpoints.only(...a),o),i.not=(...a)=>{const l=e(n.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=i=>(t(r,i),r);return t(s),{...n,containerQueries:s}}const hf={borderRadius:4};function Jn(n,e){return e?et(n,e,{clone:!1}):n}const zi={xs:0,sm:600,md:900,lg:1200,xl:1536},Xl={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${zi[n]}px)`},df={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:zi[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function hr(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const i=r.breakpoints||Xl;return e.reduce((o,a,l)=>(o[i.up(i.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const i=r.breakpoints||Xl;return Object.keys(e).reduce((o,a)=>{if(lf(i.keys,a)){const l=cf(r.containerQueries?r:df,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(i.values||zi).includes(a)){const l=i.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function pf(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,s)=>{const i=n.up(s);return r[i]={},r},{}))||{}}function ff(n,e){return n.reduce((t,r)=>{const s=t[r];return(!s||Object.keys(s).length===0)&&delete t[r],t},e)}function J(n){if(typeof n!="string")throw new Error(ur(7));return n.charAt(0).toUpperCase()+n.slice(1)}function qi(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,n);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,n)}function xi(n,e,t,r=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||r:s=qi(n,t)||r,e&&(s=e(s,r,n)),s}function Be(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:s}=n,i=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=qi(l,r)||{};return hr(o,a,h=>{let d=xi(c,s,h);return h===d&&typeof h=="string"&&(d=xi(c,s,`${e}${h==="default"?"":J(h)}`,h)),t===!1?d:{[t]:d}})};return i.propTypes={},i.filterProps=[e],i}function gf(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const mf={m:"margin",p:"padding"},yf={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Hl={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},vf=gf(n=>{if(n.length>2)if(Hl[n])n=Hl[n];else return[n];const[e,t]=n.split(""),r=mf[e],s=yf[t]||"";return Array.isArray(s)?s.map(i=>r+i):[r+s]}),Da=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ra=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Da,...Ra];function vs(n,e,t,r){const s=qi(n,e,!0)??t;return typeof s=="number"||typeof s=="string"?i=>typeof i=="string"?i:typeof s=="string"?`calc(${i} * ${s})`:s*i:Array.isArray(s)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),a=s[o];return i>=0?a:typeof a=="number"?-a:`-${a}`}:typeof s=="function"?s:()=>{}}function ja(n){return vs(n,"spacing",8)}function bs(n,e){return typeof e=="string"||e==null?e:n(e)}function bf(n,e){return t=>n.reduce((r,s)=>(r[s]=bs(e,t),r),{})}function xf(n,e,t,r){if(!e.includes(t))return null;const s=vf(t),i=bf(s,r),o=n[t];return hr(n,o,i)}function Vu(n,e){const t=ja(n.theme);return Object.keys(n).map(r=>xf(n,e,r,t)).reduce(Jn,{})}function je(n){return Vu(n,Da)}je.propTypes={};je.filterProps=Da;function Ae(n){return Vu(n,Ra)}Ae.propTypes={};Ae.filterProps=Ra;function Xu(n=8,e=ja({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(i=>{const o=e(i);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function Vi(...n){const e=n.reduce((r,s)=>(s.filterProps.forEach(i=>{r[i]=s}),r),{}),t=r=>Object.keys(r).reduce((s,i)=>e[i]?Jn(s,e[i](r)):s,{});return t.propTypes={},t.filterProps=n.reduce((r,s)=>r.concat(s.filterProps),[]),t}function Tt(n){return typeof n!="number"?n:`${n}px solid`}function Dt(n,e){return Be({prop:n,themeKey:"borders",transform:e})}const Cf=Dt("border",Tt),wf=Dt("borderTop",Tt),Sf=Dt("borderRight",Tt),_f=Dt("borderBottom",Tt),Tf=Dt("borderLeft",Tt),kf=Dt("borderColor"),Of=Dt("borderTopColor"),Pf=Dt("borderRightColor"),Ef=Dt("borderBottomColor"),Mf=Dt("borderLeftColor"),Df=Dt("outline",Tt),Rf=Dt("outlineColor"),Xi=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=vs(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:bs(e,r)});return hr(n,n.borderRadius,t)}return null};Xi.propTypes={};Xi.filterProps=["borderRadius"];Vi(Cf,wf,Sf,_f,Tf,kf,Of,Pf,Ef,Mf,Xi,Df,Rf);const Hi=n=>{if(n.gap!==void 0&&n.gap!==null){const e=vs(n.theme,"spacing",8),t=r=>({gap:bs(e,r)});return hr(n,n.gap,t)}return null};Hi.propTypes={};Hi.filterProps=["gap"];const Yi=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=vs(n.theme,"spacing",8),t=r=>({columnGap:bs(e,r)});return hr(n,n.columnGap,t)}return null};Yi.propTypes={};Yi.filterProps=["columnGap"];const Ui=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=vs(n.theme,"spacing",8),t=r=>({rowGap:bs(e,r)});return hr(n,n.rowGap,t)}return null};Ui.propTypes={};Ui.filterProps=["rowGap"];const jf=Be({prop:"gridColumn"}),Af=Be({prop:"gridRow"}),Ff=Be({prop:"gridAutoFlow"}),If=Be({prop:"gridAutoColumns"}),Lf=Be({prop:"gridAutoRows"}),Bf=Be({prop:"gridTemplateColumns"}),Nf=Be({prop:"gridTemplateRows"}),$f=Be({prop:"gridTemplateAreas"}),Wf=Be({prop:"gridArea"});Vi(Hi,Yi,Ui,jf,Af,Ff,If,Lf,Bf,Nf,$f,Wf);function Cn(n,e){return e==="grey"?e:n}const zf=Be({prop:"color",themeKey:"palette",transform:Cn}),qf=Be({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Cn}),Vf=Be({prop:"backgroundColor",themeKey:"palette",transform:Cn});Vi(zf,qf,Vf);function xt(n){return n<=1&&n!==0?`${n*100}%`:n}const Xf=Be({prop:"width",transform:xt}),Aa=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var s,i,o,a,l;const r=((o=(i=(s=n.theme)==null?void 0:s.breakpoints)==null?void 0:i.values)==null?void 0:o[t])||zi[t];return r?((l=(a=n.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:xt(t)}};return hr(n,n.maxWidth,e)}return null};Aa.filterProps=["maxWidth"];const Hf=Be({prop:"minWidth",transform:xt}),Yf=Be({prop:"height",transform:xt}),Uf=Be({prop:"maxHeight",transform:xt}),Gf=Be({prop:"minHeight",transform:xt});Be({prop:"size",cssProperty:"width",transform:xt});Be({prop:"size",cssProperty:"height",transform:xt});const Kf=Be({prop:"boxSizing"});Vi(Xf,Aa,Hf,Yf,Uf,Gf,Kf);const xs={border:{themeKey:"borders",transform:Tt},borderTop:{themeKey:"borders",transform:Tt},borderRight:{themeKey:"borders",transform:Tt},borderBottom:{themeKey:"borders",transform:Tt},borderLeft:{themeKey:"borders",transform:Tt},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Tt},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Xi},color:{themeKey:"palette",transform:Cn},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Cn},backgroundColor:{themeKey:"palette",transform:Cn},p:{style:Ae},pt:{style:Ae},pr:{style:Ae},pb:{style:Ae},pl:{style:Ae},px:{style:Ae},py:{style:Ae},padding:{style:Ae},paddingTop:{style:Ae},paddingRight:{style:Ae},paddingBottom:{style:Ae},paddingLeft:{style:Ae},paddingX:{style:Ae},paddingY:{style:Ae},paddingInline:{style:Ae},paddingInlineStart:{style:Ae},paddingInlineEnd:{style:Ae},paddingBlock:{style:Ae},paddingBlockStart:{style:Ae},paddingBlockEnd:{style:Ae},m:{style:je},mt:{style:je},mr:{style:je},mb:{style:je},ml:{style:je},mx:{style:je},my:{style:je},margin:{style:je},marginTop:{style:je},marginRight:{style:je},marginBottom:{style:je},marginLeft:{style:je},marginX:{style:je},marginY:{style:je},marginInline:{style:je},marginInlineStart:{style:je},marginInlineEnd:{style:je},marginBlock:{style:je},marginBlockStart:{style:je},marginBlockEnd:{style:je},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Hi},rowGap:{style:Ui},columnGap:{style:Yi},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:xt},maxWidth:{style:Aa},minWidth:{transform:xt},height:{transform:xt},maxHeight:{transform:xt},minHeight:{transform:xt},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Zf(...n){const e=n.reduce((r,s)=>r.concat(Object.keys(s)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function Jf(n,e){return typeof n=="function"?n(e):n}function Qf(){function n(t,r,s,i){const o={[t]:r,theme:s},a=i[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const d=qi(s,c)||{};return h?h(o):hr(o,r,f=>{let g=xi(d,u,f);return f===g&&typeof f=="string"&&(g=xi(d,u,`${t}${f==="default"?"":J(f)}`,f)),l===!1?g:{[l]:g}})}function e(t){const{sx:r,theme:s={}}=t||{};if(!r)return null;const i=s.unstable_sxConfig??xs;function o(a){let l=a;if(typeof a=="function")l=a(s);else if(typeof a!="object")return a;if(!l)return null;const c=pf(s.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(d=>{const p=Jf(l[d],s);if(p!=null)if(typeof p=="object")if(i[d])h=Jn(h,n(d,p,s,i));else{const f=hr({theme:s},p,g=>({[d]:g}));Zf(f,p)?h[d]=e({sx:p,theme:s}):h=Jn(h,f)}else h=Jn(h,n(d,p,s,i))}),af(s,ff(u,h))}return Array.isArray(r)?r.map(o):o(r)}return e}const On=Qf();On.filterProps=["sx"];function eg(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let s=t.getColorSchemeSelector(n);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return t.palette.mode===n?e:{}}function Fa(n={},...e){const{breakpoints:t={},palette:r={},spacing:s,shape:i={},...o}=n,a=of(t),l=Xu(s);let c=et({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...hf,...i}},o);return c=uf(c),c.applyStyles=eg,c=e.reduce((u,h)=>et(u,h),c),c.unstable_sxConfig={...xs,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(h){return On({sx:h,theme:this})},c}function tg(n){return Object.keys(n).length===0}function rg(n=null){const e=C.useContext(Wi);return!e||tg(e)?n:e}const ng=Fa();function Hu(n=ng){return rg(n)}function sg({styles:n,themeId:e,defaultTheme:t={}}){const r=Hu(t),s=typeof n=="function"?n(e&&r[e]||r):n;return v.jsx(Qp,{styles:s})}const ig=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??xs;return Object.keys(n).forEach(s=>{t[s]?e.systemProps[s]=n[s]:e.otherProps[s]=n[s]}),e};function og(n){const{sx:e,...t}=n,{systemProps:r,otherProps:s}=ig(t);let i;return Array.isArray(e)?i=[r,...e]:typeof e=="function"?i=(...o)=>{const a=e(...o);return Ht(a)?{...r,...a}:r}:i={...r,...e},{...s,sx:i}}const Yl=n=>n,ag=()=>{let n=Yl;return{configure(e){n=e},generate(e){return n(e)},reset(){n=Yl}}},lg=ag();function Yu(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Yu(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function te(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Yu(n))&&(r&&(r+=" "),r+=e);return r}const cg={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xe(n,e,t="Mui"){const r=cg[e];return r?`${t}-${r}`:`${lg.generate(n)}-${e}`}function Ce(n,e,t="Mui"){const r={};return e.forEach(s=>{r[s]=xe(n,s,t)}),r}function Uu(n){const{variants:e,...t}=n,r={variants:e,style:zl(t),isProcessed:!0};return r.style===t||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=zl(s.style))}),r}const ug=Fa();function mo(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function hg(n){return n?(e,t)=>t[n]:null}function dg(n,e,t){n.theme=gg(n.theme)?t:n.theme[e]||n.theme}function hi(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>hi(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:s,...i}=t;r=i}return Gu(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function Gu(n,e,t=[]){var s;let r;e:for(let i=0;i<e.length;i+=1){const o=e[i];if(typeof o.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(r))continue}else for(const a in o.props)if(n[a]!==o.props[a]&&((s=n.ownerState)==null?void 0:s[a])!==o.props[a])continue e;typeof o.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(o.style(r))):t.push(o.style)}return t}function pg(n={}){const{themeId:e,defaultTheme:t=ug,rootShouldForwardProp:r=mo,slotShouldForwardProp:s=mo}=n;function i(a){dg(a,e,t)}return(a,l={})=>{tf(a,w=>w.filter(O=>O!==On));const{name:c,slot:u,skipVariantsResolver:h,skipSx:d,overridesResolver:p=hg(yg(u)),...f}=l,g=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,m=d||!1;let b=mo;u==="Root"||u==="root"?b=r:u?b=s:mg(a)&&(b=void 0);const _=ef(a,{shouldForwardProp:b,label:fg(),...f}),x=w=>{if(typeof w=="function"&&w.__emotion_real!==w)return function(M){return hi(M,w)};if(Ht(w)){const O=Uu(w);return O.variants?function(P){return hi(P,O)}:O.style}return w},S=(...w)=>{const O=[],M=w.map(x),P=[];if(O.push(i),c&&p&&P.push(function(B){var I,N;const D=(N=(I=B.theme.components)==null?void 0:I[c])==null?void 0:N.styleOverrides;if(!D)return null;const F={};for(const W in D)F[W]=hi(B,D[W]);return p(B,F)}),c&&!g&&P.push(function(B){var F,I;const j=B.theme,D=(I=(F=j==null?void 0:j.components)==null?void 0:F[c])==null?void 0:I.variants;return D?Gu(B,D):null}),m||P.push(On),Array.isArray(M[0])){const E=M.shift(),B=new Array(O.length).fill(""),j=new Array(P.length).fill("");let D;D=[...B,...E,...j],D.raw=[...B,...E.raw,...j],O.unshift(D)}const L=[...O,...M,...P],y=_(...L);return a.muiName&&(y.muiName=a.muiName),y};return _.withConfig&&(S.withConfig=_.withConfig),S}}function fg(n,e){return void 0}function gg(n){for(const e in n)return!1;return!0}function mg(n){return typeof n=="string"&&n.charCodeAt(0)>96}function yg(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function Ho(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const s=r;if(s==="components"||s==="slots")t[s]={...n[s],...t[s]};else if(s==="componentsProps"||s==="slotProps"){const i=n[s],o=e[s];if(!o)t[s]=i||{};else if(!i)t[s]=o;else{t[s]={...o};for(const a in i)if(Object.prototype.hasOwnProperty.call(i,a)){const l=a;t[s][l]=Ho(i[l],o[l])}}}else t[s]===void 0&&(t[s]=n[s])}return t}const Xr=typeof window<"u"?C.useLayoutEffect:C.useEffect;function vg(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function Ia(n,e=0,t=1){return vg(n,e,t)}function bg(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function _r(n){if(n.type)return n;if(n.charAt(0)==="#")return _r(bg(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(ur(9,n));let r=n.substring(e+1,n.length-1),s;if(t==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(ur(10,s))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:t,values:r,colorSpace:s}}const xg=n=>{const e=_r(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},Yn=(n,e)=>{try{return xg(n)}catch{return n}};function Gi(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((s,i)=>i<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Ku(n){n=_r(n);const{values:e}=n,t=e[0],r=e[1]/100,s=e[2]/100,i=r*Math.min(s,1-s),o=(c,u=(c+t/30)%12)=>s-i*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),Gi({type:a,values:l})}function Yo(n){n=_r(n);let e=n.type==="hsl"||n.type==="hsla"?_r(Ku(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Cg(n,e){const t=Yo(n),r=Yo(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function Hr(n,e){return n=_r(n),e=Ia(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,Gi(n)}function Es(n,e,t){try{return Hr(n,e)}catch{return n}}function La(n,e){if(n=_r(n),e=Ia(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return Gi(n)}function ye(n,e,t){try{return La(n,e)}catch{return n}}function Ba(n,e){if(n=_r(n),e=Ia(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return Gi(n)}function ve(n,e,t){try{return Ba(n,e)}catch{return n}}function wg(n,e=.15){return Yo(n)>.5?La(n,e):Ba(n,e)}function Ms(n,e,t){try{return wg(n,e)}catch{return n}}function Ul(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function Zu(n,e=166){let t;function r(...s){const i=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(i,e)}return r.clear=()=>{clearTimeout(t)},r}function yo(n,e){var t,r,s;return C.isValidElement(n)&&e.indexOf(n.type.muiName??((s=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}function Nt(n){return n&&n.ownerDocument||document}function dr(n){return Nt(n).defaultView||window}function Uo(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let Gl=0;function Sg(n){const[e,t]=C.useState(n),r=n||e;return C.useEffect(()=>{e==null&&(Gl+=1,t(`mui-${Gl}`))},[e]),r}const _g={...Wo},Kl=_g.useId;function Na(n){if(Kl!==void 0){const e=Kl();return n??e}return Sg(n)}function Go({controlled:n,default:e,name:t,state:r="value"}){const{current:s}=C.useRef(n!==void 0),[i,o]=C.useState(e),a=s?n:i,l=C.useCallback(c=>{s||o(c)},[]);return[a,l]}function wn(n){const e=C.useRef(n);return Xr(()=>{e.current=n}),C.useRef((...t)=>(0,e.current)(...t)).current}function rt(...n){return C.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{Uo(t,e)})},n)}const Zl={};function Ju(n,e){const t=C.useRef(Zl);return t.current===Zl&&(t.current=n(e)),t}const Tg=[];function kg(n){C.useEffect(n,Tg)}class $a{constructor(){$n(this,"currentId",null);$n(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});$n(this,"disposeEffect",()=>this.clear)}static create(){return new $a}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Qu(){const n=Ju($a.create).current;return kg(n.disposeEffect),n}function Jl(n){try{return n.matches(":focus-visible")}catch{}return!1}function eh(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function we(n,e,t=void 0){const r={};for(const s in n){const i=n[s];let o="",a=!0;for(let l=0;l<i.length;l+=1){const c=i[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}r[s]=o}return r}function Og(n){return typeof n=="string"}function th(n,e,t){return n===void 0||Og(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function rh(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function Ql(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function nh(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:s,className:i}=n;if(!e){const p=te(t==null?void 0:t.className,i,s==null?void 0:s.className,r==null?void 0:r.className),f={...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},g={...t,...s,...r};return p.length>0&&(g.className=p),Object.keys(f).length>0&&(g.style=f),{props:g,internalRef:void 0}}const o=rh({...s,...r}),a=Ql(r),l=Ql(s),c=e(o),u=te(c==null?void 0:c.className,t==null?void 0:t.className,i,s==null?void 0:s.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},d={...c,...t,...l,...a};return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function sh(n,e,t){return typeof n=="function"?n(e,t):n}function ec(n){var h;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:s=!1,...i}=n,o=s?{}:sh(t,r),{props:a,internalRef:l}=nh({...i,externalSlotProps:o}),c=rt(l,o==null?void 0:o.ref,(h=n.additionalProps)==null?void 0:h.ref);return th(e,{...a,ref:c},r)}function Cs(n){var e;return parseInt(C.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const Pg=C.createContext(),Eg=()=>C.useContext(Pg)??!1,Mg=C.createContext(void 0);function Dg(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const s=e.components[t];return s.defaultProps?Ho(s.defaultProps,r):!s.styleOverrides&&!s.variants?Ho(s,r):r}function Rg({props:n,name:e}){const t=C.useContext(Mg);return Dg({props:n,name:e,theme:{components:t}})}const tc={theme:void 0};function jg(n){let e,t;return function(s){let i=e;return(i===void 0||s.theme!==t)&&(tc.theme=s.theme,i=Uu(n(tc)),e=i,t=s.theme),i}}function Ag(n=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${n?`${n}-`:""}${r}${e(...s)})`}const rc=(n,e,t,r=[])=>{let s=n;e.forEach((i,o)=>{o===e.length-1?Array.isArray(s)?s[Number(i)]=t:s&&typeof s=="object"&&(s[i]=t):s&&typeof s=="object"&&(s[i]||(s[i]=r.includes(i)?[]:{}),s=s[i])})},Fg=(n,e,t)=>{function r(s,i=[],o=[]){Object.entries(s).forEach(([a,l])=>{(!t||t&&!t([...i,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...i,a],Array.isArray(l)?[...o,a]:o):e([...i,a],l,o))})}r(n)},Ig=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function vo(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},s={},i={},o={};return Fg(n,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,h=Ig(a,l);Object.assign(s,{[u]:h}),rc(i,a,`var(${u})`,c),rc(o,a,`var(${u}, ${h})`,c)}},a=>a[0]==="vars"),{css:s,vars:i,varsWithDefaults:o}}function Lg(n,e={}){const{getSelector:t=m,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:i={},components:o,defaultColorScheme:a="light",...l}=n,{vars:c,css:u,varsWithDefaults:h}=vo(l,e);let d=h;const p={},{[a]:f,...g}=i;if(Object.entries(g||{}).forEach(([x,S])=>{const{vars:w,css:O,varsWithDefaults:M}=vo(S,e);d=et(d,M),p[x]={css:O,vars:w}}),f){const{css:x,vars:S,varsWithDefaults:w}=vo(f,e);d=et(d,w),p[a]={css:x,vars:S}}function m(x,S){var O,M;let w=s;if(s==="class"&&(w=".%s"),s==="data"&&(w="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(w=`[${s}="%s"]`),x){if(w==="media")return n.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((M=(O=i[x])==null?void 0:O.palette)==null?void 0:M.mode)||x})`]:{":root":S}};if(w)return n.defaultColorScheme===x?`:root, ${w.replace("%s",String(x))}`:w.replace("%s",String(x))}return":root"}return{vars:d,generateThemeVars:()=>{let x={...c};return Object.entries(p).forEach(([,{vars:S}])=>{x=et(x,S)}),x},generateStyleSheets:()=>{var P,L;const x=[],S=n.defaultColorScheme||"light";function w(y,E){Object.keys(E).length&&x.push(typeof y=="string"?{[y]:{...E}}:y)}w(t(void 0,{...u}),u);const{[S]:O,...M}=p;if(O){const{css:y}=O,E=(L=(P=i[S])==null?void 0:P.palette)==null?void 0:L.mode,B=!r&&E?{colorScheme:E,...y}:{...y};w(t(S,{...B}),B)}return Object.entries(M).forEach(([y,{css:E}])=>{var D,F;const B=(F=(D=i[y])==null?void 0:D.palette)==null?void 0:F.mode,j=!r&&B?{colorScheme:B,...E}:{...E};w(t(y,{...j}),j)}),x}}}function Bg(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function ih(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:is.white,default:is.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Ng=ih();function oh(){return{text:{primary:is.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:is.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const nc=oh();function sc(n,e,t,r){const s=r.light||r,i=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=Ba(n.main,s):e==="dark"&&(n.dark=La(n.main,i)))}function $g(n="light"){return n==="dark"?{main:on[200],light:on[50],dark:on[400]}:{main:on[700],light:on[400],dark:on[800]}}function Wg(n="light"){return n==="dark"?{main:sn[200],light:sn[50],dark:sn[400]}:{main:sn[500],light:sn[300],dark:sn[700]}}function zg(n="light"){return n==="dark"?{main:nn[500],light:nn[300],dark:nn[700]}:{main:nn[700],light:nn[400],dark:nn[800]}}function qg(n="light"){return n==="dark"?{main:an[400],light:an[300],dark:an[700]}:{main:an[700],light:an[500],dark:an[900]}}function Vg(n="light"){return n==="dark"?{main:ln[400],light:ln[300],dark:ln[700]}:{main:ln[800],light:ln[500],dark:ln[900]}}function Xg(n="light"){return n==="dark"?{main:Wn[400],light:Wn[300],dark:Wn[700]}:{main:"#ed6c02",light:Wn[500],dark:Wn[900]}}function Wa(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...s}=n,i=n.primary||$g(e),o=n.secondary||Wg(e),a=n.error||zg(e),l=n.info||qg(e),c=n.success||Vg(e),u=n.warning||Xg(e);function h(g){return Cg(g,nc.text.primary)>=t?nc.text.primary:Ng.text.primary}const d=({color:g,name:m,mainShade:b=500,lightShade:_=300,darkShade:x=700})=>{if(g={...g},!g.main&&g[b]&&(g.main=g[b]),!g.hasOwnProperty("main"))throw new Error(ur(11,m?` (${m})`:"",b));if(typeof g.main!="string")throw new Error(ur(12,m?` (${m})`:"",JSON.stringify(g.main)));return sc(g,"light",_,r),sc(g,"dark",x,r),g.contrastText||(g.contrastText=h(g.main)),g};let p;return e==="light"?p=ih():e==="dark"&&(p=oh()),et({common:{...is},mode:e,primary:d({color:i,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:ep,contrastThreshold:t,getContrastText:h,augmentColor:d,tonalOffset:r,...p},s)}function Hg(n){const e={};return Object.entries(n).forEach(r=>{const[s,i]=r;typeof i=="object"&&(e[s]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),e}function Yg(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function Ug(n){return Math.round(n*1e5)/1e5}const ic={textTransform:"uppercase"},oc='"Roboto", "Helvetica", "Arial", sans-serif';function Gg(n,e){const{fontFamily:t=oc,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof e=="function"?e(n):e,d=r/14,p=u||(m=>`${m/l*d}rem`),f=(m,b,_,x,S)=>({fontFamily:t,fontWeight:m,fontSize:p(b),lineHeight:_,...t===oc?{letterSpacing:`${Ug(x/b)}em`}:{},...S,...c}),g={h1:f(s,96,1.167,-1.5),h2:f(s,60,1.2,-.5),h3:f(i,48,1.167,0),h4:f(i,34,1.235,.25),h5:f(i,24,1.334,0),h6:f(o,20,1.6,.15),subtitle1:f(i,16,1.75,.15),subtitle2:f(o,14,1.57,.1),body1:f(i,16,1.5,.15),body2:f(i,14,1.43,.15),button:f(o,14,1.75,.4,ic),caption:f(i,12,1.66,.4),overline:f(i,12,2.66,1,ic),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return et({htmlFontSize:l,pxToRem:p,fontFamily:t,fontSize:r,fontWeightLight:s,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:a,...g},h,{clone:!1})}const Kg=.2,Zg=.14,Jg=.12;function ke(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Kg})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Zg})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${Jg})`].join(",")}const Qg=["none",ke(0,2,1,-1,0,1,1,0,0,1,3,0),ke(0,3,1,-2,0,2,2,0,0,1,5,0),ke(0,3,3,-2,0,3,4,0,0,1,8,0),ke(0,2,4,-1,0,4,5,0,0,1,10,0),ke(0,3,5,-1,0,5,8,0,0,1,14,0),ke(0,3,5,-1,0,6,10,0,0,1,18,0),ke(0,4,5,-2,0,7,10,1,0,2,16,1),ke(0,5,5,-3,0,8,10,1,0,3,14,2),ke(0,5,6,-3,0,9,12,1,0,3,16,2),ke(0,6,6,-3,0,10,14,1,0,4,18,3),ke(0,6,7,-4,0,11,15,1,0,4,20,3),ke(0,7,8,-4,0,12,17,2,0,5,22,4),ke(0,7,8,-4,0,13,19,2,0,5,24,4),ke(0,7,9,-4,0,14,21,2,0,5,26,4),ke(0,8,9,-5,0,15,22,2,0,6,28,5),ke(0,8,10,-5,0,16,24,2,0,6,30,5),ke(0,8,11,-5,0,17,26,2,0,6,32,5),ke(0,9,11,-5,0,18,28,2,0,7,34,6),ke(0,9,12,-6,0,19,29,2,0,7,36,6),ke(0,10,13,-6,0,20,31,3,0,8,38,7),ke(0,10,13,-6,0,21,33,3,0,8,40,7),ke(0,10,14,-6,0,22,35,3,0,8,42,7),ke(0,11,14,-7,0,23,36,3,0,9,44,8),ke(0,11,15,-7,0,24,38,3,0,9,46,8)],em={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},tm={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ac(n){return`${Math.round(n)}ms`}function rm(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function nm(n){const e={...em,...n.easing},t={...tm,...n.duration};return{getAutoHeightDuration:rm,create:(s=["all"],i={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=i;return(Array.isArray(s)?s:[s]).map(u=>`${u} ${typeof o=="string"?o:ac(o)} ${a} ${typeof l=="string"?l:ac(l)}`).join(",")},...n,easing:e,duration:t}}const sm={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function im(n){return Ht(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function ah(n={}){const e={...n};function t(r){const s=Object.entries(r);for(let i=0;i<s.length;i++){const[o,a]=s[i];!im(a)||o.startsWith("unstable_")?delete r[o]:Ht(a)&&(r[o]={...a},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Ko(n={},...e){const{breakpoints:t,mixins:r={},spacing:s,palette:i={},transitions:o={},typography:a={},shape:l,...c}=n;if(n.vars)throw new Error(ur(20));const u=Wa(i),h=Fa(n);let d=et(h,{mixins:Yg(h.breakpoints,r),palette:u,shadows:Qg.slice(),typography:Gg(u,a),transitions:nm(o),zIndex:{...sm}});return d=et(d,c),d=e.reduce((p,f)=>et(p,f),d),d.unstable_sxConfig={...xs,...c==null?void 0:c.unstable_sxConfig},d.unstable_sx=function(f){return On({sx:f,theme:this})},d.toRuntimeSource=ah,d}function Zo(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const om=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=Zo(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function lh(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function ch(n){return n==="dark"?om:[]}function am(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...s}=n,i=Wa(e);return{palette:i,opacity:{...lh(i.mode),...t},overlays:r||ch(i.mode),...s}}function lm(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const cm=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],um=n=>(e,t)=>{const r=n.rootSelector||":root",s=n.colorSchemeSelector;let i=s;if(s==="class"&&(i=".%s"),s==="data"&&(i="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(i=`[${s}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return cm(n.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),i==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",e)]:o,[`${r}, ${i.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(e))}`}else if(e){if(i==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(i)return i.replace("%s",String(e))}return r};function hm(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function A(n,e,t){!n[e]&&t&&(n[e]=t)}function Un(n){return typeof n!="string"||!n.startsWith("hsl")?n:Ku(n)}function tr(n,e){`${e}Channel`in n||(n[`${e}Channel`]=Yn(Un(n[e])))}function dm(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const zt=n=>{try{return n()}catch{}},pm=(n="mui")=>Ag(n);function bo(n,e,t,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!t){n[r]=am({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:i,...o}=Ko({...t,palette:{mode:s,...e==null?void 0:e.palette}});return n[r]={...e,palette:i,opacity:{...lh(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||ch(s)},o}function fm(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=lm,colorSchemeSelector:a=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=n,u=Object.keys(t)[0],h=r||(t.light&&u!=="light"?"light":u),d=pm(i),{[h]:p,light:f,dark:g,...m}=t,b={...m};let _=p;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(_=!0),!_)throw new Error(ur(21,h));const x=bo(b,_,c,h);f&&!b.light&&bo(b,f,void 0,"light"),g&&!b.dark&&bo(b,g,void 0,"dark");let S={defaultColorScheme:h,...x,cssVarPrefix:i,colorSchemeSelector:a,rootSelector:l,getCssVar:d,colorSchemes:b,font:{...Hg(x.typography),...x.font},spacing:dm(c.spacing)};Object.keys(S.colorSchemes).forEach(L=>{const y=S.colorSchemes[L].palette,E=B=>{const j=B.split("-"),D=j[1],F=j[2];return d(B,y[D][F])};if(y.mode==="light"&&(A(y.common,"background","#fff"),A(y.common,"onBackground","#000")),y.mode==="dark"&&(A(y.common,"background","#000"),A(y.common,"onBackground","#fff")),hm(y,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),y.mode==="light"){A(y.Alert,"errorColor",ye(y.error.light,.6)),A(y.Alert,"infoColor",ye(y.info.light,.6)),A(y.Alert,"successColor",ye(y.success.light,.6)),A(y.Alert,"warningColor",ye(y.warning.light,.6)),A(y.Alert,"errorFilledBg",E("palette-error-main")),A(y.Alert,"infoFilledBg",E("palette-info-main")),A(y.Alert,"successFilledBg",E("palette-success-main")),A(y.Alert,"warningFilledBg",E("palette-warning-main")),A(y.Alert,"errorFilledColor",zt(()=>y.getContrastText(y.error.main))),A(y.Alert,"infoFilledColor",zt(()=>y.getContrastText(y.info.main))),A(y.Alert,"successFilledColor",zt(()=>y.getContrastText(y.success.main))),A(y.Alert,"warningFilledColor",zt(()=>y.getContrastText(y.warning.main))),A(y.Alert,"errorStandardBg",ve(y.error.light,.9)),A(y.Alert,"infoStandardBg",ve(y.info.light,.9)),A(y.Alert,"successStandardBg",ve(y.success.light,.9)),A(y.Alert,"warningStandardBg",ve(y.warning.light,.9)),A(y.Alert,"errorIconColor",E("palette-error-main")),A(y.Alert,"infoIconColor",E("palette-info-main")),A(y.Alert,"successIconColor",E("palette-success-main")),A(y.Alert,"warningIconColor",E("palette-warning-main")),A(y.AppBar,"defaultBg",E("palette-grey-100")),A(y.Avatar,"defaultBg",E("palette-grey-400")),A(y.Button,"inheritContainedBg",E("palette-grey-300")),A(y.Button,"inheritContainedHoverBg",E("palette-grey-A100")),A(y.Chip,"defaultBorder",E("palette-grey-400")),A(y.Chip,"defaultAvatarColor",E("palette-grey-700")),A(y.Chip,"defaultIconColor",E("palette-grey-700")),A(y.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),A(y.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),A(y.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),A(y.LinearProgress,"primaryBg",ve(y.primary.main,.62)),A(y.LinearProgress,"secondaryBg",ve(y.secondary.main,.62)),A(y.LinearProgress,"errorBg",ve(y.error.main,.62)),A(y.LinearProgress,"infoBg",ve(y.info.main,.62)),A(y.LinearProgress,"successBg",ve(y.success.main,.62)),A(y.LinearProgress,"warningBg",ve(y.warning.main,.62)),A(y.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.11)`),A(y.Slider,"primaryTrack",ve(y.primary.main,.62)),A(y.Slider,"secondaryTrack",ve(y.secondary.main,.62)),A(y.Slider,"errorTrack",ve(y.error.main,.62)),A(y.Slider,"infoTrack",ve(y.info.main,.62)),A(y.Slider,"successTrack",ve(y.success.main,.62)),A(y.Slider,"warningTrack",ve(y.warning.main,.62));const B=Ms(y.background.default,.8);A(y.SnackbarContent,"bg",B),A(y.SnackbarContent,"color",zt(()=>y.getContrastText(B))),A(y.SpeedDialAction,"fabHoverBg",Ms(y.background.paper,.15)),A(y.StepConnector,"border",E("palette-grey-400")),A(y.StepContent,"border",E("palette-grey-400")),A(y.Switch,"defaultColor",E("palette-common-white")),A(y.Switch,"defaultDisabledColor",E("palette-grey-100")),A(y.Switch,"primaryDisabledColor",ve(y.primary.main,.62)),A(y.Switch,"secondaryDisabledColor",ve(y.secondary.main,.62)),A(y.Switch,"errorDisabledColor",ve(y.error.main,.62)),A(y.Switch,"infoDisabledColor",ve(y.info.main,.62)),A(y.Switch,"successDisabledColor",ve(y.success.main,.62)),A(y.Switch,"warningDisabledColor",ve(y.warning.main,.62)),A(y.TableCell,"border",ve(Es(y.divider,1),.88)),A(y.Tooltip,"bg",Es(y.grey[700],.92))}if(y.mode==="dark"){A(y.Alert,"errorColor",ve(y.error.light,.6)),A(y.Alert,"infoColor",ve(y.info.light,.6)),A(y.Alert,"successColor",ve(y.success.light,.6)),A(y.Alert,"warningColor",ve(y.warning.light,.6)),A(y.Alert,"errorFilledBg",E("palette-error-dark")),A(y.Alert,"infoFilledBg",E("palette-info-dark")),A(y.Alert,"successFilledBg",E("palette-success-dark")),A(y.Alert,"warningFilledBg",E("palette-warning-dark")),A(y.Alert,"errorFilledColor",zt(()=>y.getContrastText(y.error.dark))),A(y.Alert,"infoFilledColor",zt(()=>y.getContrastText(y.info.dark))),A(y.Alert,"successFilledColor",zt(()=>y.getContrastText(y.success.dark))),A(y.Alert,"warningFilledColor",zt(()=>y.getContrastText(y.warning.dark))),A(y.Alert,"errorStandardBg",ye(y.error.light,.9)),A(y.Alert,"infoStandardBg",ye(y.info.light,.9)),A(y.Alert,"successStandardBg",ye(y.success.light,.9)),A(y.Alert,"warningStandardBg",ye(y.warning.light,.9)),A(y.Alert,"errorIconColor",E("palette-error-main")),A(y.Alert,"infoIconColor",E("palette-info-main")),A(y.Alert,"successIconColor",E("palette-success-main")),A(y.Alert,"warningIconColor",E("palette-warning-main")),A(y.AppBar,"defaultBg",E("palette-grey-900")),A(y.AppBar,"darkBg",E("palette-background-paper")),A(y.AppBar,"darkColor",E("palette-text-primary")),A(y.Avatar,"defaultBg",E("palette-grey-600")),A(y.Button,"inheritContainedBg",E("palette-grey-800")),A(y.Button,"inheritContainedHoverBg",E("palette-grey-700")),A(y.Chip,"defaultBorder",E("palette-grey-700")),A(y.Chip,"defaultAvatarColor",E("palette-grey-300")),A(y.Chip,"defaultIconColor",E("palette-grey-300")),A(y.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),A(y.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),A(y.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),A(y.LinearProgress,"primaryBg",ye(y.primary.main,.5)),A(y.LinearProgress,"secondaryBg",ye(y.secondary.main,.5)),A(y.LinearProgress,"errorBg",ye(y.error.main,.5)),A(y.LinearProgress,"infoBg",ye(y.info.main,.5)),A(y.LinearProgress,"successBg",ye(y.success.main,.5)),A(y.LinearProgress,"warningBg",ye(y.warning.main,.5)),A(y.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.13)`),A(y.Slider,"primaryTrack",ye(y.primary.main,.5)),A(y.Slider,"secondaryTrack",ye(y.secondary.main,.5)),A(y.Slider,"errorTrack",ye(y.error.main,.5)),A(y.Slider,"infoTrack",ye(y.info.main,.5)),A(y.Slider,"successTrack",ye(y.success.main,.5)),A(y.Slider,"warningTrack",ye(y.warning.main,.5));const B=Ms(y.background.default,.98);A(y.SnackbarContent,"bg",B),A(y.SnackbarContent,"color",zt(()=>y.getContrastText(B))),A(y.SpeedDialAction,"fabHoverBg",Ms(y.background.paper,.15)),A(y.StepConnector,"border",E("palette-grey-600")),A(y.StepContent,"border",E("palette-grey-600")),A(y.Switch,"defaultColor",E("palette-grey-300")),A(y.Switch,"defaultDisabledColor",E("palette-grey-600")),A(y.Switch,"primaryDisabledColor",ye(y.primary.main,.55)),A(y.Switch,"secondaryDisabledColor",ye(y.secondary.main,.55)),A(y.Switch,"errorDisabledColor",ye(y.error.main,.55)),A(y.Switch,"infoDisabledColor",ye(y.info.main,.55)),A(y.Switch,"successDisabledColor",ye(y.success.main,.55)),A(y.Switch,"warningDisabledColor",ye(y.warning.main,.55)),A(y.TableCell,"border",ye(Es(y.divider,1),.68)),A(y.Tooltip,"bg",Es(y.grey[700],.92))}tr(y.background,"default"),tr(y.background,"paper"),tr(y.common,"background"),tr(y.common,"onBackground"),tr(y,"divider"),Object.keys(y).forEach(B=>{const j=y[B];B!=="tonalOffset"&&j&&typeof j=="object"&&(j.main&&A(y[B],"mainChannel",Yn(Un(j.main))),j.light&&A(y[B],"lightChannel",Yn(Un(j.light))),j.dark&&A(y[B],"darkChannel",Yn(Un(j.dark))),j.contrastText&&A(y[B],"contrastTextChannel",Yn(Un(j.contrastText))),B==="text"&&(tr(y[B],"primary"),tr(y[B],"secondary")),B==="action"&&(j.active&&tr(y[B],"active"),j.selected&&tr(y[B],"selected")))})}),S=e.reduce((L,y)=>et(L,y),S);const w={prefix:i,disableCssColorScheme:s,shouldSkipGeneratingVar:o,getSelector:um(S)},{vars:O,generateThemeVars:M,generateStyleSheets:P}=Lg(S,w);return S.vars=O,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([L,y])=>{S[L]=y}),S.generateThemeVars=M,S.generateStyleSheets=P,S.generateSpacing=function(){return Xu(c.spacing,ja(this))},S.getColorSchemeSelector=Bg(a),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=o,S.unstable_sxConfig={...xs,...c==null?void 0:c.unstable_sxConfig},S.unstable_sx=function(y){return On({sx:y,theme:this})},S.toRuntimeSource=ah,S}function lc(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:Wa({...t===!0?{}:t.palette,mode:e})})}function gm(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:s=t?void 0:{light:!0},defaultColorScheme:i=t==null?void 0:t.mode,...o}=n,a=i||"light",l=s==null?void 0:s[a],c={...s,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return Ko(n,...e);let u=t;"palette"in n||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const h=Ko({...n,palette:u},...e);return h.defaultColorScheme=a,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},lc(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},lc(h,"light",c.light)),h}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),fm({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const za=gm();function qa(){const n=Hu(za);return n[wa]||n}function uh(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Rt=n=>uh(n)&&n!=="classes",X=pg({themeId:wa,defaultTheme:za,rootShouldForwardProp:Rt});function mm(n){return v.jsx(sg,{...n,defaultTheme:za,themeId:wa})}function ym(n){return function(t){return v.jsx(mm,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function vm(){return og}const Oe=jg;function Ee(n){return Rg(n)}function bm(n){return xe("MuiSvgIcon",n)}Ce("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const xm=n=>{const{color:e,fontSize:t,classes:r}=n,s={root:["root",e!=="inherit"&&`color${J(e)}`,`fontSize${J(t)}`]};return we(s,bm,r)},Cm=X("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${J(t.color)}`],e[`fontSize${J(t.fontSize)}`]]}})(Oe(({theme:n})=>{var e,t,r,s,i,o,a,l,c,u,h,d,p,f;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=n.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(i=n.typography)==null?void 0:i.pxToRem)==null?void 0:o.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,g])=>g&&g.main).map(([g])=>{var m,b;return{props:{color:g},style:{color:(b=(m=(n.vars??n).palette)==null?void 0:m[g])==null?void 0:b.main}}}),{props:{color:"action"},style:{color:(d=(h=(n.vars??n).palette)==null?void 0:h.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(f=(p=(n.vars??n).palette)==null?void 0:p.action)==null?void 0:f.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Jo=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiSvgIcon"}),{children:s,className:i,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24",...p}=r,f=C.isValidElement(s)&&s.type==="svg",g={...r,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:f},m={};u||(m.viewBox=d);const b=xm(g);return v.jsxs(Cm,{as:a,className:te(b.root,i),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...m,...p,...f&&s.props,ownerState:g,children:[f?s.props.children:s,h?v.jsx("title",{children:h}):null]})});Jo.muiName="SvgIcon";function Ki(n,e){function t(r,s){return v.jsx(Jo,{"data-testid":`${e}Icon`,ref:s,...r,children:n})}return t.muiName=Jo.muiName,C.memo(C.forwardRef(t))}function hh(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Qo(n,e){return Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Qo(n,e)}function dh(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Qo(n,e)}const cc={disabled:!1},Ci=Ut.createContext(null);var wm=function(e){return e.scrollTop},Gn="unmounted",Ir="exited",Lr="entering",fn="entered",ea="exiting",er=function(n){dh(e,n);function e(r,s){var i;i=n.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,l;return i.appearStatus=null,r.in?a?(l=Ir,i.appearStatus=Lr):l=fn:r.unmountOnExit||r.mountOnEnter?l=Gn:l=Ir,i.state={status:l},i.nextCallback=null,i}e.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Gn?{status:Ir}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Lr&&o!==fn&&(i=Lr):(o===Lr||o===fn)&&(i=ea)}this.updateStatus(!1,i)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},t.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===Lr){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Os.findDOMNode(this);o&&wm(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ir&&this.setState({status:Gn})},t.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[Os.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!s&&!o||cc.disabled){this.safeSetState({status:fn},function(){i.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Lr},function(){i.props.onEntering(c,u),i.onTransitionEnd(d,function(){i.safeSetState({status:fn},function(){i.props.onEntered(c,u)})})})},t.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Os.findDOMNode(this);if(!i||cc.disabled){this.safeSetState({status:Ir},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ea},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:Ir},function(){s.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},t.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Os.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Gn)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=hh(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ut.createElement(Ci.Provider,{value:null},typeof o=="function"?o(s,a):Ut.cloneElement(Ut.Children.only(o),a))},e}(Ut.Component);er.contextType=Ci;er.propTypes={};function cn(){}er.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:cn,onEntering:cn,onEntered:cn,onExit:cn,onExiting:cn,onExited:cn};er.UNMOUNTED=Gn;er.EXITED=Ir;er.ENTERING=Lr;er.ENTERED=fn;er.EXITING=ea;function Sm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Va(n,e){var t=function(i){return e&&C.isValidElement(i)?e(i):i},r=Object.create(null);return n&&C.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function _m(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),s=[];for(var i in n)i in e?s.length&&(r[i]=s,s=[]):s.push(i);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<s.length;o++)a[s[o]]=t(s[o]);return a}function $r(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Tm(n,e){return Va(n.children,function(t){return C.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:$r(t,"appear",n),enter:$r(t,"enter",n),exit:$r(t,"exit",n)})})}function km(n,e,t){var r=Va(n.children),s=_m(e,r);return Object.keys(s).forEach(function(i){var o=s[i];if(C.isValidElement(o)){var a=i in e,l=i in r,c=e[i],u=C.isValidElement(c)&&!c.props.in;l&&(!a||u)?s[i]=C.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:$r(o,"exit",n),enter:$r(o,"enter",n)}):!l&&a&&!u?s[i]=C.cloneElement(o,{in:!1}):l&&a&&C.isValidElement(c)&&(s[i]=C.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:$r(o,"exit",n),enter:$r(o,"enter",n)}))}}),s}var Om=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},Pm={component:"div",childFactory:function(e){return e}},Xa=function(n){dh(e,n);function e(r,s){var i;i=n.call(this,r,s)||this;var o=i.handleExited.bind(Sm(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,i){var o=i.children,a=i.handleExited,l=i.firstRender;return{children:l?Tm(s,a):km(s,o,a),firstRender:!1}},t.handleExited=function(s,i){var o=Va(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(i),this.mounted&&this.setState(function(a){var l=vi({},a.children);return delete l[s.key],{children:l}}))},t.render=function(){var s=this.props,i=s.component,o=s.childFactory,a=hh(s,["component","childFactory"]),l=this.state.contextValue,c=Om(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,i===null?Ut.createElement(Ci.Provider,{value:l},c):Ut.createElement(Ci.Provider,{value:l},Ut.createElement(i,a,c))},e}(Ut.Component);Xa.propTypes={};Xa.defaultProps=Pm;const ph=n=>n.scrollTop;function wi(n,e){const{timeout:t,easing:r,style:s={}}=n;return{duration:s.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function Em(n){return xe("MuiPaper",n)}Ce("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Mm=n=>{const{square:e,elevation:t,variant:r,classes:s}=n,i={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return we(i,Em,s)},Dm=X("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(Oe(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Rm=C.forwardRef(function(e,t){var p;const r=Ee({props:e,name:"MuiPaper"}),s=qa(),{className:i,component:o="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,h={...r,component:o,elevation:a,square:l,variant:c},d=Mm(h);return v.jsx(Dm,{as:o,ownerState:h,className:te(d.root,i),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[a],...s.vars&&{"--Paper-overlay":(p=s.vars.overlays)==null?void 0:p[a]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Hr("#fff",Zo(a))}, ${Hr("#fff",Zo(a))})`}},...u.style}})});function Ot(n,e){const{className:t,elementType:r,ownerState:s,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:h={[n]:void 0},...d}=i,p=u[n]||r,f=sh(h[n],s),{props:{component:g,...m},internalRef:b}=nh({className:t,...l,externalForwardedProps:n==="root"?d:void 0,externalSlotProps:f}),_=rt(b,f==null?void 0:f.ref,e.ref),x=n==="root"?g||c:g,S=th(p,{...n==="root"&&!c&&!u[n]&&o,...n!=="root"&&!u[n]&&o,...m,...x&&!a&&{as:x},...x&&a&&{component:x},ref:_},s);return[p,S]}class Si{constructor(){$n(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new Si}static use(){const e=Ju(Si.create).current,[t,r]=C.useState(!1);return e.shouldMount=t,e.setShouldMount=r,C.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=Am(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function jm(){return Si.use()}function Am(){let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t}function Fm(n){const{className:e,classes:t,pulsate:r=!1,rippleX:s,rippleY:i,rippleSize:o,in:a,onExited:l,timeout:c}=n,[u,h]=C.useState(!1),d=te(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),p={width:o,height:o,top:-(o/2)+i,left:-(o/2)+s},f=te(t.child,u&&t.childLeaving,r&&t.childPulsate);return!a&&!u&&h(!0),C.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),v.jsx("span",{className:d,style:p,children:v.jsx("span",{className:f})})}const St=Ce("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),ta=550,Im=80,Lm=ys`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Bm=ys`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Nm=ys`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,$m=X("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Wm=X(Fm,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${St.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Lm};
    animation-duration: ${ta}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${St.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${St.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${St.childLeaving} {
    opacity: 0;
    animation-name: ${Bm};
    animation-duration: ${ta}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${St.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Nm};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,zm=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:i={},className:o,...a}=r,[l,c]=C.useState([]),u=C.useRef(0),h=C.useRef(null);C.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const d=C.useRef(!1),p=Qu(),f=C.useRef(null),g=C.useRef(null),m=C.useCallback(S=>{const{pulsate:w,rippleX:O,rippleY:M,rippleSize:P,cb:L}=S;c(y=>[...y,v.jsx(Wm,{classes:{ripple:te(i.ripple,St.ripple),rippleVisible:te(i.rippleVisible,St.rippleVisible),ripplePulsate:te(i.ripplePulsate,St.ripplePulsate),child:te(i.child,St.child),childLeaving:te(i.childLeaving,St.childLeaving),childPulsate:te(i.childPulsate,St.childPulsate)},timeout:ta,pulsate:w,rippleX:O,rippleY:M,rippleSize:P},u.current)]),u.current+=1,h.current=L},[i]),b=C.useCallback((S={},w={},O=()=>{})=>{const{pulsate:M=!1,center:P=s||w.pulsate,fakeElement:L=!1}=w;if((S==null?void 0:S.type)==="mousedown"&&d.current){d.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(d.current=!0);const y=L?null:g.current,E=y?y.getBoundingClientRect():{width:0,height:0,left:0,top:0};let B,j,D;if(P||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)B=Math.round(E.width/2),j=Math.round(E.height/2);else{const{clientX:F,clientY:I}=S.touches&&S.touches.length>0?S.touches[0]:S;B=Math.round(F-E.left),j=Math.round(I-E.top)}if(P)D=Math.sqrt((2*E.width**2+E.height**2)/3),D%2===0&&(D+=1);else{const F=Math.max(Math.abs((y?y.clientWidth:0)-B),B)*2+2,I=Math.max(Math.abs((y?y.clientHeight:0)-j),j)*2+2;D=Math.sqrt(F**2+I**2)}S!=null&&S.touches?f.current===null&&(f.current=()=>{m({pulsate:M,rippleX:B,rippleY:j,rippleSize:D,cb:O})},p.start(Im,()=>{f.current&&(f.current(),f.current=null)})):m({pulsate:M,rippleX:B,rippleY:j,rippleSize:D,cb:O})},[s,m,p]),_=C.useCallback(()=>{b({},{pulsate:!0})},[b]),x=C.useCallback((S,w)=>{if(p.clear(),(S==null?void 0:S.type)==="touchend"&&f.current){f.current(),f.current=null,p.start(0,()=>{x(S,w)});return}f.current=null,c(O=>O.length>0?O.slice(1):O),h.current=w},[p]);return C.useImperativeHandle(t,()=>({pulsate:_,start:b,stop:x}),[_,b,x]),v.jsx($m,{className:te(St.root,i.root,o),ref:g,...a,children:v.jsx(Xa,{component:null,exit:!0,children:l})})});function qm(n){return xe("MuiButtonBase",n)}const Vm=Ce("MuiButtonBase",["root","disabled","focusVisible"]),Xm=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:s}=n,o=we({root:["root",e&&"disabled",t&&"focusVisible"]},qm,s);return t&&r&&(o.root+=` ${r}`),o},Hm=X("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Vm.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),fh=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:i=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:p,LinkComponent:f="a",onBlur:g,onClick:m,onContextMenu:b,onDragLeave:_,onFocus:x,onFocusVisible:S,onKeyDown:w,onKeyUp:O,onMouseDown:M,onMouseLeave:P,onMouseUp:L,onTouchEnd:y,onTouchMove:E,onTouchStart:B,tabIndex:j=0,TouchRippleProps:D,touchRippleRef:F,type:I,...N}=r,W=C.useRef(null),$=jm(),se=rt($.ref,F),[G,Z]=C.useState(!1);c&&G&&Z(!1),C.useImperativeHandle(s,()=>({focusVisible:()=>{Z(!0),W.current.focus()}}),[]);const K=$.shouldMount&&!u&&!c;C.useEffect(()=>{G&&d&&!u&&$.pulsate()},[u,d,G,$]);const Q=rr($,"start",M,h),ie=rr($,"stop",b,h),re=rr($,"stop",_,h),be=rr($,"stop",L,h),Xe=rr($,"stop",H=>{G&&H.preventDefault(),P&&P(H)},h),fe=rr($,"start",B,h),Y=rr($,"stop",y,h),ne=rr($,"stop",E,h),oe=rr($,"stop",H=>{Jl(H.target)||Z(!1),g&&g(H)},!1),Ne=wn(H=>{W.current||(W.current=H.currentTarget),Jl(H.target)&&(Z(!0),S&&S(H)),x&&x(H)}),ae=()=>{const H=W.current;return l&&l!=="button"&&!(H.tagName==="A"&&H.href)},_e=wn(H=>{d&&!H.repeat&&G&&H.key===" "&&$.stop(H,()=>{$.start(H)}),H.target===H.currentTarget&&ae()&&H.key===" "&&H.preventDefault(),w&&w(H),H.target===H.currentTarget&&ae()&&H.key==="Enter"&&!c&&(H.preventDefault(),m&&m(H))}),yt=wn(H=>{d&&H.key===" "&&G&&!H.defaultPrevented&&$.stop(H,()=>{$.pulsate(H)}),O&&O(H),m&&H.target===H.currentTarget&&ae()&&H.key===" "&&!H.defaultPrevented&&m(H)});let nt=l;nt==="button"&&(N.href||N.to)&&(nt=f);const He={};nt==="button"?(He.type=I===void 0?"button":I,He.disabled=c):(!N.href&&!N.to&&(He.role="button"),c&&(He["aria-disabled"]=c));const Wt=rt(t,W),st={...r,centerRipple:i,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:j,focusVisible:G},ze=Xm(st);return v.jsxs(Hm,{as:nt,className:te(ze.root,a),ownerState:st,onBlur:oe,onClick:m,onContextMenu:ie,onFocus:Ne,onKeyDown:_e,onKeyUp:yt,onMouseDown:Q,onMouseLeave:Xe,onMouseUp:be,onDragLeave:re,onTouchEnd:Y,onTouchMove:ne,onTouchStart:fe,ref:Wt,tabIndex:c?-1:j,type:I,...He,...N,children:[o,K?v.jsx(zm,{ref:se,center:i,...D}):null]})});function rr(n,e,t,r=!1){return wn(s=>(t&&t(s),r||n[e](s),!0))}function Ym(n){return typeof n.main=="string"}function Um(n,e=[]){if(!Ym(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Zt(n=[]){return([,e])=>e&&Um(e,n)}function Gm(n){return xe("MuiCircularProgress",n)}Ce("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const br=44,ra=ys`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,na=ys`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Km=typeof ra!="string"?Ma`
        animation: ${ra} 1.4s linear infinite;
      `:null,Zm=typeof na!="string"?Ma`
        animation: ${na} 1.4s ease-in-out infinite;
      `:null,Jm=n=>{const{classes:e,variant:t,color:r,disableShrink:s}=n,i={root:["root",t,`color${J(r)}`],svg:["svg"],circle:["circle",`circle${J(t)}`,s&&"circleDisableShrink"]};return we(i,Gm,e)},Qm=X("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${J(t.color)}`]]}})(Oe(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Km||{animation:`${ra} 1.4s linear infinite`}},...Object.entries(n.palette).filter(Zt()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}}))]}))),e0=X("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),t0=X("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${J(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(Oe(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:Zm||{animation:`${na} 1.4s ease-in-out infinite`}}]}))),r0=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiCircularProgress"}),{className:s,color:i="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:h="indeterminate",...d}=r,p={...r,color:i,disableShrink:o,size:a,thickness:c,value:u,variant:h},f=Jm(p),g={},m={},b={};if(h==="determinate"){const _=2*Math.PI*((br-c)/2);g.strokeDasharray=_.toFixed(3),b["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*_).toFixed(3)}px`,m.transform="rotate(-90deg)"}return v.jsx(Qm,{className:te(f.root,s),style:{width:a,height:a,...m,...l},ownerState:p,ref:t,role:"progressbar",...b,...d,children:v.jsx(e0,{className:f.svg,ownerState:p,viewBox:`${br/2} ${br/2} ${br} ${br}`,children:v.jsx(t0,{className:f.circle,style:g,ownerState:p,cx:br,cy:br,r:(br-c)/2,fill:"none",strokeWidth:c})})})});function n0(n){return xe("MuiIconButton",n)}const uc=Ce("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),s0=n=>{const{classes:e,disabled:t,color:r,edge:s,size:i,loading:o}=n,a={root:["root",o&&"loading",t&&"disabled",r!=="default"&&`color${J(r)}`,s&&`edge${J(s)}`,`size${J(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return we(a,n0,e)},i0=X(fh,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${J(t.color)}`],t.edge&&e[`edge${J(t.edge)}`],e[`size${J(t.size)}`]]}})(Oe(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Hr(n.palette.action.active,n.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Oe(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(Zt()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(Zt()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.vars?`rgba(${(n.vars||n).palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Hr((n.vars||n).palette[e].main,n.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${uc.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled},[`&.${uc.loading}`]:{color:"transparent"}}))),o0=X("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(n,e)=>e.loadingIndicator})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(n.vars||n).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Ha=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiIconButton"}),{edge:s=!1,children:i,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:h,loading:d=null,loadingIndicator:p,...f}=r,g=Na(h),m=p??v.jsx(r0,{"aria-labelledby":g,color:"inherit",size:16}),b={...r,edge:s,color:a,disabled:l,disableFocusRipple:c,loading:d,loadingIndicator:m,size:u},_=s0(b);return v.jsxs(i0,{id:g,className:te(_.root,o),centerRipple:!0,focusRipple:!c,disabled:l||d,ref:t,...f,ownerState:b,children:[typeof d=="boolean"&&v.jsx("span",{className:_.loadingWrapper,style:{display:"contents"},children:v.jsx(o0,{className:_.loadingIndicator,ownerState:b,children:d&&m})}),i]})});function a0(n){return xe("MuiTypography",n)}Ce("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const l0={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},c0=vm(),u0=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:s,variant:i,classes:o}=n,a={root:["root",i,n.align!=="inherit"&&`align${J(e)}`,t&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return we(a,a0,o)},h0=X("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${J(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(Oe(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Zt()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${J(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),hc={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},cs=C.forwardRef(function(e,t){const{color:r,...s}=Ee({props:e,name:"MuiTypography"}),i=!l0[r],o=c0({...s,...i&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:d=!1,variant:p="body1",variantMapping:f=hc,...g}=o,m={...o,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:h,paragraph:d,variant:p,variantMapping:f},b=c||(d?"p":f[p]||hc[p])||"span",_=u0(m);return v.jsx(h0,{as:b,ref:t,className:te(_.root,l),...g,ownerState:m,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...g.style}})});function d0(n){return typeof n=="function"?n():n}const p0=C.forwardRef(function(e,t){const{children:r,container:s,disablePortal:i=!1}=e,[o,a]=C.useState(null),l=rt(C.isValidElement(r)?Cs(r):null,t);if(Xr(()=>{i||a(d0(s)||document.body)},[s,i]),Xr(()=>{if(o&&!i)return Uo(t,o),()=>{Uo(t,null)}},[t,o,i]),i){if(C.isValidElement(r)){const c={ref:l};return C.cloneElement(r,c)}return r}return o&&Pu.createPortal(r,o)});function Ds(n){return parseInt(n,10)||0}const f0={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function g0(n){for(const e in n)return!1;return!0}function m0(n){return g0(n)||n.outerHeightStyle===0&&!n.overflowing}const y0=C.forwardRef(function(e,t){const{onChange:r,maxRows:s,minRows:i=1,style:o,value:a,...l}=e,{current:c}=C.useRef(a!=null),u=C.useRef(null),h=rt(t,u),d=C.useRef(null),p=C.useRef(null),f=C.useCallback(()=>{const _=u.current,x=p.current;if(!_||!x)return;const w=dr(_).getComputedStyle(_);if(w.width==="0px")return{outerHeightStyle:0,overflowing:!1};x.style.width=w.width,x.value=_.value||e.placeholder||"x",x.value.slice(-1)===`
`&&(x.value+=" ");const O=w.boxSizing,M=Ds(w.paddingBottom)+Ds(w.paddingTop),P=Ds(w.borderBottomWidth)+Ds(w.borderTopWidth),L=x.scrollHeight;x.value="x";const y=x.scrollHeight;let E=L;i&&(E=Math.max(Number(i)*y,E)),s&&(E=Math.min(Number(s)*y,E)),E=Math.max(E,y);const B=E+(O==="border-box"?M+P:0),j=Math.abs(E-L)<=1;return{outerHeightStyle:B,overflowing:j}},[s,i,e.placeholder]),g=C.useCallback(()=>{const _=u.current,x=f();if(!_||!x||m0(x))return;const S=x.outerHeightStyle;d.current!==S&&(d.current=S,_.style.height=`${S}px`),_.style.overflow=x.overflowing?"hidden":""},[f]),m=C.useRef(-1);Xr(()=>{const _=Zu(()=>g()),x=u==null?void 0:u.current;if(!x)return;const S=dr(x);S.addEventListener("resize",_);let w;return typeof ResizeObserver<"u"&&(w=new ResizeObserver(()=>{w.unobserve(x),cancelAnimationFrame(m.current),g(),m.current=requestAnimationFrame(()=>{w.observe(x)})}),w.observe(x)),()=>{_.clear(),cancelAnimationFrame(m.current),S.removeEventListener("resize",_),w&&w.disconnect()}},[f,g]),Xr(()=>{g()});const b=_=>{c||g(),r&&r(_)};return v.jsxs(C.Fragment,{children:[v.jsx("textarea",{value:a,onChange:b,ref:h,rows:i,style:o,...l}),v.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:p,tabIndex:-1,style:{...f0.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function sa(n){return typeof n=="string"}function Gr({props:n,states:e,muiFormControl:t}){return e.reduce((r,s)=>(r[s]=n[s],t&&typeof n[s]>"u"&&(r[s]=t[s]),r),{})}const Ya=C.createContext(void 0);function Or(){return C.useContext(Ya)}function dc(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function _i(n,e=!1){return n&&(dc(n.value)&&n.value!==""||e&&dc(n.defaultValue)&&n.defaultValue!=="")}function v0(n){return n.startAdornment}function b0(n){return xe("MuiInputBase",n)}const Pn=Ce("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var pc;const Zi=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${J(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},Ji=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},x0=n=>{const{classes:e,color:t,disabled:r,error:s,endAdornment:i,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:p,type:f}=n,g={root:["root",`color${J(t)}`,r&&"disabled",s&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",d&&d!=="medium"&&`size${J(d)}`,u&&"multiline",p&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",f==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",i&&"inputAdornedEnd",h&&"readOnly"]};return we(g,b0,e)},Qi=X("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Zi})(Oe(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Pn.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),eo=X("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Ji})(Oe(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Pn.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Pn.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),fc=ym({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Ua=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:i,autoFocus:o,className:a,color:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:p,endAdornment:f,error:g,fullWidth:m=!1,id:b,inputComponent:_="input",inputProps:x={},inputRef:S,margin:w,maxRows:O,minRows:M,multiline:P=!1,name:L,onBlur:y,onChange:E,onClick:B,onFocus:j,onKeyDown:D,onKeyUp:F,placeholder:I,readOnly:N,renderSuffix:W,rows:$,size:se,slotProps:G={},slots:Z={},startAdornment:K,type:Q="text",value:ie,...re}=r,be=x.value!=null?x.value:ie,{current:Xe}=C.useRef(be!=null),fe=C.useRef(),Y=C.useCallback(Te=>{},[]),ne=rt(fe,S,x.ref,Y),[oe,Ne]=C.useState(!1),ae=Or(),_e=Gr({props:r,muiFormControl:ae,states:["color","disabled","error","hiddenLabel","size","required","filled"]});_e.focused=ae?ae.focused:oe,C.useEffect(()=>{!ae&&d&&oe&&(Ne(!1),y&&y())},[ae,d,oe,y]);const yt=ae&&ae.onFilled,nt=ae&&ae.onEmpty,He=C.useCallback(Te=>{_i(Te)?yt&&yt():nt&&nt()},[yt,nt]);Xr(()=>{Xe&&He({value:be})},[be,He,Xe]);const Wt=Te=>{j&&j(Te),x.onFocus&&x.onFocus(Te),ae&&ae.onFocus?ae.onFocus(Te):Ne(!0)},st=Te=>{y&&y(Te),x.onBlur&&x.onBlur(Te),ae&&ae.onBlur?ae.onBlur(Te):Ne(!1)},ze=(Te,...tn)=>{if(!Xe){const Nn=Te.target||fe.current;if(Nn==null)throw new Error(ur(1));He({value:Nn.value})}x.onChange&&x.onChange(Te,...tn),E&&E(Te,...tn)};C.useEffect(()=>{He(fe.current)},[]);const H=Te=>{fe.current&&Te.currentTarget===Te.target&&fe.current.focus(),B&&B(Te)};let Zr=_,lt=x;P&&Zr==="input"&&($?lt={type:void 0,minRows:$,maxRows:$,...lt}:lt={type:void 0,maxRows:O,minRows:M,...lt},Zr=y0);const Jr=Te=>{He(Te.animationName==="mui-auto-fill-cancel"?fe.current:{value:"x"})};C.useEffect(()=>{ae&&ae.setAdornedStart(!!K)},[ae,K]);const Ln={...r,color:_e.color||"primary",disabled:_e.disabled,endAdornment:f,error:_e.error,focused:_e.focused,formControl:ae,fullWidth:m,hiddenLabel:_e.hiddenLabel,multiline:P,size:_e.size,startAdornment:K,type:Q},Bn=x0(Ln),Qr=Z.root||c.Root||Qi,en=G.root||u.root||{},Mr=Z.input||c.Input||eo;return lt={...lt,...G.input??u.input},v.jsxs(C.Fragment,{children:[!p&&typeof fc=="function"&&(pc||(pc=v.jsx(fc,{}))),v.jsxs(Qr,{...en,ref:t,onClick:H,...re,...!sa(Qr)&&{ownerState:{...Ln,...en.ownerState}},className:te(Bn.root,en.className,a,N&&"MuiInputBase-readOnly"),children:[K,v.jsx(Ya.Provider,{value:null,children:v.jsx(Mr,{"aria-invalid":_e.error,"aria-describedby":s,autoComplete:i,autoFocus:o,defaultValue:h,disabled:_e.disabled,id:b,onAnimationStart:Jr,name:L,placeholder:I,readOnly:N,required:_e.required,rows:$,value:be,onKeyDown:D,onKeyUp:F,type:Q,...lt,...!sa(Mr)&&{as:Zr,ownerState:{...Ln,...lt.ownerState}},ref:ne,className:te(Bn.input,lt.className,N&&"MuiInputBase-readOnly"),onBlur:st,onChange:ze,onFocus:Wt})}),f,W?W({..._e,startAdornment:K}):null]})]})});function C0(n){return xe("MuiInput",n)}const qn={...Pn,...Ce("MuiInput",["root","underline","input"])};function w0(n){return xe("MuiOutlinedInput",n)}const qt={...Pn,...Ce("MuiOutlinedInput",["root","notchedOutline","input"])};function S0(n){return xe("MuiFilledInput",n)}const Dr={...Pn,...Ce("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},_0=Ki(v.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),T0={entering:{opacity:1},entered:{opacity:1}},k0=C.forwardRef(function(e,t){const r=qa(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:p,onExited:f,onExiting:g,style:m,timeout:b=s,TransitionComponent:_=er,...x}=e,S=C.useRef(null),w=rt(S,Cs(a),t),O=D=>F=>{if(D){const I=S.current;F===void 0?D(I):D(I,F)}},M=O(d),P=O((D,F)=>{ph(D);const I=wi({style:m,timeout:b,easing:l},{mode:"enter"});D.style.webkitTransition=r.transitions.create("opacity",I),D.style.transition=r.transitions.create("opacity",I),u&&u(D,F)}),L=O(h),y=O(g),E=O(D=>{const F=wi({style:m,timeout:b,easing:l},{mode:"exit"});D.style.webkitTransition=r.transitions.create("opacity",F),D.style.transition=r.transitions.create("opacity",F),p&&p(D)}),B=O(f),j=D=>{i&&i(S.current,D)};return v.jsx(_,{appear:o,in:c,nodeRef:S,onEnter:P,onEntered:L,onEntering:M,onExit:E,onExited:B,onExiting:y,addEndListener:j,timeout:b,...x,children:(D,{ownerState:F,...I})=>C.cloneElement(a,{style:{opacity:0,visibility:D==="exited"&&!c?"hidden":void 0,...T0[D],...m,...a.props.style},ref:w,...I})})});function O0(n){return xe("MuiBackdrop",n)}Ce("MuiBackdrop",["root","invisible"]);const P0=n=>{const{classes:e,invisible:t}=n;return we({root:["root",t&&"invisible"]},O0,e)},E0=X("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),M0=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiBackdrop"}),{children:s,className:i,component:o="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:d={},TransitionComponent:p,transitionDuration:f,...g}=r,m={...r,component:o,invisible:a},b=P0(m),_={transition:p,root:c.Root,...d},x={...u,...h},S={slots:_,slotProps:x},[w,O]=Ot("root",{elementType:E0,externalForwardedProps:S,className:te(b.root,i),ownerState:m}),[M,P]=Ot("transition",{elementType:k0,externalForwardedProps:S,ownerState:m});return v.jsx(M,{in:l,timeout:f,...g,...P,children:v.jsx(w,{"aria-hidden":!0,...O,classes:b,ref:t,children:s})})});function D0(n){return xe("PrivateSwitchBase",n)}Ce("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const R0=n=>{const{classes:e,checked:t,disabled:r,edge:s}=n,i={root:["root",t&&"checked",r&&"disabled",s&&`edge${J(s)}`],input:["input"]};return we(i,D0,e)},j0=X(fh)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),A0=X("input",{shouldForwardProp:Rt})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),F0=C.forwardRef(function(e,t){const{autoFocus:r,checked:s,checkedIcon:i,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:d,inputProps:p,inputRef:f,name:g,onBlur:m,onChange:b,onFocus:_,readOnly:x,required:S=!1,tabIndex:w,type:O,value:M,...P}=e,[L,y]=Go({controlled:s,default:!!a,name:"SwitchBase",state:"checked"}),E=Or(),B=$=>{_&&_($),E&&E.onFocus&&E.onFocus($)},j=$=>{m&&m($),E&&E.onBlur&&E.onBlur($)},D=$=>{if($.nativeEvent.defaultPrevented)return;const se=$.target.checked;y(se),b&&b($,se)};let F=l;E&&typeof F>"u"&&(F=E.disabled);const I=O==="checkbox"||O==="radio",N={...e,checked:L,disabled:F,disableFocusRipple:c,edge:u},W=R0(N);return v.jsxs(j0,{component:"span",className:te(W.root,o),centerRipple:!0,focusRipple:!c,disabled:F,tabIndex:null,role:void 0,onFocus:B,onBlur:j,ownerState:N,ref:t,...P,children:[v.jsx(A0,{autoFocus:r,checked:s,defaultChecked:a,className:W.input,disabled:F,id:I?d:void 0,name:g,onChange:D,readOnly:x,ref:f,required:S,ownerState:N,tabIndex:w,type:O,...O==="checkbox"&&M===void 0?{}:{value:M},...p}),L?i:h]})}),I0=Ki(v.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),L0=Ki(v.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),B0=Ki(v.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function N0(n){return xe("MuiCheckbox",n)}const xo=Ce("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),$0=n=>{const{classes:e,indeterminate:t,color:r,size:s}=n,i={root:["root",t&&"indeterminate",`color${J(r)}`,`size${J(s)}`]},o=we(i,N0,e);return{...e,...o}},W0=X(F0,{shouldForwardProp:n=>Rt(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${J(t.size)}`],t.color!=="default"&&e[`color${J(t.color)}`]]}})(Oe(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Hr(n.palette.action.active,n.palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Zt()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Hr(n.palette[e].main,n.palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Zt()).map(([e])=>({props:{color:e},style:{[`&.${xo.checked}, &.${xo.indeterminate}`]:{color:(n.vars||n).palette[e].main},[`&.${xo.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),z0=v.jsx(L0,{}),q0=v.jsx(I0,{}),V0=v.jsx(B0,{}),X0=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiCheckbox"}),{checkedIcon:s=z0,color:i="primary",icon:o=q0,indeterminate:a=!1,indeterminateIcon:l=V0,inputProps:c,size:u="medium",disableRipple:h=!1,className:d,...p}=r,f=a?l:o,g=a?l:s,m={...r,disableRipple:h,color:i,indeterminate:a,size:u},b=$0(m);return v.jsx(W0,{type:"checkbox",inputProps:{"data-indeterminate":a,...c},icon:C.cloneElement(f,{fontSize:f.props.fontSize??u}),checkedIcon:C.cloneElement(g,{fontSize:g.props.fontSize??u}),ownerState:m,ref:t,className:te(b.root,d),disableRipple:h,...p,classes:b})});function H0(n){const e=Nt(n);return e.body===n?dr(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Qn(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function gc(n){return parseInt(dr(n).getComputedStyle(n).paddingRight,10)||0}function Y0(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function mc(n,e,t,r,s){const i=[e,t,...r];[].forEach.call(n.children,o=>{const a=!i.includes(o),l=!Y0(o);a&&l&&Qn(o,s)})}function Co(n,e){let t=-1;return n.some((r,s)=>e(r)?(t=s,!0):!1),t}function U0(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(H0(r)){const o=eh(dr(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${gc(r)+o}px`;const a=Nt(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${gc(l)+o}px`})}let i;if(r.parentNode instanceof DocumentFragment)i=Nt(r).body;else{const o=r.parentElement,a=dr(r);i=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{t.forEach(({value:i,el:o,property:a})=>{i?o.style.setProperty(a,i):o.style.removeProperty(a)})}}function G0(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class K0{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Qn(e.modalRef,!1);const s=G0(t);mc(t,e.mount,e.modalRef,s,!0);const i=Co(this.containers,o=>o.container===t);return i!==-1?(this.containers[i].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),r)}mount(e,t){const r=Co(this.containers,i=>i.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=U0(s,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=Co(this.containers,o=>o.modals.includes(e)),i=this.containers[s];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(r,1),i.modals.length===0)i.restore&&i.restore(),e.modalRef&&Qn(e.modalRef,t),mc(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(s,1);else{const o=i.modals[i.modals.length-1];o.modalRef&&Qn(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const Z0=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function J0(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Q0(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function ey(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Q0(n))}function ty(n){const e=[],t=[];return Array.from(n.querySelectorAll(Z0)).forEach((r,s)=>{const i=J0(r);i===-1||!ey(r)||(i===0?e.push(r):t.push({documentOrder:s,tabIndex:i,node:r}))}),t.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function ry(){return!0}function ny(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:i=ty,isEnabled:o=ry,open:a}=n,l=C.useRef(!1),c=C.useRef(null),u=C.useRef(null),h=C.useRef(null),d=C.useRef(null),p=C.useRef(!1),f=C.useRef(null),g=rt(Cs(e),f),m=C.useRef(null);C.useEffect(()=>{!a||!f.current||(p.current=!t)},[t,a]),C.useEffect(()=>{if(!a||!f.current)return;const x=Nt(f.current);return f.current.contains(x.activeElement)||(f.current.hasAttribute("tabIndex")||f.current.setAttribute("tabIndex","-1"),p.current&&f.current.focus()),()=>{s||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),C.useEffect(()=>{if(!a||!f.current)return;const x=Nt(f.current),S=M=>{m.current=M,!(r||!o()||M.key!=="Tab")&&x.activeElement===f.current&&M.shiftKey&&(l.current=!0,u.current&&u.current.focus())},w=()=>{var L,y;const M=f.current;if(M===null)return;if(!x.hasFocus()||!o()||l.current){l.current=!1;return}if(M.contains(x.activeElement)||r&&x.activeElement!==c.current&&x.activeElement!==u.current)return;if(x.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!p.current)return;let P=[];if((x.activeElement===c.current||x.activeElement===u.current)&&(P=i(f.current)),P.length>0){const E=!!((L=m.current)!=null&&L.shiftKey&&((y=m.current)==null?void 0:y.key)==="Tab"),B=P[0],j=P[P.length-1];typeof B!="string"&&typeof j!="string"&&(E?j.focus():B.focus())}else M.focus()};x.addEventListener("focusin",w),x.addEventListener("keydown",S,!0);const O=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&w()},50);return()=>{clearInterval(O),x.removeEventListener("focusin",w),x.removeEventListener("keydown",S,!0)}},[t,r,s,o,a,i]);const b=x=>{h.current===null&&(h.current=x.relatedTarget),p.current=!0,d.current=x.target;const S=e.props.onFocus;S&&S(x)},_=x=>{h.current===null&&(h.current=x.relatedTarget),p.current=!0};return v.jsxs(C.Fragment,{children:[v.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:c,"data-testid":"sentinelStart"}),C.cloneElement(e,{ref:g,onFocus:b}),v.jsx("div",{tabIndex:a?0:-1,onFocus:_,ref:u,"data-testid":"sentinelEnd"})]})}function sy(n){return typeof n=="function"?n():n}function iy(n){return n?n.props.hasOwnProperty("in"):!1}const yc=()=>{},Rs=new K0;function oy(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:i,onTransitionExited:o,children:a,onClose:l,open:c,rootRef:u}=n,h=C.useRef({}),d=C.useRef(null),p=C.useRef(null),f=rt(p,u),[g,m]=C.useState(!c),b=iy(a);let _=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(_=!1);const x=()=>Nt(d.current),S=()=>(h.current.modalRef=p.current,h.current.mount=d.current,h.current),w=()=>{Rs.mount(S(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},O=wn(()=>{const F=sy(e)||x().body;Rs.add(S(),F),p.current&&w()}),M=()=>Rs.isTopModal(S()),P=wn(F=>{d.current=F,F&&(c&&M()?w():p.current&&Qn(p.current,_))}),L=C.useCallback(()=>{Rs.remove(S(),_)},[_]);C.useEffect(()=>()=>{L()},[L]),C.useEffect(()=>{c?O():(!b||!s)&&L()},[c,L,b,s,O]);const y=F=>I=>{var N;(N=F.onKeyDown)==null||N.call(F,I),!(I.key!=="Escape"||I.which===229||!M())&&(t||(I.stopPropagation(),l&&l(I,"escapeKeyDown")))},E=F=>I=>{var N;(N=F.onClick)==null||N.call(F,I),I.target===I.currentTarget&&l&&l(I,"backdropClick")};return{getRootProps:(F={})=>{const I=rh(n);delete I.onTransitionEnter,delete I.onTransitionExited;const N={...I,...F};return{role:"presentation",...N,onKeyDown:y(N),ref:f}},getBackdropProps:(F={})=>{const I=F;return{"aria-hidden":!0,...I,onClick:E(I),open:c}},getTransitionProps:()=>{const F=()=>{m(!1),i&&i()},I=()=>{m(!0),o&&o(),s&&L()};return{onEnter:Ul(F,(a==null?void 0:a.props.onEnter)??yc),onExited:Ul(I,(a==null?void 0:a.props.onExited)??yc)}},rootRef:f,portalRef:P,isTopModal:M,exited:g,hasTransition:b}}function ay(n){return xe("MuiModal",n)}Ce("MuiModal",["root","hidden","backdrop"]);const ly=n=>{const{open:e,exited:t,classes:r}=n;return we({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},ay,r)},cy=X("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(Oe(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),uy=X(M0,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),hy=C.forwardRef(function(e,t){const r=Ee({name:"MuiModal",props:e}),{BackdropComponent:s=uy,BackdropProps:i,classes:o,className:a,closeAfterTransition:l=!1,children:c,container:u,component:h,components:d={},componentsProps:p={},disableAutoFocus:f=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:m=!1,disablePortal:b=!1,disableRestoreFocus:_=!1,disableScrollLock:x=!1,hideBackdrop:S=!1,keepMounted:w=!1,onBackdropClick:O,onClose:M,onTransitionEnter:P,onTransitionExited:L,open:y,slotProps:E={},slots:B={},theme:j,...D}=r,F={...r,closeAfterTransition:l,disableAutoFocus:f,disableEnforceFocus:g,disableEscapeKeyDown:m,disablePortal:b,disableRestoreFocus:_,disableScrollLock:x,hideBackdrop:S,keepMounted:w},{getRootProps:I,getBackdropProps:N,getTransitionProps:W,portalRef:$,isTopModal:se,exited:G,hasTransition:Z}=oy({...F,rootRef:t}),K={...F,exited:G},Q=ly(K),ie={};if(c.props.tabIndex===void 0&&(ie.tabIndex="-1"),Z){const{onEnter:oe,onExited:Ne}=W();ie.onEnter=oe,ie.onExited=Ne}const re={...D,slots:{root:d.Root,backdrop:d.Backdrop,...B},slotProps:{...p,...E}},[be,Xe]=Ot("root",{elementType:cy,externalForwardedProps:re,getSlotProps:I,additionalProps:{ref:t,as:h},ownerState:K,className:te(a,Q==null?void 0:Q.root,!K.open&&K.exited&&(Q==null?void 0:Q.hidden))}),[fe,Y]=Ot("backdrop",{elementType:s,externalForwardedProps:re,additionalProps:i,getSlotProps:oe=>N({...oe,onClick:Ne=>{O&&O(Ne),oe!=null&&oe.onClick&&oe.onClick(Ne)}}),className:te(i==null?void 0:i.className,Q==null?void 0:Q.backdrop),ownerState:K}),ne=rt(i==null?void 0:i.ref,Y.ref);return!w&&!y&&(!Z||G)?null:v.jsx(p0,{ref:$,container:u,disablePortal:b,children:v.jsxs(be,{...Xe,children:[!S&&s?v.jsx(fe,{...Y,ref:ne}):null,v.jsx(ny,{disableEnforceFocus:g,disableAutoFocus:f,disableRestoreFocus:_,isEnabled:se,open:y,children:C.cloneElement(c,ie)})]})})}),dy=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:s,size:i,hiddenLabel:o,multiline:a}=n,l={root:["root",!t&&"underline",r&&"adornedStart",s&&"adornedEnd",i==="small"&&`size${J(i)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},c=we(l,S0,e);return{...e,...c}},py=X(Qi,{shouldForwardProp:n=>Rt(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Zi(n,e),!t.disableUnderline&&e.underline]}})(Oe(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Dr.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Dr.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Dr.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Dr.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Dr.disabled}, .${Dr.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Dr.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Zt()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),fy=X(eo,{name:"MuiFilledInput",slot:"Input",overridesResolver:Ji})(Oe(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Ga=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:i={},componentsProps:o,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:h,slots:d={},type:p="text",...f}=r,g={...r,disableUnderline:s,fullWidth:a,inputComponent:c,multiline:u,type:p},m=dy(r),b={root:{ownerState:g},input:{ownerState:g}},_=h??o?et(b,h??o):b,x=d.root??i.Root??py,S=d.input??i.Input??fy;return v.jsx(Ua,{slots:{root:x,input:S},slotProps:_,fullWidth:a,inputComponent:c,multiline:u,ref:t,type:p,...f,classes:m})});Ga.muiName="Input";function gy(n){return xe("MuiFormControl",n)}Ce("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const my=n=>{const{classes:e,margin:t,fullWidth:r}=n,s={root:["root",t!=="none"&&`margin${J(t)}`,r&&"fullWidth"]};return we(s,gy,e)},yy=X("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${J(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),vy=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiFormControl"}),{children:s,className:i,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:p="none",required:f=!1,size:g="medium",variant:m="outlined",...b}=r,_={...r,color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:p,required:f,size:g,variant:m},x=my(_),[S,w]=C.useState(()=>{let F=!1;return s&&C.Children.forEach(s,I=>{if(!yo(I,["Input","Select"]))return;const N=yo(I,["Select"])?I.props.input:I;N&&v0(N.props)&&(F=!0)}),F}),[O,M]=C.useState(()=>{let F=!1;return s&&C.Children.forEach(s,I=>{yo(I,["Input","Select"])&&(_i(I.props,!0)||_i(I.props.inputProps,!0))&&(F=!0)}),F}),[P,L]=C.useState(!1);l&&P&&L(!1);const y=u!==void 0&&!l?u:P;let E;C.useRef(!1);const B=C.useCallback(()=>{M(!0)},[]),j=C.useCallback(()=>{M(!1)},[]),D=C.useMemo(()=>({adornedStart:S,setAdornedStart:w,color:o,disabled:l,error:c,filled:O,focused:y,fullWidth:h,hiddenLabel:d,size:g,onBlur:()=>{L(!1)},onFocus:()=>{L(!0)},onEmpty:j,onFilled:B,registerEffect:E,required:f,variant:m}),[S,o,l,c,O,y,h,d,E,j,B,f,g,m]);return v.jsx(Ya.Provider,{value:D,children:v.jsx(yy,{as:a,ownerState:_,className:te(x.root,i),ref:t,...b,children:s})})});function by(n){return xe("MuiFormControlLabel",n)}const Kn=Ce("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),xy=n=>{const{classes:e,disabled:t,labelPlacement:r,error:s,required:i}=n,o={root:["root",t&&"disabled",`labelPlacement${J(r)}`,s&&"error",i&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return we(o,by,e)},Cy=X("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Kn.label}`]:e.label},e.root,e[`labelPlacement${J(t.labelPlacement)}`]]}})(Oe(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Kn.disabled}`]:{cursor:"default"},[`& .${Kn.label}`]:{[`&.${Kn.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),wy=X("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(Oe(({theme:n})=>({[`&.${Kn.error}`]:{color:(n.vars||n).palette.error.main}}))),Sy=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiFormControlLabel"}),{checked:s,className:i,componentsProps:o={},control:a,disabled:l,disableTypography:c,inputRef:u,label:h,labelPlacement:d="end",name:p,onChange:f,required:g,slots:m={},slotProps:b={},value:_,...x}=r,S=Or(),w=l??a.props.disabled??(S==null?void 0:S.disabled),O=g??a.props.required,M={disabled:w,required:O};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof a.props[F]>"u"&&typeof r[F]<"u"&&(M[F]=r[F])});const P=Gr({props:r,muiFormControl:S,states:["error"]}),L={...r,disabled:w,labelPlacement:d,required:O,error:P.error},y=xy(L),E={slots:m,slotProps:{...o,...b}},[B,j]=Ot("typography",{elementType:cs,externalForwardedProps:E,ownerState:L});let D=h;return D!=null&&D.type!==cs&&!c&&(D=v.jsx(B,{component:"span",...j,className:te(y.label,j==null?void 0:j.className),children:D})),v.jsxs(Cy,{className:te(y.root,i),ownerState:L,ref:t,...x,children:[C.cloneElement(a,M),O?v.jsxs("div",{children:[D,v.jsxs(wy,{ownerState:L,"aria-hidden":!0,className:y.asterisk,children:["","*"]})]}):D]})});function _y(n){return xe("MuiFormHelperText",n)}const vc=Ce("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var bc;const Ty=n=>{const{classes:e,contained:t,size:r,disabled:s,error:i,filled:o,focused:a,required:l}=n,c={root:["root",s&&"disabled",i&&"error",r&&`size${J(r)}`,t&&"contained",a&&"focused",o&&"filled",l&&"required"]};return we(c,_y,e)},ky=X("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${J(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(Oe(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${vc.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${vc.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),Oy=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiFormHelperText"}),{children:s,className:i,component:o="p",disabled:a,error:l,filled:c,focused:u,margin:h,required:d,variant:p,...f}=r,g=Or(),m=Gr({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),b={...r,component:o,contained:m.variant==="filled"||m.variant==="outlined",variant:m.variant,size:m.size,disabled:m.disabled,error:m.error,filled:m.filled,focused:m.focused,required:m.required};delete b.ownerState;const _=Ty(b);return v.jsx(ky,{as:o,className:te(_.root,i),ref:t,...f,ownerState:b,children:s===" "?bc||(bc=v.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function Py(n){return xe("MuiFormLabel",n)}const es=Ce("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Ey=n=>{const{classes:e,color:t,focused:r,disabled:s,error:i,filled:o,required:a}=n,l={root:["root",`color${J(t)}`,s&&"disabled",i&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",i&&"error"]};return we(l,Py,e)},My=X("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(Oe(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Zt()).map(([e])=>({props:{color:e},style:{[`&.${es.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${es.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${es.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),Dy=X("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(Oe(({theme:n})=>({[`&.${es.error}`]:{color:(n.vars||n).palette.error.main}}))),Ry=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiFormLabel"}),{children:s,className:i,color:o,component:a="label",disabled:l,error:c,filled:u,focused:h,required:d,...p}=r,f=Or(),g=Gr({props:r,muiFormControl:f,states:["color","required","focused","disabled","error","filled"]}),m={...r,color:g.color||"primary",component:a,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},b=Ey(m);return v.jsxs(My,{as:a,ownerState:m,className:te(b.root,i),ref:t,...p,children:[s,g.required&&v.jsxs(Dy,{ownerState:m,"aria-hidden":!0,className:b.asterisk,children:["","*"]})]})});function ia(n){return`scale(${n}, ${n**2})`}const jy={entering:{opacity:1,transform:ia(1)},entered:{opacity:1,transform:"none"}},wo=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),oa=C.forwardRef(function(e,t){const{addEndListener:r,appear:s=!0,children:i,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:p,style:f,timeout:g="auto",TransitionComponent:m=er,...b}=e,_=Qu(),x=C.useRef(),S=qa(),w=C.useRef(null),O=rt(w,Cs(i),t),M=F=>I=>{if(F){const N=w.current;I===void 0?F(N):F(N,I)}},P=M(u),L=M((F,I)=>{ph(F);const{duration:N,delay:W,easing:$}=wi({style:f,timeout:g,easing:o},{mode:"enter"});let se;g==="auto"?(se=S.transitions.getAutoHeightDuration(F.clientHeight),x.current=se):se=N,F.style.transition=[S.transitions.create("opacity",{duration:se,delay:W}),S.transitions.create("transform",{duration:wo?se:se*.666,delay:W,easing:$})].join(","),l&&l(F,I)}),y=M(c),E=M(p),B=M(F=>{const{duration:I,delay:N,easing:W}=wi({style:f,timeout:g,easing:o},{mode:"exit"});let $;g==="auto"?($=S.transitions.getAutoHeightDuration(F.clientHeight),x.current=$):$=I,F.style.transition=[S.transitions.create("opacity",{duration:$,delay:N}),S.transitions.create("transform",{duration:wo?$:$*.666,delay:wo?N:N||$*.333,easing:W})].join(","),F.style.opacity=0,F.style.transform=ia(.75),h&&h(F)}),j=M(d),D=F=>{g==="auto"&&_.start(x.current||0,F),r&&r(w.current,F)};return v.jsx(m,{appear:s,in:a,nodeRef:w,onEnter:L,onEntered:y,onEntering:P,onExit:B,onExited:j,onExiting:E,addEndListener:D,timeout:g==="auto"?null:g,...b,children:(F,{ownerState:I,...N})=>C.cloneElement(i,{style:{opacity:0,transform:ia(.75),visibility:F==="exited"&&!a?"hidden":void 0,...jy[F],...f,...i.props.style},ref:O,...N})})});oa&&(oa.muiSupportAuto=!0);const Ay=n=>{const{classes:e,disableUnderline:t}=n,s=we({root:["root",!t&&"underline"],input:["input"]},C0,e);return{...e,...s}},Fy=X(Qi,{shouldForwardProp:n=>Rt(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Zi(n,e),!t.disableUnderline&&e.underline]}})(Oe(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${qn.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${qn.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${qn.disabled}, .${qn.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${qn.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Zt()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),Iy=X(eo,{name:"MuiInput",slot:"Input",overridesResolver:Ji})({}),Ka=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:i={},componentsProps:o,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:h={},type:d="text",...p}=r,f=Ay(r),m={root:{ownerState:{disableUnderline:s}}},b=u??o?et(u??o,m):m,_=h.root??i.Root??Fy,x=h.input??i.Input??Iy;return v.jsx(Ua,{slots:{root:_,input:x},slotProps:b,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:d,...p,classes:f})});Ka.muiName="Input";function Ly(n){return xe("MuiInputLabel",n)}Ce("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const By=n=>{const{classes:e,formControl:t,size:r,shrink:s,disableAnimation:i,variant:o,required:a}=n,l={root:["root",t&&"formControl",!i&&"animated",s&&"shrink",r&&r!=="normal"&&`size${J(r)}`,o],asterisk:[a&&"asterisk"]},c=we(l,Ly,e);return{...e,...c}},Ny=X(Ry,{shouldForwardProp:n=>Rt(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${es.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(Oe(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),$y=C.forwardRef(function(e,t){const r=Ee({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:i,shrink:o,variant:a,className:l,...c}=r,u=Or();let h=o;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const d=Gr({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),p={...r,disableAnimation:s,formControl:u,shrink:h,size:d.size,variant:d.variant,required:d.required,focused:d.focused},f=By(p);return v.jsx(Ny,{"data-shrink":h,ref:t,className:te(f.root,l),...c,ownerState:p,classes:f})}),Wy=C.createContext({});function zy(n){return xe("MuiList",n)}Ce("MuiList",["root","padding","dense","subheader"]);const qy=n=>{const{classes:e,disablePadding:t,dense:r,subheader:s}=n;return we({root:["root",!t&&"padding",r&&"dense",s&&"subheader"]},zy,e)},Vy=X("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),Xy=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiList"}),{children:s,className:i,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,h=C.useMemo(()=>({dense:a}),[a]),d={...r,component:o,dense:a,disablePadding:l},p=qy(d);return v.jsx(Wy.Provider,{value:h,children:v.jsxs(Vy,{as:o,className:te(p.root,i),ref:t,ownerState:d,...u,children:[c,s]})})});function So(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function xc(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function gh(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Vn(n,e,t,r,s,i){let o=!1,a=s(n,e,e?t:!1);for(;a;){if(a===n.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!gh(a,i)||l)a=s(n,a,t);else return a.focus(),!0}return!1}const Hy=C.forwardRef(function(e,t){const{actions:r,autoFocus:s=!1,autoFocusItem:i=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu",...d}=e,p=C.useRef(null),f=C.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Xr(()=>{s&&p.current.focus()},[s]),C.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,{direction:S})=>{const w=!p.current.style.width;if(x.clientHeight<p.current.clientHeight&&w){const O=`${eh(dr(x))}px`;p.current.style[S==="rtl"?"paddingLeft":"paddingRight"]=O,p.current.style.width=`calc(100% + ${O})`}return p.current}}),[]);const g=x=>{const S=p.current,w=x.key;if(x.ctrlKey||x.metaKey||x.altKey){u&&u(x);return}const M=Nt(S).activeElement;if(w==="ArrowDown")x.preventDefault(),Vn(S,M,c,l,So);else if(w==="ArrowUp")x.preventDefault(),Vn(S,M,c,l,xc);else if(w==="Home")x.preventDefault(),Vn(S,null,c,l,So);else if(w==="End")x.preventDefault(),Vn(S,null,c,l,xc);else if(w.length===1){const P=f.current,L=w.toLowerCase(),y=performance.now();P.keys.length>0&&(y-P.lastTime>500?(P.keys=[],P.repeating=!0,P.previousKeyMatched=!0):P.repeating&&L!==P.keys[0]&&(P.repeating=!1)),P.lastTime=y,P.keys.push(L);const E=M&&!P.repeating&&gh(M,P);P.previousKeyMatched&&(E||Vn(S,M,!1,l,So,P))?x.preventDefault():P.previousKeyMatched=!1}u&&u(x)},m=rt(p,t);let b=-1;C.Children.forEach(o,(x,S)=>{if(!C.isValidElement(x)){b===S&&(b+=1,b>=o.length&&(b=-1));return}x.props.disabled||(h==="selectedMenu"&&x.props.selected||b===-1)&&(b=S),b===S&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))});const _=C.Children.map(o,(x,S)=>{if(S===b){const w={};return i&&(w.autoFocus=!0),x.props.tabIndex===void 0&&h==="selectedMenu"&&(w.tabIndex=0),C.cloneElement(x,w)}return x});return v.jsx(Xy,{role:"menu",ref:m,className:a,onKeyDown:g,tabIndex:s?0:-1,...d,children:_})});function Yy(n){return xe("MuiPopover",n)}Ce("MuiPopover",["root","paper"]);function Cc(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function wc(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function Sc(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function _o(n){return typeof n=="function"?n():n}const Uy=n=>{const{classes:e}=n;return we({root:["root"],paper:["paper"]},Yy,e)},Gy=X(hy,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),mh=X(Rm,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ky=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiPopover"}),{action:s,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:d=8,marginThreshold:p=16,open:f,PaperProps:g={},slots:m={},slotProps:b={},transformOrigin:_={vertical:"top",horizontal:"left"},TransitionComponent:x=oa,transitionDuration:S="auto",TransitionProps:{onEntering:w,...O}={},disableScrollLock:M=!1,...P}=r,L=(b==null?void 0:b.paper)??g,y=C.useRef(),E={...r,anchorOrigin:o,anchorReference:l,elevation:d,marginThreshold:p,externalPaperSlotProps:L,transformOrigin:_,TransitionComponent:x,transitionDuration:S,TransitionProps:O},B=Uy(E),j=C.useCallback(()=>{if(l==="anchorPosition")return a;const Y=_o(i),oe=(Y&&Y.nodeType===1?Y:Nt(y.current).body).getBoundingClientRect();return{top:oe.top+Cc(oe,o.vertical),left:oe.left+wc(oe,o.horizontal)}},[i,o.horizontal,o.vertical,a,l]),D=C.useCallback(Y=>({vertical:Cc(Y,_.vertical),horizontal:wc(Y,_.horizontal)}),[_.horizontal,_.vertical]),F=C.useCallback(Y=>{const ne={width:Y.offsetWidth,height:Y.offsetHeight},oe=D(ne);if(l==="none")return{top:null,left:null,transformOrigin:Sc(oe)};const Ne=j();let ae=Ne.top-oe.vertical,_e=Ne.left-oe.horizontal;const yt=ae+ne.height,nt=_e+ne.width,He=dr(_o(i)),Wt=He.innerHeight-p,st=He.innerWidth-p;if(p!==null&&ae<p){const ze=ae-p;ae-=ze,oe.vertical+=ze}else if(p!==null&&yt>Wt){const ze=yt-Wt;ae-=ze,oe.vertical+=ze}if(p!==null&&_e<p){const ze=_e-p;_e-=ze,oe.horizontal+=ze}else if(nt>st){const ze=nt-st;_e-=ze,oe.horizontal+=ze}return{top:`${Math.round(ae)}px`,left:`${Math.round(_e)}px`,transformOrigin:Sc(oe)}},[i,l,j,D,p]),[I,N]=C.useState(f),W=C.useCallback(()=>{const Y=y.current;if(!Y)return;const ne=F(Y);ne.top!==null&&Y.style.setProperty("top",ne.top),ne.left!==null&&(Y.style.left=ne.left),Y.style.transformOrigin=ne.transformOrigin,N(!0)},[F]);C.useEffect(()=>(M&&window.addEventListener("scroll",W),()=>window.removeEventListener("scroll",W)),[i,M,W]);const $=(Y,ne)=>{w&&w(Y,ne),W()},se=()=>{N(!1)};C.useEffect(()=>{f&&W()}),C.useImperativeHandle(s,()=>f?{updatePosition:()=>{W()}}:null,[f,W]),C.useEffect(()=>{if(!f)return;const Y=Zu(()=>{W()}),ne=dr(i);return ne.addEventListener("resize",Y),()=>{Y.clear(),ne.removeEventListener("resize",Y)}},[i,f,W]);let G=S;S==="auto"&&!x.muiSupportAuto&&(G=void 0);const Z=h||(i?Nt(_o(i)).body:void 0),K={slots:m,slotProps:{...b,paper:L}},[Q,ie]=Ot("paper",{elementType:mh,externalForwardedProps:K,additionalProps:{elevation:d,className:te(B.paper,L==null?void 0:L.className),style:I?L.style:{...L.style,opacity:0}},ownerState:E}),[re,{slotProps:be,...Xe}]=Ot("root",{elementType:Gy,externalForwardedProps:K,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Z,open:f},ownerState:E,className:te(B.root,u)}),fe=rt(y,ie.ref);return v.jsx(re,{...Xe,...!sa(re)&&{slotProps:be,disableScrollLock:M},...P,ref:t,children:v.jsx(x,{appear:!0,in:f,onEntering:$,onExited:se,timeout:G,...O,children:v.jsx(Q,{...ie,ref:fe,children:c})})})});function Zy(n){return xe("MuiMenu",n)}Ce("MuiMenu",["root","paper","list"]);const Jy={vertical:"top",horizontal:"right"},Qy={vertical:"top",horizontal:"left"},ev=n=>{const{classes:e}=n;return we({root:["root"],paper:["paper"],list:["list"]},Zy,e)},tv=X(Ky,{shouldForwardProp:n=>Rt(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),rv=X(mh,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),nv=X(Hy,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),sv=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:i,className:o,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:h={},PopoverClasses:d,transitionDuration:p="auto",TransitionProps:{onEntering:f,...g}={},variant:m="selectedMenu",slots:b={},slotProps:_={},...x}=r,S=Eg(),w={...r,autoFocus:s,disableAutoFocusItem:a,MenuListProps:l,onEntering:f,PaperProps:h,transitionDuration:p,TransitionProps:g,variant:m},O=ev(w),M=s&&!a&&u,P=C.useRef(null),L=(I,N)=>{P.current&&P.current.adjustStyleForScrollbar(I,{direction:S?"rtl":"ltr"}),f&&f(I,N)},y=I=>{I.key==="Tab"&&(I.preventDefault(),c&&c(I,"tabKeyDown"))};let E=-1;C.Children.map(i,(I,N)=>{C.isValidElement(I)&&(I.props.disabled||(m==="selectedMenu"&&I.props.selected||E===-1)&&(E=N))});const B=b.paper??rv,j=_.paper??h,D=ec({elementType:b.root,externalSlotProps:_.root,ownerState:w,className:[O.root,o]}),F=ec({elementType:B,externalSlotProps:j,ownerState:w,className:O.paper});return v.jsx(tv,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?Jy:Qy,slots:{paper:B,root:b.root},slotProps:{root:D,paper:F},open:u,ref:t,transitionDuration:p,TransitionProps:{onEntering:L,...g},ownerState:w,...x,classes:d,children:v.jsx(nv,{onKeyDown:y,actions:P,autoFocus:s&&(E===-1||a),autoFocusItem:M,variant:m,...l,className:te(O.list,l.className),children:i})})});function iv(n){return xe("MuiNativeSelect",n)}const Za=Ce("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),ov=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:i,error:o}=n,a={select:["select",t,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${J(t)}`,i&&"iconOpen",r&&"disabled"]};return we(a,iv,e)},yh=X("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Za.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),av=X(yh,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Rt,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${Za.multiple}`]:e.multiple}]}})({}),vh=X("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${Za.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),lv=X(vh,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${J(t.variant)}`],t.open&&e.iconOpen]}})({}),cv=C.forwardRef(function(e,t){const{className:r,disabled:s,error:i,IconComponent:o,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:s,variant:l,error:i},h=ov(u);return v.jsxs(C.Fragment,{children:[v.jsx(av,{ownerState:u,className:te(h.select,r),disabled:s,ref:a||t,...c}),e.multiple?null:v.jsx(lv,{as:o,ownerState:u,className:h.icon})]})});var _c;const uv=X("fieldset",{shouldForwardProp:Rt})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),hv=X("legend",{shouldForwardProp:Rt})(Oe(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function dv(n){const{children:e,classes:t,className:r,label:s,notched:i,...o}=n,a=s!=null&&s!=="",l={...n,notched:i,withLabel:a};return v.jsx(uv,{"aria-hidden":!0,className:r,ownerState:l,...o,children:v.jsx(hv,{ownerState:l,children:a?v.jsx("span",{children:s}):_c||(_c=v.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const pv=n=>{const{classes:e}=n,r=we({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},w0,e);return{...e,...r}},fv=X(Qi,{shouldForwardProp:n=>Rt(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Zi})(Oe(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${qt.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${qt.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${qt.focused} .${qt.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Zt()).map(([t])=>({props:{color:t},style:{[`&.${qt.focused} .${qt.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${qt.error} .${qt.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${qt.disabled} .${qt.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),gv=X(dv,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(Oe(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),mv=X(eo,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Ji})(Oe(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),Ja=C.forwardRef(function(e,t){var r;const s=Ee({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:h={},type:d="text",...p}=s,f=pv(s),g=Or(),m=Gr({props:s,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),b={...s,color:m.color||"primary",disabled:m.disabled,error:m.error,focused:m.focused,formControl:g,fullWidth:o,hiddenLabel:m.hiddenLabel,multiline:c,size:m.size,type:d},_=h.root??i.Root??fv,x=h.input??i.Input??mv;return v.jsx(Ua,{slots:{root:_,input:x},renderSuffix:S=>v.jsx(gv,{ownerState:b,className:f.notchedOutline,label:l!=null&&l!==""&&m.required?r||(r=v.jsxs(C.Fragment,{children:[l,"","*"]})):l,notched:typeof u<"u"?u:!!(S.startAdornment||S.filled||S.focused)}),fullWidth:o,inputComponent:a,multiline:c,ref:t,type:d,...p,classes:{...f,notchedOutline:null}})});Ja.muiName="Input";function bh(n){return xe("MuiSelect",n)}const Xn=Ce("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var Tc;const yv=X(yh,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Xn.select}`]:e.select},{[`&.${Xn.select}`]:e[t.variant]},{[`&.${Xn.error}`]:e.error},{[`&.${Xn.multiple}`]:e.multiple}]}})({[`&.${Xn.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),vv=X(vh,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${J(t.variant)}`],t.open&&e.iconOpen]}})({}),bv=X("input",{shouldForwardProp:n=>uh(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function kc(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function xv(n){return n==null||typeof n=="string"&&!n.trim()}const Cv=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:i,error:o}=n,a={select:["select",t,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${J(t)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return we(a,bh,e)},wv=C.forwardRef(function(e,t){var kl;const{"aria-describedby":r,"aria-label":s,autoFocus:i,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:d,error:p=!1,IconComponent:f,inputRef:g,labelId:m,MenuProps:b={},multiple:_,name:x,onBlur:S,onChange:w,onClose:O,onFocus:M,onOpen:P,open:L,readOnly:y,renderValue:E,required:B,SelectDisplayProps:j={},tabIndex:D,type:F,value:I,variant:N="standard",...W}=e,[$,se]=Go({controlled:I,default:u,name:"Select"}),[G,Z]=Go({controlled:L,default:c,name:"Select"}),K=C.useRef(null),Q=C.useRef(null),[ie,re]=C.useState(null),{current:be}=C.useRef(L!=null),[Xe,fe]=C.useState(),Y=rt(t,g),ne=C.useCallback(U=>{Q.current=U,U&&re(U)},[]),oe=ie==null?void 0:ie.parentNode;C.useImperativeHandle(Y,()=>({focus:()=>{Q.current.focus()},node:K.current,value:$}),[$]),C.useEffect(()=>{c&&G&&ie&&!be&&(fe(o?null:oe.clientWidth),Q.current.focus())},[ie,o]),C.useEffect(()=>{i&&Q.current.focus()},[i]),C.useEffect(()=>{if(!m)return;const U=Nt(Q.current).getElementById(m);if(U){const Se=()=>{getSelection().isCollapsed&&Q.current.focus()};return U.addEventListener("click",Se),()=>{U.removeEventListener("click",Se)}}},[m]);const Ne=(U,Se)=>{U?P&&P(Se):O&&O(Se),be||(fe(o?null:oe.clientWidth),Z(U))},ae=U=>{U.button===0&&(U.preventDefault(),Q.current.focus(),Ne(!0,U))},_e=U=>{Ne(!1,U)},yt=C.Children.toArray(a),nt=U=>{const Se=yt.find(Ye=>Ye.props.value===U.target.value);Se!==void 0&&(se(Se.props.value),w&&w(U,Se))},He=U=>Se=>{let Ye;if(Se.currentTarget.hasAttribute("tabindex")){if(_){Ye=Array.isArray($)?$.slice():[];const rn=$.indexOf(U.props.value);rn===-1?Ye.push(U.props.value):Ye.splice(rn,1)}else Ye=U.props.value;if(U.props.onClick&&U.props.onClick(Se),$!==Ye&&(se(Ye),w)){const rn=Se.nativeEvent||Se,Ol=new rn.constructor(rn.type,rn);Object.defineProperty(Ol,"target",{writable:!0,value:{value:Ye,name:x}}),w(Ol,U)}_||Ne(!1,Se)}},Wt=U=>{y||[" ","ArrowUp","ArrowDown","Enter"].includes(U.key)&&(U.preventDefault(),Ne(!0,U))},st=ie!==null&&G,ze=U=>{!st&&S&&(Object.defineProperty(U,"target",{writable:!0,value:{value:$,name:x}}),S(U))};delete W["aria-invalid"];let H,Zr;const lt=[];let Jr=!1;(_i({value:$})||d)&&(E?H=E($):Jr=!0);const Ln=yt.map(U=>{if(!C.isValidElement(U))return null;let Se;if(_){if(!Array.isArray($))throw new Error(ur(2));Se=$.some(Ye=>kc(Ye,U.props.value)),Se&&Jr&&lt.push(U.props.children)}else Se=kc($,U.props.value),Se&&Jr&&(Zr=U.props.children);return C.cloneElement(U,{"aria-selected":Se?"true":"false",onClick:He(U),onKeyUp:Ye=>{Ye.key===" "&&Ye.preventDefault(),U.props.onKeyUp&&U.props.onKeyUp(Ye)},role:"option",selected:Se,value:void 0,"data-value":U.props.value})});Jr&&(_?lt.length===0?H=null:H=lt.reduce((U,Se,Ye)=>(U.push(Se),Ye<lt.length-1&&U.push(", "),U),[]):H=Zr);let Bn=Xe;!o&&be&&ie&&(Bn=oe.clientWidth);let Qr;typeof D<"u"?Qr=D:Qr=h?null:0;const en=j.id||(x?`mui-component-select-${x}`:void 0),Mr={...e,variant:N,value:$,open:st,error:p},Te=Cv(Mr),tn={...b.PaperProps,...(kl=b.slotProps)==null?void 0:kl.paper},Nn=Na();return v.jsxs(C.Fragment,{children:[v.jsx(yv,{as:"div",ref:ne,tabIndex:Qr,role:"combobox","aria-controls":st?Nn:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":st?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[m,en].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":B?"true":void 0,"aria-invalid":p?"true":void 0,onKeyDown:Wt,onMouseDown:h||y?null:ae,onBlur:ze,onFocus:M,...j,ownerState:Mr,className:te(j.className,Te.select,l),id:en,children:xv(H)?Tc||(Tc=v.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):H}),v.jsx(bv,{"aria-invalid":p,value:Array.isArray($)?$.join(","):$,name:x,ref:K,"aria-hidden":!0,onChange:nt,tabIndex:-1,disabled:h,className:Te.nativeInput,autoFocus:i,required:B,...W,ownerState:Mr}),v.jsx(vv,{as:f,className:Te.icon,ownerState:Mr}),v.jsx(sv,{id:`menu-${x||""}`,anchorEl:oe,open:st,onClose:_e,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...b,MenuListProps:{"aria-labelledby":m,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:Nn,...b.MenuListProps},slotProps:{...b.slotProps,paper:{...tn,style:{minWidth:Bn,...tn!=null?tn.style:null}}},children:Ln})]})}),Sv=n=>{const{classes:e}=n,r=we({root:["root"]},bh,e);return{...e,...r}},Qa={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Rt(n)&&n!=="variant",slot:"Root"},_v=X(Ka,Qa)(""),Tv=X(Ja,Qa)(""),kv=X(Ga,Qa)(""),xh=C.forwardRef(function(e,t){const r=Ee({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:i,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=_0,id:h,input:d,inputProps:p,label:f,labelId:g,MenuProps:m,multiple:b=!1,native:_=!1,onClose:x,onOpen:S,open:w,renderValue:O,SelectDisplayProps:M,variant:P="outlined",...L}=r,y=_?cv:wv,E=Or(),B=Gr({props:r,muiFormControl:E,states:["variant","error"]}),j=B.variant||P,D={...r,variant:j,classes:o},F=Sv(D),{root:I,...N}=F,W=d||{standard:v.jsx(_v,{ownerState:D}),outlined:v.jsx(Tv,{label:f,ownerState:D}),filled:v.jsx(kv,{ownerState:D})}[j],$=rt(t,Cs(W));return v.jsx(C.Fragment,{children:C.cloneElement(W,{inputComponent:y,inputProps:{children:i,error:B.error,IconComponent:u,variant:j,type:void 0,multiple:b,..._?{id:h}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:m,onClose:x,onOpen:S,open:w,renderValue:O,SelectDisplayProps:{id:h,...M}},...p,classes:p?et(N,p.classes):N,...d?d.props.inputProps:{}},...(b&&_||c)&&j==="outlined"?{notched:!0}:{},ref:$,className:te(W.props.className,a,F.root),...!d&&{variant:j},...L})})});xh.muiName="Select";function Ov(n){return xe("MuiTextField",n)}Ce("MuiTextField",["root"]);const Pv={standard:Ka,filled:Ga,outlined:Ja},Ev=n=>{const{classes:e}=n;return we({root:["root"]},Ov,e)},Mv=X(vy,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Ch=C.forwardRef(function(e,t){const r=Ee({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:i=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:d,fullWidth:p=!1,helperText:f,id:g,InputLabelProps:m,inputProps:b,InputProps:_,inputRef:x,label:S,maxRows:w,minRows:O,multiline:M=!1,name:P,onBlur:L,onChange:y,onFocus:E,placeholder:B,required:j=!1,rows:D,select:F=!1,SelectProps:I,slots:N={},slotProps:W={},type:$,value:se,variant:G="outlined",...Z}=r,K={...r,autoFocus:i,color:l,disabled:u,error:h,fullWidth:p,multiline:M,required:j,select:F,variant:G},Q=Ev(K),ie=Na(g),re=f&&ie?`${ie}-helper-text`:void 0,be=S&&ie?`${ie}-label`:void 0,Xe=Pv[G],fe={slots:N,slotProps:{input:_,inputLabel:m,htmlInput:b,formHelperText:d,select:I,...W}},Y={},ne=fe.slotProps.inputLabel;G==="outlined"&&(ne&&typeof ne.shrink<"u"&&(Y.notched=ne.shrink),Y.label=S),F&&((!I||!I.native)&&(Y.id=void 0),Y["aria-describedby"]=void 0);const[oe,Ne]=Ot("input",{elementType:Xe,externalForwardedProps:fe,additionalProps:Y,ownerState:K}),[ae,_e]=Ot("inputLabel",{elementType:$y,externalForwardedProps:fe,ownerState:K}),[yt,nt]=Ot("htmlInput",{elementType:"input",externalForwardedProps:fe,ownerState:K}),[He,Wt]=Ot("formHelperText",{elementType:Oy,externalForwardedProps:fe,ownerState:K}),[st,ze]=Ot("select",{elementType:xh,externalForwardedProps:fe,ownerState:K}),H=v.jsx(oe,{"aria-describedby":re,autoComplete:s,autoFocus:i,defaultValue:c,fullWidth:p,multiline:M,name:P,rows:D,maxRows:w,minRows:O,type:$,value:se,id:ie,inputRef:x,onBlur:L,onChange:y,onFocus:E,placeholder:B,inputProps:nt,slots:{input:N.htmlInput?yt:void 0},...Ne});return v.jsxs(Mv,{className:te(Q.root,a),disabled:u,error:h,fullWidth:p,ref:t,required:j,color:l,variant:G,ownerState:K,...Z,children:[S!=null&&S!==""&&v.jsx(ae,{htmlFor:ie,id:be,..._e,children:S}),F?v.jsx(st,{"aria-describedby":re,id:ie,labelId:be,value:se,input:H,...ze,children:o}):H,f&&v.jsx(He,{id:re,...Wt,children:f})]})}),wh=C.createContext(void 0);function gr(){const n=C.useContext(wh);if(n===void 0)throw new Error("useEditorContext must be within a EditorProvider");return n}const Sh=({children:n,editorId:e,hideForbiddenTools:t,activeTool:r,setActiveTool:s,activeColor:i,setActiveColor:o,presetName:a,setPresetName:l,presetDescription:c,setPresetDescription:u,shapes:h,setShapes:d,addShape:p,addShapes:f,removeShape:g,configuration:m,metadata:b,setMetadata:_,onSubmit:x})=>v.jsx(wh.Provider,{value:{editorId:e,hideForbiddenTools:t,activeTool:r,setActiveTool:s,activeColor:i,setActiveColor:o,presetName:a,setPresetName:l,presetDescription:c,setPresetDescription:u,shapes:h,setShapes:d,addShape:p,addShapes:f,removeShape:g,configuration:m,metadata:b,setMetadata:_,onSubmit:x},children:n});Sh.__docgenInfo={description:"",methods:[],displayName:"EditorProvider",props:{hideForbiddenTools:{required:!0,tsType:{name:"boolean"},description:""},activeTool:{required:!0,tsType:{name:"ToolEnum"},description:""},setActiveTool:{required:!0,tsType:{name:"signature",type:"function",raw:"(tool: ToolEnum) => void",signature:{arguments:[{type:{name:"ToolEnum"},name:"tool"}],return:{name:"void"}}},description:""},activeColor:{required:!0,tsType:{name:"string"},description:""},setActiveColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},presetName:{required:!0,tsType:{name:"string"},description:""},setPresetName:{required:!0,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},presetDescription:{required:!0,tsType:{name:"string"},description:""},setPresetDescription:{required:!0,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},shapes:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ type: ShapeType; shape: Shape }",signature:{properties:[{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle | ToolEnum.Point",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"},{name:"ToolEnum.Point"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline | fabric.Circle) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"Record<string, { type: ShapeType; shape: Shape }>"},description:""},setShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"(shapes: Shapes) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ type: ShapeType; shape: Shape }",signature:{properties:[{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle | ToolEnum.Point",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"},{name:"ToolEnum.Point"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline | fabric.Circle) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"Record<string, { type: ShapeType; shape: Shape }>"},name:"shapes"}],return:{name:"void"}}},description:""},addShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, type: ShapeType, shape: Shape) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle | ToolEnum.Point",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"},{name:"ToolEnum.Point"}]},name:"type"},{type:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline | fabric.Circle) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}]},name:"shape"}],return:{name:"void"}}},description:""},addShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"(shapes: { id: string; type: ShapeType; shape: Shape }[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; type: ShapeType; shape: Shape }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle | ToolEnum.Point",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"},{name:"ToolEnum.Point"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline | fabric.Circle) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"{ id: string; type: ShapeType; shape: Shape }[]"},name:"shapes"}],return:{name:"void"}}},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},configuration:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: ConfigurationParameter[]
  rois: RoiConfiguration[]
  options?: {
    hideForbiddenTools?: boolean
    description?: string
    viewMainParameters?: boolean
  }
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  role: string
  label: string
  type: Omit<ShapeType, 'pointer'>
  multiplicity: {
    operator: OperatorEnum
    threshold: number
  }
  parameters: ConfigurationParameter[]
}`,signature:{properties:[{key:"role",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"Omit",elements:[{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle | ToolEnum.Point",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"},{name:"ToolEnum.Point"}]},{name:"literal",value:"'pointer'"}],raw:"Omit<ShapeType, 'pointer'>",required:!0}},{key:"multiplicity",value:{name:"signature",type:"object",raw:`{
  operator: OperatorEnum
  threshold: number
}`,signature:{properties:[{key:"operator",value:{name:"OperatorEnum",required:!0}},{key:"threshold",value:{name:"number",required:!0}}]},required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}}]}}],raw:"RoiConfiguration[]",required:!0}},{key:"options",value:{name:"signature",type:"object",raw:`{
  hideForbiddenTools?: boolean
  description?: string
  viewMainParameters?: boolean
}`,signature:{properties:[{key:"hideForbiddenTools",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"viewMainParameters",value:{name:"boolean",required:!1}}]},required:!1}}]}},description:""},metadata:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: OutputParameter[]
  rois: {
    id: string
    parameters: OutputParameter[]
    name: string
    role: string
  }[]
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string
  parameters: OutputParameter[]
  name: string
  role: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"role",value:{name:"string",required:!0}}]}}],raw:`{
  id: string
  parameters: OutputParameter[]
  name: string
  role: string
}[]`,required:!0}}]}},description:""},setMetadata:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: Metadata) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  parameters: OutputParameter[]
  rois: {
    id: string
    parameters: OutputParameter[]
    name: string
    role: string
  }[]
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string
  parameters: OutputParameter[]
  name: string
  role: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"role",value:{name:"string",required:!0}}]}}],raw:`{
  id: string
  parameters: OutputParameter[]
  name: string
  role: string
}[]`,required:!0}}]}},name:"data"}],return:{name:"void"}}},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},editorId:{required:!0,tsType:{name:"string"},description:""}}};const mn=(n,e,...t)=>e&&console[n](...t),V=(n,e,t)=>`${e[n]} ${e[`${n}-${t}`]} react-cam-roi-${n}${t?`react-cam-roi-${n}-${t}`:""}`,Dv=n=>n.replace(/([A-Z])/g," $1").replace("_"," ").replace(/^./,e=>e.toUpperCase()),Ft=(n,e)=>(Object.keys(e).forEach(t=>{n=n.replace(`{${t}}`,e[t].toString())}),n),Qe=(n,e)=>Math.round(n/e*100*100)/100,ct=(n,e)=>Math.round(e*n*100/100)/100,Rr={"bool-field":"_bool-field_116ff_2","bool-field-light":"_bool-field-light_116ff_20","bool-field-dark":"_bool-field-dark_116ff_25","bool-field-error":"_bool-field-error_116ff_30","bool-field-label":"_bool-field-label_116ff_33","bool-field-label-error":"_bool-field-label-error_116ff_44","bool-field-helper-text":"_bool-field-helper-text_116ff_47","bool-field-helper-text-error":"_bool-field-helper-text-error_116ff_58"},_h=({onChange:n,checked:e,label:t,helperText:r,error:s,readOnly:i=!1,disabled:o=!1,required:a=!1})=>{const{themeMode:l,Typography:c}=C.useContext(Fe),u=h=>{n(h.target.checked)};return v.jsxs("div",{className:V("bool-field-wrapper",Rr,l),children:[v.jsx("label",{className:`${V("bool-field-label",Rr,l)} ${s?V("bool-field-label-error",Rr,null):""}`,children:v.jsxs(c,{children:[t,a&&" *"]})}),v.jsx("input",{type:"checkbox",className:`${V("bool-field",Rr,l)} ${s?V("bool-field-error",Rr,null):""}`,onChange:u,checked:e,readOnly:i,disabled:o}),r&&v.jsx(c,{component:"div",className:`${V("bool-field-helper-text",Rr,l)} ${s?V("bool-field-helper-text-error",Rr,null):""}`,children:r})]})};_h.__docgenInfo={description:"",methods:[],displayName:"BoolField",props:{readOnly:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1}}};const Rv="_button_1eb1r_1",Oc={button:Rv,"button-light":"_button-light_1eb1r_16","button-dark":"_button-dark_1eb1r_21","button-disabled":"_button-disabled_1eb1r_26"},Th=({onClick:n,primary:e,disabled:t,children:r})=>{const{themeMode:s,primaryColor:i}=C.useContext(Fe),o={};return e&&(o.backgroundColor=i,o.color="white"),v.jsx("button",{className:`${V("button",Oc,s)}${t?` ${V("button-disabled",Oc,s)}`:""}`,style:o,onClick:n,disabled:t,children:r})};Th.__docgenInfo={description:"",methods:[],displayName:"Button",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"event"}],return:{name:"void"}}},description:""},primary:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const jr={"enum-field":"_enum-field_yraf1_2","enum-field-light":"_enum-field-light_yraf1_21","enum-field-dark":"_enum-field-dark_yraf1_26","enum-field-error":"_enum-field-error_yraf1_31","enum-field-label":"_enum-field-label_yraf1_34","enum-field-label-error":"_enum-field-label-error_yraf1_45","enum-field-helper-text":"_enum-field-helper-text_yraf1_48","enum-field-helper-text-error":"_enum-field-helper-text-error_yraf1_59"},kh=({onChange:n,value:e,label:t,helperText:r,error:s,options:i,disabled:o=!1,required:a=!1,multiple:l=!1})=>{const{themeMode:c,Typography:u}=C.useContext(Fe),h=d=>{const p=Array.from(d.target.selectedOptions,f=>isNaN(Number(f.value))?f.value:Number(f.value));n(l?p:p[0])};return v.jsxs("div",{className:V("enum-field-wrapper",jr,c),children:[v.jsx("label",{className:`${V("enum-field-label",jr,c)} ${s?V("enum-field-label-error",jr,null):""}`,children:v.jsxs(u,{children:[t,a&&" *"]})}),v.jsxs("select",{className:`${V("enum-field",jr,c)} ${s?V("enum-field-error",jr,null):""}`,onChange:h,value:e,disabled:o,multiple:l,children:[!a&&v.jsx("option",{value:""}),i.map(d=>v.jsx("option",{value:d.value,children:d.label},d.value))]}),r&&v.jsx(u,{component:"div",className:`${V("enum-field-helper-text",jr,c)} ${s?V("enum-field-helper-text-error",jr,null):""}`,children:r})]})};kh.__docgenInfo={description:"",methods:[],displayName:"EnumField",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: T
  label: string
}`,signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"EnumOption<T>[]"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{defaultValue:{value:"false",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1}}};const Pc={"icon-button":"_icon-button_wftrq_1","icon-button-light":"_icon-button-light_wftrq_9","icon-button-dark":"_icon-button-dark_wftrq_13","icon-button-disabled":"_icon-button-disabled_wftrq_17"},Oh=({children:n,disabled:e,onClick:t})=>{const{themeMode:r}=C.useContext(Fe);return v.jsx("div",{className:`${V("icon-button",Pc,r)} ${e?V("icon-button-disabled",Pc,r):""}`,onClick:e?void 0:t,children:n})};Oh.__docgenInfo={description:"",methods:[],displayName:"IconButton"};const el=({color:n="black",style:e={}})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:v.jsx("path",{fill:n,d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})});el.__docgenInfo={description:"",methods:[],displayName:"CloseIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const jv="_modal_hvjsg_1",un={"modal-overlay":"_modal-overlay_hvjsg_1","modal-overlay-light":"_modal-overlay-light_hvjsg_13","modal-overlay-dark":"_modal-overlay-dark_hvjsg_17",modal:jv,"modal-light":"_modal-light_hvjsg_33","modal-dark":"_modal-dark_hvjsg_39","modal-xs":"_modal-xs_hvjsg_45","modal-sm":"_modal-sm_hvjsg_49","modal-md":"_modal-md_hvjsg_53","modal-lg":"_modal-lg_hvjsg_57","modal-xl":"_modal-xl_hvjsg_61","modal-header":"_modal-header_hvjsg_65","modal-title":"_modal-title_hvjsg_72","modal-title-light":"_modal-title-light_hvjsg_78","modal-title-dark":"_modal-title-dark_hvjsg_82","modal-footer":"_modal-footer_hvjsg_86"},Av=({isOpen:n,onClose:e,children:t,title:r,maxWidth:s,onSubmit:i})=>{const{themeMode:o,IconButton:a,Typography:l,Button:c,strings:u}=C.useContext(Fe),h=o==="light"?"black":"white";return n?Pu.createPortal(v.jsx("div",{className:V("modal-overlay",un,o),children:v.jsxs("div",{className:`${V("modal",un,o)} ${V(`modal-${s}`,un,o)}`,children:[v.jsxs("div",{className:V("modal-header",un,o),children:[v.jsx(l,{component:"h6",className:V("modal-title",un,o),children:r}),v.jsx(a,{onClick:e,children:v.jsx(el,{color:h})})]}),t,v.jsxs("div",{className:V("modal-footer",un,o),children:[v.jsx(c,{onClick:e,children:u.cancel}),i&&v.jsx(c,{primary:!0,onClick:i,children:u.save})]})]})}),document.body):null},Ar={"number-field":"_number-field_177yi_2","number-field-light":"_number-field-light_177yi_20","number-field-dark":"_number-field-dark_177yi_25","number-field-error":"_number-field-error_177yi_30","number-field-label":"_number-field-label_177yi_33","number-field-label-error":"_number-field-label-error_177yi_44","number-field-helper-text":"_number-field-helper-text_177yi_47","number-field-helper-text-error":"_number-field-helper-text-error_177yi_58"},Ph=({onChange:n,value:e,label:t,required:r,helperText:s,error:i})=>{const{themeMode:o,Typography:a}=C.useContext(Fe),l=c=>{n(parseFloat(c.target.value))};return v.jsxs("div",{className:V("number-field-wrapper",Ar,o),children:[v.jsx("label",{className:`${V("number-field-label",Ar,o)} ${i?V("number-field-label-error",Ar,null):""}`,children:v.jsxs(a,{children:[t,r&&" *"]})}),v.jsx("input",{type:"number",className:`${V("number-field",Ar,o)} ${i?V("number-field-error",Ar,null):""}`,onChange:l,value:e??""}),s&&v.jsx(a,{component:"div",className:`${V("number-field-helper-text",Ar,o)} ${i?V("number-field-helper-text-error",Ar,null):""}`,children:s})]})};Ph.__docgenInfo={description:"",methods:[],displayName:"NumberField"};function T(n,e,t){return(e=function(r){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ec(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ec(Object(t),!0).forEach(function(r){T(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ec(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pe(n,e){if(n==null)return{};var t,r,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function Pr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class Mc{constructor(){T(this,"browserShadowBlurConstant",1),T(this,"DPI",96),T(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),T(this,"perfLimitSizeTotal",2097152),T(this,"maxCacheSideLimit",4096),T(this,"minCacheSideLimit",256),T(this,"disableStyleCopyPaste",!1),T(this,"enableGLFiltering",!0),T(this,"textureSize",4096),T(this,"forceGLPutImageData",!1),T(this,"cachesBoundsOfCurve",!1),T(this,"fontPaths",{}),T(this,"NUM_FRACTION_DIGITS",4)}}const le=new class extends Mc{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=k(k({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new Mc,t=(n==null?void 0:n.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},Tr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class Gt extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Fv extends Gt{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class Iv{}class Lv extends Iv{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),Tr("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Bv={};let Dc;const Jt=()=>Dc||(Dc={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new Lv,dispose(){},copyPasteData:Bv}),Dn=()=>Jt().document,tl=()=>Jt().window,Eh=()=>{var n;return Math.max((n=le.devicePixelRatio)!==null&&n!==void 0?n:tl().devicePixelRatio,1)},ts=new class{constructor(){T(this,"charWidthsCache",{}),T(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=le,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},aa="6.5.4";function di(){}const ws=Math.PI/2,Ti=2*Math.PI,rl=Math.PI/180,at=Object.freeze([1,0,0,1,0,0]),nl=16,xr=.4477152502,ee="center",pe="left",dt="top",la="bottom",Ie="right",pt="none",sl=/\r?\n/,Mh="moving",to="scaling",Dh="rotating",il="rotate",Rh="skewing",us="resizing",Nv="modifyPoly",$v="modifyPath",ki="changed",ro="scale",mt="scaleX",Mt="scaleY",Rn="skewX",jn="skewY",qe="fill",ft="stroke",Oi="modified",hn="json",To="svg",q=new class{constructor(){this[hn]=new Map,this[To]=new Map}has(n){return this[hn].has(n)}getClass(n){const e=this[hn].get(n);if(!e)throw new Gt("No class registered for ".concat(n));return e}setClass(n,e){e?this[hn].set(e,n):(this[hn].set(n.type,n),this[hn].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[To].get(n)}setSVGClass(n,e){this[To].set(e??n.type.toLowerCase(),n)}},Pi=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class Wv{constructor(){T(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,i]=r;this.on(s,i)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[i,o]=s;r.push(this.once(i,o))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,i]=r;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const gn=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},pr=n=>{if(n===0)return 1;switch(Math.abs(n)/ws){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},fr=n=>{if(n===0)return 0;const e=n/ws,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class R{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new R(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new R(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new R(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new R(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new R(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new R(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new R(this.x/e.x,this.y/e.y)}scalarDivide(e){return new R(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new R(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new R(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new R(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new R(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ol;const r=fr(e),s=pr(e),i=this.subtract(t);return new R(i.x*s-i.y*r,i.x*r+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new R(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const ol=new R(0,0),pi=n=>!!n&&Array.isArray(n._objects);function jh(n){class e extends n{constructor(){super(...arguments),T(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(r,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(r){this.getObjects().forEach((s,i,o)=>r(s,i,o))}getObjects(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(gn(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(gn(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==0){const o=this.findNewLowerIndex(r,i,s);return gn(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(r,i,s);return gn(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(gn(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(r,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(r){let{left:s,top:i,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new R(s,i),h=u.add(new R(o,a));for(let d=this._objects.length-1;d>=0;d--){const p=this._objects[d];p.selectable&&p.visible&&(l&&p.intersectsWithRect(u,h)||p.isContainedWithinRect(u,h)||l&&p.containsPoint(u)||l&&p.containsPoint(h))&&c.push(p)}return c}}return e}class Ah extends Wv{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function fi(n){return tl().requestAnimationFrame(n)}function zv(n){return tl().cancelAnimationFrame(n)}let qv=0;const kr=()=>qv++,$t=()=>{const n=Dn().createElement("canvas");if(!n||n.getContext===void 0)throw new Gt("Failed to create `canvas` element");return n},Vv=()=>Dn().createElement("img"),Qt=n=>{const e=$t();return e.width=n.width,e.height=n.height,e},Fh=(n,e,t)=>n.toDataURL("image/".concat(e),t),Le=n=>n*rl,Yr=n=>n/rl,Xv=n=>n.every((e,t)=>e===at[t]),ut=(n,e,t)=>new R(n).transform(e,t),Lt=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:s}=new R(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},Ze=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],al=(n,e)=>n.reduceRight((t,r)=>r&&t?Ze(r,t,e):r||t,void 0)||at.concat(),Ih=n=>{let[e,t]=n;return Math.atan2(t,e)},Ei=n=>{const e=Ih(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),s=(n[0]*n[3]-n[2]*n[1])/r,i=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Yr(e),scaleX:r,scaleY:s,skewX:Yr(i),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Ss=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function _s(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Le(n),s=pr(r),i=fr(r);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const ll=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},Lh=n=>Math.tan(Le(n)),Bh=n=>[1,0,Lh(n),1,0,0],Nh=n=>[1,Lh(n),0,1,0,0],no=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=n,a=ll(r?-e:e,s?-t:t);return i&&(a=Ze(a,Bh(i),!0)),o&&(a=Ze(a,Nh(o),!0)),a},Hv=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let s=Ss(e,t);r&&(s=Ze(s,_s({angle:r})));const i=no(n);return Xv(i)||(s=Ze(s,i)),s},gi=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new Fv("loadImage"));const i=Vv();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(i)};n?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Gt("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=n):a()})},hs=function(n){let{signal:e,reviver:t=di}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(n.map(o=>q.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(r).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},so=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const i=Object.values(n).map(a=>a&&a.type&&q.has(a.type)?hs([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(n);Promise.all(i).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},An=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},cl=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Rc={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},ko=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),jc=(n,e,t,r)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),i=Math.min(n,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},Ac=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},js=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Fc=n=>{let[e,t,r,s=1]=n;const i=Math.round(.3*e+.59*t+.11*r);return[i,i,i,s]};class ge{constructor(e){if(T(this,"isUnrecognised",!1),e)if(e instanceof ge)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,i=1]=e;this.setSource([t,r,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Rc&&(e=Rc[e]),e==="transparent"?[255,255,255,0]:ge.sourceFromHex(e)||ge.sourceFromRgb(e)||ge.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=jc(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=jc(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(js(e)).concat(js(t)).concat(js(r)).concat(js(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(Fc(this.getSource())),this}toBlackWhite(e){const[t,,,r]=Fc(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof ge||(e=new ge(e));const t=this.getSource(),r=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return ge.fromRgba(e)}static fromRgba(e){return new ge(ge.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,s,i,Ac(t[4])]}}static fromHsl(e){return ge.fromHsla(e)}static fromHsla(e){return new ge(ge.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ge.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,u=2*i-c;o=ko(u,c,r+1/3),a=ko(u,c,r),l=ko(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Ac(t[4])]}static fromHex(e){return new ge(ge.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=r.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Yr(r):t.includes("turn")?360*r:r}}const Re=(n,e)=>parseFloat(Number(n).toFixed(e)),Sn=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nl;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),s=le.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},Yv=n=>{const[e,t]=n.trim().split(" "),[r,s]=(i=e)&&i!==pt?[i.slice(1,4),i.slice(5,8)]:i===pt?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},Mi=n=>"matrix("+n.map(e=>Re(e,le.NUM_FRACTION_DIGITS)).join(" ")+")",ds=function(n,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new ge(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(r=o.toString())}else t="none";return s?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},Pt=n=>!!n&&n.toLive!==void 0,Ic=n=>!!n&&typeof n.toObject=="function",Lc=n=>!!n&&n.offsetX!==void 0&&"source"in n,Br=n=>!!n&&"multiSelectionStacking"in n;function $h(n){const e=n&&It(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let s=n;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,r=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const It=n=>n.ownerDocument||null,Wh=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},zh=function(n,e,t){let{width:r,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=s,i>1&&(n.setAttribute("width",(r*i).toString()),n.setAttribute("height",(s*i).toString()),e.scale(i,i))},ca=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Bc(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=pt,n}class qh{constructor(e){T(this,"_originalCanvasStyle",void 0),T(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&Dn().getElementById(e)||$t();var r;if(t.hasAttribute("data-fabric"))throw new Gt("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;zh(r,s,e,t)}setCSSDimensions(e){ca(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&It(e),s={left:0,top:0};if(!r)return s;const i=((t=Wh(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=$h(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){Jt().dispose(this.lower.el),delete this.lower}}const Uv={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...at]};class Ts extends jh(Ah){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Ts.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new qh(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(Tr("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Eh():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=k({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],i=ut(e,Lt(s));s[0]=t,s[3]=t;const o=ut(i,s);s[4]+=r.x-o.x,s[5]+=r.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new R(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new R(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=fi(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=Lt(this.viewportTransform),s=ut({x:0,y:0},r),i=ut({x:e,y:t},r),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new R(a.x,o.y),bl:new R(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(zv(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!s)return;const a=Pt(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...i),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new R(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new R(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new R(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new R(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new R(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return ut(this.getCenterPoint(),Lt(this.viewportTransform))}_centerObject(e,t){e.setXY(t,ee,ee),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return k(k(k({version:aa},An(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return Pt(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),Pt(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=le.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(Re(-l[4]/l[0],i)," ").concat(Re(-l[5]/l[3],i)," ").concat(Re(this.width/l[0],i)," ").concat(Re(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",aa,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(kr()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(Pt(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(i,{additionalTransform:r?Mi(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=le.fontPaths;this._objects.forEach(function i(o){e.push(o),pi(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:h=""}=u;!t[h]&&r[h]&&(t[h]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(r[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(Pt(r)){const s=r.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?Mi(Lt(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Lc(r)?i:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Lc(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Gt("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([hs(i,{reviver:t,signal:r}),so({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[p,f]=d;return this.clear(),this.add(...p),this.set(s),this.set(f),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Qt(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Fh(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,p=c*e,f=this.viewportTransform,g=[p,0,0,p,(f[4]-(s||0))*e,(f[5]-(i||0))*e],m=this.enableRetinaScaling,b=Qt({width:a,height:l}),_=o?this._objects.filter(x=>o(x)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=g,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),_),this.viewportTransform=f,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=m,this.skipControlsDrawing=d,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Pi.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}T(Ts,"ownDefaults",Uv);const Gv=["touchstart","touchmove","touchend"],Kv=n=>{const e=$h(n.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(n);return new R(t.clientX+e.left,t.clientY+e.top)},ua=n=>Gv.includes(n.type)||n.pointerType==="touch",ha=n=>{n.preventDefault(),n.stopPropagation()},lr=n=>{let e=0,t=0,r=0,s=0;for(let i=0,o=n.length;i<o;i++){const{x:a,y:l}=n[i];(a>r||!i)&&(r=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:r-e,height:s-t}},Zv=["translateX","translateY","scaleX","scaleY"],Jv=(n,e)=>Di(n,Ze(e,n.calcOwnMatrix())),Di=(n,e)=>{const t=Ei(e),{translateX:r,translateY:s,scaleX:i,scaleY:o}=t,a=Pe(t,Zv),l=new R(r,s);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:i,scaleY:o}),n.setPositionByOrigin(l,ee,ee)},Qv=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},Vh=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),ul=(n,e,t)=>{const r=n/2,s=e/2,i=[new R(-r,-s),new R(r,-s),new R(-r,s),new R(r,s)].map(a=>a.transform(t)),o=lr(i);return new R(o.width,o.height)},io=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:at;return Ze(Lt(arguments.length>1&&arguments[1]!==void 0?arguments[1]:at),n)},_n=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:at;return n.transform(io(e,t))},eb=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:at,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:at;return n.transform(io(e,t),!0)},tb=(n,e,t)=>{const r=io(e,t);return Di(n,Ze(r,n.calcOwnMatrix())),r},Xh=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),k(k({},e),{},{target:r})),r.fire(n,e)},rb={left:-.5,top:-.5,center:0,bottom:.5,right:.5},We=n=>typeof n=="string"?rb[n]:n-.5,Ri="not-allowed";function Hh(n){return We(n.originX)===We(ee)&&We(n.originY)===We(ee)}function Nc(n){return .5-We(n)}const Bt=(n,e)=>n[e],Yh=(n,e,t,r)=>({e:n,transform:e,pointer:new R(t,r)});function Uh(n,e){const t=n.getTotalAngle()+Yr(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function hl(n,e,t,r,s){var i;let{target:o,corner:a}=n;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,u=o.padding/c,h=function(d,p,f,g){const m=d.getRelativeCenterPoint(),b=f!==void 0&&g!==void 0?d.translateToGivenOrigin(m,ee,ee,f,g):new R(d.left,d.top);return(d.angle?p.rotate(-Le(d.angle),m):p).subtract(b)}(o,new R(r,s),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const nb=(n,e,t,r)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=r-o,c=!Bt(s,"lockMovementX")&&s.left!==a,u=!Bt(s,"lockMovementY")&&s.top!==l;return c&&s.set(pe,a),u&&s.set(dt,l),(c||u)&&Xh(Mh,Yh(n,e,t,r)),c||u};class Gh{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):pt,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=ds(qe,this.fill);return[ds(ft,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Mi(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,p=this.shadow,f=[],g=e.indexOf("COMMON_PARTS");let m;l&&(l.clipPathId="CLIPPATH_".concat(kr()),m='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&f.push("<g ",a,this.getSvgCommons(),` >
`),f.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const b=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[g]=b,Pt(d)&&f.push(d.toSVG(this)),Pt(h)&&f.push(h.toSVG(this)),p&&f.push(p.toSVG(this)),l&&f.push(m),f.push(e.join("")),f.push(`</g>
`),u&&f.push(`</g>
`),r?r(f.join("")):f.join("")}addPaintOrder(){return this.paintFirst!==qe?' paint-order="'.concat(this.paintFirst,'" '):""}}function oo(n){return new RegExp("^("+n.join("|")+")\\b","i")}var $c;const Ur=String.raw($c||($c=Pr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),sb=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Ur+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Ur+"))?\\s+(.*)"),ib={cx:pe,x:pe,r:"radius",cy:dt,y:dt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Oo="font-size",Po="clip-path";oo(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);oo(["symbol","image","marker","pattern","view","svg"]);const Wc=oo(["symbol","g","a","svg","clipPath","defs"]),ob=new R(1,0),Kh=new R,Zh=(n,e)=>n.rotate(e),da=(n,e)=>new R(e).subtract(n),pa=n=>n.distanceFrom(Kh),fa=(n,e)=>Math.atan2(rs(n,e),lb(n,e)),ab=n=>fa(ob,n),dl=n=>n.eq(Kh)?n:n.scalarDivide(pa(n)),Jh=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return dl(new R(-n.y,n.x).scalarMultiply(e?1:-1))},rs=(n,e)=>n.x*e.y-n.y*e.x,lb=(n,e)=>n.x*e.x+n.y*e.y,zc=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=rs(e,t),s=rs(e,n),i=rs(t,n);return r>=0?s>=0&&i<=0:!(s<=0&&i>=0)},qc="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Vc=new RegExp("(?:\\s|^)"+qc+qc+"("+Ur+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class cr{constructor(e){const t=typeof e=="string"?cr.parseShadow(e):e;Object.assign(this,cr.ownDefaults,t),this.id=kr()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,i=0]=(Vc.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(Vc,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Zh(new R(this.offsetX,this.offsetY),Le(-e.angle)),r=new ge(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*Re((Math.abs(t.x)+this.blur)/e.width,le.NUM_FRACTION_DIGITS)+20,i=100*Re((Math.abs(t.y)+this.blur)/e.height,le.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Re(this.blur?this.blur/2:0,le.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Re(t.x,le.NUM_FRACTION_DIGITS),'" dy="').concat(Re(t.y,le.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=cr.ownDefaults;return this.includeDefaultValues?e:cl(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}T(cr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),T(cr,"type","shadow"),q.setClass(cr,"shadow");const En=(n,e,t)=>Math.max(n,Math.min(e,t)),cb=[dt,pe,mt,Mt,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Rn,jn],mr=[qe,ft,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],ub={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:pe,originY:dt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:qe,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},hb=(n,e,t,r)=>-t*Math.cos(n/r*ws)+t+e,db=()=>!1;class pl{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:i=0,easing:o=hb,onStart:a=di,onChange:l=di,onComplete:c=di,abort:u=db,target:h}=e;T(this,"_state","pending"),T(this,"durationProgress",0),T(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>fi(e),this.delay):fi(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:i}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),fi(this.tick)))}register(){Pi.push(this)}unregister(){Pi.remove(this)}abort(){this._state="aborted",this.unregister()}}const pb=["startValue","endValue"];class fb extends pl{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(k(k({},Pe(e,pb)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const gb=["startValue","endValue"];class mb extends pl{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(k(k({},Pe(e,gb)),{},{startValue:t,byValue:r.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const yb=["startValue","endValue","easing","onChange","onComplete","abort"],vb=(n,e,t,r)=>e+t*(1-Math.cos(n/r*ws)),Eo=n=>n&&((e,t,r)=>n(new ge(e).toRgba(),t,r));class bb extends pl{constructor(e){let{startValue:t,endValue:r,easing:s=vb,onChange:i,onComplete:o,abort:a}=e,l=Pe(e,yb);const c=new ge(t).getSource(),u=new ge(r).getSource();super(k(k({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:s,onChange:Eo(i),onComplete:Eo(o),abort:Eo(a)}))}calculate(e){const[t,r,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,s].map(Math.round),En(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function Qh(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new mb(n):new fb(n);return e.start(),e}function xb(n){const e=new bb(n);return e.start(),e}class De{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const i=da(t,r),o=da(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new R(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,r);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-r.x,u=s.y-r.y,h=e.x-r.x,d=e.y-r.y,p=c*d-u*h,f=a*d-l*h,g=u*a-c*l;if(g!==0){const m=p/g,b=f/g;return(i||0<=m&&m<=1)&&(o||0<=b&&b<=1)?new De("Intersection").append(new R(e.x+m*a,e.y+m*l)):new De}if(p===0||f===0){const m=i||o||De.isPointContained(e,r,s)||De.isPointContained(t,r,s)||De.isPointContained(r,e,t)||De.isPointContained(s,e,t);return new De(m?"Coincident":void 0)}return new De("Parallel")}static intersectSegmentLine(e,t,r,s){return De.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return De.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new De,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=De.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,r){return De.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new De,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=De.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),r.append(a,l)):r.append(...c.points)}return i.length>0&&i.length===e.length?new De("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),i=t.max(r),o=new R(i.x,s.y),a=new R(s.x,i.y);return De.intersectPolygonPolygon(e,[s,o,i,a])}}class Cb extends Ah{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?ut(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=ut(e,Lt(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new R(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,r,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>ut(a,o))}return i}intersectsWithRect(e,t){return De.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=De.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:i,height:o}=this.getBoundingRect();return r>=e.x&&r+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return De.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return lr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(mt,e),this._set(Mt,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Yr(Ih(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||at.concat()}calcACoords(){const e=_s({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=Ss(t,r),i=Ze(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:ut({x:-a,y:-l},i),tr:ut({x:a,y:-l},i),bl:ut({x:-a,y:l},i),br:ut({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,We(this.originX),We(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===r[o])?s.value:(this.group&&(t=Ze(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=Hv(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new R(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,i=0;this.strokeUniform&&(s=0,i=r);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new R(o*t.scaleX,a*t.scaleY):ul(o,a,no(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,r,s,i){let o=e.x,a=e.y;const l=We(s)-We(t),c=We(i)-We(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new R(o,a)}translateToCenterPoint(e,t,r){if(t===ee&&r===ee)return e;const s=this.translateToGivenOrigin(e,t,r,ee,ee);return this.angle?s.rotate(Le(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,ee,ee,t,r);return this.angle?s.rotate(Le(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?ut(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new R(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),pe,dt)}}const wb=["type"],Sb=["extraParam"];let nr=class mi extends Cb{static getDefaults(){return mi.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){Tr("warn","Setting type has no effect",e)}constructor(e){super(),T(this,"_cacheContext",null),Object.assign(this,mi.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=$t(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=le.maxCacheSideLimit,i=le.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=le.perfLimitSizeTotal)return t<i&&(e.width=i),r<i&&(e.height=i),e;const o=t/r,[a,l]=ts.limitDimsByArea(o),c=En(i,a,s),u=En(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||s!==e.height,u=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(c||u){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new R(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Ei(this.calcTransformMatrix());return new R(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==mt&&e!==Mt||(t=this._constrainScale(t)),e===mt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof cr||(t=new cr(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ft&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const r=Qt(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=Lt(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,Pt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(Pt(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(r==null?void 0:r.viewportTransform)||at,a=i*s,l=o*s,c=t.nonScaling?new R(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*le.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!Pt(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===ft?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=Qt({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new R(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(q.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Vh(this),r=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?Eh():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(_=>new Ts(_,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&Qv(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&tb(this,this.getViewportTransform()),this.setCoords();const c=$t(),u=this.getBoundingRect(),h=this.shadow,d=new R;if(h){const _=h.blur,x=h.nonScaling?new R(1,1):this.getObjectScaling();d.x=2*Math.round(i(h.offsetX)+_)*i(x.x),d.y=2*Math.round(i(h.offsetY)+_)*i(x.y)}const p=u.width+d.x,f=u.height+d.y;c.width=Math.ceil(p),c.height=Math.ceil(f);const g=l(c);e.format==="jpeg"&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new R(g.width/2,g.height/2),ee,ee);const m=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const b=g.toCanvasElement(a||1,e);return this.set("canvas",m),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Fh(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=ee,this.originY=ee,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=i,this.top=o,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Pi.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Jt().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[i,o]=s;return r[i]=this._animate(i,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u=k(k({},r),{},{target:this,startValue:a??s.reduce((h,d)=>h[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(h,d,p)=>{s.reduce((f,g,m)=>(m===s.length-1&&(f[g]=h),f[g]),this),l&&l(h,d,p)},onComplete:(h,d,p)=>{this.setCoords(),c&&c(h,d,p)}});return i?xb(u):Qh(u)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(s===r[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...r.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=r._objects.indexOf(s),a=r._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(mi.customProperties,this.constructor.customProperties||[]);let t;const r=le.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:p,height:f,strokeWidth:g,strokeLineCap:m,strokeDashOffset:b,strokeLineJoin:_,strokeUniform:x,strokeMiterLimit:S,scaleX:w,scaleY:O,angle:M,flipX:P,flipY:L,opacity:y,visible:E,backgroundColor:B,fillRule:j,paintFirst:D,globalCompositeOperation:F,skewX:I,skewY:N}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const W=se=>Re(se,r),$=k(k({},An(this,e)),{},{type:this.constructor.type,version:aa,originX:h,originY:d,left:W(c),top:W(u),width:W(p),height:W(f),fill:Ic(i)?i.toObject():i,stroke:Ic(o)?o.toObject():o,strokeWidth:W(g),strokeDashArray:l&&l.concat(),strokeLineCap:m,strokeDashOffset:b,strokeLineJoin:_,strokeUniform:x,strokeMiterLimit:W(S),scaleX:W(w),scaleY:W(O),angle:W(M),flipX:P,flipY:L,opacity:W(y),shadow:a&&a.toObject(),visible:E,backgroundColor:B,fillRule:j,paintFirst:D,globalCompositeOperation:F,skewX:W(I),skewY:W(N)},t?{clipPath:t}:null);return this.includeDefaultValues?$:this._removeDefaultValues($)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return cl(e,(s,i)=>{if(i===pe||i===dt||i==="type")return!0;const o=r[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=Pe(e,wb),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,i=Pe(r,Sb);return so(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};T(nr,"stateProperties",cb),T(nr,"cacheProperties",mr),T(nr,"ownDefaults",ub),T(nr,"type","FabricObject"),T(nr,"colorProperties",[qe,ft,"backgroundColor"]),T(nr,"customProperties",[]),q.setClass(nr),q.setClass(nr,"object");const Fn=(n,e,t)=>(r,s,i,o)=>{const a=e(r,s,i,o);return a&&Xh(n,k(k({},Yh(r,s,i,o)),t)),a};function In(n){return(e,t,r,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=n(e,t,r,s);return i.setPositionByOrigin(c,t.originX,t.originY),u}}const Xc=Fn(us,In((n,e,t,r)=>{const s=hl(e,e.originX,e.originY,t,r);if(We(e.originX)===We(ee)||We(e.originX)===We(Ie)&&s.x<0||We(e.originX)===We(pe)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=Hh(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function _b(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?ft:qe,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor);let u,h=e,d=t;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,n.scale(1,o/i),d=t*i/o):o>i?(u=o,n.scale(i/o,1),h=e*o/i):u=i,n.beginPath(),n.arc(h,d,u/2,0,Ti,!1),n[l](),c&&n.stroke(),n.restore()}function Tb(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?ft:qe,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor),u=i/2,h=o/2;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",n.translate(e,t);const d=s.getTotalAngle();n.rotate(Le(d)),n["".concat(l,"Rect")](-u,-h,i,o),c&&n.strokeRect(-u,-h,i,o),n.restore()}class At{constructor(e){T(this,"visible",!0),T(this,"actionName",ro),T(this,"angle",0),T(this,"x",0),T(this,"y",0),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"sizeX",0),T(this,"sizeY",0),T(this,"touchSizeX",0),T(this,"touchSizeY",0),T(this,"cursorStyle","crosshair"),T(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&De.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new R(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,i,o){const a=al([Ss(r,s),_s({angle:e}),ll((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new R(-.5,-.5).transform(a),tr:new R(.5,-.5).transform(a),br:new R(.5,.5).transform(a),bl:new R(-.5,.5).transform(a)}}render(e,t,r,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?_b.call(this,e,t,r,s,i):Tb.call(this,e,t,r,s,i)}}const kb=(n,e,t)=>t.lockRotation?Ri:e.cursorStyle,Ob=Fn(Dh,In((n,e,t,r)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Bt(s,"lockRotation"))return!1;const h=Math.atan2(o-u.y,i-u.x),d=Math.atan2(r-u.y,t-u.x);let p=Yr(d-h+a);if(s.snapAngle&&s.snapAngle>0){const g=s.snapAngle,m=s.snapThreshold||g,b=Math.ceil(p/g)*g,_=Math.floor(p/g)*g;Math.abs(p-_)<m?p=_:Math.abs(p-b)<m&&(p=b)}p<0&&(p=360+p),p%=360;const f=s.angle!==p;return s.angle=p,f}));function ed(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function td(n,e,t){const r=Bt(n,"lockScalingX"),s=Bt(n,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=n;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const Pb=["e","se","s","sw","w","nw","n","ne","e"],Zn=(n,e,t)=>{const r=ed(n,t);if(td(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return Ri;const s=Uh(t,e);return"".concat(Pb[s],"-resize")};function fl(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=ed(n,i);let l,c,u,h,d,p;if(td(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=hl(e,e.originX,e.originY,t,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,p=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=p),Bt(i,"lockScalingFlip")&&(e.signX!==d||e.signY!==p))return!1;if(h=i._getTransformedDimensions(),a&&!o){const m=Math.abs(l.x)+Math.abs(l.y),{original:b}=e,_=m/(Math.abs(h.x*b.scaleX/i.scaleX)+Math.abs(h.y*b.scaleY/i.scaleY));c=b.scaleX*_,u=b.scaleY*_}else c=Math.abs(l.x*i.scaleX/h.x),u=Math.abs(l.y*i.scaleY/h.y);Hh(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Nc(e.originX),c*=-1,e.signX=d),e.signY!==p&&o!=="x"&&(e.originY=Nc(e.originY),u*=-1,e.signY=p)}const f=i.scaleX,g=i.scaleY;return o?(o==="x"&&i.set(mt,c),o==="y"&&i.set(Mt,u)):(!Bt(i,"lockScalingX")&&i.set(mt,c),!Bt(i,"lockScalingY")&&i.set(Mt,u)),f!==i.scaleX||g!==i.scaleY}const As=Fn(to,In((n,e,t,r)=>fl(n,e,t,r))),Eb=Fn(to,In((n,e,t,r)=>fl(n,e,t,r,{by:"x"}))),Mb=Fn(to,In((n,e,t,r)=>fl(n,e,t,r,{by:"y"}))),Db=["target","ex","ey","skewingSide"],Mo={x:{counterAxis:"y",scale:mt,skew:Rn,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Mt,skew:jn,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},Rb=["ns","nesw","ew","nwse"],jb=(n,e,t)=>{if(e.x!==0&&Bt(t,"lockSkewingY")||e.y!==0&&Bt(t,"lockSkewingX"))return Ri;const r=Uh(t,e)%4;return"".concat(Rb[r],"-resize")};function rd(n,e,t,r,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=Mo[n];if(Bt(i,l))return!1;const{origin:h,flip:d}=Mo[o],p=We(t[h])*(i[d]?-1:1),f=-Math.sign(p)*(i[u]?-1:1),g=.5*-((i[c]===0&&hl(t,ee,ee,r,s)[n]>0||i[c]>0?1:-1)*f)+.5;return Fn(Rh,In((b,_,x,S)=>function(w,O,M){let{target:P,ex:L,ey:y,skewingSide:E}=O,B=Pe(O,Db);const{skew:j}=Mo[w],D=M.subtract(new R(L,y)).divide(new R(P.scaleX,P.scaleY))[w],F=P[j],I=B[j],N=Math.tan(Le(I)),W=w==="y"?P._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:P._getTransformedDimensions({scaleX:1,scaleY:1}).y,$=2*D*E/Math.max(W,1)+N,se=Yr(Math.atan($));P.set(j,se);const G=F!==P[j];if(G&&w==="y"){const{skewX:Z,scaleX:K}=P,Q=P._getTransformedDimensions({skewY:F}),ie=P._getTransformedDimensions(),re=Z!==0?Q.x/ie.x:1;re!==1&&P.set(mt,re*K)}return G}(n,_,new R(x,S))))(e,k(k({},t),{},{[a]:g,skewingSide:f}),r,s)}const Ab=(n,e,t,r)=>rd("x",n,e,t,r),Fb=(n,e,t,r)=>rd("y",n,e,t,r);function ao(n,e){return n[e.canvas.altActionKey]}const Fs=(n,e,t)=>{const r=ao(n,t);return e.x===0?r?Rn:Mt:e.y===0?r?jn:mt:""},yn=(n,e,t)=>ao(n,t)?jb(0,e,t):Zn(n,e,t),Hc=(n,e,t,r)=>ao(n,e.target)?Fb(n,e,t,r):Eb(n,e,t,r),Yc=(n,e,t,r)=>ao(n,e.target)?Ab(n,e,t,r):Mb(n,e,t,r),nd=()=>({ml:new At({x:-.5,y:0,cursorStyleHandler:yn,actionHandler:Hc,getActionName:Fs}),mr:new At({x:.5,y:0,cursorStyleHandler:yn,actionHandler:Hc,getActionName:Fs}),mb:new At({x:0,y:.5,cursorStyleHandler:yn,actionHandler:Yc,getActionName:Fs}),mt:new At({x:0,y:-.5,cursorStyleHandler:yn,actionHandler:Yc,getActionName:Fs}),tl:new At({x:-.5,y:-.5,cursorStyleHandler:Zn,actionHandler:As}),tr:new At({x:.5,y:-.5,cursorStyleHandler:Zn,actionHandler:As}),bl:new At({x:-.5,y:.5,cursorStyleHandler:Zn,actionHandler:As}),br:new At({x:.5,y:.5,cursorStyleHandler:Zn,actionHandler:As}),mtr:new At({x:0,y:-.5,actionHandler:Ob,cursorStyleHandler:kb,offsetY:-40,withConnection:!0,actionName:il})}),Ib=()=>({mr:new At({x:.5,y:0,actionHandler:Xc,cursorStyleHandler:yn,actionName:us}),ml:new At({x:-.5,y:0,actionHandler:Xc,cursorStyleHandler:yn,actionName:us})}),Lb=()=>k(k({},nd()),Ib());class ps extends nr{static getDefaults(){return k(k({},super.getDefaults()),ps.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),ps.ownDefaults),this.setOptions(e)}static createControls(){return{controls:nd()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(ro))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[i,o]=r[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=Ss(t.x,t.y),s=_s({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=Ze(r,s),o=Ze(e,i),a=Ze(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Ei(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const p=h.positionHandler(c,a,this,h);u[d]=Object.assign(p,this._calcCornerCoords(h,p))}),u}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Le(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=k({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,i=k({hasBorders:r,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=Ze(o,this.calcTransformMatrix()),u=Ei(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(Le(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const i=ul(this.width,this.height,no(t)),o=this.isStrokeAccountedForInDimensions()?ol:(this.strokeUniform?new R().scalarAdd(this.canvas?this.canvas.getZoom():1):new R(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=k({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function sd(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}T(ps,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class tt extends ps{}sd(tt,[Gh]),q.setClass(tt),q.setClass(tt,"object");const Bb=(n,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:i}=n.getImageData(e-r,t-r,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class id{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new R(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new R(1/this.options.scaleX,1/this.options.scaleY):new R(1,1)}createSideVector(e,t){const r=da(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new R(e);return t.y+=t.x*Math.tan(Le(this.options.skewY)),t.x+=t.y*Math.tan(Le(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const Nb=new R;class Tn extends id{static getOrthogonalRotationFactor(e,t){const r=t?fa(e,t):ab(e);return Math.abs(r)<ws?-1:1}constructor(e,t,r,s){super(s),T(this,"AB",void 0),T(this,"AC",void 0),T(this,"alpha",void 0),T(this,"bisector",void 0),this.A=new R(e),this.B=new R(t),this.C=new R(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=fa(this.AB,this.AC),this.bisector=dl(Zh(this.AB.eq(Nb)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=Jh(s),o=Tn.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,r*o)}projectBevel(){const e=[];return(this.alpha%Ti==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),i=this.options.strokeUniform?pa(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return pa(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new R(Tn.getOrthogonalRotationFactor(this.bisector),Tn.getOrthogonalRotationFactor(new R(this.bisector.y,this.bisector.x)));return[new R(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new R(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{zc(i,e,t)&&r.push(this.A.add(i))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new R(Math.tan(Le(s)),Math.tan(Le(i))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new R(Math.sqrt(Math.max(u**2-h**2,0)),h),p=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),f=new R(p,Math.sqrt(Math.max(u**2-p**2,0)));return[f,f.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(g=>this.applySkew(l?g.multiply(this.strokeUniformScalar):g)).forEach(g=>{zc(g,e,t)&&r.push(this.applySkew(this.A).add(g))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%Ti==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),i=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=rs(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Uc extends id{constructor(e,t,r){super(r),this.A=new R(e),this.T=new R(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(Jh(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new R(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Tn(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new R(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(dl(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const $b=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const s=n.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new R(o)),i),[new R(n[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?r.push(...new Uc(i,i,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new Tn(i,l,c,e).project()):r.push(...new Uc(i,o===0?c:l,e).project())}),r},gl=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=k({},n[t][r])})}),e},Wb=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ml=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=zb(n,r))!==!1&&e.push(t);return e},zb=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},yl=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},qb=(n,e)=>{const t=e.split(`
`),r=[];let s=-1,i={};n=gl(n);for(let o=0;o<t.length;o++){const a=ml(t[o]);if(n[o])for(let l=0;l<a.length;l++){s++;const c=n[o][l];c&&Object.keys(c).length>0&&(yl(i,c,!0)?r.push({start:s,end:s+1,style:c}):r[r.length-1].end++),i=c||{}}else s+=a.length,i={}}return r},Vb=(n,e)=>{if(!Array.isArray(n))return gl(n);const t=e.split(sl),r={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=ml(t[o]);for(let l=0;l<a.length;l++)s++,n[i]&&n[i].start<=s&&s<n[i].end&&(r[o]=r[o]||{},r[o][l]=k({},n[i].style),s===n[i].end-1&&i++)}return r},Er=["display","transform",qe,"fill-opacity","fill-rule","opacity",ft,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Gc(n,e){const t=n.nodeName,r=n.getAttribute("class"),s=n.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function Xb(n,e){let t=!0;const r=Gc(n,e.pop());return r&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=Gc(s=s.parentElement,o);return i.length===0}(n,e)),r&&t&&e.length===0}const Hb=n=>{var e;return(e=ib[n])!==null&&e!==void 0?e:n},Yb=new RegExp("(".concat(Ur,")"),"gi"),Ub=n=>n.replace(Yb," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Kc,Zc,Jc,Qc,eu,tu,ru;const ot="(".concat(Ur,")"),Gb=String.raw(Kc||(Kc=Pr(["(skewX)(",")"],["(skewX)\\(","\\)"])),ot),Kb=String.raw(Zc||(Zc=Pr(["(skewY)(",")"],["(skewY)\\(","\\)"])),ot),Zb=String.raw(Jc||(Jc=Pr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),ot,ot,ot),Jb=String.raw(Qc||(Qc=Pr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),ot,ot),Qb=String.raw(eu||(eu=Pr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),ot,ot),ex=String.raw(tu||(tu=Pr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),ot,ot,ot,ot,ot,ot),vl="(?:".concat(ex,"|").concat(Qb,"|").concat(Zb,"|").concat(Jb,"|").concat(Gb,"|").concat(Kb,")"),tx="(?:".concat(vl,"*)"),rx=String.raw(ru||(ru=Pr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),tx),nx=new RegExp(rx),sx=new RegExp(vl),ix=new RegExp(vl,"g");function ga(n){const e=[];if(!(n=Ub(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!nx.test(n))return[...at];for(const t of n.matchAll(ix)){const r=sx.exec(t[0]);if(!r)continue;let s=at;const i=r.filter(f=>!!f),[,o,...a]=i,[l,c,u,h,d,p]=a.map(f=>parseFloat(f));switch(o){case"translate":s=Ss(l,c);break;case il:s=_s({angle:l},{x:c,y:u});break;case ro:s=ll(l,c);break;case Rn:s=Bh(l);break;case jn:s=Nh(l);break;case"matrix":s=[l,c,u,h,d,p]}e.push(s)}return al(e)}function ox(n,e,t,r){const s=Array.isArray(e);let i,o=e;if(n!==qe&&n!==ft||e!==pt){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===pt?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Ze(t.transformMatrix,ga(e)):ga(e);else if(n==="visible")o=e!==pt&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?pe:e==="end"?Ie:ee;else if(n==="charSpacing")i=Sn(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(qe),l=e.indexOf(ft);o=qe,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=ft)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(Sn):Sn(e,r)}}else o="";return!s&&isNaN(i)?o:i}function ax(n,e){const t=n.match(sb);if(!t)return;const r=t[1],s=t[3],i=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=Sn(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function lx(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function cx(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?lx(t,e):function(r,s){Object.entries(r).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const ux={stroke:"strokeOpacity",fill:"fillOpacity"};function yr(n,e,t){if(!n)return{};let r,s={},i=nl;n.parentNode&&Wc.test(n.parentNode.nodeName)&&(s=yr(n.parentElement,e,t),s.fontSize&&(r=i=Sn(s.fontSize)));const o=k(k(k({},e.reduce((c,u)=>{const h=n.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)Xb(c,d.split(" "))&&(h=k(k({},h),u[d]));return h}(n,t)),cx(n));o[Po]&&n.setAttribute(Po,o[Po]),o[Oo]&&(r=Sn(o[Oo],i),o[Oo]="".concat(r));const a={};for(const c in o){const u=Hb(c),h=ox(u,o[c],s,r);a[u]=h}a&&a.font&&ax(a.font,a);const l=k(k({},s),a);return Wc.test(n.nodeName)?l:function(c){const u=tt.getDefaults();return Object.entries(ux).forEach(h=>{let[d,p]=h;if(c[p]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const f=new ge(c[d]);c[d]=f.setAlpha(Re(f.getAlpha()*c[p],2)).toRgba()}),c}(l)}const hx=["left","top","width","height","visible"],od=["rx","ry"];class bt extends tt{static getDefaults(){return k(k({},super.getDefaults()),bt.ownDefaults)}constructor(e){super(),Object.assign(this,bt.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,i=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-xr*o,i,s+t,i+xr*a,s+t,i+a),e.lineTo(s+t,i+r-a),l&&e.bezierCurveTo(s+t,i+r-xr*a,s+t-xr*o,i+r,s+t-o,i+r),e.lineTo(s+o,i+r),l&&e.bezierCurveTo(s+xr*o,i+r,s,i+r-xr*a,s,i+r-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+xr*a,s+xr*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...od,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=yr(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,u=Pe(s,hx);return new this(k(k(k({},t),u),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}T(bt,"type","Rect"),T(bt,"cacheProperties",[...mr,...od]),T(bt,"ownDefaults",{rx:0,ry:0}),T(bt,"ATTRIBUTE_NAMES",[...Er,"x","y","rx","ry","width","height"]),q.setClass(bt),q.setSVGClass(bt);const or="initialization",ji="added",bl="removed",Ai="imperative",ad=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:i,group:o}=e,a=o&&o!==n?io(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?eb(new R(r,r),void 0,n.calcTransformMatrix()):ol,h=!t&&c?r:0,d=ul(s+h,i+h,al([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class lo{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===or||t===Ai||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==or&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===Ai&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=lr(e.map(h=>ad(s,h)).reduce((h,d)=>h.concat(d),[])),c=new R(a,l),u=new R(i,o).add(c.scalarDivide(2));if(r===or){const h=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new R(0,0),size:h}}return{center:u.transform(s.calcOwnMatrix()),size:c}}}T(lo,"type","strategy");class ma extends lo{shouldPerformLayout(e){return!0}}T(ma,"type","fit-content"),q.setClass(ma);const dx=["strategy"],px=["target","strategy","bubbles","prevStrategy"],ld="layoutManager";class fs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ma;T(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=k(k({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[Oi,Mh,us,Dh,to,Rh,ki,Nv,$v].map(s=>e.on(s,i=>this.performLayout(s===Oi?{type:"object_modified",trigger:s,e:i,target:r}:{type:"object_modifying",trigger:s,e:i,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===or||r===ji?this.subscribeTargets(e):r===bl&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===Ai&&e.deep){const i=Pe(e,dx);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(k(k({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,i=r.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===or?new R:t.getRelativeCenterPoint(),{center:a,correction:l=new R,relativeCorrection:c=new R}=i,u=o.subtract(a).add(l).transform(s===or?at:Lt(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:i}=t;var o,a;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===or?r.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*We(r.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*We(r.originY)}):(r.setPositionByOrigin(i,ee,ee),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:i,prevStrategy:o}=e,a=Pe(e,px),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const c=r.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(k(k({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:ld,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}q.setClass(fs,ld);const fx=["type","objects","layoutManager"];class gx extends fs{performLayout(){}}class Vr extends jh(tt){static getDefaults(){return k(k({},super.getDefaults()),Vr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"_activeObjects",[]),T(this,"__objectSelectionTracker",void 0),T(this,"__objectSelectionDisposer",void 0),Object.assign(this,Vr.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new fs,this.layoutManager.performLayout({type:or,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(Tr("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(Tr("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(ji,s),i}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...i);return this._onAfterObjectsChange(ji,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(bl,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(r);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Di(e,Ze(Lt(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Di(e,Ze(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=tt.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...Lt(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(k({target:this,type:Ai},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=r;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return k(k(k({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=bt.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:i}=e,o=Pe(e,fx);return Promise.all([hs(s,t),so(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,k(k(k({},o),c),{},{layoutManager:new gx}));if(i){const h=q.getClass(i.type),d=q.getClass(i.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new fs;return u.layoutManager.subscribeTargets({type:or,target:u,targets:u.getObjects()}),u.setCoords(),u})}}T(Vr,"type","Group"),T(Vr,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),q.setClass(Vr);const mx=(n,e)=>Math.min(e.width/n.width,e.height/n.height),yx=(n,e)=>Math.max(e.width/n.width,e.height/n.height),ya="\\s*,?\\s*",Hn="".concat(ya,"(").concat(Ur,")"),vx="".concat(Hn).concat(Hn).concat(Hn).concat(ya,"([01])").concat(ya,"([01])").concat(Hn).concat(Hn),bx={m:"l",M:"L"},xx=(n,e,t,r,s,i,o,a,l,c,u)=>{const h=pr(n),d=fr(n),p=pr(e),f=fr(e),g=t*s*p-r*i*f+o,m=r*s*p+t*i*f+a;return["C",c+l*(-t*s*d-r*i*h),u+l*(-r*s*d+t*i*h),g+l*(t*s*f+r*i*p),m+l*(r*s*f-t*i*p),g,m]},nu=(n,e,t,r)=>{const s=Math.atan2(e,n),i=Math.atan2(r,t);return i>=s?i-s:2*Math.PI-(s-i)};function su(n,e,t,r,s,i,o,a){let l;if(le.cachesBoundsOfCurve&&(l=[...arguments].join(),ts.boundsOfCurveCache[l]))return ts.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let p=6*n-12*t+6*s,f=-3*n+9*t-9*s+3*o,g=3*t-3*n;for(let S=0;S<2;++S){if(S>0&&(p=6*e-12*r+6*i,f=-3*e+9*r-9*i+3*a,g=3*r-3*e),u(f)<1e-12){if(u(p)<1e-12)continue;const L=-g/p;0<L&&L<1&&h.push(L);continue}const w=p*p-4*g*f;if(w<0)continue;const O=c(w),M=(-p+O)/(2*f);0<M&&M<1&&h.push(M);const P=(-p-O)/(2*f);0<P&&P<1&&h.push(P)}let m=h.length;const b=m,_=cd(n,e,t,r,s,i,o,a);for(;m--;){const{x:S,y:w}=_(h[m]);d[0][m]=S,d[1][m]=w}d[0][b]=n,d[1][b]=e,d[0][b+1]=o,d[1][b+1]=a;const x=[new R(Math.min(...d[0]),Math.min(...d[1])),new R(Math.max(...d[0]),Math.max(...d[1]))];return le.cachesBoundsOfCurve&&(ts.boundsOfCurveCache[l]=x),x}const Cx=(n,e,t)=>{let[r,s,i,o,a,l,c,u]=t;const h=((d,p,f,g,m,b,_)=>{if(f===0||g===0)return[];let x=0,S=0,w=0;const O=Math.PI,M=_*rl,P=fr(M),L=pr(M),y=.5*(-L*d-P*p),E=.5*(-L*p+P*d),B=f**2,j=g**2,D=E**2,F=y**2,I=B*j-B*D-j*F;let N=Math.abs(f),W=Math.abs(g);if(I<0){const Y=Math.sqrt(1-I/(B*j));N*=Y,W*=Y}else w=(m===b?-1:1)*Math.sqrt(I/(B*D+j*F));const $=w*N*E/W,se=-w*W*y/N,G=L*$-P*se+.5*d,Z=P*$+L*se+.5*p;let K=nu(1,0,(y-$)/N,(E-se)/W),Q=nu((y-$)/N,(E-se)/W,(-y-$)/N,(-E-se)/W);b===0&&Q>0?Q-=2*O:b===1&&Q<0&&(Q+=2*O);const ie=Math.ceil(Math.abs(Q/O*2)),re=[],be=Q/ie,Xe=8/3*Math.sin(be/4)*Math.sin(be/4)/Math.sin(be/2);let fe=K+be;for(let Y=0;Y<ie;Y++)re[Y]=xx(K,fe,L,P,N,W,G,Z,Xe,x,S),x=re[Y][5],S=re[Y][6],K=fe,fe+=be;return re})(c-n,u-e,s,i,a,l,o);for(let d=0,p=h.length;d<p;d++)h[d][1]+=n,h[d][2]+=e,h[d][3]+=n,h[d][4]+=e,h[d][5]+=n,h[d][6]+=e;return h},wx=n=>{let e=0,t=0,r=0,s=0;const i=[];let o,a=0,l=0;for(const c of n){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],s=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":Cx(e,t,u).forEach(d=>i.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=s,h=["Z"]}h?(i.push(h),o=h[0]):o=""}return i},Fi=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),cd=(n,e,t,r,s,i,o,a)=>l=>{const c=l**3,u=(p=>3*p**2*(1-p))(l),h=(p=>3*p*(1-p)**2)(l),d=(p=>(1-p)**3)(l);return new R(o*c+s*u+t*h+n*d,a*c+i*u+r*h+e*d)},ud=n=>n**2,hd=n=>2*n*(1-n),dd=n=>(1-n)**2,Sx=(n,e,t,r,s,i,o,a)=>l=>{const c=ud(l),u=hd(l),h=dd(l),d=3*(h*(t-n)+u*(s-t)+c*(o-s)),p=3*(h*(r-e)+u*(i-r)+c*(a-i));return Math.atan2(p,d)},_x=(n,e,t,r,s,i)=>o=>{const a=ud(o),l=hd(o),c=dd(o);return new R(s*a+t*l+n*c,i*a+r*l+e*c)},Tx=(n,e,t,r,s,i)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(s-t)),c=2*(a*(r-e)+o*(i-r));return Math.atan2(c,l)},iu=(n,e,t)=>{let r=new R(e,t),s=0;for(let i=1;i<=100;i+=1){const o=n(i/100);s+=Fi(r.x,r.y,o.x,o.y),r=o}return s},kx=(n,e)=>{let t,r=0,s=0,i={x:n.x,y:n.y},o=k({},i),a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;s<e&&a>1e-4;)o=c(r),l=r,t=Fi(i.x,i.y,o.x,o.y),t+s>e?(r-=a,a/=2):(i=o,r+=a,s+=t);return k(k({},o),{},{angle:u(l)})},pd=n=>{let e,t,r=0,s=0,i=0,o=0,a=0;const l=[];for(const c of n){const u={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=u,t.length=Fi(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=cd(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=Sx(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=iu(e,s,i),s=c[5],i=c[6];break;case"Q":e=_x(s,i,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=Tx(s,i,c[1],c[2],c[3],c[4]),t.length=iu(e,s,i),s=c[3],i=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=Fi(s,i,o,a),s=o,i=a}r+=t.length,l.push(t)}return l.push({length:r,x:s,y:i}),l},Ox=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pd(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],i=e/s.length,o=n[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return k(k({},new R(s.x,s.y).lerp(new R(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return k(k({},new R(s.x,s.y).lerp(new R(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return kx(s,e)}},Px=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),ou=new RegExp(vx,"g"),Ex=new RegExp(Ur,"gi"),Mx={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Dx=n=>{var e;const t=[],r=(e=n.match(Px))!==null&&e!==void 0?e:[];for(const s of r){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=Mx[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){ou.lastIndex=0;for(let l=null;l=ou.exec(s);)a.push(...l.slice(1))}else a=s.match(Ex)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=bx[i];c[0]=l>0&&u?u:i;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},Rx=(n,e)=>n.map(t=>t.map((r,s)=>s===0||e===void 0?r:Re(r,e)).join(" ")).join(" ");function va(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,i]=r;return t.setProperty(s,i)}))}class jx extends qh{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),T(this,"upper",void 0),T(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=$t();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=Dn().createElement("div");return e.setAttribute("data-fabric","wrapper"),va(e,{position:"relative"}),Bc(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;va(e,k(k({},r),{},{"touch-action":s?"manipulation":pt})),Bc(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;zh(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),ca(this.upper.el,e),ca(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Jt().dispose(this.upper.el),delete this.upper,delete this.container}}class co extends Ts{constructor(){super(...arguments),T(this,"targets",[]),T(this,"_hoveredTargets",[]),T(this,"_objectsToRender",void 0),T(this,"_currentTransform",null),T(this,"_groupSelector",null),T(this,"contextTopDirty",!1)}static getDefaults(){return k(k({},super.getDefaults()),co.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new jx(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-r+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return Bb(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===ro||t===mt||t===Mt||t===us?s=this.centeredScaling||e.centeredScaling:t===il&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Ie:["mr","tr","br"].includes(t)&&(r.x=pe),["tl","mt","tr"].includes(t)?r.y=la:["bl","mb","br"].includes(t)&&(r.y=dt)),r}_setupCurrentTransform(e,t,r){var s;const i=t.group?_n(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):nb,c=((p,f,g,m)=>{if(!f||!p)return"drag";const b=m.controls[f];return b.getActionName(g,b,m)})(r,o,e,t),u=e[this.centeredKey],h=this._shouldCenterTransform(t,c,u)?{x:ee,y:ee}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:h.x,originY:h.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Le(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:k(k({},Vh(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new R(t,r).transform(this.viewportTransform),a=new R(t+s,r+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,tt.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,ua(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=i,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),h=pr(u)*i,d=fr(u)*i,p=h+d,f=h-d;r=[new R(o.x-f,o.y-p),new R(a.x+p,a.y-f),new R(l.x+f,l.y+p),new R(c.x-p,c.y+f)]}return De.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,_n(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(pi(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&pi(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!pi(o)||!o.interactive)return o}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let i=Kv(e),o=s.width||0,a=s.height||0;o&&a||(dt in s&&la in s&&(a=Math.abs(s.top-s.bottom)),Ie in s&&pe in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=_n(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new R(1,1):new R(r.width/o,r.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=$t(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Br(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Br(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Br(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(Oi,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Br(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,r);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Br(t)&&this._activeObject===t){const r=An(e,["angle","flipX","flipY",pe,mt,Mt,Rn,jn,dt]);return Jv(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}T(co,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Ax{constructor(e){T(this,"targets",[]),T(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),gn(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Fx=["target","oldTarget","fireCanvas","e"],vt={passive:!1},dn=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},Cr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},wt=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},Ix={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class ba extends co{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),T(this,"_isClick",void 0),T(this,"textEditingManager",new Ax(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(Cr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(Wh(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,vt),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,vt)}removeListeners(){this.addOrRemove(wt,"remove");const e=this._getEventPrefix(),t=It(this.upperCanvasEl);wt(t,"".concat(e,"up"),this._onMouseUp),wt(t,"touchend",this._onTouchEnd,vt),wt(t,"".concat(e,"move"),this._onMouseMove,vt),wt(t,"touchmove",this._onMouseMove,vt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=k({e},dn(this,e));this.fire("mouse:out",k(k({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",k({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",k(k({},r),{},{target:s})),s&&s.fire("mouseout",k({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",k({e},dn(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void Cr(this.upperCanvasEl,"drag",this._onDragProgress)}ha(e)}_renderDragEffects(e,t,r){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==r&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==pt,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};wt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:r,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",k({e,target:t,subTargets:r,dragSource:this._dragSource},dn(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&ha(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=It(s);Cr(o,"touchend",this._onTouchEnd,vt),t&&Cr(o,"touchmove",this._onMouseMove,vt),wt(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();wt(t,"".concat(r,"move"),this._onMouseMove,vt);const s=It(t);Cr(s,"".concat(r,"up"),this._onMouseUp),Cr(s,"".concat(r,"move"),this._onMouseMove,vt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=It(this.upperCanvasEl);wt(r,"touchend",this._onTouchEnd,vt),wt(r,"touchmove",this._onMouseMove,vt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Cr(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=It(this.upperCanvasEl);wt(s,"".concat(r,"up"),this._onMouseUp),wt(s,"".concat(r,"move"),this._onMouseMove,vt),Cr(t,"".concat(r,"move"),this._onMouseMove,vt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!s){const u=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!u&&i===this._activeObject)}if(i){const u=i.findControl(this.getViewportPoint(e),ua(e)),{key:h,control:d}=u||{};if(l=h,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(d){const p=d.getMouseUpHandler(e,i,d);p&&(a=this.getScenePoint(e),p.call(d,e,r,a.x,a.y))}i.isMoving=!1}if(r&&(r.target!==i||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],h=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire(e,t);return t}_handleEvent(e,t){const r=this._target,s=this.targets||[],i=k(k({e,target:r,subTargets:s},dn(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),i),r&&r.fire("mouse".concat(t),i);for(let o=0;o<s.length;o++)s[o]!==r&&s[o].fire("mouse".concat(t),i)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(t){const o=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),ua(e));if(t===this._activeObject&&(a||!i)){this._setupCurrentTransform(e,t,o);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=_n(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:i,e:o}=t,a=Pe(t,Fx);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=Ix[e],d=s!==r;if(s&&d){const p=k(k({},a),{},{e:o,target:s,nextTarget:r},dn(this,o));i&&this.fire(h,p),s.fire(c,p)}if(r&&d){const p=k(k({},a),{},{e:o,target:r,previousTarget:s},dn(this,o));i&&this.fire(u,p),r.fire(l,p)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,i=s.group?_n(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,r.x,r.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=Br(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=Br(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const i=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{r.isEditing&&r.exitEditing();const i=new(q.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new R(t,r),a=o.add(new R(s,i)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=q.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const fd={x1:0,y1:0,x2:0,y2:0},Lx=k(k({},fd),{},{r1:0,r2:0}),vn=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,Bx=/^(\d+\.\d+)%|(\d+)%$/;function gd(n){return n&&Bx.test(n)}function md(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(gd(n)?100:1):NaN;return En(0,vn(t,e),1)}const Nx=/\s*;\s*/,$x=/\s*:\s*/;function Wx(n,e){let t,r;const s=n.getAttribute("style");if(s){const o=s.split(Nx);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split($x).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const i=new ge(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:md(n.getAttribute("offset"),0),color:i.toRgb(),opacity:vn(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function zx(n,e){const t=[],r=n.getElementsByTagName("stop"),s=md(e,1);for(let i=r.length;i--;)t.push(Wx(r[i],s));return t}function yd(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function vd(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function jt(n,e){return n.getAttribute(e)}function qx(n,e){return function(t,r){let s,{width:i,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?s=1:u==="-Infinity"?s=0:(s=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&gd(u)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(yd(n)==="linear"?function(t){return{x1:jt(t,"x1")||0,y1:jt(t,"y1")||0,x2:jt(t,"x2")||"100%",y2:jt(t,"y2")||0}}(n):function(t){return{x1:jt(t,"fx")||jt(t,"cx")||"50%",y1:jt(t,"fy")||jt(t,"cy")||"50%",r1:0,x2:jt(t,"cx")||"50%",y2:jt(t,"cy")||"50%",r2:jt(t,"r")||"50%"}}(n),k(k({},e),{},{gradientUnits:vd(n)}))}class Is{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:k(k({},t==="radial"?Lx:fd),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(kr()):kr()})}addColorStop(e){for(const t in e){const r=new ge(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return k(k({},An(this,e)),{},{type:this.type,coords:k({},this.coords),colorStops:this.colorStops.map(t=>k({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():at.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>k({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Mi(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:p,y2:f}=this.coords;r.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',p,'" y2="',f,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:p,y2:f,r1:g,r2:m}=this.coords,b=g>m;r.push("<radialGradient ",u,' cx="',b?h:p,'" cy="',b?d:f,'" r="',b?g:m,'" fx="',b?p:h,'" fy="',b?f:d,`">
`),b&&(o.reverse(),o.forEach(x=>{x.offset=1-x.offset}));const _=Math.min(g,m);if(_>0){const x=_/Math.max(g,m);o.forEach(S=>{S.offset+=x*(1-S.offset)})}}return o.forEach(h=>{let{color:d,offset:p,opacity:f}=h;r.push("<stop ",'offset="',100*p+"%",'" style="stop-color:',d,f!==void 0?";stop-opacity: "+f:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,s,i):e.createRadialGradient(t,r,o,s,i,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new ge(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(k(k({},e),{},{colorStops:t?t.map(s=>k({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=vd(e),i=t._findCenterFromElement();return new this(k({id:e.getAttribute("id")||void 0,type:yd(e),coords:qx(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:zx(e,r.opacity),gradientUnits:s,gradientTransform:ga(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}T(Is,"type","Gradient"),q.setClass(Is,"gradient"),q.setClass(Is,"linear"),q.setClass(Is,"radial");const Vx=["type","source","patternTransform"];class Do{get type(){return"pattern"}set type(e){Tr("warn","Setting type has no effect",e)}constructor(e){T(this,"repeat","repeat"),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"crossOrigin",""),this.id=kr(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return k(k({},An(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Re(this.offsetX,le.NUM_FRACTION_DIGITS),offsetY:Re(this.offsetY,le.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:i,id:o}=this,a=vn(this.offsetX/t,0),l=vn(this.offsetY/r,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):vn(s.width/t,0),u=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):vn(s.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:i}=e,o=Pe(e,Vx);const a=await gi(s,k(k({},t),{},{crossOrigin:o.crossOrigin}));return new this(k(k({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}T(Do,"type","Pattern"),q.setClass(Do),q.setClass(Do,"pattern");const Xx=["path","left","top"],Hx=["d"];class Nr extends tt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:i}=t,o=Pe(t,Xx);super(),Object.assign(this,Nr.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(pe,s),typeof i=="number"&&this.set(dt,i)}_setPath(e,t){this.path=wx(Array.isArray(e)?e:Dx(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new R(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=Rx(this.path,le.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=le.NUM_FRACTION_DIGITS;return" translate(".concat(Re(-this.pathOffset.x,e),", ").concat(Re(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,ee,ee)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:r},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,r=i;break;case"C":e.push(...su(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...su(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=r}return lr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return k(k({},e),{},{pathOffset:new R(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=yr(e,this.ATTRIBUTE_NAMES,r),{d:i}=s;return new this(i,k(k(k({},Pe(s,Hx)),t),{},{left:void 0,top:void 0}))}}T(Nr,"type","Path"),T(Nr,"cacheProperties",[...mr,"path","fillRule"]),T(Nr,"ATTRIBUTE_NAMES",[...Er,"d"]),q.setClass(Nr),q.setSVGClass(Nr);const Yx=["left","top","radius"],bd=["radius","startAngle","endAngle","counterClockwise"];class kt extends tt{static getDefaults(){return k(k({},super.getDefaults()),kt.ownDefaults)}constructor(e){super(),Object.assign(this,kt.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Le(this.startAngle),Le(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(mt)}getRadiusY(){return this.get("radius")*this.get(Mt)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...bd,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Le(this.startAngle),s=Le(this.endAngle),i=pr(r)*t,o=fr(r)*t,a=pr(s)*t,l=fr(s)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=yr(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,radius:a=0}=s;return new this(k(k({},Pe(s,Yx)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}T(kt,"type","Circle"),T(kt,"cacheProperties",[...mr,...bd]),T(kt,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),T(kt,"ATTRIBUTE_NAMES",["cx","cy","r",...Er]),q.setClass(kt),q.setSVGClass(kt);const Ux=["x1","y1","x2","y2"],Gx=["x1","y1","x2","y2"],xa=["x1","x2","y1","y2"];class ir extends tt{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,ir.ownDefaults),this.setOptions(i),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(pe,o),typeof a=="number"&&this.set(dt,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=lr([{x:e,y:t},{x:r,y:s}]),c=new R(i+a/2,o+l/2);this.setPositionByOrigin(c,ee,ee)}_set(e,t){return super._set(e,t),xa.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;Pt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new R((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=r<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=yr(e,this.ATTRIBUTE_NAMES,r),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],Pe(s,Ux))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:i}=e,o=Pe(e,Gx);return this._fromObject(k(k({},o),{},{points:[t,r,s,i]}),{extraParam:"points"})}}T(ir,"type","Line"),T(ir,"cacheProperties",[...mr,...xa]),T(ir,"ATTRIBUTE_NAMES",Er.concat(xa)),q.setClass(ir),q.setSVGClass(ir);class Wr extends tt{static getDefaults(){return k(k({},super.getDefaults()),Wr.ownDefaults)}constructor(e){super(),Object.assign(this,Wr.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}T(Wr,"type","Triangle"),T(Wr,"ownDefaults",{width:100,height:100}),q.setClass(Wr),q.setSVGClass(Wr);const xd=["rx","ry"];class sr extends tt{static getDefaults(){return k(k({},super.getDefaults()),sr.ownDefaults)}constructor(e){super(),Object.assign(this,sr.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(mt)}getRy(){return this.get("ry")*this.get(Mt)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...xd,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,Ti,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=yr(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function Kx(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}T(sr,"type","Ellipse"),T(sr,"cacheProperties",[...mr,...xd]),T(sr,"ownDefaults",{rx:0,ry:0}),T(sr,"ATTRIBUTE_NAMES",[...Er,"cx","cy","rx","ry"]),q.setClass(sr),q.setSVGClass(sr);const Zx=["left","top"],Cd={exactBoundingBox:!1};class ht extends tt{static getDefaults(){return k(k({},super.getDefaults()),ht.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"strokeDiff",void 0),Object.assign(this,ht.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(pe,r),typeof s=="number"&&this.set(dt,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return $b(this.points,e,this.isOpen())}_calcDimensions(e){e=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new R,strokeOffset:new R,strokeDiff:new R};const r=lr(t),s=no(k(k({},e),{},{scaleX:1,scaleY:1})),i=lr(this.points.map(c=>ut(c,s,!0))),o=new R(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Le(this.skewX)),l-=a*Math.tan(Le(this.skewY))),k(k({},r),{},{pathOffset:new R(a,l),strokeOffset:new R(i.left,i.top).subtract(new R(r.left,r.top)).multiply(o),strokeDiff:new R(r.width,r.height).subtract(new R(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=lr(this.points);return new R(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new R(t+s/2,r+i/2),ee,ee)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new R(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new R((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var s,i;o=new R((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new R(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===mt||e===Mt)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=le.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(Re(this.points[i].x-t,s),",",Re(this.points[i].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-r,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(Kx(e.getAttribute("points")),k(k({},Pe(yr(e,this.ATTRIBUTE_NAMES,r),Zx)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}T(ht,"ownDefaults",Cd),T(ht,"type","Polyline"),T(ht,"layoutProperties",[Rn,jn,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),T(ht,"cacheProperties",[...mr,"points"]),T(ht,"ATTRIBUTE_NAMES",[...Er]),q.setClass(ht),q.setSVGClass(ht);class wr extends ht{isOpen(){return!1}}T(wr,"ownDefaults",Cd),T(wr,"type","Polygon"),q.setClass(wr),q.setSVGClass(wr);const wd=["fontSize","fontWeight","fontFamily","fontStyle"],Sd=["underline","overline","linethrough"],_d=[...wd,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],Td=[..._d,...Sd,"textBackgroundColor","direction"],Jx=[...wd,...Sd,ft,"strokeWidth",qe,"deltaY","textBackgroundColor"],Qx={_reNewline:sl,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:pe,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:pe,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Yt="justify",Ii="justify-left",ns="justify-right",ss="justify-center";class kd extends tt{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const i in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const i in r[s])if(r[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,i=0,o=!0,a=0;for(const l in t){r=0;for(const c in t[l]){const u=t[l][c]||{};i++,u[e]!==void 0?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete t[l][c]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,i;for(s in t){for(i in r=t[s],r)delete r[i][e],Object.keys(r[i]).length===0&&delete r[i];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const i=cl(k(k({},this._getStyleDeclaration(r,s)),t),o=>o!==void 0);this._setStyleDeclaration(r,s,i)}getSelectionStyles(e,t,r){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return k(k({},An(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}T(kd,"_styleProperties",Jx);const eC=/  +/g,tC=/"/g;function Ro(n,e,t,r,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.NUM_FRACTION_DIGITS;const d=ds(qe,i,!1),[p,f,g,m]=[a,l,c,u].map(b=>Re(b,h));return"<rect ".concat(d,' x="').concat(p,'" y="').concat(f,'" width="').concat(g,'" height="').concat(m,'"></rect>')}(n,{left:e,top:t,width:r,height:s}),`
`)}const rC=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let jo;class it extends kd{static getDefaults(){return k(k({},super.getDefaults()),it.ownDefaults)}constructor(e,t){super(),T(this,"__charBounds",[]),Object.assign(this,it.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=pd(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Yt)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===Yt||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=i.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(i[u])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ft?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case ee:e.textBaseline="middle";break;case"ascender":e.textBaseline=dt;break;case"descender":e.textBaseline=la}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,i,o){this._renderChars(e,t,r,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let u,h,d=0,p=0,f=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let g=0;g<l;g++){const m=this.__charBounds[i][g];h=this.getValueOfPropertyAt(i,g,"textBackgroundColor"),this.path?(e.save(),e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),e.fillStyle=h,h&&e.fillRect(-m.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),m.width,a/this.lineHeight),e.restore()):h!==f?(u=r+c+p,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=f,f&&e.fillRect(u,s,d,a/this.lineHeight),p=m.left,d=m.width,f=h):d+=m.kernedWidth}h&&!this.path&&(u=r+c+p,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,s,d,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const i=ts.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let u,h,d,p;if(r&&i[r]!==void 0&&(d=i[r]),i[e]!==void 0&&(p=u=i[e]),l&&i[a]!==void 0&&(h=i[a],p=h-d),u===void 0||d===void 0||h===void 0){const f=function(){return jo||(jo=Qt({width:0,height:0}).getContext("2d")),jo}();this._setTextStyles(f,t,!0),u===void 0&&(p=u=f.measureText(e).width,i[e]=u),d===void 0&&l&&r&&(d=f.measureText(r).width,i[r]=d),l&&h===void 0&&(h=f.measureText(a).width,i[a]=h,p=h-d)}return{width:u*c,kernedWidth:p*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const i=this.pathSide===Ie,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];r=this._getGraphemeBox(h,e,u,t),c[u]=r,s+=r.kernedWidth,t=h}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case pe:u=i?h-s:0;break;case ee:u=(h-s)/2;break;case Ie:u=i?0:h-s}u+=this.pathStartOffset*(i?-1:1);for(let d=i?l-1:0;i?d>=0:d<l;i?d--:d++)r=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,i=Ox(s.path,r,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===Ie?Math.PI:0)}_getGraphemeBox(e,t,r,s,i){const o=this.getCompleteStyleDeclaration(t,r),a=s?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,s,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!i){const p=this.__charBounds[t][r-1];d.left=p.left+p.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+u,i+r+c,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(qe))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(Yt),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,p=t.direction;let f,g,m,b,_,x="",S=0;if(t.save(),p!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?pe:Ie),i-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,r.join(""),s,i),void t.restore();for(let w=0,O=r.length-1;w<=O;w++)b=w===O||this.charSpacing||c,x+=r[w],m=this.__charBounds[o][w],S===0?(s+=d*(m.kernedWidth-m.width),S+=m.width):S+=m.kernedWidth,l&&!b&&this._reSpaceAndTab.test(r[w])&&(b=!0),b||(f=f||this.getCompleteStyleDeclaration(o,w),g=this.getCompleteStyleDeclaration(o,w+1),b=yl(f,g,!1)),b&&(c?(t.save(),t.translate(m.renderLeft,m.renderTop),t.rotate(m.angle),this._renderChar(e,t,o,w,x,-S/2,0),t.restore()):(_=s,this._renderChar(e,t,o,w,x,_,i)),x="",f=g,s+=d*S,S=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=Qt({width:t,height:r}),i=s.getContext("2d");return s.width=t,s.height=r,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,r),i.lineTo(0,r),i.closePath(),i.translate(t/2,r/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,i;return Pt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:i}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,i,o,a){const l=this._getStyleDeclaration(r,s),c=this.getCompleteStyleDeclaration(r,s),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(i,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(t,c);t.strokeText(i,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*r.size,deltaY:o+i*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===Yt||s===ss&&!o||s===ns&&!o||s===Ii&&!o?0:(s===ee&&(a=r/2),s===Ie&&(a=r),s===ss&&(a=r/2),s===ns&&(a=r),i==="rtl"&&(s===Ie||s===Yt||s===ns?a=0:s===pe||s===Ii?a=-r:s!==ee&&s!==ss||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=u;continue}const h=this._textLines[l],d=u/this.lineHeight,p=this._getLineLeftOffset(l);let f,g,m=0,b=0,_=this.getValueOfPropertyAt(l,0,t),x=this.getValueOfPropertyAt(l,0,qe);const S=r+d*(1-this._fontSizeFraction);let w=this.getHeightOfChar(l,0),O=this.getValueOfPropertyAt(l,0,"deltaY");for(let P=0,L=h.length;P<L;P++){const y=this.__charBounds[l][P];f=this.getValueOfPropertyAt(l,P,t),g=this.getValueOfPropertyAt(l,P,qe);const E=this.getHeightOfChar(l,P),B=this.getValueOfPropertyAt(l,P,"deltaY");if(i&&f&&g)e.save(),e.fillStyle=x,e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillRect(-y.kernedWidth/2,a*E+B,y.kernedWidth,this.fontSize/15),e.restore();else if((f!==_||g!==x||E!==w||B!==O)&&b>0){let j=s+p+m;this.direction==="rtl"&&(j=this.width-j-b),_&&x&&(e.fillStyle=x,e.fillRect(j,S+a*w+O,b,this.fontSize/15)),m=y.left,b=y.width,_=f,x=g,w=E,O=B}else b+=y.kernedWidth}let M=s+p+m;this.direction==="rtl"&&(M=this.width-M-b),e.fillStyle=g,f&&g&&e.fillRect(M,S+a*w+O,b-o,this.fontSize/15),r+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||it.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return ml(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),i=i.concat(r[o],s);return i.pop(),{_unwrappedLines:r,lines:t,graphemeText:i,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject([...Td,...e])),{},{styles:qb(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||r.includes(o),i=i||o==="path";else s=r.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=yr(e,it.ATTRIBUTE_NAMES,r),i=k(k({},t),s),{textAnchor:o=pe,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=nl,strokeWidth:p=1}=i,f=Pe(i,rC),g=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),k({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},f)),m=g.getScaledHeight()/g.height,b=((g.height+g.strokeWidth)*g.lineHeight-g.height)*m,_=g.getScaledHeight()+b;let x=0;return o===ee&&(x=g.getScaledWidth()/2),o===Ie&&(x=g.getScaledWidth()),g.set({left:g.left-x,top:g.top-(_-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:p}),g}static fromObject(e){return this._fromObject(k(k({},e),{},{styles:Vb(e.styles||{},e.text)}),{extraParam:"text"})}}T(it,"textLayoutProperties",_d),T(it,"cacheProperties",[...mr,...Td]),T(it,"ownDefaults",Qx),T(it,"type","Text"),T(it,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),T(it,"ATTRIBUTE_NAMES",Er.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),sd(it,[class extends Gh{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(tC,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let s,i=n;this.backgroundColor&&r.push(...Ro(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const s=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(eC)),i=s?'style="'.concat(s,'"'):"",o=e.deltaY,a=o?' dy="'.concat(Re(o,le.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Re(t,le.NUM_FRACTION_DIGITS),'" y="').concat(Re(r,le.NUM_FRACTION_DIGITS),'" ').concat(a).concat(i,">").concat(Wb(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const s=this.getHeightOfLine(e),i=this.textAlign.includes(Yt),o=this._textLines[e];let a,l,c,u,h,d="",p=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let f=0,g=o.length-1;f<=g;f++)h=f===g||this.charSpacing,d+=o[f],c=this.__charBounds[e][f],p===0?(t+=c.kernedWidth-c.width,p+=c.width):p+=c.kernedWidth,i&&!h&&this._reSpaceAndTab.test(o[f])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,f),l=this.getCompleteStyleDeclaration(e,f+1),h=yl(a,l,!0)),h&&(u=this._getStyleDeclaration(e,f),n.push(this._createTextCharSpan(d,u,t,r)),d="",a=l,this.direction==="rtl"?t-=p:t+=p,p=0)}_setSVGTextLineBg(n,e,t,r){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:h,width:d,kernedWidth:p}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&n.push(...Ro(c,t+l,r,a,i)),l=h,a=d,c=o):a+=p}o&&n.push(...Ro(c,t+l,r,a,i))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c}=n,u=this.getSvgTextDecoration(n);return[s?ds(ft,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),i?ds(qe,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),q.setClass(it),q.setSVGClass(it);class nC{constructor(e){T(this,"target",void 0),T(this,"__mouseDownInPlace",!1),T(this,"__dragStartFired",!1),T(this,"__isDraggingOver",!1),T(this,"__dragStartSelection",void 0),T(this,"__dragImageDisposer",void 0),T(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new R(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),u=new R(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),p=o.getBoundingRect(),f=u.subtract(new R(p.left,p.top)),g=a.viewportTransform,m=f.add(h).transform(g,!0),b=o.backgroundColor,_=gl(o.styles);o.backgroundColor="";const x={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(x,0,s),o.setSelectionStyles(x,i,o.text.length),o.dirty=!0;const S=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=b,o.styles=_,o.dirty=!0,va(S,{position:"fixed",left:"".concat(-S.width,"px"),border:pt,width:"".concat(S.width/d,"px"),height:"".concat(S.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{S.remove()},It(e.target||this.target.hiddenTextarea).body.appendChild(S),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(S,m.x,m.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=k({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=i[Math.max(0,i.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,p=this.__dragStartSelection.selectionEnd;l>d&&l<=p?l=d:l>p&&(l-=p-d),o.removeChars(d,p),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(ki,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||pt;l===pt?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(ki,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const au=/[ \n\.,;!\?\-]/;class sC extends it{constructor(){super(...arguments),T(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:i}=e;return Qh({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!sl.test(r[e-1]))?e-1:e,i=r[s];for(;s>0&&s<r.length&&!au.test(i);)s+=t,i=r[s];return t===-1&&au.test(i)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;It(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==i||s!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=r.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,p=h-o,f=new R(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new R(c.clientWidth/u,c.clientHeight/h));return f.x<0&&(f.x=0),f.x>d&&(f.x=d),f.y<0&&(f.y=0),f.y>p&&(f.y=p),f.x+=this.canvas._offset.left,f.y+=this.canvas._offset.top,{left:"".concat(f.x,"px"),top:"".concat(f.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(Oi),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==i){if(this.styles[r])for(let a=s;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+a-o]=l)}for(let a=r+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const a=this.styles[r],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,r,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=t&&(l=!0,i[d-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+r]=i,u=!0),(u||o>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:k({},s[r-1])}:c?this.styles[e+r]={0:k({},c)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const i=this.styles[e],o=i?k({},i):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+r]=o[c],o[c-r]||delete i[c])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=k({},s[r]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=k({},a)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],r):r&&this.styles[s.lineIndex+o]&&r[0]&&(this.styles[s.lineIndex+o][0]=r[0]),r=r&&r.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,r,t),this._text=[...this._text.slice(0,r),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=pe:this._selectionDirection===Ie&&(this._selectionDirection=pe,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Ie?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Ie:this._selectionDirection===pe&&(this._selectionDirection=Ie,this.selectionStart=t),this.selectionEnd=r)}}class iC extends sC{initHiddenTextarea(){const e=this.canvas&&It(this.canvas.getElement())||Dn(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(ki),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,o=s.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,h,d,p,f=o-i;const g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=a>g.selectionStart;c?(h=this._text.slice(a,l),f+=l-a):o<i&&(h=m?this._text.slice(l+f,l):this._text.slice(a,a-f));const b=s.slice(g.selectionEnd-f,g.selectionEnd);if(h&&h.length&&(b.length&&(u=this.getSelectionStyles(a,a+1,!1),u=b.map(()=>u[0])),c?(d=a,p=l):m?(d=l-h.length,p=l):(d=l,p=l+h.length),this.removeStyleFromTo(d,p)),b.length){const{copyPasteData:_}=Jt();t&&b.join("")===_.copiedText&&!le.disableStyleCopyPaste&&(u=_.copiedTextStyle),this.insertNewStyleBlock(b,a,u)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Jt();e.copiedText=this.getSelectedText(),le.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),u=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const u=o-s,h=o,d=Math.abs(u-t);a=Math.abs(h-t)<d?l:l-1;break}return i||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Ie);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=En(0,this.selectionStart,s),this.selectionEnd=En(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===pe?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=pe,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Ie&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=pe,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===pe&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ie,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Ie,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const Ao=n=>!!n.button;class oC extends iC{constructor(){super(...arguments),T(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new nC(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),ha(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!Ao(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!Ao(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||Ao(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Lt(this.calcTransformMatrix())).add(new R(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,i=0;for(let c=0;c<this._textLines.length&&r<=t.y;c++)r+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&s++;break}o=u,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const Ls="moveCursorUp",Bs="moveCursorDown",Ns="moveCursorLeft",$s="moveCursorRight",Ws="exitEditing",aC=k({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Ws,27:Ws,33:Ls,34:Bs,35:$s,36:Ns,37:Ns,38:Ls,39:$s,40:Bs},keysMapRtl:{9:Ws,27:Ws,33:Ls,34:Bs,35:Ns,36:$s,37:$s,38:Ls,39:Ns,40:Bs},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class ar extends oC{static getDefaults(){return k(k({},super.getDefaults()),ar.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,k(k({},ar.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof ba&&this.canvas.textEditingManager.remove(this),t instanceof ba&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(r=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Ie||this.textAlign===Yt||this.textAlign===ns?l.left*=-1:this.textAlign===pe||this.textAlign===Ii?l.left=o-(r>0?r:0):this.textAlign!==ee&&this.textAlign!==ss||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,r){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(Yt),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let p=c;p<=u;p++){const f=this._getLineLeftOffset(p)||0;let g=this.getHeightOfLine(p),m=0,b=0,_=0;if(p===c&&(b=this.__charBounds[c][h].left),p>=c&&p<u)_=o&&!this.isEndOfWrapping(p)?this.width:this.getLineWidth(p)||5;else if(p===u)if(d===0)_=this.__charBounds[u][d].left;else{const M=this._getWidthOfCharSpacing();_=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-M}m=g,(this.lineHeight<1||p===u&&this.lineHeight>1)&&(g/=this.lineHeight);let x=r.left+f+b,S=g,w=0;const O=_-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",S=1,w=g):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Ie||this.textAlign===Yt||this.textAlign===ns?x=this.width-x-O:this.textAlign===pe||this.textAlign===Ii?x=r.left+f-_:this.textAlign!==ee&&this.textAlign!==ss||(x=r.left+f-_)),e.fillRect(x,r.top+r.topOffset+w,O,S),r.topOffset+=m}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,qe)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}T(ar,"ownDefaults",aC),T(ar,"type","IText"),q.setClass(ar),q.setClass(ar,"i-text");class zr extends ar{static getDefaults(){return k(k({},super.getDefaults()),zr.ownDefaults)}constructor(e,t){super(e,k(k({},zr.ownDefaults),t))}static createControls(){return{controls:Lb()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Yt)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(r++,s++),i[o]={line:t,offset:r},s+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=r&&(!i||h<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<r.wordsData.length;i++)s.push(...this._wrapLine(i,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return s=Math.max(h,s),a+=u.length+r.length,{word:u,width:h}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,r,!0).kernedWidth,r=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:i}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],p=0,f=0,g=!0;t-=o;const m=Math.max(t,s,this.dynamicMinWidth),b=i[e];let _;for(p=0,_=0;_<b.length;_++){const{word:x,width:S}=b[_];p+=x.length,h+=f+S-a,h>m&&!g?(c.push(d),d=[],h=S,g=!0):h+=a,g||l||d.push(u),d=d.concat(x),f=l?0:this._measureWord([u],e,p),p++,g=!1}return _&&c.push(d),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=r[i].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}T(zr,"type","Textbox"),T(zr,"textLayoutProperties",[...ar.textLayoutProperties,"width"]),T(zr,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),q.setClass(zr);class lu extends lo{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:i}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=lr(ad(r,s)),l=new R(o,a);if(s.absolutePositioned)return{center:_n(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new R,correction:h=new R}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}T(lu,"type","clip-path"),q.setClass(lu);class cu extends lo{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new R(r.width||s.x,r.height||s.y)}}T(cu,"type","fixed"),q.setClass(cu);class lC extends fs{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!r.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class qr extends Vr{static getDefaults(){return k(k({},super.getDefaults()),qr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,qr.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:i}=t;this.groupInit(e,{left:r,top:s,layoutManager:i??new lC})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(Tr("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:i}=s;i&&r.add(i)}),e===bl?r.forEach(s=>{s._onAfterObjectsChange(ji,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=k(k({hasControls:!1},r),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}T(qr,"type","ActiveSelection"),T(qr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),q.setClass(qr),q.setClass(qr,"activeSelection");class cC{constructor(){T(this,"resources",{})}applyFilters(e,t,r,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,s);const a={sourceWidth:r,sourceHeight:s,imageData:o.getImageData(0,0,r,s),originalEl:t,originalImageData:o.getImageData(0,0,r,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class Od{constructor(){let{tileSize:e=le.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),T(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Qt({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,r,s,c?void 0:t),targetTexture:this.createTexture(a,r,s),originalTexture:c||this.createTexture(a,r,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const p=d.targetCanvas,f=p.width,g=p.height,m=d.destinationWidth,b=d.destinationHeight;f===m&&g===b||(p.width=m,p.height=b)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:p,TEXTURE_WRAP_T:f}=e,g=e.createTexture();return e.bindTexture(a,g),e.texParameteri(a,h,i||o),e.texParameteri(a,d,i||o),e.texParameteri(a,p,u),e.texParameteri(a,f,u),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,r,0,l,c,null),g}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,r);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=r.height-s.height;i.drawImage(r,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let Fo;function uC(){const{WebGLProbe:n}=Jt();return n.queryWebGL($t()),le.enableGLFiltering&&n.isSupported(le.textureSize)?new Od({tileSize:le.textureSize}):new cC}function Io(){return!Fo&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Fo=uC()),Fo}const hC=["filters","resizeFilter","src","crossOrigin","type"],Pd=["cropX","cropY"];class _t extends tt{static getDefaults(){return k(k({},super.getDefaults()),_t.ownDefaults)}constructor(e,t){super(),T(this,"_lastScaleX",1),T(this,"_lastScaleY",1),T(this,"_filterScalingX",1),T(this,"_filterScalingY",1),this.filters=[],Object.assign(this,_t.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(kr()),this.setElement(typeof e=="string"?(this.canvas&&It(this.canvas.getElement())||Dn()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(_t.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Io(!1);t instanceof Od&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Jt().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),k(k({},super.toObject([...Pd,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=kr();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==qe?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return gi(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,i=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=Qt(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,Io().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=Qt({width:r,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);Io().applyFilters(e,this._originalElement,r,s,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*r,d=l*s,p=Math.min(i*r,c-h),f=Math.min(o*s,u-d),g=-i/2,m=-o/2,b=Math.min(i,c/r-a),_=Math.min(o,u/s-l);t&&e.drawImage(t,h,d,p,f,g,m,b,_)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=Yv(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let i,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,p=0;return!e||e.alignX===pt&&e.alignY===pt?(l=t/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=mx(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(u=-i),e.alignX==="Max"&&(u=i),i=(r-a*c)/2,e.alignY==="Min"&&(h=-i),e.alignY==="Max"&&(h=i)),e.meetOrSlice==="slice"&&(l=c=yx(this._element,s),i=o-t/l,e.alignX==="Mid"&&(d=i/2),e.alignX==="Max"&&(d=i),i=a-r/c,e.alignY==="Mid"&&(p=i/2),e.alignY==="Max"&&(p=i),o=t/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:p}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=Pe(e,hC);return Promise.all([gi(i,k(k({},t),{},{crossOrigin:o})),r&&hs(r,t),s&&hs([s],t),so(l,t)]).then(c=>{let[u,h=[],[d]=[],p={}]=c;return new this(u,k(k({},l),{},{src:i,filters:h,resizeFilter:d},p))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return gi(e,{crossOrigin:t,signal:r}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=yr(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"],t,s).catch(i=>(Tr("log","Unable to parse Image",i),null))}}T(_t,"type","Image"),T(_t,"cacheProperties",[...mr,...Pd]),T(_t,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),T(_t,"CSS_CANVAS","canvas-img"),T(_t,"ATTRIBUTE_NAMES",[...Er,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),q.setClass(_t),q.setSVGClass(_t);oo(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const uo=n=>n.webgl!==void 0,xl="precision highp float",dC=`
    `.concat(xl,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),pC=["type"],fC=["type"],gC=new RegExp(xl,"g");class Ve{get type(){return this.constructor.type}constructor(){let e=Pe(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pC);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return dC}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Jt();s!=="highp"&&(t=t.replace(gC,xl.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new Gt("Vertex, fragment shader or program creation error");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Gt("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Gt("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Gt('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let i=0;i<r.length;i++)s[r[i]]=e.getUniformLocation(t,r[i]);return s}sendAttributeData(e,t,r){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){uo(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=Qt({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return k({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(Pe(e,fC))}}T(Ve,"type","BaseFilter"),T(Ve,"uniformLocations",[]);const mC={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class zs extends Ve{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(mC[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new ge(this.color).getSource(),s=this.alpha,i=r[0]*s,o=r[1]*s,a=r[2]*s,l=1-s;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];let p,f,g;switch(this.mode){case"multiply":p=u*i/255,f=h*o/255,g=d*a/255;break;case"screen":p=255-(255-u)*(255-i)/255,f=255-(255-h)*(255-o)/255,g=255-(255-d)*(255-a)/255;break;case"add":p=u+i,f=h+o,g=d+a;break;case"difference":p=Math.abs(u-i),f=Math.abs(h-o),g=Math.abs(d-a);break;case"subtract":p=u-i,f=h-o,g=d-a;break;case"darken":p=Math.min(u,i),f=Math.min(h,o),g=Math.min(d,a);break;case"lighten":p=Math.max(u,i),f=Math.max(h,o),g=Math.max(d,a);break;case"overlay":p=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,f=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,g=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":p=i+u-2*i*u/255,f=o+h-2*o*h/255,g=a+d-2*a*d/255;break;case"tint":p=i+u*l,f=o+h*l,g=a+d*l}t[c]=p,t[c+1]=f,t[c+2]=g}}sendUniformData(e,t){const r=new ge(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}T(zs,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),T(zs,"type","BlendColor"),T(zs,"uniformLocations",["uColor"]),q.setClass(zs);const yC={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},vC=["type","image"];class qs extends Ve{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return yC[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=$t());const a=i.blendImage,l=a.getContext("2d");a.width!==r||a.height!==s?(a.width=r,a.height=s):l.clearRect(0,0,r,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,s);const c=l.getImageData(0,0,r,s).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],p=t[u+2],f=t[u+3],g=c[u],m=c[u+1],b=c[u+2],_=c[u+3];switch(this.mode){case"multiply":t[u]=h*g/255,t[u+1]=d*m/255,t[u+2]=p*b/255,t[u+3]=f*_/255;break;case"mask":t[u+3]=_}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return k(k({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,i=Pe(e,vC);return _t.fromObject(s,t).then(o=>new this(k(k({},i),{},{image:o})))}}T(qs,"type","BlendImage"),T(qs,"defaults",{mode:"multiply",alpha:1}),T(qs,"uniformLocations",["uTransformMatrix","uImage"]),q.setClass(qs);class Vs extends Ve{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){uo(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:s}}=e;const{width:i,height:o}=r;s.blurLayer1||(s.blurLayer1=$t(),s.blurLayer2=$t());const a=s.blurLayer1,l=s.blurLayer2;a.width===i&&a.height===o||(l.width=a.width=i,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),h=15,d=.06*this.blur*.5;let p,f,g,m;for(c.putImageData(r,0,0),u.clearRect(0,0,i,o),m=-15;m<=h;m++)p=(Math.random()-.5)/4,f=m/h,g=d*f*i+p,u.globalAlpha=1-Math.abs(f),u.drawImage(a,g,p),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(m=-15;m<=h;m++)p=(Math.random()-.5)/4,f=m/h,g=d*f*o+p,u.globalAlpha=1-Math.abs(f),u.drawImage(a,p,g),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const b=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),b}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}T(Vs,"type","Blur"),T(Vs,"defaults",{blur:0}),T(Vs,"uniformLocations",["uDelta"]),q.setClass(Vs);class Xs extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}T(Xs,"type","Brightness"),T(Xs,"defaults",{brightness:0}),T(Xs,"uniformLocations",["uBrightness"]),q.setClass(Xs);const Ed={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class bn extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(t[i]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[i+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[i+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!s){const c=t[i+3];t[i]+=c*r[3],t[i+1]+=c*r[8],t[i+2]+=c*r[13],t[i+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return k(k({},super.toObject()),{},{matrix:[...this.matrix]})}}function Kr(n,e){var t;const r=(T(t=class extends bn{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),T(t,"defaults",{colorsOnly:!1,matrix:e}),t);return q.setClass(r,n),r}T(bn,"type","ColorMatrix"),T(bn,"defaults",Ed),T(bn,"uniformLocations",["uColorMatrix","uConstants"]),q.setClass(bn);Kr("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Kr("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Kr("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Kr("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Kr("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Kr("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Kr("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class uu extends Ve{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){uo(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>q.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}T(uu,"type","Composed"),q.setClass(uu);class Hs extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}T(Hs,"type","Contrast"),T(Hs,"defaults",{contrast:0}),T(Hs,"uniformLocations",["uContrast"]),q.setClass(Hs);const bC={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ys extends Ve{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return bC[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,p,f,g,m,b,_,x,S,w,O,M,P;for(O=0;O<l;O++)for(w=0;w<a;w++){for(m=4*(O*a+w),d=0,p=0,f=0,g=0,P=0;P<i;P++)for(M=0;M<i;M++)_=O+P-o,b=w+M-o,_<0||_>=l||b<0||b>=a||(x=4*(_*a+b),S=s[P*i+M],d+=r[x]*S,p+=r[x+1]*S,f+=r[x+2]*S,h||(g+=r[x+3]*S));u[m]=d,u[m+1]=p,u[m+2]=f,u[m+3]=h?r[m+3]:g}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return k(k({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}T(Ys,"type","Convolute"),T(Ys,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),T(Ys,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),q.setClass(Ys);const Md="Gamma";class Us extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],i=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:Md,gamma:this.gamma.concat()}}}T(Us,"type",Md),T(Us,"defaults",{gamma:[1,1,1]}),T(Us,"uniformLocations",["uGamma"]),q.setClass(Us);const xC={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Gs extends Ve{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2];switch(this.mode){case"average":r=(i+o+a)/3;break;case"lightness":r=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":r=.21*i+.72*o+.07*a}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return xC[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}T(Gs,"type","Grayscale"),T(Gs,"defaults",{mode:"average"}),T(Gs,"uniformLocations",["uMode"]),q.setClass(Gs);const CC=k(k({},Ed),{},{rotation:0});class Lo extends bn{calculateMatrix(){const e=this.rotation*Math.PI,t=pr(e),r=fr(e),s=1/3,i=Math.sqrt(s)*r,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}T(Lo,"type","HueRotation"),T(Lo,"defaults",CC),q.setClass(Lo);class Ks extends Ve{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}T(Ks,"type","Invert"),T(Ks,"defaults",{alpha:!1,invert:!0}),T(Ks,"uniformLocations",["uInvert","uAlpha"]),q.setClass(Ks);class Zs extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*r;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}T(Zs,"type","Noise"),T(Zs,"defaults",{noise:0}),T(Zs,"uniformLocations",["uNoise","uSeed"]),q.setClass(Zs);class Js extends Ve{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*i*r+4*o,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=i;d<Math.min(i+this.blocksize,s);d++)for(let p=o;p<Math.min(o+this.blocksize,r);p++){const f=4*d*r+4*p;t[f]=l,t[f+1]=c,t[f+2]=u,t[f+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}T(Js,"type","Pixelate"),T(Js,"defaults",{blocksize:4}),T(Js,"uniformLocations",["uBlocksize"]),q.setClass(Js);class Qs extends Ve{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new ge(this.color).getSource(),i=[s[0]-r,s[1]-r,s[2]-r],o=[s[0]+r,s[1]+r,s[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>i[0]&&c>i[1]&&u>i[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new ge(this.color).getSource(),s=this.distance,i=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],o=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}T(Qs,"type","RemoveColor"),T(Qs,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),T(Qs,"uniformLocations",["uLow","uHigh"]),q.setClass(Qs);class ei extends Ve{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let i=1;i<=r;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){uo(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*r),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,r,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=r*a;const d=e.filterBackend.resources;let p=0,f=0;const g=t;let m=0;d.sliceByTwo||(d.sliceByTwo=$t());const b=d.sliceByTwo;(b.width<1.5*t||b.height<r)&&(b.width=1.5*t,b.height=r);const _=b.getContext("2d");for(_.clearRect(0,0,1.5*t,r),_.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=u,r=h,s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,l=!0),i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,c=!0),_.drawImage(b,p,f,t,r,g,m,u,h),p=g,f=m,m+=h;return _.getImageData(p,f,s,i)}lanczosResize(e,t,r,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,p=2/this.rcpScaleY,f=Math.ceil(u*this.lanczosLobes/2),g=Math.ceil(h*this.lanczosLobes/2),m={},b={x:0,y:0},_={x:0,y:0};return function x(S){let w,O,M,P,L,y,E,B,j,D,F;for(b.x=(S+.5)*u,_.x=Math.floor(b.x),w=0;w<i;w++){for(b.y=(w+.5)*h,_.y=Math.floor(b.y),L=0,y=0,E=0,B=0,j=0,O=_.x-f;O<=_.x+f;O++)if(!(O<0||O>=t)){D=Math.floor(1e3*Math.abs(O-b.x)),m[D]||(m[D]={});for(let I=_.y-g;I<=_.y+g;I++)I<0||I>=r||(F=Math.floor(1e3*Math.abs(I-b.y)),m[D][F]||(m[D][F]=c(Math.sqrt(Math.pow(D*d,2)+Math.pow(F*p,2))/1e3)),M=m[D][F],M>0&&(P=4*(I*t+O),L+=M,y+=M*o[P],E+=M*o[P+1],B+=M*o[P+2],j+=M*o[P+3]))}P=4*(w*s+S),l[P]=y/L,l[P+1]=E/L,l[P+2]=B/L,l[P+3]=j/L}return++S<s?x(S):a}(0)}bilinearFiltering(e,t,r,s,i){let o,a,l,c,u,h,d,p,f,g,m,b,_,x=0;const S=this.rcpScaleX,w=this.rcpScaleY,O=4*(t-1),M=e.imageData.data,P=e.ctx.createImageData(s,i),L=P.data;for(d=0;d<i;d++)for(p=0;p<s;p++)for(u=Math.floor(S*p),h=Math.floor(w*d),f=S*p-u,g=w*d-h,_=4*(h*t+u),m=0;m<4;m++)o=M[_+m],a=M[_+4+m],l=M[_+O+m],c=M[_+O+4+m],b=o*(1-f)*(1-g)+a*f*(1-g)+l*g*(1-f)+c*f*g,L[x++]=b;return P}hermiteFastResize(e,t,r,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(s,i),d=h.data;for(let p=0;p<i;p++)for(let f=0;f<s;f++){const g=4*(f+p*s);let m=0,b=0,_=0,x=0,S=0,w=0,O=0;const M=(p+.5)*a;for(let P=Math.floor(p*a);P<(p+1)*a;P++){const L=Math.abs(M-(P+.5))/c,y=(f+.5)*o,E=L*L;for(let B=Math.floor(f*o);B<(f+1)*o;B++){let j=Math.abs(y-(B+.5))/l;const D=Math.sqrt(E+j*j);D>1&&D<-1||(m=2*D*D*D-3*D*D+1,m>0&&(j=4*(B+P*t),O+=m*u[j+3],_+=m,u[j+3]<255&&(m=m*u[j+3]/250),x+=m*u[j],S+=m*u[j+1],w+=m*u[j+2],b+=m))}}d[g]=x/b,d[g+1]=S/b,d[g+2]=w/b,d[g+3]=O/_}return h}}T(ei,"type","Resize"),T(ei,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),T(ei,"uniformLocations",["uDelta","uTaps"]),q.setClass(ei);class ti extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a);t[s]+=l!==i?(l-i)*r:0,t[s+1]+=l!==o?(l-o)*r:0,t[s+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}T(ti,"type","Saturation"),T(ti,"defaults",{saturation:0}),T(ti,"uniformLocations",["uSaturation"]),q.setClass(ti);class ri extends Ve{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,u=2*Math.abs(l-c)/255*r;t[s]+=l!==i?(l-i)*u:0,t[s+1]+=l!==o?(l-o)*u:0,t[s+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}T(ri,"type","Vibrance"),T(ri,"defaults",{vibrance:0}),T(ri,"uniformLocations",["uVibrance"]),q.setClass(ri);var z=(n=>(n.Pointer="pointer",n.Point="point",n.Polyline="polyline",n.Polygon="polygon",n.Rectangle="rect",n))(z||{}),Sr=(n=>(n.Integer="int",n.Float="float",n.String="string",n.Boolean="bool",n))(Sr||{}),Ke=(n=>(n.Lt="lt",n.Lte="lte",n.Gt="gt",n.Gte="gte",n.Eq="eq",n))(Ke||{});const wC={info:n=>alert(`Info: ${n}`),warn:n=>alert(`Warning: ${n}`),error:n=>alert(`Error: ${n}`),success:n=>alert(`Success: ${n}`)},hu=n=>n.rois.length>0,du=n=>n.parameters.length>0,Et=(n,e,t,r,s)=>{const i=n.rois.filter(a=>a.type===e);let o=Object.values(t).filter(a=>a.type===e).length;for(let a=0;a<i.length;a++){const l=i[a];if(l.multiplicity)switch(l.multiplicity.operator){case Ke.Eq:case Ke.Lte:if(o<l.multiplicity.threshold)return!0;o-=l.multiplicity.threshold;break;case Ke.Lt:if(o<l.multiplicity.threshold-1)return!0;o-=l.multiplicity.threshold;break;default:return!0}}return r&&r.warn(s||""),!1},SC=(n,e,t,r)=>{const s={};return n.forEach(i=>{i.required&&Ca(e[i.codename])&&(s[i.codename]=r.requiredField)}),Object.keys(s).length>0?(t(s),!1):!0},Ca=n=>typeof n=="string"||Array.isArray(n)?n.length===0:n==null,_C=(n,e,t,r,s)=>{const i=[];return n.rois.length>0&&!e&&i.push(s.missingPresetName),n.parameters.length&&r.parameters.find(o=>{var a;return((a=n.parameters.find(l=>l.codename===o.codename))==null?void 0:a.required)&&Ca(o.value)})&&i.push(s.missingRequiredValuesInMainParameters),n.rois.forEach(o=>{if(o.multiplicity)switch(o.multiplicity.operator){case Ke.Eq:(r.rois||[]).filter(a=>a.role===o.role).length!==o.multiplicity.threshold&&i.push(Ft(s.shapesOfRoleShouldBeEqualToThreshold,{role:String(o.label),threshold:o.multiplicity.threshold}));break;case Ke.Lt:(r.rois||[]).filter(a=>a.role===o.role).length>=o.multiplicity.threshold&&i.push(Ft(s.shapesOfRoleShouldBeLessThanThreshold,{role:String(o.label),threshold:o.multiplicity.threshold}));break;case Ke.Lte:(r.rois||[]).filter(a=>a.role===o.role).length>o.multiplicity.threshold&&i.push(Ft(s.shapesOfRoleShouldBeLessThanOrEqualToThreshold,{role:String(o.role),threshold:o.multiplicity.threshold}));break;case Ke.Gt:(r.rois||[]).filter(a=>a.role===o.role).length<=o.multiplicity.threshold&&i.push(Ft(s.shapesOfRoleShouldBeGreaterThanThreshold,{role:String(o.role),threshold:o.multiplicity.threshold}));break;case Ke.Gte:(r.rois||[]).filter(a=>a.role===o.role).length<o.multiplicity.threshold&&i.push(Ft(s.shapesOfRoleShouldBeGreaterThanOrEqualToThreshold,{role:String(o.role),threshold:o.multiplicity.threshold}))}}),Object.keys(t).forEach(o=>{var c;const a=t[o].type;(((c=n.rois.find(u=>u.type===a))==null?void 0:c.parameters)??[]).forEach(u=>{var h,d;u.required&&Ca((d=(h=r.rois.find(p=>p.id===o))==null?void 0:h.parameters.find(p=>p.codename===p.codename))==null?void 0:d.value)&&i.push(s.missingRequiredValuesInShapeParameters.replace("{id}",o))})}),[i.length===0,i]},TC=(n,e,t)=>{switch(e){case z.Rectangle:return{angle:n.angle,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,top:Qe(n.top,t.height),left:Qe(n.left,t.width),width:Qe(n.width,t.width),height:Qe(n.height,t.height),color:n.stroke};case z.Point:return{angle:n.angle,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,top:Qe(n.top,t.height),left:Qe(n.left,t.width),color:n.stroke};case z.Polygon:case z.Polyline:return{points:n.get("points").map(({x:r,y:s})=>({x:Qe(r,t.width),y:Qe(s,t.height)})),top:Qe(n.top,t.height),left:Qe(n.left,t.width),color:n.stroke,angle:n.angle,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY}}};function kC(n){const e=[],t=n.calcTransformMatrix();return[new R(-n.width/2,-n.height/2),new R(n.width/2,-n.height/2),new R(n.width/2,n.height/2),new R(-n.width/2,n.height/2)].forEach(function(s){const i=s.transform(t);e.push(i)}),e}function OC(n){if(!n.points||!n.calcTransformMatrix)return[];const e=n.calcTransformMatrix(),t=[];return n.points.filter(r=>t.includes(JSON.stringify(r))?!1:(t.push(JSON.stringify(r)),!0)).map(r=>{const i=new R(r.x-n.pathOffset.x,r.y-n.pathOffset.y).transform(e);return{x:i.x,y:i.y}})}const PC=(n,e,t)=>{switch(e){case z.Rectangle:return{points:kC(n).map(({x:r,y:s})=>({x:Qe(r,t.width),y:Qe(s,t.height)}))};case z.Point:return{x:Qe(n.left,t.width),y:Qe(n.top,t.height)};case z.Polygon:case z.Polyline:return{points:OC(n).map(({x:r,y:s})=>({x:Qe(r,t.width),y:Qe(s,t.height)}))}}},Fr={"text-field":"_text-field_1h8ei_2","text-field-light":"_text-field-light_1h8ei_21","text-field-dark":"_text-field-dark_1h8ei_26","text-field-error":"_text-field-error_1h8ei_31","text-field-label":"_text-field-label_1h8ei_34","text-field-label-error":"_text-field-label-error_1h8ei_45","text-field-helper-text":"_text-field-helper-text_1h8ei_48","text-field-helper-text-error":"_text-field-helper-text-error_1h8ei_59"},Dd=({onChange:n,type:e="text",value:t,label:r,helperText:s,error:i,required:o=!1,readOnly:a=!1,disabled:l=!1,fullWidth:c=!1})=>{const{themeMode:u,Typography:h}=C.useContext(Fe),d=p=>{n(p.target.value)};return v.jsxs("div",{className:V("text-field-wrapper",Fr,u),style:{width:c?"100%":"auto"},children:[r&&v.jsx("label",{className:`${V("text-field-label",Fr,u)} ${i?V("text-field-label-error",Fr,null):""}`,children:v.jsxs(h,{children:[r,o&&" *"]})}),v.jsx("input",{type:e,className:`${V("text-field",Fr,u)} ${i?V("text-field-error",Fr,null):""}`,onChange:d,value:t,readOnly:a,disabled:l}),s&&v.jsx(h,{component:"div",className:`${V("text-field-helper-text",Fr,u)} ${i?V("text-field-helper-text-error",Fr,null):""}`,children:s})]})};Dd.__docgenInfo={description:"",methods:[],displayName:"TextField",props:{type:{defaultValue:{value:"'text'",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},readOnly:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},fullWidth:{defaultValue:{value:"false",computed:!1},required:!1}}};const Rd=({children:n,style:e={},className:t="",component:r="span"})=>{const s=r;return v.jsx(s,{className:t,style:e,children:n})};Rd.__docgenInfo={description:"",methods:[],displayName:"Typography",props:{style:{defaultValue:{value:"{}",computed:!1},required:!1},className:{defaultValue:{value:"''",computed:!1},required:!1},component:{defaultValue:{value:"'span'",computed:!1},required:!1}}};const jd=({color:n="black",style:e={}})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:v.jsx("path",{fill:n,d:"M280-280h84l240-238-86-86-238 238v86Zm352-266 42-44q6-6 6-14t-6-14l-56-56q-6-6-14-6t-14 6l-44 42 86 86ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm280-590q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM200-200v-560 560Z"})});jd.__docgenInfo={description:"",methods:[],displayName:"AnnotateIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Ad=({color:n="black",style:e={}})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",style:e,children:v.jsx("path",{fill:n,d:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"})});Ad.__docgenInfo={description:"",methods:[],displayName:"CopyIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Fd=({color:n="black",style:e={}})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:v.jsx("path",{fill:n,d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})});Fd.__docgenInfo={description:"",methods:[],displayName:"DeleteIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Id=({color:n="black",style:e={}})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:v.jsx("path",{fill:n,d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})});Id.__docgenInfo={description:"",methods:[],displayName:"EditIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Cl=({color:n="black",style:e={}})=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:v.jsx("path",{fill:n,d:"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"})});Cl.__docgenInfo={description:"",methods:[],displayName:"SaveIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Me={enableLogs:!0,themeMode:"light",primaryColor:"#1976d2",primaryFgColor:"#fff",Typography:Rd,IconButton:Oh,Modal:Av,DeleteIcon:Fd,EditIcon:Id,CopyIcon:Ad,AnnotateIcon:jd,SaveIcon:Cl,CloseIcon:el,TextField:Dd,NumberField:Ph,BoolField:_h,EnumField:kh,Button:Th,pickerColors:["#ffffff","#000000","#ff9900","#0099ff"],notify:wC,strings:{cancel:"Cancel",cannotDrawMorePoints:"You cannot draw more points",cannotDrawMorePolygons:"You cannot draw more polygons",cannotDrawMorePolylines:"You cannot draw more polylines",cannotDrawMoreRectangles:"You cannot draw more rectangles",id:"ID",invalidSubmission:"Invalid submission",mainParametersMetadata:"Main parameters",missingPresetName:"Missing preset name",missingRequiredValuesInMainParameters:"Missing required values in main parameters",missingRequiredValuesInShapeParameters:"Missing required values in shape {id} parameters",name:"Name",point:"Point",pointHelpText:"click to draw the point",polygon:"Polygon",polygonHelpText:"click to draw all the polygon points, double click on the last point to close the polygon",polyline:"Polyline",polylineHelpText:"click to draw all the polyline points, double click on the last point to stop drawing",presetDescription:"Preset description",presetName:"Image preset",rect:"Rectangle",rectHelpText:"click and drag to draw the rectangle",pointer:"Selection",pointerHelpText:"click a shape to select it",requiredField:"This field is required",roiMultiplicityEqRule:'a number of "{role}" ({type}) equal to {threshold}',roiMultiplicityGtRule:'a number of "{role}" ({type}) greater than {threshold}',roiMultiplicityGteRule:'a number of "{role}" ({type}) greater than or equal to {threshold}',roiMultiplicityLtRule:'a number of "{role}" ({type}) less than {threshold}',roiMultiplicityLteRule:'a number of "{role}" ({type}) less than or equal to {threshold}',roiMultiplicityNoRule:'a number of "{role}" ({type})',roisToBeDrawn:"ROIs to be drawn",role:"Role",save:"Save",shapeParametersMetadata:"Shape parameters",shapesOfRoleShouldBeEqualToThreshold:"Shapes of role {role} should be equal to {threshold}",shapesOfRoleShouldBeGreaterThanThreshold:"Shapes of role {role} should be greater than {threshold}",shapesOfRoleShouldBeGreaterThanOrEqualToThreshold:"Shapes of role {role} should be greater than or equal to {threshold}",shapesOfRoleShouldBeLessThanThreshold:"Shapes of role {role} should be less than {threshold}",shapesOfRoleShouldBeLessThanOrEqualToThreshold:"Shapes of role {role} should be less than or equal to {threshold}",type:"Type"}},Fe=C.createContext(Me),ks=({children:n,enableLogs:e,themeMode:t,primaryColor:r,primaryFgColor:s,Typography:i,Modal:o,IconButton:a,DeleteIcon:l,EditIcon:c,CopyIcon:u,AnnotateIcon:h,SaveIcon:d,CloseIcon:p,TextField:f,NumberField:g,BoolField:m,EnumField:b,Button:_,pickerColors:x,notify:S,strings:w})=>{const O={enableLogs:e??Me.enableLogs,Typography:i??Me.Typography,Modal:o??Me.Modal,IconButton:a??Me.IconButton,DeleteIcon:l??Me.DeleteIcon,EditIcon:c??Me.EditIcon,CopyIcon:u??Me.CopyIcon,AnnotateIcon:h??Me.AnnotateIcon,SaveIcon:d??Me.SaveIcon,CloseIcon:p??Me.CloseIcon,TextField:f??Me.TextField,NumberField:g??Me.NumberField,BoolField:m??Me.BoolField,EnumField:b??Me.EnumField,Button:_??Me.Button,themeMode:t??Me.themeMode,primaryColor:r??Me.primaryColor,primaryFgColor:s??Me.primaryFgColor,pickerColors:x??Me.pickerColors,notify:S??Me.notify,strings:w?{...Me.strings,...w}:Me.strings};return v.jsx(Fe.Provider,{value:O,children:n})};ks.__docgenInfo={description:"",methods:[],displayName:"UiProvider",props:{strings:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",raw:"UiContextType['strings']"}],raw:"Partial<UiContextType['strings']>"},description:""}}};const EC="_loader_10c9e_1",MC="_spin_10c9e_1",DC={loader:EC,spin:MC,"loader-light":"_loader-light_10c9e_8","loader-dark":"_loader-dark_10c9e_13"},Ld=()=>{const{themeMode:n}=C.useContext(Fe);return v.jsx("div",{className:V("loader",DC,n)})};Ld.__docgenInfo={description:"",methods:[],displayName:"Loader"};const de={_prefix:"on_",_listeners:{},evtName:function(n){return this._prefix+n},register:function(n,e,t){const r=this.evtName(n);typeof this._listeners[r]>"u"&&(this._listeners[r]=[]),this._listeners[r].push([t||this,e])},unregister:function(n,e){const t=this.evtName(n);if(typeof e>"u")delete this._listeners[t];else for(let r=0;r<this._listeners[t].length;r++)this._listeners[t][r][1]===e&&this._listeners[t].splice(r,1)},emit:function(n,...e){const t=this.evtName(n);if(typeof this._listeners[t]<"u")for(let r=0,s=this._listeners[t].length;r<s;r++)this._listeners[t][r][1].call(this._listeners[t][r][0],n,...e)}};var ni,RC=new Uint8Array(16);function jC(){if(!ni&&(ni=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ni))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ni(RC)}const AC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function FC(n){return typeof n=="string"&&AC.test(n)}var Ue=[];for(var Bo=0;Bo<256;++Bo)Ue.push((Bo+256).toString(16).substr(1));function IC(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Ue[n[e+0]]+Ue[n[e+1]]+Ue[n[e+2]]+Ue[n[e+3]]+"-"+Ue[n[e+4]]+Ue[n[e+5]]+"-"+Ue[n[e+6]]+Ue[n[e+7]]+"-"+Ue[n[e+8]]+Ue[n[e+9]]+"-"+Ue[n[e+10]]+Ue[n[e+11]]+Ue[n[e+12]]+Ue[n[e+13]]+Ue[n[e+14]]+Ue[n[e+15]]).toLowerCase();if(!FC(t))throw TypeError("Stringified UUID is invalid");return t}function vr(n,e,t){n=n||{};var r=n.random||(n.rng||jC)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,IC(r)}const LC=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e),l={x:a.x,y:a.y},c=[...r,l];if(s(c),c.length>0){const u=new ir([c[c.length-1].x,c[c.length-1].y,a.x,a.y],{stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1});e.add(u),o([...i,u])}},BC=(n,e,t,r,s,i,o,a)=>{r(!0),LC(n,e,t,s,i,o,a)},NC=(n,e,t,r)=>{if(t&&r.length>0){const s=e.getScenePoint(n.e);r[r.length-1].set({x2:s.x,y2:s.y}),e.renderAll()}},$C=(n,e,t,r,s,i,o,a)=>{if(s.length>2){const l=vr(),c=new wr(s,{fill:"transparent",stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:l});e.add(c),de.emit(`canvas:${n}:shapeAdded`,{id:l,type:z.Polygon,shape:c}),i([]);for(const u of o)e.remove(u);a([]),r(!1)}},WC=(n,e,t,r)=>{const s=vr(),i=[{x:1,y:1},{x:r.width-1,y:0},{x:r.width-1,y:r.height-1},{x:0,y:r.height-1}],o=new wr(i,{fill:"transparent",stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:s});e.add(o),de.emit(`canvas:${n}:shapeAdded`,{id:s,type:z.Polygon,shape:o})},zC=(n,e,t)=>{const r=vr(),s=new wr(t.points,{top:t.top+10,left:t.left+10,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return e.add(s),de.emit(`canvas:${n}:shapeAdded`,{id:r,type:z.Polygon,shape:s}),s},qC=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e),l={x:a.x,y:a.y},c=[...r,l];if(s(c),c.length>0){const u=new ir([c[c.length-1].x,c[c.length-1].y,a.x,a.y],{stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1});e.add(u),o([...i,u])}},VC=(n,e,t,r,s,i,o,a)=>{r(!0),qC(n,e,t,s,i,o,a)},XC=(n,e,t,r)=>{if(t&&r.length>0){const s=e.getScenePoint(n.e);r[r.length-1].set({x2:s.x,y2:s.y}),e.renderAll()}},HC=(n,e,t,r,s,i,o,a)=>{if(s.length>2){const l=vr(),c=new ht(s,{fill:"transparent",stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,lockRotation:!1,id:l});e.add(c),de.emit(`canvas:${n}:shapeAdded`,{id:l,type:z.Polyline,shape:c}),i([]);for(const u of o)e.remove(u);a([]),r(!1)}},YC=(n,e,t)=>{const r=vr(),s=new ht(t.points,{top:t.top+10,left:t.left+10,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return e.add(s),de.emit(`canvas:${n}:shapeAdded`,{id:r,type:z.Polyline,shape:s}),s},UC=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e);r(a.x),s(a.y);const l=vr(),c=new bt({left:a.x,top:a.y,originX:"left",originY:"top",width:0,height:0,fill:"transparent",stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:l});e.add(c),i(c),o(!0)},GC=(n,e,t,r,s,i)=>{if(i&&s){const o=e.getScenePoint(n.e);s.set({width:Math.abs(t-o.x),height:Math.abs(r-o.y)}),t>o.x&&s.set({left:o.x}),r>o.y&&s.set({top:o.y}),e.renderAll()}},KC=(n,e,t,r,s)=>{t(!1),r.setCoords(),de.emit(`canvas:${n}:shapeAdded`,{id:r.id,type:z.Rectangle,shape:r}),s(null),e.defaultCursor="default"},ZC=(n,e,t)=>{const r=vr(),s=new bt({left:t.left+10,top:t.top+10,originX:"left",originY:"top",width:t.width,height:t.height,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return e.add(s),de.emit(`canvas:${n}:shapeAdded`,{id:r,type:z.Rectangle,shape:s}),s},JC=(n,e,t,r,s,i)=>{const o=t.getScenePoint(n.e);s(o.x),i(o.y);const a=vr(),l=new kt({left:o.x,top:o.y,originX:"center",originY:"center",radius:6,fill:"transparent",stroke:r,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1,hoverCursor:"default",id:a});t.add(l),de.emit(`canvas:${e}:shapeAdded`,{id:a,type:z.Point,shape:l}),t.defaultCursor="default"},QC=(n,e,t)=>{const r=vr(),s=new kt({left:t.left+10,top:t.top+10,originX:"center",originY:"center",radius:6,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,strokeUniform:!0,selectable:!1,hasControls:!1,hoverCursor:"default",id:r});return e.add(s),de.emit(`canvas:${n}:shapeAdded`,{id:r,type:z.Point,shape:s}),s},ew=n=>{const[e,t]=C.useState({width:0,height:0});return C.useEffect(()=>{const r=new Image;r.src=n,r.onload=()=>{t({width:r.width,height:r.height})}},[n]),{imageSize:e,isReady:e.width>0}},tw=n=>{const e=C.useRef(null),[t,r]=C.useState({width:0,height:0}),{imageSize:s,isReady:i}=ew(n);return C.useEffect(()=>{if(e.current){const o=()=>{const a=e.current.offsetWidth;a<s.width?r({width:a,height:a*(s.height/s.width)}):r({width:s.width,height:s.height})};s.width>0&&e.current&&o()}},[s,e.current]),{imageSize:s,canvasSize:t,wrapperRef:e,isReady:i}},rw=(n,e,t,r,s,i,o)=>{if(mn("info",o??!1,"Loading initial shapes data",i,n.current),i!=null&&i.rois){const a=[],l=[];i.rois.forEach(c=>{var d,p,f,g;mn("info",o??!1,"Loading initial shape",c);const u=c.id;let h;switch(c.type){case z.Point:h=new kt({angle:c.shape.angle||0,scaleX:c.shape.scaleX||1,scaleY:c.shape.scaleY||1,skewX:c.shape.skewX||0,skewY:c.shape.skewY||0,left:ct(c.shape.left,e.width),top:ct(c.shape.top,e.height),originX:"center",originY:"center",radius:6,fill:"transparent",stroke:c.shape.color,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1,hoverCursor:"default",id:u}),(d=n.current)==null||d.add(h);break;case z.Rectangle:h=new bt({angle:c.shape.angle||0,scaleX:c.shape.scaleX||1,scaleY:c.shape.scaleY||1,skewX:c.shape.skewX||0,skewY:c.shape.skewY||0,left:ct(c.shape.left,e.width),top:ct(c.shape.top,e.height),originX:"left",originY:"top",width:ct(c.shape.width,e.width),height:ct(c.shape.height,e.height),fill:"transparent",stroke:c.shape.color,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:u}),(p=n.current)==null||p.add(h);break;case z.Polygon:h=new wr(c.shape.points.map(({x:m,y:b})=>({x:ct(m,e.width),y:ct(b,e.height)})),{angle:c.shape.angle||0,scaleX:c.shape.scaleX||1,scaleY:c.shape.scaleY||1,skewX:c.shape.skewX||0,skewY:c.shape.skewY||0,top:ct(c.shape.top,e.height),left:ct(c.shape.left,e.width),fill:"transparent",stroke:c.shape.color,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:u}),(f=n.current)==null||f.add(h);break;case z.Polyline:h=new ht(c.shape.points.map(({x:m,y:b})=>({x:ct(m,e.width),y:ct(b,e.height)})),{angle:c.shape.angle||0,scaleX:c.shape.scaleX||1,scaleY:c.shape.scaleY||1,skewX:c.shape.skewX||0,skewY:c.shape.skewY||0,top:ct(c.shape.top,e.height),left:ct(c.shape.left,e.width),fill:"transparent",stroke:c.shape.color,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:u}),(g=n.current)==null||g.add(h);break}a.push({id:u,parameters:c.parameters,name:c.name,role:c.role}),l.push({id:u,type:c.type,shape:h})}),t(l),s({...r,rois:a})}},nw=n=>{const{editorId:e,configuration:t,activeTool:r,activeColor:s,shapes:i,addShape:o,setShapes:a}=gr(),{notify:l,strings:c}=C.useContext(Fe),[u,h]=C.useState(!1),[d,p]=C.useState(null),[f,g]=C.useState(0),[m,b]=C.useState(0),[_]=C.useState({x:0,y:0}),[x,S]=C.useState([]),[w,O]=C.useState([]),M=C.useCallback(y=>{de.emit(`canvas:${e}:shapeSelected`,y.selected??null)},[e]),P=C.useCallback(()=>a({...i}),[i]),L=C.useCallback(()=>{de.emit(`canvas:${e}:shapeSelected`,null)},[e]);C.useEffect(()=>{if(!n)return;r===z.Pointer?(n.selection=!0,n.getObjects().forEach(D=>{D.selectable=!0}),n.renderAll(),n.on("object:modified",P)):(n.selection=!1,n.discardActiveObject(),de.emit(`canvas:${e}:shapeSelected`,null),n.renderAll());const y=D=>{switch(r){case z.Point:if(!Et(t,z.Point,i,l,c.cannotDrawMorePoints))return;JC(D,e,n,s,g,b);break;case z.Rectangle:if(!Et(t,z.Rectangle,i,l,c.cannotDrawMoreRectangles))return;UC(D,n,s,g,b,p,h);break;case z.Polygon:if(!Et(t,z.Polygon,i,l,c.cannotDrawMorePolygons))return;BC(D,n,s,h,x,S,w,O);break;case z.Polyline:if(!Et(t,z.Polyline,i,l,c.cannotDrawMorePolylines))return;VC(D,n,s,h,x,S,w,O);break}},E=D=>{switch(r){case z.Rectangle:GC(D,n,f,m,d,u);break;case z.Polygon:NC(D,n,u,w);break;case z.Polyline:XC(D,n,u,w);break}},B=()=>{switch(r){case z.Rectangle:KC(e,n,h,d,p);break}},j=()=>{switch(r){case z.Polygon:$C(e,n,s,h,x,S,w,O);break;case z.Polyline:HC(e,n,s,h,x,S,w,O);break}};return n.on("mouse:down",y),n.on("mouse:move",E),n.on("mouse:up",B),n.on("mouse:dblclick",j),n.on("selection:created",M),n.on("selection:updated",M),n.on("selection:cleared",L),()=>{n.off("mouse:down",y),n.off("mouse:move",E),n.off("mouse:up",B),n.off("mouse:dblclick",j),n.off("selection:created",M),n.off("selection:updated",M),n.off("selection:cleared",L),n.off("object:modified",P)}},[r,s,u,d,f,m,_,w,x,n,o,M,L,P,t,l,c,i,e])},sw=n=>{const{configuration:e,shapes:t,addShape:r,setActiveTool:s,editorId:i}=gr(),{notify:o,strings:a}=C.useContext(Fe);C.useEffect(()=>{const l=(h,d)=>{const p=n==null?void 0:n.getObjects().find(f=>f.id===d);p&&(n==null||n.remove(p))},c=(h,d)=>{const p=n==null?void 0:n.getObjects().find(g=>g.id===d);let f;switch(p==null?void 0:p.type){case"circle":if(!Et(e,z.Point,t,o,a.cannotDrawMorePoints))return;f=QC(i,n,p),de.emit(`canvas:${i}:selectShape`,f.id);break;case z.Polygon:if(!Et(e,z.Polygon,t,o,a.cannotDrawMorePolygons))return;f=zC(i,n,p),de.emit(`canvas:${i}:selectShape`,f.id);break;case z.Polyline:if(!Et(e,z.Polyline,t,o,a.cannotDrawMorePolylines))return;f=YC(i,n,p),de.emit(`canvas:${i}:selectShape`,f.id);break;case z.Rectangle:if(!Et(e,z.Rectangle,t,o,a.cannotDrawMoreRectangles))return;f=ZC(i,n,p),de.emit(`canvas:${i}:selectShape`,f.id);break}},u=(h,d)=>{const p=n==null?void 0:n.getObjects().find(f=>f.id===d);p&&(n==null||n.discardActiveObject(),n==null||n.setActiveObject(p),n==null||n.requestRenderAll(),s(z.Pointer))};return de.register(`canvas:${i}:removeShape`,l),de.register(`canvas:${i}:copyShape`,c),de.register(`canvas:${i}:selectShape`,u),()=>{de.unregister(`canvas:${i}:removeShape`,l),de.unregister(`canvas:${i}:copyShape`,c),de.unregister(`canvas:${i}:selectShape`,u)}},[s,n,r,e,t,o,a,i])},iw=n=>{const[e,t]=C.useState({}),[r,s]=C.useState(n.reduce((o,a)=>({...o,[a.codename]:a.value}),{}));return{fields:r,setField:o=>a=>{s({...r,[o]:a})},setFields:s,errors:e,setErrors:t}},Bd=({canvasRef:n,canvasSize:e,imageSize:t,initialData:r})=>{const{metadata:s,setMetadata:i,addShapes:o,editorId:a}=gr(),{enableLogs:l}=C.useContext(Fe),[c,u]=C.useState(!1);return nw(n.current),sw(n.current),C.useEffect(()=>(e.width!==0&&e.height!==0&&!c&&(n.current=new ba(`react-cam-roi-canvas-${a}`),n.current.setDimensions({width:e.width,height:e.height}),rw(n,t,o,s,i,r,l),u(!0)),()=>{var h;(h=n.current)==null||h.dispose()}),[e.width,e.height]),v.jsx("canvas",{id:`react-cam-roi-canvas-${a}`,style:{width:`${e.width}px`,height:`${e.height}px`}})};Bd.__docgenInfo={description:"",methods:[],displayName:"Canvas"};const ow="_header_1twtf_1",pu={header:ow,"header-light":"_header-light_1twtf_10","header-dark":"_header-dark_1twtf_14","header-info":"_header-info_1twtf_18","header-info-light":"_header-info-light_1twtf_22","header-info-dark":"_header-info-dark_1twtf_26"},Nd=()=>{var l,c;const{strings:n,Typography:e,TextField:t}=C.useContext(Fe),{configuration:r,presetName:s,setPresetName:i,presetDescription:o,setPresetDescription:a}=gr();return(l=r.rois)!=null&&l.length?v.jsxs("div",{children:[v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsx(t,{required:!0,value:s,onChange:i,label:n.presetName,fullWidth:!0})}),v.jsx("div",{style:{marginBottom:"1rem"},children:v.jsx(t,{value:o,onChange:a,label:n.presetDescription,fullWidth:!0})}),((c=r.options)==null?void 0:c.description)&&v.jsx(e,{children:r.options.description}),v.jsxs(e,{component:"div",children:[n.roisToBeDrawn,":"]}),v.jsx("ul",{children:r.rois.map(u=>{var p,f;let h;const d={role:u.label,type:u.type,threshold:(p=u.multiplicity)==null?void 0:p.threshold};switch((f=u.multiplicity)==null?void 0:f.operator){case Ke.Eq:h=Ft(n.roiMultiplicityEqRule,d);break;case Ke.Lt:h=Ft(n.roiMultiplicityLtRule,d);break;case Ke.Lte:h=Ft(n.roiMultiplicityLteRule,d);break;case Ke.Gt:h=Ft(n.roiMultiplicityGtRule,d);break;case Ke.Gte:h=Ft(n.roiMultiplicityGteRule,d);break;default:h=Ft(n.roiMultiplicityNoRule,d)}return v.jsx("li",{children:v.jsx(e,{children:h})},u.role)})})]}):null};Nd.__docgenInfo={description:"",methods:[],displayName:"RoisInfo"};const $d=()=>{const{themeMode:n}=C.useContext(Fe);return v.jsx("div",{className:V("header",pu,n),children:v.jsx("div",{className:V("header-info",pu,n),children:v.jsx(Nd,{})})})};$d.__docgenInfo={description:"",methods:[],displayName:"Header"};const fu={"canvas-wrapper":"_canvas-wrapper_18kx6_1","rois-wrapper":"_rois-wrapper_18kx6_7"},Wd=({onChange:n,value:e,required:t,shapeType:r,...s})=>{const{strings:i,EnumField:o}=C.useContext(Fe),{configuration:a}=gr(),l=[];return(a.rois||[]).filter(u=>u.type===r).forEach(u=>{l.includes(u.role)||l.push(u.role)}),C.useEffect(()=>{t&&n(l[0])},[]),v.jsx(o,{required:t,label:i.role,value:e,onChange:u=>n(u),options:l.map(u=>({value:u,label:Dv(u)})),...s})};Wd.__docgenInfo={description:"",methods:[],displayName:"RoleField"};const yi=({value:n,onChange:e,parameter:t,errors:r,readOnly:s})=>{var h,d;const{TextField:i,NumberField:o,BoolField:a,EnumField:l,strings:c}=C.useContext(Fe),u={required:t.required,label:`${t.label}${t.unit?` (${t.unit})`:""}`,error:!!r[t.codename],helperText:r[t.codename]?c[r[t.codename]]:t.description};switch(t.type){case"string":return(h=t.options)!=null&&h.length?v.jsx(l,{value:n,onChange:p=>e(p),options:t.options,multiple:t.multiple,disabled:s,...u}):v.jsx(i,{type:"text",readOnly:s,value:n,onChange:p=>e(p),...u});case"int":case"float":return(d=t.options)!=null&&d.length?v.jsx(l,{value:n,onChange:p=>e(p),options:t.options,multiple:t.multiple,disabled:s,...u}):v.jsx(o,{value:n,readOnly:s,onChange:p=>e(p),...u});case"bool":return v.jsx(a,{checked:n,disabled:s,onChange:p=>e(p),...u});default:return null}};yi.__docgenInfo={description:"",methods:[],displayName:"ParameterField",props:{value:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: T) => void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"void"}}},description:""},parameter:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}},description:""},errors:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const aw="_form_mzru3_1",lw={form:aw},Li=({title:n,onClose:e,parameters:t,data:r,onSubmit:s,shapeType:i,shapeName:o,shapeRole:a,noModal:l,readOnly:c})=>{const{Modal:u,TextField:h,strings:d}=C.useContext(Fe),[p,f]=C.useState(o??""),[g,m]=C.useState(a??""),{fields:b,setField:_,errors:x,setErrors:S}=iw(r),w=r.reduce((P,L)=>({...P,[L.codename]:L.value}),{}),O=()=>{if(i&&p==="")S({name:d.requiredField});else if(SC(t,b,S,d)){const P=[...t.map(L=>({codename:L.codename,value:b[L.codename]}))];i?s(P,{name:p,role:g}):s(P)}},M=v.jsxs("div",{className:V("form",lw,null),children:[i&&v.jsxs(v.Fragment,{children:[v.jsx(h,{required:!0,label:d.name,type:"text",value:p,onChange:f,error:!!x.name,helperText:x.name,readOnly:c}),v.jsx(Wd,{required:!0,value:g,onChange:m,error:!!x.role,helperText:x.role,shapeType:i,readOnly:c,disabled:c})]}),t.map(P=>{switch(P.type){case"string":return v.jsx(yi,{value:String((c?w:b)[P.codename]),onChange:_(P.codename),parameter:P,errors:x,readOnly:c},P.codename);case"int":case"float":return v.jsx(yi,{value:(c?w:b)[P.codename],onChange:_(P.codename),parameter:P,errors:x,readOnly:c},P.codename);case"bool":return v.jsx(yi,{value:(c?w:b)[P.codename],onChange:_(P.codename),parameter:P,errors:x,readOnly:c},P.codename);default:return null}})]});return l?M:v.jsx(u,{onClose:e,title:n,isOpen:!0,maxWidth:"sm",onSubmit:O,children:M})};Li.__docgenInfo={description:"",methods:[],displayName:"ParametersModalForm"};const cw="_shapesTableName_1uau6_58",uw="_shapesTableColor_1uau6_63",pn={"shapes-table":"_shapes-table_1uau6_1","shapes-table-light":"_shapes-table-light_1uau6_24","shapes-table-dark":"_shapes-table-dark_1uau6_29","shapes-row-selected-light":"_shapes-row-selected-light_1uau6_34","shapes-row-selected-dark":"_shapes-row-selected-dark_1uau6_38","shapes-row-even-light":"_shapes-row-even-light_1uau6_42","shapes-row-even-dark":"_shapes-row-even-dark_1uau6_46","shapes-row-odd-light":"_shapes-row-odd-light_1uau6_50","shapes-row-odd-dark":"_shapes-row-odd-dark_1uau6_54",shapesTableName:cw,shapesTableColor:uw},zd=()=>{var L,y,E,B,j;const{strings:n,Typography:e,IconButton:t,DeleteIcon:r,AnnotateIcon:s,CopyIcon:i,themeMode:o}=C.useContext(Fe),{shapes:a,removeShape:l,configuration:c,metadata:u,setMetadata:h,addShape:d,editorId:p}=gr(),[f,g]=C.useState([]),[m,b]=C.useState({isOpen:!1,shapeId:"",type:null,shape:null});C.useEffect(()=>{const D=(F,{id:I,type:N,shape:W})=>{b({isOpen:!0,shapeId:I,type:N,shape:W})};return de.register(`canvas:${p}:shapeAdded`,D),()=>{de.unregister(`canvas:${p}:shapeAdded`,D)}},[p]),C.useEffect(()=>{const D=(F,I)=>g((I==null?void 0:I.map(N=>N.id))??[]);return de.register(`canvas:${p}:shapeSelected`,D),()=>{de.unregister(`canvas:${p}:shapeSelected`,D)}},[a,p]);const _=D=>F=>{F.stopPropagation(),de.emit(`canvas:${p}:copyShape`,D)},x=D=>()=>{de.emit(`canvas:${p}:removeShape`,D),l(D)},S=D=>()=>{de.emit(`canvas:${p}:selectShape`,D)},w=D=>()=>{b({isOpen:!0,shapeId:D,type:null,shape:null})},O=D=>(F,I)=>{m.type!==null&&d(D,m.type,m.shape),h({...u,rois:[...u.rois.filter(N=>N.id!==D),{id:D,parameters:F,...I}]}),b({isOpen:!1,shapeId:"",type:null,shape:null})},M=()=>{m.type!==null&&de.emit(`canvas:${p}:removeShape`,m.shapeId),b({isOpen:!1,shapeId:"",type:null,shape:null})},P=o==="light"?"black":"white";return v.jsxs(v.Fragment,{children:[v.jsxs("table",{className:V("shapes-table",pn,o),children:[Object.keys(a).length>0&&v.jsx("thead",{children:v.jsxs("tr",{children:[v.jsx("th",{children:v.jsx(e,{style:{fontWeight:"bold"},children:n.name})}),v.jsx("th",{children:v.jsx(e,{style:{fontWeight:"bold"},children:n.role})}),v.jsx("th",{children:v.jsx(e,{style:{fontWeight:"bold"},children:n.type})}),v.jsx("th",{})]})}),v.jsx("tbody",{children:Object.keys(a).map((D,F)=>{var N;const I=u.rois.find(W=>W.id===D);return v.jsxs("tr",{onClick:S(D),className:f.indexOf(D)>-1?V("shapes-row-selected",pn,o):F%2===0?V("shapes-row-even",pn,o):V("shapes-row-odd",pn,o),children:[v.jsx("td",{children:v.jsxs("div",{className:pn.shapesTableName,children:[v.jsx("div",{className:pn.shapesTableColor,style:{backgroundColor:a[D].shape.stroke}}),v.jsx(e,{children:I==null?void 0:I.name})]})}),v.jsx("td",{children:v.jsx(e,{children:(N=c.rois.find(W=>W.role===(I==null?void 0:I.role)))==null?void 0:N.label})}),v.jsx("td",{children:v.jsx(e,{children:n[a[D].type]})}),v.jsxs("td",{children:[v.jsx(t,{onClick:_(D),children:v.jsx(i,{color:P})}),v.jsx(t,{onClick:w(D),children:v.jsx(s,{color:P})}),v.jsx(t,{onClick:x(D),children:v.jsx(r,{color:P})})]})]},D)})})]}),m.isOpen&&v.jsx(Li,{shapeType:m.type||a[m.shapeId].type,shapeName:((L=u.rois.find(D=>D.id===m.shapeId))==null?void 0:L.name)??"",shapeRole:((y=u.rois.find(D=>D.id===m.shapeId))==null?void 0:y.role)??"",shapeId:m.shapeId,parameters:((E=c.rois.find(D=>D.type===(m.type||a[m.shapeId].type)))==null?void 0:E.parameters)??[],data:((B=u.rois.find(D=>D.id===m.shapeId))==null?void 0:B.parameters)??((j=c.rois.find(D=>D.type===(m.type||a[m.shapeId].type)))==null?void 0:j.parameters)??[],title:n.shapeParametersMetadata,onClose:M,onSubmit:O(m.shapeId)})]})};zd.__docgenInfo={description:"",methods:[],displayName:"ShapesList"};const qd=({color:n="black",style:e={height:"23px"}})=>v.jsxs("svg",{style:e,id:"Livello_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 18",children:[v.jsx("polyline",{fill:n,points:"12.0852 7.9148 15.341 7.9148 15.341 10.0852 12.0852 10.0852 12.0852 13.341 9.9148 13.341 9.9148 10.0852 6.659 10.0852 6.659 7.9148 9.9148 7.9148 9.9148 4.659 12.0852 4.659 12.0852 7.9148"}),v.jsx("polygon",{fill:n,points:"0 18 0 13 2 13 2 16 5 16 5 18 0 18"}),v.jsx("polygon",{fill:n,points:"17 18 17 16 20 16 20 13 22 13 22 18 17 18"}),v.jsx("polygon",{fill:n,points:"0 5 0 0 5 0 5 2 2 2 2 5 0 5"}),v.jsx("polygon",{fill:n,points:"20 5 20 2 17 2 17 0 22 0 22 5 20 5"})]});qd.__docgenInfo={description:"",methods:[],displayName:"FullRoiIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '23px' }",computed:!1},required:!1}}};const Vd=({color:n="black",style:e={height:"32px"}})=>v.jsxs("svg",{style:e,width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("circle",{cx:"9.5",cy:"15.5",r:"4.5",fill:n}),v.jsx("path",{d:"M19.5 0 L21.5 0 L21.5 3.5 L25 3.5 L25 5.5 L21.5 5.5 L21.5 9 L19.5 9 L19.5 5.5 L16 5.5 L16 3.5 L19.5 3.5 Z",stroke:n,"stroke-width":".6",fill:n})]});Vd.__docgenInfo={description:"",methods:[],displayName:"PointIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const Xd=({color:n="black",style:e={height:"32px"}})=>v.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:v.jsx("path",{fill:n,d:"M13.3891,20.923l-3.1995-6.8869-3.47,4.8454V4.077l11.5606,9.0859h-5.9695l3.1679,6.7828-2.0893.9773h-.0002Z"})});Xd.__docgenInfo={description:"",methods:[],displayName:"PointerIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const Hd=({color:n="black",style:e={height:"32px"}})=>v.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:v.jsx("path",{fill:n,d:"M17.3836,17.058v-2.9301h2.1705v4.341l-9.7673,4.341-7.5967-7.5968L6.5311,5.4459h4.341v2.1705h-2.9301l-3.1472,7.1627,5.4263,5.4263,7.1627-3.1472M22.8099,5.4459v2.1705h-3.2558v3.2558h-2.1705v-3.2558h-3.2558v-2.1705h3.2558v-3.2558h2.1705v3.2558h3.2558Z"})});Hd.__docgenInfo={description:"",methods:[],displayName:"PolygonIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const Yd=({color:n="black",style:e={height:"32px"}})=>v.jsxs("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:[v.jsx("polygon",{fill:n,points:"20.5216 8.6492 20.5216 5.4658 18.3992 5.4658 18.3992 8.6492 15.2159 8.6492 15.2159 10.7715 18.3992 10.7715 18.3992 13.955 20.5216 13.955 20.5216 10.7715 23.705 10.7715 23.705 8.6492 20.5216 8.6492"}),v.jsx("polygon",{fill:n,points:"12.3027 17.2 7.011 14.4951 7.011 11.5067 8.9251 9.2929 13.103 9.2929 13.103 3.577 7.3871 3.577 7.3871 7.7797 4.7908 10.7826 1.295 10.7826 1.295 16.4985 6.2004 16.4985 12.3027 19.6175 12.3027 21.423 18.0186 21.423 18.0186 15.7071 12.3027 15.7071 12.3027 17.2"})]});Yd.__docgenInfo={description:"",methods:[],displayName:"PolylineIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const Ud=({color:n="black",style:e={height:"32px"}})=>v.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:v.jsx("path",{fill:n,d:"M19.5541,7.0738h3.2558v2.1705h-3.2558v3.2558h-2.1705v-3.2558h-3.2558v-2.1705h3.2558v-3.2558h2.1705v3.2558M17.3836,19.0115v-3.2558h2.1705v5.4263H2.1901V7.0738h8.682v2.1705h-6.5115v9.7673h13.023,0Z"})});Ud.__docgenInfo={description:"",methods:[],displayName:"RectangleIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const hw="_colorpickerWrapper_15gxc_1",No={colorpickerWrapper:hw,"colorpicker-button":"_colorpicker-button_15gxc_7","colorpicker-button-active":"_colorpicker-button-active_15gxc_15"},Gd=({style:n})=>{const{pickerColors:e,themeMode:t}=C.useContext(Fe),{activeColor:r,setActiveColor:s}=gr();return v.jsx("div",{style:n,className:No.colorpickerWrapper,children:e.map(i=>v.jsx("div",{onClick:()=>s(i),className:`${V("colorpicker-button",No,t)} ${r===i?V("colorpicker-button-active",No,t):""}`,style:{backgroundColor:i}},i))})};Gd.__docgenInfo={description:"",methods:[],displayName:"ColorPicker"};const dw="_toolbar_jxl4s_1",gu={toolbar:dw,"toolbar-light":"_toolbar-light_jxl4s_7","toolbar-dark":"_toolbar-dark_jxl4s_11","toolbar-helper":"_toolbar-helper_jxl4s_15","toolbar-helper-light":"_toolbar-helper-light_jxl4s_19","toolbar-helper-dark":"_toolbar-helper-dark_jxl4s_24","toolbar-spacer":"_toolbar-spacer_jxl4s_29","toolbar-spacer-light":"_toolbar-spacer-light_jxl4s_35","toolbar-spacer-dark":"_toolbar-spacer-dark_jxl4s_39"},Kd=({canvasRef:n,imageSize:e})=>{var w;const{IconButton:t,themeMode:r,primaryColor:s,Typography:i,strings:o}=C.useContext(Fe),{activeTool:a,setActiveTool:l,configuration:c,shapes:u,editorId:h,activeColor:d}=gr(),p=O=>O===a?s:r==="light"?"black":"white",f=O=>()=>l(O),g=(w=c.options)==null?void 0:w.hideForbiddenTools,m=c.rois.find(O=>O.type===z.Point)&&Et(c,z.Point,u),b=c.rois.find(O=>O.type===z.Polyline)&&Et(c,z.Polyline,u),_=c.rois.find(O=>O.type===z.Polygon)&&Et(c,z.Polygon,u),x=c.rois.find(O=>O.type===z.Rectangle)&&Et(c,z.Rectangle,u),S=()=>{WC(h,n.current,d,e)};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:V("toolbar",gu,r),children:hu(c)&&v.jsxs(v.Fragment,{children:[v.jsx(t,{onClick:f(z.Pointer),children:v.jsx(Xd,{color:p(z.Pointer)})}),(!g||m)&&v.jsx(t,{onClick:f(z.Point),disabled:!m,children:v.jsx(Vd,{color:p(z.Point)})}),(!g||b)&&v.jsx(t,{onClick:f(z.Polyline),disabled:!b,children:v.jsx(Yd,{color:p(z.Polyline)})}),(!g||_)&&v.jsxs(v.Fragment,{children:[v.jsx(t,{onClick:f(z.Polygon),disabled:!_,children:v.jsx(Hd,{color:p(z.Polygon)})}),v.jsx(t,{onClick:S,disabled:!_,children:v.jsx(qd,{color:p(z.Polygon)})})]}),(!g||x)&&v.jsx(t,{onClick:f(z.Rectangle),disabled:!x,children:v.jsx(Ud,{color:p(z.Rectangle)})}),v.jsx(Gd,{style:{marginLeft:"auto",marginRight:".5rem"}})]})}),hu(c)&&v.jsx("div",{className:V("toolbar-helper",gu,r),children:v.jsxs(i,{children:[o[a],": ",o[`${a}HelpText`]]})})]})};Kd.__docgenInfo={description:"",methods:[],displayName:"Toolbar"};const $o={"top-bar":"_top-bar_4krk3_1","main-parameters-view":"_main-parameters-view_4krk3_9","main-parameters-view-light":"_main-parameters-view-light_4krk3_12","main-parameters-view-dark":"_main-parameters-view-dark_4krk3_15","main-parameters-button":"_main-parameters-button_4krk3_20"},Zd=()=>{var p,f;const{themeMode:n,AnnotateIcon:e,Button:t,primaryFgColor:r,strings:s}=C.useContext(Fe),{configuration:i,onSubmit:o,metadata:a,setMetadata:l}=gr(),[c,u]=C.useState({isOpen:!1}),h=n==="light"?"black":"white",d=g=>{l({...a,parameters:g}),u({isOpen:!1})};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:V("top-bar",$o,n),children:[du(i)&&!((p=i.options)!=null&&p.viewMainParameters)&&v.jsxs(t,{onClick:()=>u({isOpen:!0}),children:[v.jsx(e,{color:h})," ",s.mainParametersMetadata]}),v.jsxs(t,{primary:!0,onClick:o,children:[v.jsx(Cl,{color:r})," ",s.save]}),c.isOpen&&v.jsx(Li,{parameters:i.parameters,data:a.parameters,title:s.mainParametersMetadata,onClose:()=>u({isOpen:!1}),onSubmit:d})]}),du(i)&&((f=i.options)==null?void 0:f.viewMainParameters)&&v.jsxs("div",{className:V("main-parameters-view",$o,n),children:[v.jsx("div",{className:V("main-parameters-button",$o,n),children:v.jsxs(t,{onClick:()=>u({isOpen:!0}),children:[v.jsx(e,{color:h})," ",s.mainParametersMetadata]})}),v.jsx(Li,{parameters:i.parameters,data:a.parameters,title:s.mainParametersMetadata,onClose:()=>u({isOpen:!1}),onSubmit:d,readOnly:!0,noModal:!0})]})]})};Zd.__docgenInfo={description:"",methods:[],displayName:"TopBar"};const wl=({imageUrl:n,configuration:e,onSubmit:t,onUpdate:r,initialData:s,editorId:i,allowPartialSave:o,slots:a})=>{var se;mn("info",!0,"react-cam-roi","React",Ut);const l=C.useRef(0),c=C.useRef(null),{themeMode:u,enableLogs:h,pickerColors:d,strings:p,notify:f}=C.useContext(Fe),{imageSize:g,canvasSize:m,wrapperRef:b,isReady:_}=tw(n),[x,S]=C.useState((s==null?void 0:s.presetName)??""),[w,O]=C.useState((s==null?void 0:s.presetDescription)??""),[M,P]=C.useState(z.Pointer),[L,y]=C.useState(d[0]),[E,B]=C.useState({parameters:[...e.parameters.map(G=>{var K;const Z=(K=s==null?void 0:s.parameters)==null?void 0:K.find(Q=>Q.codename===G.codename);return{codename:G.codename,value:Z?Z.value:G.value}})??[]],rois:[]}),[j,D]=C.useState({}),F=C.useCallback((G,Z,K)=>D({...j,[G]:{type:Z,shape:K}}),[j]),I=C.useCallback(G=>D({...j,...G.reduce((Z,K)=>({...Z,[K.id]:K}),{})}),[j]),N=C.useCallback(G=>{const Z={...j};delete Z[G],D(Z),B({...E,rois:E.rois.filter(K=>K.id!==G)})},[j,E]),W=C.useCallback((G,Z,K,Q)=>{var ie;return{parameters:((ie=G.parameters)==null?void 0:ie.map(re=>({codename:re.codename,value:re.value})))??[],presetName:K,presetDescription:Q,rois:Object.keys(Z).map(re=>{var be,Xe,fe,Y;return{parameters:((Xe=(be=G.rois.find(ne=>ne.id===re))==null?void 0:be.parameters)==null?void 0:Xe.map(ne=>({codename:ne.codename,value:ne.value})))??[],name:((fe=G.rois.find(ne=>ne.id===re))==null?void 0:fe.name)??"",role:((Y=G.rois.find(ne=>ne.id===re))==null?void 0:Y.role)??"",type:Z[re].type,id:re,shape:TC(Z[re].shape,Z[re].type,g),coords:PC(Z[re].shape,Z[re].shape.type,g)}})}},[g.width,g.height,c]);C.useEffect(()=>{if(l.current<3){l.current+=1;return}else r&&r(W(E,j,x,w))},[E,j,r,W]);const $=C.useCallback(()=>{const[G,Z]=_C(e,x,j,E,p);G?t(W(E,j,x,w)):o?t({...W(E,j,x,w),errors:Z}):f.error(p.invalidSubmission+`
`+Z.map(K=>`- ${K}`).join(`
`))},[t,e,j,E,W,p,f,x,w]);return mn("info",h,"react-cam-roi","active tool",M),mn("info",h,"react-cam-roi","canvas size",m),mn("info",h,"react-cam-roi","metadata",E),_?v.jsx(Sh,{editorId:i,hideForbiddenTools:((se=e.options)==null?void 0:se.hideForbiddenTools)??!1,activeTool:M,setActiveTool:P,activeColor:L,setActiveColor:y,presetName:x,setPresetName:S,presetDescription:w,setPresetDescription:O,shapes:j,setShapes:D,addShape:F,addShapes:I,removeShape:N,configuration:e,metadata:E,setMetadata:B,onSubmit:$,children:v.jsxs("div",{style:{maxWidth:"100%",width:`${g.width}px`},ref:b,children:[v.jsx(Zd,{}),e.rois&&e.rois.length>0&&v.jsxs(v.Fragment,{children:[(a==null?void 0:a.roiAbove)&&a.roiAbove,v.jsxs("div",{className:V("rois-wrapper",fu,u),children:[v.jsx($d,{}),v.jsx(Kd,{canvasRef:c,imageSize:g}),v.jsx("div",{className:V("canvas-wrapper",fu,u),style:{width:`${m.width}px`,height:`${m.height}px`,backgroundImage:`url(${n})`},children:v.jsx(Bd,{canvasRef:c,imageSize:g,canvasSize:m,initialData:s})}),v.jsx(zd,{})]})]})]})}):v.jsx(Ld,{})};wl.__docgenInfo={description:"",methods:[],displayName:"RoiEditor",props:{editorId:{required:!0,tsType:{name:"string"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},configuration:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: ConfigurationParameter[]
  rois: RoiConfiguration[]
  options?: {
    hideForbiddenTools?: boolean
    description?: string
    viewMainParameters?: boolean
  }
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  role: string
  label: string
  type: Omit<ShapeType, 'pointer'>
  multiplicity: {
    operator: OperatorEnum
    threshold: number
  }
  parameters: ConfigurationParameter[]
}`,signature:{properties:[{key:"role",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"type",value:{name:"Omit",elements:[{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle | ToolEnum.Point",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"},{name:"ToolEnum.Point"}]},{name:"literal",value:"'pointer'"}],raw:"Omit<ShapeType, 'pointer'>",required:!0}},{key:"multiplicity",value:{name:"signature",type:"object",raw:`{
  operator: OperatorEnum
  threshold: number
}`,signature:{properties:[{key:"operator",value:{name:"OperatorEnum",required:!0}},{key:"threshold",value:{name:"number",required:!0}}]},required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}}]}}],raw:"RoiConfiguration[]",required:!0}},{key:"options",value:{name:"signature",type:"object",raw:`{
  hideForbiddenTools?: boolean
  description?: string
  viewMainParameters?: boolean
}`,signature:{properties:[{key:"hideForbiddenTools",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}},{key:"viewMainParameters",value:{name:"boolean",required:!1}}]},required:!1}}]}},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: Output) => void",signature:{arguments:[{type:{name:"Output"},name:"data"}],return:{name:"void"}}},description:""},onUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: Output) => void",signature:{arguments:[{type:{name:"Output"},name:"data"}],return:{name:"void"}}},description:""},initialData:{required:!1,tsType:{name:"Output"},description:""},allowPartialSave:{required:!1,tsType:{name:"boolean"},description:""},slots:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  roiAbove?: React.ReactNode
}`,signature:{properties:[{key:"roiAbove",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}}]}},description:""}}};const pw={parameters:[{codename:"analytics_1",label:"Analytics param 1",description:"This is some descriptive text",unit:"s",type:Sr.Integer,options:[{value:7,label:"Seven"},{value:10,label:"Ten"}],multiple:!0,required:!0,value:10},{codename:"analytics_2",label:"Analytics param 2",description:"This is some descriptive text",unit:"s",type:Sr.Boolean,options:[],required:!0,value:null}],rois:[{role:"invasion_area",label:"Invasion area",type:z.Polygon,multiplicity:{operator:Ke.Eq,threshold:1},parameters:[{codename:"threshold",label:"Alert threshold",description:"Threshold used for triggering alarms",unit:"%",type:Sr.Integer,options:[],required:!0,value:null}]},{role:"profile",label:"Profile",type:z.Point,multiplicity:{operator:Ke.Eq,threshold:1},parameters:[{codename:"threshold",label:"Profile threshold",description:"Threshold used for profiles",unit:"m",type:Sr.Integer,options:[],required:!0,value:2}]}],options:{hideForbiddenTools:!1,description:"Draw a polygon and one or more polylines.",viewMainParameters:!0}},fw={parameters:[{codename:"analytics_1",value:[10,7]},{codename:"analytics_2",value:!1}],presetName:"Some ptz info",presetDescription:"Some text",rois:[{parameters:[{codename:"threshold",value:2}],name:"Point",role:"profile",type:"point",id:"9cbe5d5d-8a5d-4e9f-9e8f-5c4d3b2a1e9d",shape:{left:27.63,top:17.53,color:"#ff9900"}},{parameters:[{codename:"threshold",value:9}],name:"Pub",role:"invasion_area",type:"polygon",id:"acbe5d5d-8a5d-4e9f-9e8f-5c4d3b2a1e9d",shape:{points:[{x:0,y:0},{x:36.5,y:58.37},{x:42.25,y:18.37},{x:27.63,y:17.53},{x:27.63,y:17.53}],top:0,left:0,color:"#ffffff"}}]},gw={parameters:[{codename:"analytics_1",label:"Analytics param 1",description:"This is some descriptive text",unit:"s",type:Sr.Integer,options:[{value:7,label:"Seven"},{value:10,label:"Ten"}],multiple:!0,required:!0,value:10},{codename:"analytics_2",label:"Analytics param 2",description:"This is some descriptive text",unit:"s",type:Sr.Boolean,options:[],required:!0,value:null}],rois:[],options:{hideForbiddenTools:!1,viewMainParameters:!0}},mw={parameters:[{codename:"analytics_1",value:[10,7]},{codename:"analytics_2",value:!1}],rois:[]},yw={parameters:[],rois:[{role:"invasion_area",label:"Invasion area",type:z.Rectangle,multiplicity:{operator:Ke.Eq,threshold:1},parameters:[{codename:"threshold",label:"Alert threshold",description:"Threshold used for triggering alarms",unit:"%",type:Sr.Integer,options:[],required:!0,value:null}]}],options:{hideForbiddenTools:!1,viewMainParameters:!0}},vw={parameters:[],rois:[{parameters:[{codename:"threshold",value:9}],name:"Pub",role:"invasion_area",type:"polygon",id:"acbe5d5d-8a5d-4e9f-9e8f-5c4d3b2a1e9d",shape:{points:[{x:0,y:0},{x:36.5,y:58.37},{x:42.25,y:18.37},{x:27.63,y:17.53},{x:27.63,y:17.53}],top:0,left:0,color:"#ffffff",angle:0,scaleX:1,scaleY:1,skewX:0,skewY:0},coords:{points:[{x:.13,y:.17},{x:36.63,y:58.54},{x:42.38,y:18.54},{x:27.75,y:17.7}]}}]},{useArgs:bw}=__STORYBOOK_MODULE_PREVIEW_API__,_w={title:"ReactCamRoi/ROI Editor",component:wl,decorators:[(n,e)=>v.jsxs("div",{style:{maxWidth:"1000px"},children:[v.jsx("h2",{children:"react-cam-roi"}),v.jsx(ks,{themeMode:e.globals.theme,children:v.jsx(n,{})})]})],args:{editorId:"meow",imageUrl:"https://picsum.photos/800/600",configuration:pw,initialData:fw,onSubmit:n=>{console.log("output",n)},onUpdate:n=>{console.log("update",n)}},parameters:{layout:"centered"}},si={render:function(e){const[{imageUrl:t},r]=bw(),s=()=>{r({imageUrl:`https://picsum.photos/800/600/?${new Date().getTime()}`})};return v.jsxs("div",{children:[v.jsx("p",{children:v.jsx("button",{onClick:s,children:"change image"})}),v.jsx(wl,{...e,imageUrl:t})]})},args:{editorId:"default"+String(new Date().getTime())}},Sl=({onChange:n,...e})=>v.jsx(Ch,{...e,onChange:t=>n(t.target.value),variant:"outlined"}),_l=({onChange:n,...e})=>v.jsx(Ch,{...e,onChange:t=>n(t.target.value),variant:"outlined"}),Tl=({onChange:n,checked:e,...t})=>v.jsx(Sy,{...t,control:v.jsx(X0,{checked:e,onChange:r=>n(r.target.checked)})}),ii={decorators:[(n,e)=>v.jsxs("div",{children:[v.jsx("h3",{children:"Example using some MUI components"}),v.jsx("p",{children:"TextField, Checkbox, IconButton. Dark mode is not configured in this example."}),v.jsx(ks,{themeMode:e.globals.theme,IconButton:Ha,Typography:cs,TextField:Sl,NumberField:_l,BoolField:Tl,children:v.jsx(n,{})})]})],args:{editorId:"mui"},tags:["autodocs"]},oi={decorators:[(n,e)=>v.jsxs("div",{children:[v.jsx("h3",{children:"Example of configuration with no ROIs"}),v.jsx(ks,{themeMode:e.globals.theme,IconButton:Ha,Typography:cs,TextField:Sl,NumberField:_l,BoolField:Tl,children:v.jsx(n,{})})]})],args:{editorId:"noRoi",imageUrl:"https://picsum.photos/800/600",configuration:gw,initialData:mw,onSubmit:n=>{console.log("output",n)},onUpdate:n=>{console.log("update",n)}},tags:["autodocs"]},ai={decorators:[(n,e)=>v.jsxs("div",{children:[v.jsx("h3",{children:"Example of configuration with no Main parameters"}),v.jsx(ks,{themeMode:e.globals.theme,IconButton:Ha,Typography:cs,TextField:Sl,NumberField:_l,BoolField:Tl,children:v.jsx(n,{})})]})],args:{editorId:"noMainParameters",imageUrl:"https://picsum.photos/800/600",configuration:yw,initialData:vw,onSubmit:n=>{console.log("output",n)},onUpdate:n=>{console.log("update",n)}},tags:["autodocs"]};var mu,yu,vu;si.parameters={...si.parameters,docs:{...(mu=si.parameters)==null?void 0:mu.docs,source:{originalSource:`{
  render: function Render(args) {
    const [{
      imageUrl
    }, updateArgs] = useArgs();
    const handleUpdate = () => {
      updateArgs({
        imageUrl: \`https://picsum.photos/800/600/?\${new Date().getTime()}\`
      });
    };
    return <div>
        <p>
          <button onClick={handleUpdate}>change image</button>
        </p>
        <RoiEditor {...args} imageUrl={imageUrl} />
      </div>;
  },
  args: {
    editorId: 'default' + String(new Date().getTime())
  }
}`,...(vu=(yu=si.parameters)==null?void 0:yu.docs)==null?void 0:vu.source}}};var bu,xu,Cu;ii.parameters={...ii.parameters,docs:{...(bu=ii.parameters)==null?void 0:bu.docs,source:{originalSource:`{
  decorators: [(Story, context) => {
    return <div>
          <h3>Example using some MUI components</h3>
          <p>TextField, Checkbox, IconButton. Dark mode is not configured in this example.</p>
          <UiProvider themeMode={context.globals.theme} IconButton={IconButton} Typography={Typography} TextField={CustomTextField} NumberField={CustomNumberField} BoolField={CustomBoolField}>
            <Story />
          </UiProvider>
        </div>;
  }],
  args: {
    editorId: 'mui'
  },
  tags: ['autodocs']
}`,...(Cu=(xu=ii.parameters)==null?void 0:xu.docs)==null?void 0:Cu.source}}};var wu,Su,_u;oi.parameters={...oi.parameters,docs:{...(wu=oi.parameters)==null?void 0:wu.docs,source:{originalSource:`{
  decorators: [(Story, context) => {
    return <div>
          <h3>Example of configuration with no ROIs</h3>
          <UiProvider themeMode={context.globals.theme} IconButton={IconButton} Typography={Typography} TextField={CustomTextField} NumberField={CustomNumberField} BoolField={CustomBoolField}>
            <Story />
          </UiProvider>
        </div>;
  }],
  args: {
    editorId: 'noRoi',
    imageUrl: 'https://picsum.photos/800/600',
    configuration: noRoiConfiguration,
    initialData: initialDataNoRoi as Output,
    onSubmit: data => {
      console.log('output', data);
    },
    onUpdate: data => {
      console.log('update', data);
    }
  },
  tags: ['autodocs']
}`,...(_u=(Su=oi.parameters)==null?void 0:Su.docs)==null?void 0:_u.source}}};var Tu,ku,Ou;ai.parameters={...ai.parameters,docs:{...(Tu=ai.parameters)==null?void 0:Tu.docs,source:{originalSource:`{
  decorators: [(Story, context) => {
    return <div>
          <h3>Example of configuration with no Main parameters</h3>
          <UiProvider themeMode={context.globals.theme} IconButton={IconButton} Typography={Typography} TextField={CustomTextField} NumberField={CustomNumberField} BoolField={CustomBoolField}>
            <Story />
          </UiProvider>
        </div>;
  }],
  args: {
    editorId: 'noMainParameters',
    imageUrl: 'https://picsum.photos/800/600',
    configuration: noMainParametersConfiguration,
    initialData: initialDataNoParameters as Output,
    onSubmit: data => {
      console.log('output', data);
    },
    onUpdate: data => {
      console.log('update', data);
    }
  },
  tags: ['autodocs']
}`,...(Ou=(ku=ai.parameters)==null?void 0:ku.docs)==null?void 0:Ou.source}}};const Tw=["Default","Mui","NoRoi","NoMainParameters"];export{si as Default,ii as Mui,ai as NoMainParameters,oi as NoRoi,Tw as __namedExportsOrder,_w as default};
