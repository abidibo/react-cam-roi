var Md=Object.defineProperty;var Dd=(n,e,t)=>e in n?Md(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fn=(n,e,t)=>Dd(n,typeof e!="symbol"?e+"":e,t);import{j as _,M as Cs,r as au}from"./index-D-TVCyVS.js";import{b as Do,r as S,R as tr}from"./index-cH8BGxVM.js";import{v as Vr}from"./v4-CtRu48qb.js";import"./index-Bts77hiZ.js";const rs={black:"#000",white:"#fff"},Jr={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Qr={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},en={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},tn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},rn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Ln={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ad={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function or(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const fa="$$material";function ui(){return ui=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ui.apply(null,arguments)}function Rd(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function jd(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Id=function(){function n(t){var r=this;this._insertTag=function(s){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,i),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(jd(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Rd(s);try{i.insertRule(r,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Ke="-ms-",hi="-moz-",ie="-webkit-",lu="comm",pa="rule",ga="decl",Fd="@import",cu="@keyframes",Ld="@layer",Bd=Math.abs,Pi=String.fromCharCode,Nd=Object.assign;function $d(n,e){return Ye(n,0)^45?(((e<<2^Ye(n,0))<<2^Ye(n,1))<<2^Ye(n,2))<<2^Ye(n,3):0}function uu(n){return n.trim()}function Wd(n,e){return(n=e.exec(n))?n[0]:n}function oe(n,e,t){return n.replace(e,t)}function Ao(n,e){return n.indexOf(e)}function Ye(n,e){return n.charCodeAt(e)|0}function ns(n,e,t){return n.slice(e,t)}function Nt(n){return n.length}function ma(n){return n.length}function _s(n,e){return e.push(n),n}function zd(n,e){return n.map(e).join("")}var Mi=1,Cn=1,hu=0,dt=0,$e=0,kn="";function Di(n,e,t,r,s,i,o){return{value:n,root:e,parent:t,type:r,props:s,children:i,line:Mi,column:Cn,length:o,return:""}}function Bn(n,e){return Nd(Di("",null,null,"",null,null,0),n,{length:-n.length},e)}function Vd(){return $e}function Hd(){return $e=dt>0?Ye(kn,--dt):0,Cn--,$e===10&&(Cn=1,Mi--),$e}function bt(){return $e=dt<hu?Ye(kn,dt++):0,Cn++,$e===10&&(Cn=1,Mi++),$e}function Ht(){return Ye(kn,dt)}function ei(){return dt}function hs(n,e){return ns(kn,n,e)}function ss(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function du(n){return Mi=Cn=1,hu=Nt(kn=n),dt=0,[]}function fu(n){return kn="",n}function ti(n){return uu(hs(dt-1,Ro(n===91?n+2:n===40?n+1:n)))}function qd(n){for(;($e=Ht())&&$e<33;)bt();return ss(n)>2||ss($e)>3?"":" "}function Xd(n,e){for(;--e&&bt()&&!($e<48||$e>102||$e>57&&$e<65||$e>70&&$e<97););return hs(n,ei()+(e<6&&Ht()==32&&bt()==32))}function Ro(n){for(;bt();)switch($e){case n:return dt;case 34:case 39:n!==34&&n!==39&&Ro($e);break;case 40:n===41&&Ro(n);break;case 92:bt();break}return dt}function Yd(n,e){for(;bt()&&n+$e!==57;)if(n+$e===84&&Ht()===47)break;return"/*"+hs(e,dt-1)+"*"+Pi(n===47?n:bt())}function Gd(n){for(;!ss(Ht());)bt();return hs(n,dt)}function Ud(n){return fu(ri("",null,null,null,[""],n=du(n),0,[0],n))}function ri(n,e,t,r,s,i,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,g=1,y=1,b=1,w=0,x="",v=s,C=i,O=r,P=x;y;)switch(p=w,w=bt()){case 40:if(p!=108&&Ye(P,h-1)==58){Ao(P+=oe(ti(w),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:P+=ti(w);break;case 9:case 10:case 13:case 32:P+=qd(p);break;case 92:P+=Xd(ei()-1,7);continue;case 47:switch(Ht()){case 42:case 47:_s(Kd(Yd(bt(),ei()),e,t),l);break;default:P+="/"}break;case 123*g:a[c++]=Nt(P)*b;case 125*g:case 59:case 0:switch(w){case 0:case 125:y=0;case 59+u:b==-1&&(P=oe(P,/\f/g,"")),f>0&&Nt(P)-h&&_s(f>32?bl(P+";",r,t,h-1):bl(oe(P," ","")+";",r,t,h-2),l);break;case 59:P+=";";default:if(_s(O=yl(P,e,t,c,u,s,a,x,v=[],C=[],h),i),w===123)if(u===0)ri(P,e,O,O,v,i,h,a,C);else switch(d===99&&Ye(P,3)===110?100:d){case 100:case 108:case 109:case 115:ri(n,O,O,r&&_s(yl(n,O,O,0,0,s,a,x,s,v=[],h),C),s,C,h,a,r?v:C);break;default:ri(P,O,O,O,[""],C,0,a,C)}}c=u=f=0,g=b=1,x=P="",h=o;break;case 58:h=1+Nt(P),f=p;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&Hd()==125)continue}switch(P+=Pi(w),w*g){case 38:b=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(Nt(P)-1)*b,b=1;break;case 64:Ht()===45&&(P+=ti(bt())),d=Ht(),u=h=Nt(x=P+=Gd(ei())),w++;break;case 45:p===45&&Nt(P)==2&&(g=0)}}return i}function yl(n,e,t,r,s,i,o,a,l,c,u){for(var h=s-1,d=s===0?i:[""],f=ma(d),p=0,g=0,y=0;p<r;++p)for(var b=0,w=ns(n,h+1,h=Bd(g=o[p])),x=n;b<f;++b)(x=uu(g>0?d[b]+" "+w:oe(w,/&\f/g,d[b])))&&(l[y++]=x);return Di(n,e,t,s===0?pa:a,l,c,u)}function Kd(n,e,t){return Di(n,e,t,lu,Pi(Vd()),ns(n,2,-2),0)}function bl(n,e,t,r){return Di(n,e,t,ga,ns(n,0,r),ns(n,r+1,-1),r)}function gn(n,e){for(var t="",r=ma(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function Zd(n,e,t,r){switch(n.type){case Ld:if(n.children.length)break;case Fd:case ga:return n.return=n.return||n.value;case lu:return"";case cu:return n.return=n.value+"{"+gn(n.children,r)+"}";case pa:n.value=n.props.join(",")}return Nt(t=gn(n.children,r))?n.return=n.value+"{"+t+"}":""}function Jd(n){var e=ma(n);return function(t,r,s,i){for(var o="",a=0;a<e;a++)o+=n[a](t,r,s,i)||"";return o}}function Qd(n){return function(e){e.root||(e=e.return)&&n(e)}}function pu(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var ef=function(e,t,r){for(var s=0,i=0;s=i,i=Ht(),s===38&&i===12&&(t[r]=1),!ss(i);)bt();return hs(e,dt)},tf=function(e,t){var r=-1,s=44;do switch(ss(s)){case 0:s===38&&Ht()===12&&(t[r]=1),e[r]+=ef(dt-1,t,r);break;case 2:e[r]+=ti(s);break;case 4:if(s===44){e[++r]=Ht()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Pi(s)}while(s=bt());return e},rf=function(e,t){return fu(tf(du(e),t))},vl=new WeakMap,nf=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!vl.get(r))&&!s){vl.set(e,!0);for(var i=[],o=rf(t,i),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=i[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},sf=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function gu(n,e){switch($d(n,e)){case 5103:return ie+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ie+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ie+n+hi+n+Ke+n+n;case 6828:case 4268:return ie+n+Ke+n+n;case 6165:return ie+n+Ke+"flex-"+n+n;case 5187:return ie+n+oe(n,/(\w+).+(:[^]+)/,ie+"box-$1$2"+Ke+"flex-$1$2")+n;case 5443:return ie+n+Ke+"flex-item-"+oe(n,/flex-|-self/,"")+n;case 4675:return ie+n+Ke+"flex-line-pack"+oe(n,/align-content|flex-|-self/,"")+n;case 5548:return ie+n+Ke+oe(n,"shrink","negative")+n;case 5292:return ie+n+Ke+oe(n,"basis","preferred-size")+n;case 6060:return ie+"box-"+oe(n,"-grow","")+ie+n+Ke+oe(n,"grow","positive")+n;case 4554:return ie+oe(n,/([^-])(transform)/g,"$1"+ie+"$2")+n;case 6187:return oe(oe(oe(n,/(zoom-|grab)/,ie+"$1"),/(image-set)/,ie+"$1"),n,"")+n;case 5495:case 3959:return oe(n,/(image-set\([^]*)/,ie+"$1$`$1");case 4968:return oe(oe(n,/(.+:)(flex-)?(.*)/,ie+"box-pack:$3"+Ke+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ie+n+n;case 4095:case 3583:case 4068:case 2532:return oe(n,/(.+)-inline(.+)/,ie+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Nt(n)-1-e>6)switch(Ye(n,e+1)){case 109:if(Ye(n,e+4)!==45)break;case 102:return oe(n,/(.+:)(.+)-([^]+)/,"$1"+ie+"$2-$3$1"+hi+(Ye(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Ao(n,"stretch")?gu(oe(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ye(n,e+1)!==115)break;case 6444:switch(Ye(n,Nt(n)-3-(~Ao(n,"!important")&&10))){case 107:return oe(n,":",":"+ie)+n;case 101:return oe(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ie+(Ye(n,14)===45?"inline-":"")+"box$3$1"+ie+"$2$3$1"+Ke+"$2box$3")+n}break;case 5936:switch(Ye(n,e+11)){case 114:return ie+n+Ke+oe(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ie+n+Ke+oe(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ie+n+Ke+oe(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ie+n+Ke+n+n}return n}var of=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case ga:e.return=gu(e.value,e.length);break;case cu:return gn([Bn(e,{value:oe(e.value,"@","@"+ie)})],s);case pa:if(e.length)return zd(e.props,function(i){switch(Wd(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gn([Bn(e,{props:[oe(i,/:(read-\w+)/,":"+hi+"$1")]})],s);case"::placeholder":return gn([Bn(e,{props:[oe(i,/:(plac\w+)/,":"+ie+"input-$1")]}),Bn(e,{props:[oe(i,/:(plac\w+)/,":"+hi+"$1")]}),Bn(e,{props:[oe(i,/:(plac\w+)/,Ke+"input-$1")]})],s)}return""})}},af=[of],lf=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=e.stylisPlugins||af,i={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)i[y[b]]=!0;a.push(g)});var l,c=[nf,sf];{var u,h=[Zd,Qd(function(g){u.insert(g)})],d=Jd(c.concat(s,h)),f=function(y){return gn(Ud(y),d)};l=function(y,b,w,x){u=w,f(y?y+"{"+b.styles+"}":b.styles),x&&(p.inserted[b.name]=!0)}}var p={key:t,sheet:new Id({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return p.sheet.hydrate(a),p},ro={exports:{}},ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl;function cf(){if(xl)return ae;xl=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,p=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function x(C){if(typeof C=="object"&&C!==null){var O=C.$$typeof;switch(O){case e:switch(C=C.type,C){case l:case c:case r:case i:case s:case h:return C;default:switch(C=C&&C.$$typeof,C){case a:case u:case p:case f:case o:return C;default:return O}}case t:return O}}}function v(C){return x(C)===c}return ae.AsyncMode=l,ae.ConcurrentMode=c,ae.ContextConsumer=a,ae.ContextProvider=o,ae.Element=e,ae.ForwardRef=u,ae.Fragment=r,ae.Lazy=p,ae.Memo=f,ae.Portal=t,ae.Profiler=i,ae.StrictMode=s,ae.Suspense=h,ae.isAsyncMode=function(C){return v(C)||x(C)===l},ae.isConcurrentMode=v,ae.isContextConsumer=function(C){return x(C)===a},ae.isContextProvider=function(C){return x(C)===o},ae.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===e},ae.isForwardRef=function(C){return x(C)===u},ae.isFragment=function(C){return x(C)===r},ae.isLazy=function(C){return x(C)===p},ae.isMemo=function(C){return x(C)===f},ae.isPortal=function(C){return x(C)===t},ae.isProfiler=function(C){return x(C)===i},ae.isStrictMode=function(C){return x(C)===s},ae.isSuspense=function(C){return x(C)===h},ae.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===c||C===i||C===s||C===h||C===d||typeof C=="object"&&C!==null&&(C.$$typeof===p||C.$$typeof===f||C.$$typeof===o||C.$$typeof===a||C.$$typeof===u||C.$$typeof===y||C.$$typeof===b||C.$$typeof===w||C.$$typeof===g)},ae.typeOf=x,ae}var Sl;function uf(){return Sl||(Sl=1,ro.exports=cf()),ro.exports}var no,Cl;function hf(){if(Cl)return no;Cl=1;var n=uf(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[n.ForwardRef]=r,i[n.Memo]=s;function o(p){return n.isMemo(p)?s:i[p.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;function f(p,g,y){if(typeof g!="string"){if(d){var b=h(g);b&&b!==d&&f(p,b,y)}var w=l(g);c&&(w=w.concat(c(g)));for(var x=o(p),v=o(g),C=0;C<w.length;++C){var O=w[C];if(!t[O]&&!(y&&y[O])&&!(v&&v[O])&&!(x&&x[O])){var P=u(g,O);try{a(p,O,P)}catch{}}}}return p}return no=f,no}hf();var df=!0;function mu(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var ya=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||df===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},ba=function(e,t,r){ya(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?"."+s:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function ff(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var pf={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},gf=/[A-Z]|^ms/g,mf=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yu=function(e){return e.charCodeAt(1)===45},_l=function(e){return e!=null&&typeof e!="boolean"},so=pu(function(n){return yu(n)?n:n.replace(gf,"-$&").toLowerCase()}),wl=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(mf,function(r,s,i){return $t={name:s,styles:i,next:$t},s})}return pf[e]!==1&&!yu(e)&&typeof t=="number"&&t!==0?t+"px":t};function is(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return $t={name:s.name,styles:s.styles,next:$t},s.name;var i=t;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)$t={name:o.name,styles:o.styles,next:$t},o=o.next;var a=i.styles+";";return a}return yf(n,e,t)}case"function":{if(n!==void 0){var l=$t,c=t(n);return $t=l,is(n,e,c)}break}}var u=t;if(e==null)return u;var h=e[u];return h!==void 0?h:u}function yf(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=is(n,e,t[s])+";";else for(var i in t){var o=t[i];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=i+"{"+e[a]+"}":_l(a)&&(r+=so(i)+":"+wl(i,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)_l(o[l])&&(r+=so(i)+":"+wl(i,o[l])+";");else{var c=is(n,e,o);switch(i){case"animation":case"animationName":{r+=so(i)+":"+c+";";break}default:r+=i+"{"+c+"}"}}}return r}var Tl=/label:\s*([^\s;{]+)\s*(;|$)/g,$t;function ds(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";$t=void 0;var i=n[0];if(i==null||i.raw===void 0)r=!1,s+=is(t,e,i);else{var o=i;s+=o[0]}for(var a=1;a<n.length;a++)if(s+=is(t,e,n[a]),r){var l=i;s+=l[a]}Tl.lastIndex=0;for(var c="",u;(u=Tl.exec(s))!==null;)c+="-"+u[1];var h=ff(s)+c;return{name:h,styles:s,next:$t}}var bf=function(e){return e()},bu=Do.useInsertionEffect?Do.useInsertionEffect:!1,vu=bu||bf,kl=bu||S.useLayoutEffect,xu=S.createContext(typeof HTMLElement<"u"?lf({key:"css"}):null);xu.Provider;var va=function(e){return S.forwardRef(function(t,r){var s=S.useContext(xu);return e(t,s,r)})},Ai=S.createContext({}),xa={}.hasOwnProperty,jo="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",vf=function(e,t){var r={};for(var s in t)xa.call(t,s)&&(r[s]=t[s]);return r[jo]=e,r},xf=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return ya(t,r,s),vu(function(){return ba(t,r,s)}),null},Sf=va(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[jo],i=[r],o="";typeof n.className=="string"?o=mu(e.registered,i,n.className):n.className!=null&&(o=n.className+" ");var a=ds(i,void 0,S.useContext(Ai));o+=e.key+"-"+a.name;var l={};for(var c in n)xa.call(n,c)&&c!=="css"&&c!==jo&&(l[c]=n[c]);return l.className=o,t&&(l.ref=t),S.createElement(S.Fragment,null,S.createElement(xf,{cache:e,serialized:a,isStringTag:typeof s=="string"}),S.createElement(s,l))}),Cf=Sf,_f=function(e,t){var r=arguments;if(t==null||!xa.call(t,"css"))return S.createElement.apply(void 0,r);var s=r.length,i=new Array(s);i[0]=Cf,i[1]=vf(e,t);for(var o=2;o<s;o++)i[o]=r[o];return S.createElement.apply(null,i)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(_f);var wf=va(function(n,e){var t=n.styles,r=ds([t],void 0,S.useContext(Ai)),s=S.useRef();return kl(function(){var i=e.key+"-global",o=new e.sheet.constructor({key:i,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",i),o.hydrate([l])),s.current=[o,a],function(){o.flush()}},[e]),kl(function(){var i=s.current,o=i[0],a=i[1];if(a){i[1]=!1;return}if(r.next!==void 0&&ba(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Sa(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return ds(e)}function fs(){var n=Sa.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Tf=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kf=pu(function(n){return Tf.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Of=kf,Ef=function(e){return e!=="theme"},Ol=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Of:Ef},El=function(e,t,r){var s;if(t){var i=t.shouldForwardProp;s=e.__emotion_forwardProp&&i?function(o){return e.__emotion_forwardProp(o)&&i(o)}:i}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},Pf=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return ya(t,r,s),vu(function(){return ba(t,r,s)}),null},Mf=function n(e,t){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,i,o;t!==void 0&&(i=t.label,o=t.target);var a=El(e,t,r),l=a||Ol(s),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var d=u[0];h.push(d[0]);for(var f=u.length,p=1;p<f;p++)h.push(u[p],d[p])}var g=va(function(y,b,w){var x=c&&y.as||s,v="",C=[],O=y;if(y.theme==null){O={};for(var P in y)O[P]=y[P];O.theme=S.useContext(Ai)}typeof y.className=="string"?v=mu(b.registered,C,y.className):y.className!=null&&(v=y.className+" ");var D=ds(h.concat(C),b.registered,O);v+=b.key+"-"+D.name,o!==void 0&&(v+=" "+o);var B=c&&a===void 0?Ol(x):l,m={};for(var E in y)c&&E==="as"||B(E)&&(m[E]=y[E]);return m.className=v,w&&(m.ref=w),S.createElement(S.Fragment,null,S.createElement(Pf,{cache:b,serialized:D,isStringTag:typeof x=="string"}),S.createElement(x,m))});return g.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=h,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(y,b){var w=n(y,ui({},t,b,{shouldForwardProp:El(g,b,!0)}));return w.apply(void 0,h)},g}},Df=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Io=Mf.bind(null);Df.forEach(function(n){Io[n]=Io(n)});function Af(n){return n==null||Object.keys(n).length===0}function Rf(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?s=>e(Af(s)?t:s):e;return _.jsx(wf,{styles:r})}/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function jf(n,e){return Io(n,e)}function If(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const Pl=[];function Ml(n){return Pl[0]=n,ds(Pl)}var io={exports:{}},he={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dl;function Ff(){if(Dl)return he;Dl=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),f=Symbol.for("react.client.reference");function p(g){if(typeof g=="object"&&g!==null){var y=g.$$typeof;switch(y){case n:switch(g=g.type,g){case t:case s:case r:case l:case c:return g;default:switch(g=g&&g.$$typeof,g){case o:case a:case h:case u:return g;case i:return g;default:return y}}case e:return y}}}return he.ContextConsumer=i,he.ContextProvider=o,he.Element=n,he.ForwardRef=a,he.Fragment=t,he.Lazy=h,he.Memo=u,he.Portal=e,he.Profiler=s,he.StrictMode=r,he.Suspense=l,he.SuspenseList=c,he.isContextConsumer=function(g){return p(g)===i},he.isContextProvider=function(g){return p(g)===o},he.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===n},he.isForwardRef=function(g){return p(g)===a},he.isFragment=function(g){return p(g)===t},he.isLazy=function(g){return p(g)===h},he.isMemo=function(g){return p(g)===u},he.isPortal=function(g){return p(g)===e},he.isProfiler=function(g){return p(g)===s},he.isStrictMode=function(g){return p(g)===r},he.isSuspense=function(g){return p(g)===l},he.isSuspenseList=function(g){return p(g)===c},he.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===t||g===s||g===r||g===l||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===a||g.$$typeof===f||g.getModuleId!==void 0)},he.typeOf=p,he}var Al;function Lf(){return Al||(Al=1,io.exports=Ff()),io.exports}var Su=Lf();function Wt(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Cu(n){if(S.isValidElement(n)||Su.isValidElementType(n)||!Wt(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=Cu(n[t])}),e}function Ze(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return Wt(n)&&Wt(e)&&Object.keys(e).forEach(s=>{S.isValidElement(e[s])||Su.isValidElementType(e[s])?r[s]=e[s]:Wt(e[s])&&Object.prototype.hasOwnProperty.call(n,s)&&Wt(n[s])?r[s]=Ze(n[s],e[s],t):t.clone?r[s]=Wt(e[s])?Cu(e[s]):e[s]:r[s]=e[s]}),r}const Bf=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function Nf(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...s}=n,i=Bf(e),o=Object.keys(i);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${t})`}function c(d,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${t})`}function u(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function h(d){const f=o.indexOf(d);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:a,down:l,between:c,only:u,not:h,unit:t,...s}}function $f(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var o,a;const i=/min-width:\s*([0-9.]+)/;return+(((o=r.match(i))==null?void 0:o[1])||0)-+(((a=s.match(i))==null?void 0:a[1])||0)});return t.length?t.reduce((r,s)=>{const i=e[s];return delete r[s],r[s]=i,r},{...e}):e}function Wf(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function zf(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,s]=t,i=Number.isNaN(+r)?r||0:+r;return n.containerQueries(s).up(i)}function Vf(n){const e=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function t(i,o){i.up=(...a)=>e(n.breakpoints.up(...a),o),i.down=(...a)=>e(n.breakpoints.down(...a),o),i.between=(...a)=>e(n.breakpoints.between(...a),o),i.only=(...a)=>e(n.breakpoints.only(...a),o),i.not=(...a)=>{const l=e(n.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=i=>(t(r,i),r);return t(s),{...n,containerQueries:s}}const Hf={borderRadius:4};function Gn(n,e){return e?Ze(n,e,{clone:!1}):n}const Ri={xs:0,sm:600,md:900,lg:1200,xl:1536},Rl={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${Ri[n]}px)`},qf={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:Ri[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function ar(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const i=r.breakpoints||Rl;return e.reduce((o,a,l)=>(o[i.up(i.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const i=r.breakpoints||Rl;return Object.keys(e).reduce((o,a)=>{if(Wf(i.keys,a)){const l=zf(r.containerQueries?r:qf,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(i.values||Ri).includes(a)){const l=i.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function Xf(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,s)=>{const i=n.up(s);return r[i]={},r},{}))||{}}function Yf(n,e){return n.reduce((t,r)=>{const s=t[r];return(!s||Object.keys(s).length===0)&&delete t[r],t},e)}function U(n){if(typeof n!="string")throw new Error(or(7));return n.charAt(0).toUpperCase()+n.slice(1)}function ji(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,n);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,n)}function di(n,e,t,r=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||r:s=ji(n,t)||r,e&&(s=e(s,r,n)),s}function Fe(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:s}=n,i=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=ji(l,r)||{};return ar(o,a,h=>{let d=di(c,s,h);return h===d&&typeof h=="string"&&(d=di(c,s,`${e}${h==="default"?"":U(h)}`,h)),t===!1?d:{[t]:d}})};return i.propTypes={},i.filterProps=[e],i}function Gf(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const Uf={m:"margin",p:"padding"},Kf={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jl={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Zf=Gf(n=>{if(n.length>2)if(jl[n])n=jl[n];else return[n];const[e,t]=n.split(""),r=Uf[e],s=Kf[t]||"";return Array.isArray(s)?s.map(i=>r+i):[r+s]}),Ca=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],_a=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Ca,..._a];function ps(n,e,t,r){const s=ji(n,e,!0)??t;return typeof s=="number"||typeof s=="string"?i=>typeof i=="string"?i:typeof s=="string"?`calc(${i} * ${s})`:s*i:Array.isArray(s)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),a=s[o];return i>=0?a:typeof a=="number"?-a:`-${a}`}:typeof s=="function"?s:()=>{}}function wa(n){return ps(n,"spacing",8)}function gs(n,e){return typeof e=="string"||e==null?e:n(e)}function Jf(n,e){return t=>n.reduce((r,s)=>(r[s]=gs(e,t),r),{})}function Qf(n,e,t,r){if(!e.includes(t))return null;const s=Zf(t),i=Jf(s,r),o=n[t];return ar(n,o,i)}function _u(n,e){const t=wa(n.theme);return Object.keys(n).map(r=>Qf(n,e,r,t)).reduce(Gn,{})}function Ae(n){return _u(n,Ca)}Ae.propTypes={};Ae.filterProps=Ca;function Re(n){return _u(n,_a)}Re.propTypes={};Re.filterProps=_a;function wu(n=8,e=wa({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(i=>{const o=e(i);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function Ii(...n){const e=n.reduce((r,s)=>(s.filterProps.forEach(i=>{r[i]=s}),r),{}),t=r=>Object.keys(r).reduce((s,i)=>e[i]?Gn(s,e[i](r)):s,{});return t.propTypes={},t.filterProps=n.reduce((r,s)=>r.concat(s.filterProps),[]),t}function Ct(n){return typeof n!="number"?n:`${n}px solid`}function kt(n,e){return Fe({prop:n,themeKey:"borders",transform:e})}const ep=kt("border",Ct),tp=kt("borderTop",Ct),rp=kt("borderRight",Ct),np=kt("borderBottom",Ct),sp=kt("borderLeft",Ct),ip=kt("borderColor"),op=kt("borderTopColor"),ap=kt("borderRightColor"),lp=kt("borderBottomColor"),cp=kt("borderLeftColor"),up=kt("outline",Ct),hp=kt("outlineColor"),Fi=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=ps(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:gs(e,r)});return ar(n,n.borderRadius,t)}return null};Fi.propTypes={};Fi.filterProps=["borderRadius"];Ii(ep,tp,rp,np,sp,ip,op,ap,lp,cp,Fi,up,hp);const Li=n=>{if(n.gap!==void 0&&n.gap!==null){const e=ps(n.theme,"spacing",8),t=r=>({gap:gs(e,r)});return ar(n,n.gap,t)}return null};Li.propTypes={};Li.filterProps=["gap"];const Bi=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=ps(n.theme,"spacing",8),t=r=>({columnGap:gs(e,r)});return ar(n,n.columnGap,t)}return null};Bi.propTypes={};Bi.filterProps=["columnGap"];const Ni=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=ps(n.theme,"spacing",8),t=r=>({rowGap:gs(e,r)});return ar(n,n.rowGap,t)}return null};Ni.propTypes={};Ni.filterProps=["rowGap"];const dp=Fe({prop:"gridColumn"}),fp=Fe({prop:"gridRow"}),pp=Fe({prop:"gridAutoFlow"}),gp=Fe({prop:"gridAutoColumns"}),mp=Fe({prop:"gridAutoRows"}),yp=Fe({prop:"gridTemplateColumns"}),bp=Fe({prop:"gridTemplateRows"}),vp=Fe({prop:"gridTemplateAreas"}),xp=Fe({prop:"gridArea"});Ii(Li,Bi,Ni,dp,fp,pp,gp,mp,yp,bp,vp,xp);function mn(n,e){return e==="grey"?e:n}const Sp=Fe({prop:"color",themeKey:"palette",transform:mn}),Cp=Fe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:mn}),_p=Fe({prop:"backgroundColor",themeKey:"palette",transform:mn});Ii(Sp,Cp,_p);function yt(n){return n<=1&&n!==0?`${n*100}%`:n}const wp=Fe({prop:"width",transform:yt}),Ta=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var s,i,o,a,l;const r=((o=(i=(s=n.theme)==null?void 0:s.breakpoints)==null?void 0:i.values)==null?void 0:o[t])||Ri[t];return r?((l=(a=n.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:yt(t)}};return ar(n,n.maxWidth,e)}return null};Ta.filterProps=["maxWidth"];const Tp=Fe({prop:"minWidth",transform:yt}),kp=Fe({prop:"height",transform:yt}),Op=Fe({prop:"maxHeight",transform:yt}),Ep=Fe({prop:"minHeight",transform:yt});Fe({prop:"size",cssProperty:"width",transform:yt});Fe({prop:"size",cssProperty:"height",transform:yt});const Pp=Fe({prop:"boxSizing"});Ii(wp,Ta,Tp,kp,Op,Ep,Pp);const ms={border:{themeKey:"borders",transform:Ct},borderTop:{themeKey:"borders",transform:Ct},borderRight:{themeKey:"borders",transform:Ct},borderBottom:{themeKey:"borders",transform:Ct},borderLeft:{themeKey:"borders",transform:Ct},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ct},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Fi},color:{themeKey:"palette",transform:mn},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:mn},backgroundColor:{themeKey:"palette",transform:mn},p:{style:Re},pt:{style:Re},pr:{style:Re},pb:{style:Re},pl:{style:Re},px:{style:Re},py:{style:Re},padding:{style:Re},paddingTop:{style:Re},paddingRight:{style:Re},paddingBottom:{style:Re},paddingLeft:{style:Re},paddingX:{style:Re},paddingY:{style:Re},paddingInline:{style:Re},paddingInlineStart:{style:Re},paddingInlineEnd:{style:Re},paddingBlock:{style:Re},paddingBlockStart:{style:Re},paddingBlockEnd:{style:Re},m:{style:Ae},mt:{style:Ae},mr:{style:Ae},mb:{style:Ae},ml:{style:Ae},mx:{style:Ae},my:{style:Ae},margin:{style:Ae},marginTop:{style:Ae},marginRight:{style:Ae},marginBottom:{style:Ae},marginLeft:{style:Ae},marginX:{style:Ae},marginY:{style:Ae},marginInline:{style:Ae},marginInlineStart:{style:Ae},marginInlineEnd:{style:Ae},marginBlock:{style:Ae},marginBlockStart:{style:Ae},marginBlockEnd:{style:Ae},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Li},rowGap:{style:Ni},columnGap:{style:Bi},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:yt},maxWidth:{style:Ta},minWidth:{transform:yt},height:{transform:yt},maxHeight:{transform:yt},minHeight:{transform:yt},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Mp(...n){const e=n.reduce((r,s)=>r.concat(Object.keys(s)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function Dp(n,e){return typeof n=="function"?n(e):n}function Ap(){function n(t,r,s,i){const o={[t]:r,theme:s},a=i[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const d=ji(s,c)||{};return h?h(o):ar(o,r,p=>{let g=di(d,u,p);return p===g&&typeof p=="string"&&(g=di(d,u,`${t}${p==="default"?"":U(p)}`,p)),l===!1?g:{[l]:g}})}function e(t){const{sx:r,theme:s={}}=t||{};if(!r)return null;const i=s.unstable_sxConfig??ms;function o(a){let l=a;if(typeof a=="function")l=a(s);else if(typeof a!="object")return a;if(!l)return null;const c=Xf(s.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(d=>{const f=Dp(l[d],s);if(f!=null)if(typeof f=="object")if(i[d])h=Gn(h,n(d,f,s,i));else{const p=ar({theme:s},f,g=>({[d]:g}));Mp(p,f)?h[d]=e({sx:f,theme:s}):h=Gn(h,p)}else h=Gn(h,n(d,f,s,i))}),$f(s,Yf(u,h))}return Array.isArray(r)?r.map(o):o(r)}return e}const _n=Ap();_n.filterProps=["sx"];function Rp(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let s=t.getColorSchemeSelector(n);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return t.palette.mode===n?e:{}}function ka(n={},...e){const{breakpoints:t={},palette:r={},spacing:s,shape:i={},...o}=n,a=Nf(t),l=wu(s);let c=Ze({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...Hf,...i}},o);return c=Vf(c),c.applyStyles=Rp,c=e.reduce((u,h)=>Ze(u,h),c),c.unstable_sxConfig={...ms,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(h){return _n({sx:h,theme:this})},c}function jp(n){return Object.keys(n).length===0}function Ip(n=null){const e=S.useContext(Ai);return!e||jp(e)?n:e}const Fp=ka();function Tu(n=Fp){return Ip(n)}function Lp({styles:n,themeId:e,defaultTheme:t={}}){const r=Tu(t),s=typeof n=="function"?n(e&&r[e]||r):n;return _.jsx(Rf,{styles:s})}const Bp=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??ms;return Object.keys(n).forEach(s=>{t[s]?e.systemProps[s]=n[s]:e.otherProps[s]=n[s]}),e};function Np(n){const{sx:e,...t}=n,{systemProps:r,otherProps:s}=Bp(t);let i;return Array.isArray(e)?i=[r,...e]:typeof e=="function"?i=(...o)=>{const a=e(...o);return Wt(a)?{...r,...a}:r}:i={...r,...e},{...s,sx:i}}const Il=n=>n,$p=()=>{let n=Il;return{configure(e){n=e},generate(e){return n(e)},reset(){n=Il}}},Wp=$p();function ku(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=ku(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Z(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=ku(n))&&(r&&(r+=" "),r+=e);return r}const zp={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ye(n,e,t="Mui"){const r=zp[e];return r?`${t}-${r}`:`${Wp.generate(n)}-${e}`}function be(n,e,t="Mui"){const r={};return e.forEach(s=>{r[s]=ye(n,s,t)}),r}function Ou(n){const{variants:e,...t}=n,r={variants:e,style:Ml(t),isProcessed:!0};return r.style===t||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=Ml(s.style))}),r}const Vp=ka();function oo(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function Hp(n){return n?(e,t)=>t[n]:null}function qp(n,e,t){n.theme=Gp(n.theme)?t:n.theme[e]||n.theme}function ni(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>ni(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:s,...i}=t;r=i}return Eu(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function Eu(n,e,t=[]){var s;let r;e:for(let i=0;i<e.length;i+=1){const o=e[i];if(typeof o.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(r))continue}else for(const a in o.props)if(n[a]!==o.props[a]&&((s=n.ownerState)==null?void 0:s[a])!==o.props[a])continue e;typeof o.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(o.style(r))):t.push(o.style)}return t}function Xp(n={}){const{themeId:e,defaultTheme:t=Vp,rootShouldForwardProp:r=oo,slotShouldForwardProp:s=oo}=n;function i(a){qp(a,e,t)}return(a,l={})=>{If(a,C=>C.filter(O=>O!==_n));const{name:c,slot:u,skipVariantsResolver:h,skipSx:d,overridesResolver:f=Hp(Kp(u)),...p}=l,g=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,y=d||!1;let b=oo;u==="Root"||u==="root"?b=r:u?b=s:Up(a)&&(b=void 0);const w=jf(a,{shouldForwardProp:b,label:Yp(),...p}),x=C=>{if(typeof C=="function"&&C.__emotion_real!==C)return function(P){return ni(P,C)};if(Wt(C)){const O=Ou(C);return O.variants?function(D){return ni(D,O)}:O.style}return C},v=(...C)=>{const O=[],P=C.map(x),D=[];if(O.push(i),c&&f&&D.push(function(R){var L,$;const F=($=(L=R.theme.components)==null?void 0:L[c])==null?void 0:$.styleOverrides;if(!F)return null;const M={};for(const W in F)M[W]=ni(R,F[W]);return f(R,M)}),c&&!g&&D.push(function(R){var M,L;const I=R.theme,F=(L=(M=I==null?void 0:I.components)==null?void 0:M[c])==null?void 0:L.variants;return F?Eu(R,F):null}),y||D.push(_n),Array.isArray(P[0])){const E=P.shift(),R=new Array(O.length).fill(""),I=new Array(D.length).fill("");let F;F=[...R,...E,...I],F.raw=[...R,...E.raw,...I],O.unshift(F)}const B=[...O,...P,...D],m=w(...B);return a.muiName&&(m.muiName=a.muiName),m};return w.withConfig&&(v.withConfig=w.withConfig),v}}function Yp(n,e){return void 0}function Gp(n){for(const e in n)return!1;return!0}function Up(n){return typeof n=="string"&&n.charCodeAt(0)>96}function Kp(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function Fo(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const s=r;if(s==="components"||s==="slots")t[s]={...n[s],...t[s]};else if(s==="componentsProps"||s==="slotProps"){const i=n[s],o=e[s];if(!o)t[s]=i||{};else if(!i)t[s]=o;else{t[s]={...o};for(const a in i)if(Object.prototype.hasOwnProperty.call(i,a)){const l=a;t[s][l]=Fo(i[l],o[l])}}}else t[s]===void 0&&(t[s]=n[s])}return t}const Nr=typeof window<"u"?S.useLayoutEffect:S.useEffect;function Zp(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function Oa(n,e=0,t=1){return Zp(n,e,t)}function Jp(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function yr(n){if(n.type)return n;if(n.charAt(0)==="#")return yr(Jp(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(or(9,n));let r=n.substring(e+1,n.length-1),s;if(t==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(or(10,s))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:t,values:r,colorSpace:s}}const Qp=n=>{const e=yr(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},Vn=(n,e)=>{try{return Qp(n)}catch{return n}};function $i(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((s,i)=>i<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Pu(n){n=yr(n);const{values:e}=n,t=e[0],r=e[1]/100,s=e[2]/100,i=r*Math.min(s,1-s),o=(c,u=(c+t/30)%12)=>s-i*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),$i({type:a,values:l})}function Lo(n){n=yr(n);let e=n.type==="hsl"||n.type==="hsla"?yr(Pu(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function eg(n,e){const t=Lo(n),r=Lo(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function $r(n,e){return n=yr(n),e=Oa(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,$i(n)}function ws(n,e,t){try{return $r(n,e)}catch{return n}}function Ea(n,e){if(n=yr(n),e=Oa(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return $i(n)}function fe(n,e,t){try{return Ea(n,e)}catch{return n}}function Pa(n,e){if(n=yr(n),e=Oa(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return $i(n)}function pe(n,e,t){try{return Pa(n,e)}catch{return n}}function tg(n,e=.15){return Lo(n)>.5?Ea(n,e):Pa(n,e)}function Ts(n,e,t){try{return tg(n,e)}catch{return n}}function Fl(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function Mu(n,e=166){let t;function r(...s){const i=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(i,e)}return r.clear=()=>{clearTimeout(t)},r}function ao(n,e){var t,r,s;return S.isValidElement(n)&&e.indexOf(n.type.muiName??((s=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}function jt(n){return n&&n.ownerDocument||document}function lr(n){return jt(n).defaultView||window}function Bo(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let Ll=0;function rg(n){const[e,t]=S.useState(n),r=n||e;return S.useEffect(()=>{e==null&&(Ll+=1,t(`mui-${Ll}`))},[e]),r}const ng={...Do},Bl=ng.useId;function Ma(n){if(Bl!==void 0){const e=Bl();return n??e}return rg(n)}function No({controlled:n,default:e,name:t,state:r="value"}){const{current:s}=S.useRef(n!==void 0),[i,o]=S.useState(e),a=s?n:i,l=S.useCallback(c=>{s||o(c)},[]);return[a,l]}function yn(n){const e=S.useRef(n);return Nr(()=>{e.current=n}),S.useRef((...t)=>(0,e.current)(...t)).current}function Qe(...n){return S.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{Bo(t,e)})},n)}const Nl={};function Du(n,e){const t=S.useRef(Nl);return t.current===Nl&&(t.current=n(e)),t}const sg=[];function ig(n){S.useEffect(n,sg)}class Da{constructor(){Fn(this,"currentId",null);Fn(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Fn(this,"disposeEffect",()=>this.clear)}static create(){return new Da}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Au(){const n=Du(Da.create).current;return ig(n.disposeEffect),n}function $l(n){try{return n.matches(":focus-visible")}catch{}return!1}function Ru(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function ve(n,e,t=void 0){const r={};for(const s in n){const i=n[s];let o="",a=!0;for(let l=0;l<i.length;l+=1){const c=i[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}r[s]=o}return r}function og(n){return typeof n=="string"}function ju(n,e,t){return n===void 0||og(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function Iu(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function Wl(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Fu(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:s,className:i}=n;if(!e){const f=Z(t==null?void 0:t.className,i,s==null?void 0:s.className,r==null?void 0:r.className),p={...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},g={...t,...s,...r};return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=Iu({...s,...r}),a=Wl(r),l=Wl(s),c=e(o),u=Z(c==null?void 0:c.className,t==null?void 0:t.className,i,s==null?void 0:s.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},d={...c,...t,...l,...a};return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function Lu(n,e,t){return typeof n=="function"?n(e,t):n}function zl(n){var h;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:s=!1,...i}=n,o=s?{}:Lu(t,r),{props:a,internalRef:l}=Fu({...i,externalSlotProps:o}),c=Qe(l,o==null?void 0:o.ref,(h=n.additionalProps)==null?void 0:h.ref);return ju(e,{...a,ref:c},r)}function ys(n){var e;return parseInt(S.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const ag=S.createContext(),lg=()=>S.useContext(ag)??!1,cg=S.createContext(void 0);function ug(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const s=e.components[t];return s.defaultProps?Fo(s.defaultProps,r):!s.styleOverrides&&!s.variants?Fo(s,r):r}function hg({props:n,name:e}){const t=S.useContext(cg);return ug({props:n,name:e,theme:{components:t}})}const Vl={theme:void 0};function dg(n){let e,t;return function(s){let i=e;return(i===void 0||s.theme!==t)&&(Vl.theme=s.theme,i=Ou(n(Vl)),e=i,t=s.theme),i}}function fg(n=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${n?`${n}-`:""}${r}${e(...s)})`}const Hl=(n,e,t,r=[])=>{let s=n;e.forEach((i,o)=>{o===e.length-1?Array.isArray(s)?s[Number(i)]=t:s&&typeof s=="object"&&(s[i]=t):s&&typeof s=="object"&&(s[i]||(s[i]=r.includes(i)?[]:{}),s=s[i])})},pg=(n,e,t)=>{function r(s,i=[],o=[]){Object.entries(s).forEach(([a,l])=>{(!t||!t([...i,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...i,a],Array.isArray(l)?[...o,a]:o):e([...i,a],l,o))})}r(n)},gg=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function lo(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},s={},i={},o={};return pg(n,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,h=gg(a,l);Object.assign(s,{[u]:h}),Hl(i,a,`var(${u})`,c),Hl(o,a,`var(${u}, ${h})`,c)}},a=>a[0]==="vars"),{css:s,vars:i,varsWithDefaults:o}}function mg(n,e={}){const{getSelector:t=y,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:i={},components:o,defaultColorScheme:a="light",...l}=n,{vars:c,css:u,varsWithDefaults:h}=lo(l,e);let d=h;const f={},{[a]:p,...g}=i;if(Object.entries(g||{}).forEach(([x,v])=>{const{vars:C,css:O,varsWithDefaults:P}=lo(v,e);d=Ze(d,P),f[x]={css:O,vars:C}}),p){const{css:x,vars:v,varsWithDefaults:C}=lo(p,e);d=Ze(d,C),f[a]={css:x,vars:v}}function y(x,v){var O,P;let C=s;if(s==="class"&&(C=".%s"),s==="data"&&(C="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(C=`[${s}="%s"]`),x){if(C==="media")return n.defaultColorScheme===x?":root":{[`@media (prefers-color-scheme: ${((P=(O=i[x])==null?void 0:O.palette)==null?void 0:P.mode)||x})`]:{":root":v}};if(C)return n.defaultColorScheme===x?`:root, ${C.replace("%s",String(x))}`:C.replace("%s",String(x))}return":root"}return{vars:d,generateThemeVars:()=>{let x={...c};return Object.entries(f).forEach(([,{vars:v}])=>{x=Ze(x,v)}),x},generateStyleSheets:()=>{var D,B;const x=[],v=n.defaultColorScheme||"light";function C(m,E){Object.keys(E).length&&x.push(typeof m=="string"?{[m]:{...E}}:m)}C(t(void 0,{...u}),u);const{[v]:O,...P}=f;if(O){const{css:m}=O,E=(B=(D=i[v])==null?void 0:D.palette)==null?void 0:B.mode,R=!r&&E?{colorScheme:E,...m}:{...m};C(t(v,{...R}),R)}return Object.entries(P).forEach(([m,{css:E}])=>{var F,M;const R=(M=(F=i[m])==null?void 0:F.palette)==null?void 0:M.mode,I=!r&&R?{colorScheme:R,...E}:{...E};C(t(m,{...I}),I)}),x}}}function yg(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function Bu(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rs.white,default:rs.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const bg=Bu();function Nu(){return{text:{primary:rs.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rs.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const ql=Nu();function Xl(n,e,t,r){const s=r.light||r,i=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=Pa(n.main,s):e==="dark"&&(n.dark=Ea(n.main,i)))}function vg(n="light"){return n==="dark"?{main:en[200],light:en[50],dark:en[400]}:{main:en[700],light:en[400],dark:en[800]}}function xg(n="light"){return n==="dark"?{main:Qr[200],light:Qr[50],dark:Qr[400]}:{main:Qr[500],light:Qr[300],dark:Qr[700]}}function Sg(n="light"){return n==="dark"?{main:Jr[500],light:Jr[300],dark:Jr[700]}:{main:Jr[700],light:Jr[400],dark:Jr[800]}}function Cg(n="light"){return n==="dark"?{main:tn[400],light:tn[300],dark:tn[700]}:{main:tn[700],light:tn[500],dark:tn[900]}}function _g(n="light"){return n==="dark"?{main:rn[400],light:rn[300],dark:rn[700]}:{main:rn[800],light:rn[500],dark:rn[900]}}function wg(n="light"){return n==="dark"?{main:Ln[400],light:Ln[300],dark:Ln[700]}:{main:"#ed6c02",light:Ln[500],dark:Ln[900]}}function Aa(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...s}=n,i=n.primary||vg(e),o=n.secondary||xg(e),a=n.error||Sg(e),l=n.info||Cg(e),c=n.success||_g(e),u=n.warning||wg(e);function h(g){return eg(g,ql.text.primary)>=t?ql.text.primary:bg.text.primary}const d=({color:g,name:y,mainShade:b=500,lightShade:w=300,darkShade:x=700})=>{if(g={...g},!g.main&&g[b]&&(g.main=g[b]),!g.hasOwnProperty("main"))throw new Error(or(11,y?` (${y})`:"",b));if(typeof g.main!="string")throw new Error(or(12,y?` (${y})`:"",JSON.stringify(g.main)));return Xl(g,"light",w,r),Xl(g,"dark",x,r),g.contrastText||(g.contrastText=h(g.main)),g};let f;return e==="light"?f=Bu():e==="dark"&&(f=Nu()),Ze({common:{...rs},mode:e,primary:d({color:i,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:Ad,contrastThreshold:t,getContrastText:h,augmentColor:d,tonalOffset:r,...f},s)}function Tg(n){const e={};return Object.entries(n).forEach(r=>{const[s,i]=r;typeof i=="object"&&(e[s]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),e}function kg(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function Og(n){return Math.round(n*1e5)/1e5}const Yl={textTransform:"uppercase"},Gl='"Roboto", "Helvetica", "Arial", sans-serif';function Eg(n,e){const{fontFamily:t=Gl,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof e=="function"?e(n):e,d=r/14,f=u||(y=>`${y/l*d}rem`),p=(y,b,w,x,v)=>({fontFamily:t,fontWeight:y,fontSize:f(b),lineHeight:w,...t===Gl?{letterSpacing:`${Og(x/b)}em`}:{},...v,...c}),g={h1:p(s,96,1.167,-1.5),h2:p(s,60,1.2,-.5),h3:p(i,48,1.167,0),h4:p(i,34,1.235,.25),h5:p(i,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(i,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(i,16,1.5,.15),body2:p(i,14,1.43,.15),button:p(o,14,1.75,.4,Yl),caption:p(i,12,1.66,.4),overline:p(i,12,2.66,1,Yl),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ze({htmlFontSize:l,pxToRem:f,fontFamily:t,fontSize:r,fontWeightLight:s,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:a,...g},h,{clone:!1})}const Pg=.2,Mg=.14,Dg=.12;function _e(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${Pg})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Mg})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${Dg})`].join(",")}const Ag=["none",_e(0,2,1,-1,0,1,1,0,0,1,3,0),_e(0,3,1,-2,0,2,2,0,0,1,5,0),_e(0,3,3,-2,0,3,4,0,0,1,8,0),_e(0,2,4,-1,0,4,5,0,0,1,10,0),_e(0,3,5,-1,0,5,8,0,0,1,14,0),_e(0,3,5,-1,0,6,10,0,0,1,18,0),_e(0,4,5,-2,0,7,10,1,0,2,16,1),_e(0,5,5,-3,0,8,10,1,0,3,14,2),_e(0,5,6,-3,0,9,12,1,0,3,16,2),_e(0,6,6,-3,0,10,14,1,0,4,18,3),_e(0,6,7,-4,0,11,15,1,0,4,20,3),_e(0,7,8,-4,0,12,17,2,0,5,22,4),_e(0,7,8,-4,0,13,19,2,0,5,24,4),_e(0,7,9,-4,0,14,21,2,0,5,26,4),_e(0,8,9,-5,0,15,22,2,0,6,28,5),_e(0,8,10,-5,0,16,24,2,0,6,30,5),_e(0,8,11,-5,0,17,26,2,0,6,32,5),_e(0,9,11,-5,0,18,28,2,0,7,34,6),_e(0,9,12,-6,0,19,29,2,0,7,36,6),_e(0,10,13,-6,0,20,31,3,0,8,38,7),_e(0,10,13,-6,0,21,33,3,0,8,40,7),_e(0,10,14,-6,0,22,35,3,0,8,42,7),_e(0,11,14,-7,0,23,36,3,0,9,44,8),_e(0,11,15,-7,0,24,38,3,0,9,46,8)],Rg={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},jg={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ul(n){return`${Math.round(n)}ms`}function Ig(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Fg(n){const e={...Rg,...n.easing},t={...jg,...n.duration};return{getAutoHeightDuration:Ig,create:(s=["all"],i={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=i;return(Array.isArray(s)?s:[s]).map(u=>`${u} ${typeof o=="string"?o:Ul(o)} ${a} ${typeof l=="string"?l:Ul(l)}`).join(",")},...n,easing:e,duration:t}}const Lg={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Bg(n){return Wt(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function $u(n={}){const e={...n};function t(r){const s=Object.entries(r);for(let i=0;i<s.length;i++){const[o,a]=s[i];!Bg(a)||o.startsWith("unstable_")?delete r[o]:Wt(a)&&(r[o]={...a},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function $o(n={},...e){const{breakpoints:t,mixins:r={},spacing:s,palette:i={},transitions:o={},typography:a={},shape:l,...c}=n;if(n.vars)throw new Error(or(20));const u=Aa(i),h=ka(n);let d=Ze(h,{mixins:kg(h.breakpoints,r),palette:u,shadows:Ag.slice(),typography:Eg(u,a),transitions:Fg(o),zIndex:{...Lg}});return d=Ze(d,c),d=e.reduce((f,p)=>Ze(f,p),d),d.unstable_sxConfig={...ms,...c==null?void 0:c.unstable_sxConfig},d.unstable_sx=function(p){return _n({sx:p,theme:this})},d.toRuntimeSource=$u,d}function Wo(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const Ng=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=Wo(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function Wu(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function zu(n){return n==="dark"?Ng:[]}function $g(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...s}=n,i=Aa(e);return{palette:i,opacity:{...Wu(i.mode),...t},overlays:r||zu(i.mode),...s}}function Wg(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const zg=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],Vg=n=>(e,t)=>{const r=n.rootSelector||":root",s=n.colorSchemeSelector;let i=s;if(s==="class"&&(i=".%s"),s==="data"&&(i="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(i=`[${s}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return zg(n.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),i==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",e)]:o,[`${r}, ${i.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(e))}`}else if(e){if(i==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(i)return i.replace("%s",String(e))}return r};function Hg(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function j(n,e,t){!n[e]&&t&&(n[e]=t)}function Hn(n){return typeof n!="string"||!n.startsWith("hsl")?n:Pu(n)}function Ut(n,e){`${e}Channel`in n||(n[`${e}Channel`]=Vn(Hn(n[e])))}function qg(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const Lt=n=>{try{return n()}catch{}},Xg=(n="mui")=>fg(n);function co(n,e,t,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!t){n[r]=$g({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:i,...o}=$o({...t,palette:{mode:s,...e==null?void 0:e.palette}});return n[r]={...e,palette:i,opacity:{...Wu(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||zu(s)},o}function Yg(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=Wg,colorSchemeSelector:a=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=n,u=Object.keys(t)[0],h=r||(t.light&&u!=="light"?"light":u),d=Xg(i),{[h]:f,light:p,dark:g,...y}=t,b={...y};let w=f;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(w=!0),!w)throw new Error(or(21,h));const x=co(b,w,c,h);p&&!b.light&&co(b,p,void 0,"light"),g&&!b.dark&&co(b,g,void 0,"dark");let v={defaultColorScheme:h,...x,cssVarPrefix:i,colorSchemeSelector:a,rootSelector:l,getCssVar:d,colorSchemes:b,font:{...Tg(x.typography),...x.font},spacing:qg(c.spacing)};Object.keys(v.colorSchemes).forEach(B=>{const m=v.colorSchemes[B].palette,E=R=>{const I=R.split("-"),F=I[1],M=I[2];return d(R,m[F][M])};if(m.mode==="light"&&(j(m.common,"background","#fff"),j(m.common,"onBackground","#000")),m.mode==="dark"&&(j(m.common,"background","#000"),j(m.common,"onBackground","#fff")),Hg(m,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),m.mode==="light"){j(m.Alert,"errorColor",fe(m.error.light,.6)),j(m.Alert,"infoColor",fe(m.info.light,.6)),j(m.Alert,"successColor",fe(m.success.light,.6)),j(m.Alert,"warningColor",fe(m.warning.light,.6)),j(m.Alert,"errorFilledBg",E("palette-error-main")),j(m.Alert,"infoFilledBg",E("palette-info-main")),j(m.Alert,"successFilledBg",E("palette-success-main")),j(m.Alert,"warningFilledBg",E("palette-warning-main")),j(m.Alert,"errorFilledColor",Lt(()=>m.getContrastText(m.error.main))),j(m.Alert,"infoFilledColor",Lt(()=>m.getContrastText(m.info.main))),j(m.Alert,"successFilledColor",Lt(()=>m.getContrastText(m.success.main))),j(m.Alert,"warningFilledColor",Lt(()=>m.getContrastText(m.warning.main))),j(m.Alert,"errorStandardBg",pe(m.error.light,.9)),j(m.Alert,"infoStandardBg",pe(m.info.light,.9)),j(m.Alert,"successStandardBg",pe(m.success.light,.9)),j(m.Alert,"warningStandardBg",pe(m.warning.light,.9)),j(m.Alert,"errorIconColor",E("palette-error-main")),j(m.Alert,"infoIconColor",E("palette-info-main")),j(m.Alert,"successIconColor",E("palette-success-main")),j(m.Alert,"warningIconColor",E("palette-warning-main")),j(m.AppBar,"defaultBg",E("palette-grey-100")),j(m.Avatar,"defaultBg",E("palette-grey-400")),j(m.Button,"inheritContainedBg",E("palette-grey-300")),j(m.Button,"inheritContainedHoverBg",E("palette-grey-A100")),j(m.Chip,"defaultBorder",E("palette-grey-400")),j(m.Chip,"defaultAvatarColor",E("palette-grey-700")),j(m.Chip,"defaultIconColor",E("palette-grey-700")),j(m.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),j(m.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),j(m.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),j(m.LinearProgress,"primaryBg",pe(m.primary.main,.62)),j(m.LinearProgress,"secondaryBg",pe(m.secondary.main,.62)),j(m.LinearProgress,"errorBg",pe(m.error.main,.62)),j(m.LinearProgress,"infoBg",pe(m.info.main,.62)),j(m.LinearProgress,"successBg",pe(m.success.main,.62)),j(m.LinearProgress,"warningBg",pe(m.warning.main,.62)),j(m.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.11)`),j(m.Slider,"primaryTrack",pe(m.primary.main,.62)),j(m.Slider,"secondaryTrack",pe(m.secondary.main,.62)),j(m.Slider,"errorTrack",pe(m.error.main,.62)),j(m.Slider,"infoTrack",pe(m.info.main,.62)),j(m.Slider,"successTrack",pe(m.success.main,.62)),j(m.Slider,"warningTrack",pe(m.warning.main,.62));const R=Ts(m.background.default,.8);j(m.SnackbarContent,"bg",R),j(m.SnackbarContent,"color",Lt(()=>m.getContrastText(R))),j(m.SpeedDialAction,"fabHoverBg",Ts(m.background.paper,.15)),j(m.StepConnector,"border",E("palette-grey-400")),j(m.StepContent,"border",E("palette-grey-400")),j(m.Switch,"defaultColor",E("palette-common-white")),j(m.Switch,"defaultDisabledColor",E("palette-grey-100")),j(m.Switch,"primaryDisabledColor",pe(m.primary.main,.62)),j(m.Switch,"secondaryDisabledColor",pe(m.secondary.main,.62)),j(m.Switch,"errorDisabledColor",pe(m.error.main,.62)),j(m.Switch,"infoDisabledColor",pe(m.info.main,.62)),j(m.Switch,"successDisabledColor",pe(m.success.main,.62)),j(m.Switch,"warningDisabledColor",pe(m.warning.main,.62)),j(m.TableCell,"border",pe(ws(m.divider,1),.88)),j(m.Tooltip,"bg",ws(m.grey[700],.92))}if(m.mode==="dark"){j(m.Alert,"errorColor",pe(m.error.light,.6)),j(m.Alert,"infoColor",pe(m.info.light,.6)),j(m.Alert,"successColor",pe(m.success.light,.6)),j(m.Alert,"warningColor",pe(m.warning.light,.6)),j(m.Alert,"errorFilledBg",E("palette-error-dark")),j(m.Alert,"infoFilledBg",E("palette-info-dark")),j(m.Alert,"successFilledBg",E("palette-success-dark")),j(m.Alert,"warningFilledBg",E("palette-warning-dark")),j(m.Alert,"errorFilledColor",Lt(()=>m.getContrastText(m.error.dark))),j(m.Alert,"infoFilledColor",Lt(()=>m.getContrastText(m.info.dark))),j(m.Alert,"successFilledColor",Lt(()=>m.getContrastText(m.success.dark))),j(m.Alert,"warningFilledColor",Lt(()=>m.getContrastText(m.warning.dark))),j(m.Alert,"errorStandardBg",fe(m.error.light,.9)),j(m.Alert,"infoStandardBg",fe(m.info.light,.9)),j(m.Alert,"successStandardBg",fe(m.success.light,.9)),j(m.Alert,"warningStandardBg",fe(m.warning.light,.9)),j(m.Alert,"errorIconColor",E("palette-error-main")),j(m.Alert,"infoIconColor",E("palette-info-main")),j(m.Alert,"successIconColor",E("palette-success-main")),j(m.Alert,"warningIconColor",E("palette-warning-main")),j(m.AppBar,"defaultBg",E("palette-grey-900")),j(m.AppBar,"darkBg",E("palette-background-paper")),j(m.AppBar,"darkColor",E("palette-text-primary")),j(m.Avatar,"defaultBg",E("palette-grey-600")),j(m.Button,"inheritContainedBg",E("palette-grey-800")),j(m.Button,"inheritContainedHoverBg",E("palette-grey-700")),j(m.Chip,"defaultBorder",E("palette-grey-700")),j(m.Chip,"defaultAvatarColor",E("palette-grey-300")),j(m.Chip,"defaultIconColor",E("palette-grey-300")),j(m.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),j(m.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),j(m.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),j(m.LinearProgress,"primaryBg",fe(m.primary.main,.5)),j(m.LinearProgress,"secondaryBg",fe(m.secondary.main,.5)),j(m.LinearProgress,"errorBg",fe(m.error.main,.5)),j(m.LinearProgress,"infoBg",fe(m.info.main,.5)),j(m.LinearProgress,"successBg",fe(m.success.main,.5)),j(m.LinearProgress,"warningBg",fe(m.warning.main,.5)),j(m.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.13)`),j(m.Slider,"primaryTrack",fe(m.primary.main,.5)),j(m.Slider,"secondaryTrack",fe(m.secondary.main,.5)),j(m.Slider,"errorTrack",fe(m.error.main,.5)),j(m.Slider,"infoTrack",fe(m.info.main,.5)),j(m.Slider,"successTrack",fe(m.success.main,.5)),j(m.Slider,"warningTrack",fe(m.warning.main,.5));const R=Ts(m.background.default,.98);j(m.SnackbarContent,"bg",R),j(m.SnackbarContent,"color",Lt(()=>m.getContrastText(R))),j(m.SpeedDialAction,"fabHoverBg",Ts(m.background.paper,.15)),j(m.StepConnector,"border",E("palette-grey-600")),j(m.StepContent,"border",E("palette-grey-600")),j(m.Switch,"defaultColor",E("palette-grey-300")),j(m.Switch,"defaultDisabledColor",E("palette-grey-600")),j(m.Switch,"primaryDisabledColor",fe(m.primary.main,.55)),j(m.Switch,"secondaryDisabledColor",fe(m.secondary.main,.55)),j(m.Switch,"errorDisabledColor",fe(m.error.main,.55)),j(m.Switch,"infoDisabledColor",fe(m.info.main,.55)),j(m.Switch,"successDisabledColor",fe(m.success.main,.55)),j(m.Switch,"warningDisabledColor",fe(m.warning.main,.55)),j(m.TableCell,"border",fe(ws(m.divider,1),.68)),j(m.Tooltip,"bg",ws(m.grey[700],.92))}Ut(m.background,"default"),Ut(m.background,"paper"),Ut(m.common,"background"),Ut(m.common,"onBackground"),Ut(m,"divider"),Object.keys(m).forEach(R=>{const I=m[R];R!=="tonalOffset"&&I&&typeof I=="object"&&(I.main&&j(m[R],"mainChannel",Vn(Hn(I.main))),I.light&&j(m[R],"lightChannel",Vn(Hn(I.light))),I.dark&&j(m[R],"darkChannel",Vn(Hn(I.dark))),I.contrastText&&j(m[R],"contrastTextChannel",Vn(Hn(I.contrastText))),R==="text"&&(Ut(m[R],"primary"),Ut(m[R],"secondary")),R==="action"&&(I.active&&Ut(m[R],"active"),I.selected&&Ut(m[R],"selected")))})}),v=e.reduce((B,m)=>Ze(B,m),v);const C={prefix:i,disableCssColorScheme:s,shouldSkipGeneratingVar:o,getSelector:Vg(v)},{vars:O,generateThemeVars:P,generateStyleSheets:D}=mg(v,C);return v.vars=O,Object.entries(v.colorSchemes[v.defaultColorScheme]).forEach(([B,m])=>{v[B]=m}),v.generateThemeVars=P,v.generateStyleSheets=D,v.generateSpacing=function(){return wu(c.spacing,wa(this))},v.getColorSchemeSelector=yg(a),v.spacing=v.generateSpacing(),v.shouldSkipGeneratingVar=o,v.unstable_sxConfig={...ms,...c==null?void 0:c.unstable_sxConfig},v.unstable_sx=function(m){return _n({sx:m,theme:this})},v.toRuntimeSource=$u,v}function Kl(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:Aa({...t===!0?{}:t.palette,mode:e})})}function Gg(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:s=t?void 0:{light:!0},defaultColorScheme:i=t==null?void 0:t.mode,...o}=n,a=i||"light",l=s==null?void 0:s[a],c={...s,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return $o(n,...e);let u=t;"palette"in n||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const h=$o({...n,palette:u},...e);return h.defaultColorScheme=a,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},Kl(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},Kl(h,"light",c.light)),h}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),Yg({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const Ra=Gg();function ja(){const n=Tu(Ra);return n[fa]||n}function Vu(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const Ot=n=>Vu(n)&&n!=="classes",V=Xp({themeId:fa,defaultTheme:Ra,rootShouldForwardProp:Ot});function Ug(n){return _.jsx(Lp,{...n,defaultTheme:Ra,themeId:fa})}function Kg(n){return function(t){return _.jsx(Ug,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function Zg(){return Np}const Te=dg;function Oe(n){return hg(n)}function Jg(n){return ye("MuiSvgIcon",n)}be("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Qg=n=>{const{color:e,fontSize:t,classes:r}=n,s={root:["root",e!=="inherit"&&`color${U(e)}`,`fontSize${U(t)}`]};return ve(s,Jg,r)},em=V("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${U(t.color)}`],e[`fontSize${U(t.fontSize)}`]]}})(Te(({theme:n})=>{var e,t,r,s,i,o,a,l,c,u,h,d,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=n.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(i=n.typography)==null?void 0:i.pxToRem)==null?void 0:o.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,g])=>g&&g.main).map(([g])=>{var y,b;return{props:{color:g},style:{color:(b=(y=(n.vars??n).palette)==null?void 0:y[g])==null?void 0:b.main}}}),{props:{color:"action"},style:{color:(d=(h=(n.vars??n).palette)==null?void 0:h.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(p=(f=(n.vars??n).palette)==null?void 0:f.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),zo=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiSvgIcon"}),{children:s,className:i,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24",...f}=r,p=S.isValidElement(s)&&s.type==="svg",g={...r,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:p},y={};u||(y.viewBox=d);const b=Qg(g);return _.jsxs(em,{as:a,className:Z(b.root,i),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...y,...f,...p&&s.props,ownerState:g,children:[p?s.props.children:s,h?_.jsx("title",{children:h}):null]})});zo.muiName="SvgIcon";function Wi(n,e){function t(r,s){return _.jsx(zo,{"data-testid":`${e}Icon`,ref:s,...r,children:n})}return t.muiName=zo.muiName,S.memo(S.forwardRef(t))}function Hu(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function Vo(n,e){return Vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Vo(n,e)}function qu(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Vo(n,e)}const Zl={disabled:!1},fi=tr.createContext(null);var tm=function(e){return e.scrollTop},qn="unmounted",Pr="exited",Mr="entering",cn="entered",Ho="exiting",Gt=function(n){qu(e,n);function e(r,s){var i;i=n.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,l;return i.appearStatus=null,r.in?a?(l=Pr,i.appearStatus=Mr):l=cn:r.unmountOnExit||r.mountOnEnter?l=qn:l=Pr,i.state={status:l},i.nextCallback=null,i}e.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===qn?{status:Pr}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Mr&&o!==cn&&(i=Mr):(o===Mr||o===cn)&&(i=Ho)}this.updateStatus(!1,i)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},t.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===Mr){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Cs.findDOMNode(this);o&&tm(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Pr&&this.setState({status:qn})},t.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[Cs.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!s&&!o||Zl.disabled){this.safeSetState({status:cn},function(){i.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Mr},function(){i.props.onEntering(c,u),i.onTransitionEnd(d,function(){i.safeSetState({status:cn},function(){i.props.onEntered(c,u)})})})},t.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Cs.findDOMNode(this);if(!i||Zl.disabled){this.safeSetState({status:Pr},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Ho},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:Pr},function(){s.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},t.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Cs.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===qn)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=Hu(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return tr.createElement(fi.Provider,{value:null},typeof o=="function"?o(s,a):tr.cloneElement(tr.Children.only(o),a))},e}(tr.Component);Gt.contextType=fi;Gt.propTypes={};function nn(){}Gt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:nn,onEntering:nn,onEntered:nn,onExit:nn,onExiting:nn,onExited:nn};Gt.UNMOUNTED=qn;Gt.EXITED=Pr;Gt.ENTERING=Mr;Gt.ENTERED=cn;Gt.EXITING=Ho;function rm(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ia(n,e){var t=function(i){return e&&S.isValidElement(i)?e(i):i},r=Object.create(null);return n&&S.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function nm(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),s=[];for(var i in n)i in e?s.length&&(r[i]=s,s=[]):s.push(i);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<s.length;o++)a[s[o]]=t(s[o]);return a}function Rr(n,e,t){return t[e]!=null?t[e]:n.props[e]}function sm(n,e){return Ia(n.children,function(t){return S.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Rr(t,"appear",n),enter:Rr(t,"enter",n),exit:Rr(t,"exit",n)})})}function im(n,e,t){var r=Ia(n.children),s=nm(e,r);return Object.keys(s).forEach(function(i){var o=s[i];if(S.isValidElement(o)){var a=i in e,l=i in r,c=e[i],u=S.isValidElement(c)&&!c.props.in;l&&(!a||u)?s[i]=S.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:Rr(o,"exit",n),enter:Rr(o,"enter",n)}):!l&&a&&!u?s[i]=S.cloneElement(o,{in:!1}):l&&a&&S.isValidElement(c)&&(s[i]=S.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:Rr(o,"exit",n),enter:Rr(o,"enter",n)}))}}),s}var om=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},am={component:"div",childFactory:function(e){return e}},Fa=function(n){qu(e,n);function e(r,s){var i;i=n.call(this,r,s)||this;var o=i.handleExited.bind(rm(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,i){var o=i.children,a=i.handleExited,l=i.firstRender;return{children:l?sm(s,a):im(s,o,a),firstRender:!1}},t.handleExited=function(s,i){var o=Ia(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(i),this.mounted&&this.setState(function(a){var l=ui({},a.children);return delete l[s.key],{children:l}}))},t.render=function(){var s=this.props,i=s.component,o=s.childFactory,a=Hu(s,["component","childFactory"]),l=this.state.contextValue,c=om(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,i===null?tr.createElement(fi.Provider,{value:l},c):tr.createElement(fi.Provider,{value:l},tr.createElement(i,a,c))},e}(tr.Component);Fa.propTypes={};Fa.defaultProps=am;const Xu=n=>n.scrollTop;function pi(n,e){const{timeout:t,easing:r,style:s={}}=n;return{duration:s.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function lm(n){return ye("MuiPaper",n)}be("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const cm=n=>{const{square:e,elevation:t,variant:r,classes:s}=n,i={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return ve(i,lm,s)},um=V("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(Te(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),hm=S.forwardRef(function(e,t){var f;const r=Oe({props:e,name:"MuiPaper"}),s=ja(),{className:i,component:o="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,h={...r,component:o,elevation:a,square:l,variant:c},d=cm(h);return _.jsx(um,{as:o,ownerState:h,className:Z(d.root,i),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[a],...s.vars&&{"--Paper-overlay":(f=s.vars.overlays)==null?void 0:f[a]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${$r("#fff",Wo(a))}, ${$r("#fff",Wo(a))})`}},...u.style}})});function _t(n,e){const{className:t,elementType:r,ownerState:s,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:h={[n]:void 0},...d}=i,f=u[n]||r,p=Lu(h[n],s),{props:{component:g,...y},internalRef:b}=Fu({className:t,...l,externalForwardedProps:n==="root"?d:void 0,externalSlotProps:p}),w=Qe(b,p==null?void 0:p.ref,e.ref),x=n==="root"?g||c:g,v=ju(f,{...n==="root"&&!c&&!u[n]&&o,...n!=="root"&&!u[n]&&o,...y,...x&&!a&&{as:x},...x&&a&&{component:x},ref:w},s);return[f,v]}class gi{constructor(){Fn(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new gi}static use(){const e=Du(gi.create).current,[t,r]=S.useState(!1);return e.shouldMount=t,e.setShouldMount=r,S.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=fm(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function dm(){return gi.use()}function fm(){let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t}function pm(n){const{className:e,classes:t,pulsate:r=!1,rippleX:s,rippleY:i,rippleSize:o,in:a,onExited:l,timeout:c}=n,[u,h]=S.useState(!1),d=Z(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),f={width:o,height:o,top:-(o/2)+i,left:-(o/2)+s},p=Z(t.child,u&&t.childLeaving,r&&t.childPulsate);return!a&&!u&&h(!0),S.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),_.jsx("span",{className:d,style:f,children:_.jsx("span",{className:p})})}const xt=be("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),qo=550,gm=80,mm=fs`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,ym=fs`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,bm=fs`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,vm=V("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),xm=V(pm,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${xt.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${mm};
    animation-duration: ${qo}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${xt.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${xt.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${xt.childLeaving} {
    opacity: 0;
    animation-name: ${ym};
    animation-duration: ${qo}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${xt.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${bm};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,Sm=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:i={},className:o,...a}=r,[l,c]=S.useState([]),u=S.useRef(0),h=S.useRef(null);S.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const d=S.useRef(!1),f=Au(),p=S.useRef(null),g=S.useRef(null),y=S.useCallback(v=>{const{pulsate:C,rippleX:O,rippleY:P,rippleSize:D,cb:B}=v;c(m=>[...m,_.jsx(xm,{classes:{ripple:Z(i.ripple,xt.ripple),rippleVisible:Z(i.rippleVisible,xt.rippleVisible),ripplePulsate:Z(i.ripplePulsate,xt.ripplePulsate),child:Z(i.child,xt.child),childLeaving:Z(i.childLeaving,xt.childLeaving),childPulsate:Z(i.childPulsate,xt.childPulsate)},timeout:qo,pulsate:C,rippleX:O,rippleY:P,rippleSize:D},u.current)]),u.current+=1,h.current=B},[i]),b=S.useCallback((v={},C={},O=()=>{})=>{const{pulsate:P=!1,center:D=s||C.pulsate,fakeElement:B=!1}=C;if((v==null?void 0:v.type)==="mousedown"&&d.current){d.current=!1;return}(v==null?void 0:v.type)==="touchstart"&&(d.current=!0);const m=B?null:g.current,E=m?m.getBoundingClientRect():{width:0,height:0,left:0,top:0};let R,I,F;if(D||v===void 0||v.clientX===0&&v.clientY===0||!v.clientX&&!v.touches)R=Math.round(E.width/2),I=Math.round(E.height/2);else{const{clientX:M,clientY:L}=v.touches&&v.touches.length>0?v.touches[0]:v;R=Math.round(M-E.left),I=Math.round(L-E.top)}if(D)F=Math.sqrt((2*E.width**2+E.height**2)/3),F%2===0&&(F+=1);else{const M=Math.max(Math.abs((m?m.clientWidth:0)-R),R)*2+2,L=Math.max(Math.abs((m?m.clientHeight:0)-I),I)*2+2;F=Math.sqrt(M**2+L**2)}v!=null&&v.touches?p.current===null&&(p.current=()=>{y({pulsate:P,rippleX:R,rippleY:I,rippleSize:F,cb:O})},f.start(gm,()=>{p.current&&(p.current(),p.current=null)})):y({pulsate:P,rippleX:R,rippleY:I,rippleSize:F,cb:O})},[s,y,f]),w=S.useCallback(()=>{b({},{pulsate:!0})},[b]),x=S.useCallback((v,C)=>{if(f.clear(),(v==null?void 0:v.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{x(v,C)});return}p.current=null,c(O=>O.length>0?O.slice(1):O),h.current=C},[f]);return S.useImperativeHandle(t,()=>({pulsate:w,start:b,stop:x}),[w,b,x]),_.jsx(vm,{className:Z(xt.root,i.root,o),ref:g,...a,children:_.jsx(Fa,{component:null,exit:!0,children:l})})});function Cm(n){return ye("MuiButtonBase",n)}const _m=be("MuiButtonBase",["root","disabled","focusVisible"]),wm=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:s}=n,o=ve({root:["root",e&&"disabled",t&&"focusVisible"]},Cm,s);return t&&r&&(o.root+=` ${r}`),o},Tm=V("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${_m.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Yu=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:i=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:f,LinkComponent:p="a",onBlur:g,onClick:y,onContextMenu:b,onDragLeave:w,onFocus:x,onFocusVisible:v,onKeyDown:C,onKeyUp:O,onMouseDown:P,onMouseLeave:D,onMouseUp:B,onTouchEnd:m,onTouchMove:E,onTouchStart:R,tabIndex:I=0,TouchRippleProps:F,touchRippleRef:M,type:L,...$}=r,W=S.useRef(null),N=dm(),ne=Qe(N.ref,M),[ce,Be]=S.useState(!1);c&&ce&&Be(!1),S.useImperativeHandle(s,()=>({focusVisible:()=>{Be(!0),W.current.focus()}}),[]);const te=N.shouldMount&&!u&&!c;S.useEffect(()=>{ce&&d&&!u&&N.pulsate()},[u,d,ce,N]);const J=Kt(N,"start",P,h),se=Kt(N,"stop",b,h),Ee=Kt(N,"stop",w,h),Pe=Kt(N,"stop",B,h),et=Kt(N,"stop",H=>{ce&&H.preventDefault(),D&&D(H)},h),ge=Kt(N,"start",R,h),G=Kt(N,"stop",m,h),de=Kt(N,"stop",E,h),Q=Kt(N,"stop",H=>{$l(H.target)||Be(!1),g&&g(H)},!1),Ne=yn(H=>{W.current||(W.current=H.currentTarget),$l(H.target)&&(Be(!0),v&&v(H)),x&&x(H)}),ee=()=>{const H=W.current;return l&&l!=="button"&&!(H.tagName==="A"&&H.href)},Se=yn(H=>{d&&!H.repeat&&ce&&H.key===" "&&N.stop(H,()=>{N.start(H)}),H.target===H.currentTarget&&ee()&&H.key===" "&&H.preventDefault(),C&&C(H),H.target===H.currentTarget&&ee()&&H.key==="Enter"&&!c&&(H.preventDefault(),y&&y(H))}),pt=yn(H=>{d&&H.key===" "&&ce&&!H.defaultPrevented&&N.stop(H,()=>{N.pulsate(H)}),O&&O(H),y&&H.target===H.currentTarget&&ee()&&H.key===" "&&!H.defaultPrevented&&y(H)});let tt=l;tt==="button"&&($.href||$.to)&&(tt=p);const qe={};tt==="button"?(qe.type=L===void 0?"button":L,qe.disabled=c):(!$.href&&!$.to&&(qe.role="button"),c&&(qe["aria-disabled"]=c));const Ft=Qe(t,W),rt={...r,centerRipple:i,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:I,focusVisible:ce},ze=wm(rt);return _.jsxs(Tm,{as:tt,className:Z(ze.root,a),ownerState:rt,onBlur:Q,onClick:y,onContextMenu:se,onFocus:Ne,onKeyDown:Se,onKeyUp:pt,onMouseDown:J,onMouseLeave:et,onMouseUp:Pe,onDragLeave:Ee,onTouchEnd:G,onTouchMove:de,onTouchStart:ge,ref:Ft,tabIndex:c?-1:I,type:L,...qe,...$,children:[o,te?_.jsx(Sm,{ref:ne,center:i,...F}):null]})});function Kt(n,e,t,r=!1){return yn(s=>(t&&t(s),r||n[e](s),!0))}function km(n){return typeof n.main=="string"}function Om(n,e=[]){if(!km(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function qt(n=[]){return([,e])=>e&&Om(e,n)}function Em(n){return ye("MuiCircularProgress",n)}be("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const pr=44,Xo=fs`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Yo=fs`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Pm=typeof Xo!="string"?Sa`
        animation: ${Xo} 1.4s linear infinite;
      `:null,Mm=typeof Yo!="string"?Sa`
        animation: ${Yo} 1.4s ease-in-out infinite;
      `:null,Dm=n=>{const{classes:e,variant:t,color:r,disableShrink:s}=n,i={root:["root",t,`color${U(r)}`],svg:["svg"],circle:["circle",`circle${U(t)}`,s&&"circleDisableShrink"]};return ve(i,Em,e)},Am=V("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${U(t.color)}`]]}})(Te(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Pm||{animation:`${Xo} 1.4s linear infinite`}},...Object.entries(n.palette).filter(qt()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}}))]}))),Rm=V("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),jm=V("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${U(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(Te(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:Mm||{animation:`${Yo} 1.4s ease-in-out infinite`}}]}))),Im=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiCircularProgress"}),{className:s,color:i="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:h="indeterminate",...d}=r,f={...r,color:i,disableShrink:o,size:a,thickness:c,value:u,variant:h},p=Dm(f),g={},y={},b={};if(h==="determinate"){const w=2*Math.PI*((pr-c)/2);g.strokeDasharray=w.toFixed(3),b["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*w).toFixed(3)}px`,y.transform="rotate(-90deg)"}return _.jsx(Am,{className:Z(p.root,s),style:{width:a,height:a,...y,...l},ownerState:f,ref:t,role:"progressbar",...b,...d,children:_.jsx(Rm,{className:p.svg,ownerState:f,viewBox:`${pr/2} ${pr/2} ${pr} ${pr}`,children:_.jsx(jm,{className:p.circle,style:g,ownerState:f,cx:pr,cy:pr,r:(pr-c)/2,fill:"none",strokeWidth:c})})})});function Fm(n){return ye("MuiIconButton",n)}const Jl=be("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Lm=n=>{const{classes:e,disabled:t,color:r,edge:s,size:i,loading:o}=n,a={root:["root",o&&"loading",t&&"disabled",r!=="default"&&`color${U(r)}`,s&&`edge${U(s)}`,`size${U(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return ve(a,Fm,e)},Bm=V(Yu,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${U(t.color)}`],t.edge&&e[`edge${U(t.edge)}`],e[`size${U(t.size)}`]]}})(Te(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:$r(n.palette.action.active,n.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Te(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(qt()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(qt()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.vars?`rgba(${(n.vars||n).palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:$r((n.vars||n).palette[e].main,n.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${Jl.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled},[`&.${Jl.loading}`]:{color:"transparent"}}))),Nm=V("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(n,e)=>e.loadingIndicator})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(n.vars||n).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),$m=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiIconButton"}),{edge:s=!1,children:i,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:h,loading:d=null,loadingIndicator:f,...p}=r,g=Ma(h),y=f??_.jsx(Im,{"aria-labelledby":g,color:"inherit",size:16}),b={...r,edge:s,color:a,disabled:l,disableFocusRipple:c,loading:d,loadingIndicator:y,size:u},w=Lm(b);return _.jsxs(Bm,{id:g,className:Z(w.root,o),centerRipple:!0,focusRipple:!c,disabled:l||d,ref:t,...p,ownerState:b,children:[typeof d=="boolean"&&_.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:_.jsx(Nm,{className:w.loadingIndicator,ownerState:b,children:d&&y})}),i]})});function Wm(n){return ye("MuiTypography",n)}be("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const zm={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Vm=Zg(),Hm=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:s,variant:i,classes:o}=n,a={root:["root",i,n.align!=="inherit"&&`align${U(e)}`,t&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return ve(a,Wm,o)},qm=V("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${U(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(Te(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(qt()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${U(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),Ql={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Go=S.forwardRef(function(e,t){const{color:r,...s}=Oe({props:e,name:"MuiTypography"}),i=!zm[r],o=Vm({...s,...i&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:d=!1,variant:f="body1",variantMapping:p=Ql,...g}=o,y={...o,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:h,paragraph:d,variant:f,variantMapping:p},b=c||(d?"p":p[f]||Ql[f])||"span",w=Hm(y);return _.jsx(qm,{as:b,ref:t,className:Z(w.root,l),...g,ownerState:y,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...g.style}})});function Xm(n){return typeof n=="function"?n():n}const Ym=S.forwardRef(function(e,t){const{children:r,container:s,disablePortal:i=!1}=e,[o,a]=S.useState(null),l=Qe(S.isValidElement(r)?ys(r):null,t);if(Nr(()=>{i||a(Xm(s)||document.body)},[s,i]),Nr(()=>{if(o&&!i)return Bo(t,o),()=>{Bo(t,null)}},[t,o,i]),i){if(S.isValidElement(r)){const c={ref:l};return S.cloneElement(r,c)}return r}return o&&au.createPortal(r,o)});function ks(n){return parseInt(n,10)||0}const Gm={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Um(n){for(const e in n)return!1;return!0}function Km(n){return Um(n)||n.outerHeightStyle===0&&!n.overflowing}const Zm=S.forwardRef(function(e,t){const{onChange:r,maxRows:s,minRows:i=1,style:o,value:a,...l}=e,{current:c}=S.useRef(a!=null),u=S.useRef(null),h=Qe(t,u),d=S.useRef(null),f=S.useRef(null),p=S.useCallback(()=>{const w=u.current,x=f.current;if(!w||!x)return;const C=lr(w).getComputedStyle(w);if(C.width==="0px")return{outerHeightStyle:0,overflowing:!1};x.style.width=C.width,x.value=w.value||e.placeholder||"x",x.value.slice(-1)===`
`&&(x.value+=" ");const O=C.boxSizing,P=ks(C.paddingBottom)+ks(C.paddingTop),D=ks(C.borderBottomWidth)+ks(C.borderTopWidth),B=x.scrollHeight;x.value="x";const m=x.scrollHeight;let E=B;i&&(E=Math.max(Number(i)*m,E)),s&&(E=Math.min(Number(s)*m,E)),E=Math.max(E,m);const R=E+(O==="border-box"?P+D:0),I=Math.abs(E-B)<=1;return{outerHeightStyle:R,overflowing:I}},[s,i,e.placeholder]),g=S.useCallback(()=>{const w=u.current,x=p();if(!w||!x||Km(x))return;const v=x.outerHeightStyle;d.current!==v&&(d.current=v,w.style.height=`${v}px`),w.style.overflow=x.overflowing?"hidden":""},[p]),y=S.useRef(-1);Nr(()=>{const w=Mu(()=>g()),x=u==null?void 0:u.current;if(!x)return;const v=lr(x);v.addEventListener("resize",w);let C;return typeof ResizeObserver<"u"&&(C=new ResizeObserver(()=>{C.unobserve(x),cancelAnimationFrame(y.current),g(),y.current=requestAnimationFrame(()=>{C.observe(x)})}),C.observe(x)),()=>{w.clear(),cancelAnimationFrame(y.current),v.removeEventListener("resize",w),C&&C.disconnect()}},[p,g]),Nr(()=>{g()});const b=w=>{c||g(),r&&r(w)};return _.jsxs(S.Fragment,{children:[_.jsx("textarea",{value:a,onChange:b,ref:h,rows:i,style:o,...l}),_.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:{...Gm.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function Uo(n){return typeof n=="string"}function Hr({props:n,states:e,muiFormControl:t}){return e.reduce((r,s)=>(r[s]=n[s],t&&typeof n[s]>"u"&&(r[s]=t[s]),r),{})}const La=S.createContext(void 0);function xr(){return S.useContext(La)}function ec(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function mi(n,e=!1){return n&&(ec(n.value)&&n.value!==""||e&&ec(n.defaultValue)&&n.defaultValue!=="")}function Jm(n){return n.startAdornment}function Qm(n){return ye("MuiInputBase",n)}const wn=be("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var tc;const zi=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${U(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},Vi=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},ey=n=>{const{classes:e,color:t,disabled:r,error:s,endAdornment:i,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:f,type:p}=n,g={root:["root",`color${U(t)}`,r&&"disabled",s&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",d&&d!=="medium"&&`size${U(d)}`,u&&"multiline",f&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",i&&"inputAdornedEnd",h&&"readOnly"]};return ve(g,Qm,e)},Hi=V("div",{name:"MuiInputBase",slot:"Root",overridesResolver:zi})(Te(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${wn.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),qi=V("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Vi})(Te(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${wn.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${wn.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),rc=Kg({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),Ba=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:i,autoFocus:o,className:a,color:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:f,endAdornment:p,error:g,fullWidth:y=!1,id:b,inputComponent:w="input",inputProps:x={},inputRef:v,margin:C,maxRows:O,minRows:P,multiline:D=!1,name:B,onBlur:m,onChange:E,onClick:R,onFocus:I,onKeyDown:F,onKeyUp:M,placeholder:L,readOnly:$,renderSuffix:W,rows:N,size:ne,slotProps:ce={},slots:Be={},startAdornment:te,type:J="text",value:se,...Ee}=r,Pe=x.value!=null?x.value:se,{current:et}=S.useRef(Pe!=null),ge=S.useRef(),G=S.useCallback(Ce=>{},[]),de=Qe(ge,v,x.ref,G),[Q,Ne]=S.useState(!1),ee=xr(),Se=Hr({props:r,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Se.focused=ee?ee.focused:Q,S.useEffect(()=>{!ee&&d&&Q&&(Ne(!1),m&&m())},[ee,d,Q,m]);const pt=ee&&ee.onFilled,tt=ee&&ee.onEmpty,qe=S.useCallback(Ce=>{mi(Ce)?pt&&pt():tt&&tt()},[pt,tt]);Nr(()=>{et&&qe({value:Pe})},[Pe,qe,et]);const Ft=Ce=>{I&&I(Ce),x.onFocus&&x.onFocus(Ce),ee&&ee.onFocus?ee.onFocus(Ce):Ne(!0)},rt=Ce=>{m&&m(Ce),x.onBlur&&x.onBlur(Ce),ee&&ee.onBlur?ee.onBlur(Ce):Ne(!1)},ze=(Ce,...Kr)=>{if(!et){const In=Ce.target||ge.current;if(In==null)throw new Error(or(1));qe({value:In.value})}x.onChange&&x.onChange(Ce,...Kr),E&&E(Ce,...Kr)};S.useEffect(()=>{qe(ge.current)},[]);const H=Ce=>{ge.current&&Ce.currentTarget===Ce.target&&ge.current.focus(),R&&R(Ce)};let Xr=w,ot=x;D&&Xr==="input"&&(N?ot={type:void 0,minRows:N,maxRows:N,...ot}:ot={type:void 0,maxRows:O,minRows:P,...ot},Xr=Zm);const Yr=Ce=>{qe(Ce.animationName==="mui-auto-fill-cancel"?ge.current:{value:"x"})};S.useEffect(()=>{ee&&ee.setAdornedStart(!!te)},[ee,te]);const Rn={...r,color:Se.color||"primary",disabled:Se.disabled,endAdornment:p,error:Se.error,focused:Se.focused,formControl:ee,fullWidth:y,hiddenLabel:Se.hiddenLabel,multiline:D,size:Se.size,startAdornment:te,type:J},jn=ey(Rn),Gr=Be.root||c.Root||Hi,Ur=ce.root||u.root||{},_r=Be.input||c.Input||qi;return ot={...ot,...ce.input??u.input},_.jsxs(S.Fragment,{children:[!f&&typeof rc=="function"&&(tc||(tc=_.jsx(rc,{}))),_.jsxs(Gr,{...Ur,ref:t,onClick:H,...Ee,...!Uo(Gr)&&{ownerState:{...Rn,...Ur.ownerState}},className:Z(jn.root,Ur.className,a,$&&"MuiInputBase-readOnly"),children:[te,_.jsx(La.Provider,{value:null,children:_.jsx(_r,{"aria-invalid":Se.error,"aria-describedby":s,autoComplete:i,autoFocus:o,defaultValue:h,disabled:Se.disabled,id:b,onAnimationStart:Yr,name:B,placeholder:L,readOnly:$,required:Se.required,rows:N,value:Pe,onKeyDown:F,onKeyUp:M,type:J,...ot,...!Uo(_r)&&{as:Xr,ownerState:{...Rn,...ot.ownerState}},ref:de,className:Z(jn.input,ot.className,$&&"MuiInputBase-readOnly"),onBlur:rt,onChange:ze,onFocus:Ft})}),p,W?W({...Se,startAdornment:te}):null]})]})});function ty(n){return ye("MuiInput",n)}const Nn={...wn,...be("MuiInput",["root","underline","input"])};function ry(n){return ye("MuiOutlinedInput",n)}const Bt={...wn,...be("MuiOutlinedInput",["root","notchedOutline","input"])};function ny(n){return ye("MuiFilledInput",n)}const wr={...wn,...be("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},sy=Wi(_.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),iy={entering:{opacity:1},entered:{opacity:1}},oy=S.forwardRef(function(e,t){const r=ja(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:f,onExited:p,onExiting:g,style:y,timeout:b=s,TransitionComponent:w=Gt,...x}=e,v=S.useRef(null),C=Qe(v,ys(a),t),O=F=>M=>{if(F){const L=v.current;M===void 0?F(L):F(L,M)}},P=O(d),D=O((F,M)=>{Xu(F);const L=pi({style:y,timeout:b,easing:l},{mode:"enter"});F.style.webkitTransition=r.transitions.create("opacity",L),F.style.transition=r.transitions.create("opacity",L),u&&u(F,M)}),B=O(h),m=O(g),E=O(F=>{const M=pi({style:y,timeout:b,easing:l},{mode:"exit"});F.style.webkitTransition=r.transitions.create("opacity",M),F.style.transition=r.transitions.create("opacity",M),f&&f(F)}),R=O(p),I=F=>{i&&i(v.current,F)};return _.jsx(w,{appear:o,in:c,nodeRef:v,onEnter:D,onEntered:B,onEntering:P,onExit:E,onExited:R,onExiting:m,addEndListener:I,timeout:b,...x,children:(F,{ownerState:M,...L})=>S.cloneElement(a,{style:{opacity:0,visibility:F==="exited"&&!c?"hidden":void 0,...iy[F],...y,...a.props.style},ref:C,...L})})});function ay(n){return ye("MuiBackdrop",n)}be("MuiBackdrop",["root","invisible"]);const ly=n=>{const{classes:e,invisible:t}=n;return ve({root:["root",t&&"invisible"]},ay,e)},cy=V("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),uy=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiBackdrop"}),{children:s,className:i,component:o="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:d={},TransitionComponent:f,transitionDuration:p,...g}=r,y={...r,component:o,invisible:a},b=ly(y),w={transition:f,root:c.Root,...d},x={...u,...h},v={slots:w,slotProps:x},[C,O]=_t("root",{elementType:cy,externalForwardedProps:v,className:Z(b.root,i),ownerState:y}),[P,D]=_t("transition",{elementType:oy,externalForwardedProps:v,ownerState:y});return _.jsx(P,{in:l,timeout:p,...g,...D,children:_.jsx(C,{"aria-hidden":!0,...O,classes:b,ref:t,children:s})})});function hy(n){return ye("PrivateSwitchBase",n)}be("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const dy=n=>{const{classes:e,checked:t,disabled:r,edge:s}=n,i={root:["root",t&&"checked",r&&"disabled",s&&`edge${U(s)}`],input:["input"]};return ve(i,hy,e)},fy=V(Yu)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),py=V("input",{shouldForwardProp:Ot})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),gy=S.forwardRef(function(e,t){const{autoFocus:r,checked:s,checkedIcon:i,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:d,inputProps:f,inputRef:p,name:g,onBlur:y,onChange:b,onFocus:w,readOnly:x,required:v=!1,tabIndex:C,type:O,value:P,...D}=e,[B,m]=No({controlled:s,default:!!a,name:"SwitchBase",state:"checked"}),E=xr(),R=N=>{w&&w(N),E&&E.onFocus&&E.onFocus(N)},I=N=>{y&&y(N),E&&E.onBlur&&E.onBlur(N)},F=N=>{if(N.nativeEvent.defaultPrevented)return;const ne=N.target.checked;m(ne),b&&b(N,ne)};let M=l;E&&typeof M>"u"&&(M=E.disabled);const L=O==="checkbox"||O==="radio",$={...e,checked:B,disabled:M,disableFocusRipple:c,edge:u},W=dy($);return _.jsxs(fy,{component:"span",className:Z(W.root,o),centerRipple:!0,focusRipple:!c,disabled:M,tabIndex:null,role:void 0,onFocus:R,onBlur:I,ownerState:$,ref:t,...D,children:[_.jsx(py,{autoFocus:r,checked:s,defaultChecked:a,className:W.input,disabled:M,id:L?d:void 0,name:g,onChange:F,readOnly:x,ref:p,required:v,ownerState:$,tabIndex:C,type:O,...O==="checkbox"&&P===void 0?{}:{value:P},...f}),B?i:h]})}),my=Wi(_.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),yy=Wi(_.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),by=Wi(_.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function vy(n){return ye("MuiCheckbox",n)}const uo=be("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),xy=n=>{const{classes:e,indeterminate:t,color:r,size:s}=n,i={root:["root",t&&"indeterminate",`color${U(r)}`,`size${U(s)}`]},o=ve(i,vy,e);return{...e,...o}},Sy=V(gy,{shouldForwardProp:n=>Ot(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${U(t.size)}`],t.color!=="default"&&e[`color${U(t.color)}`]]}})(Te(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:$r(n.palette.action.active,n.palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(qt()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:$r(n.palette[e].main,n.palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(qt()).map(([e])=>({props:{color:e},style:{[`&.${uo.checked}, &.${uo.indeterminate}`]:{color:(n.vars||n).palette[e].main},[`&.${uo.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Cy=_.jsx(yy,{}),_y=_.jsx(my,{}),wy=_.jsx(by,{}),Ty=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiCheckbox"}),{checkedIcon:s=Cy,color:i="primary",icon:o=_y,indeterminate:a=!1,indeterminateIcon:l=wy,inputProps:c,size:u="medium",disableRipple:h=!1,className:d,...f}=r,p=a?l:o,g=a?l:s,y={...r,disableRipple:h,color:i,indeterminate:a,size:u},b=xy(y);return _.jsx(Sy,{type:"checkbox",inputProps:{"data-indeterminate":a,...c},icon:S.cloneElement(p,{fontSize:p.props.fontSize??u}),checkedIcon:S.cloneElement(g,{fontSize:g.props.fontSize??u}),ownerState:y,ref:t,className:Z(b.root,d),disableRipple:h,...f,classes:b})});function ky(n){const e=jt(n);return e.body===n?lr(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Un(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function nc(n){return parseInt(lr(n).getComputedStyle(n).paddingRight,10)||0}function Oy(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function sc(n,e,t,r,s){const i=[e,t,...r];[].forEach.call(n.children,o=>{const a=!i.includes(o),l=!Oy(o);a&&l&&Un(o,s)})}function ho(n,e){let t=-1;return n.some((r,s)=>e(r)?(t=s,!0):!1),t}function Ey(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(ky(r)){const o=Ru(lr(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${nc(r)+o}px`;const a=jt(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${nc(l)+o}px`})}let i;if(r.parentNode instanceof DocumentFragment)i=jt(r).body;else{const o=r.parentElement,a=lr(r);i=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{t.forEach(({value:i,el:o,property:a})=>{i?o.style.setProperty(a,i):o.style.removeProperty(a)})}}function Py(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class My{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Un(e.modalRef,!1);const s=Py(t);sc(t,e.mount,e.modalRef,s,!0);const i=ho(this.containers,o=>o.container===t);return i!==-1?(this.containers[i].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),r)}mount(e,t){const r=ho(this.containers,i=>i.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=Ey(s,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=ho(this.containers,o=>o.modals.includes(e)),i=this.containers[s];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(r,1),i.modals.length===0)i.restore&&i.restore(),e.modalRef&&Un(e.modalRef,t),sc(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(s,1);else{const o=i.modals[i.modals.length-1];o.modalRef&&Un(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const Dy=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ay(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Ry(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function jy(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Ry(n))}function Iy(n){const e=[],t=[];return Array.from(n.querySelectorAll(Dy)).forEach((r,s)=>{const i=Ay(r);i===-1||!jy(r)||(i===0?e.push(r):t.push({documentOrder:s,tabIndex:i,node:r}))}),t.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function Fy(){return!0}function Ly(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:i=Iy,isEnabled:o=Fy,open:a}=n,l=S.useRef(!1),c=S.useRef(null),u=S.useRef(null),h=S.useRef(null),d=S.useRef(null),f=S.useRef(!1),p=S.useRef(null),g=Qe(ys(e),p),y=S.useRef(null);S.useEffect(()=>{!a||!p.current||(f.current=!t)},[t,a]),S.useEffect(()=>{if(!a||!p.current)return;const x=jt(p.current);return p.current.contains(x.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{s||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),S.useEffect(()=>{if(!a||!p.current)return;const x=jt(p.current),v=P=>{y.current=P,!(r||!o()||P.key!=="Tab")&&x.activeElement===p.current&&P.shiftKey&&(l.current=!0,u.current&&u.current.focus())},C=()=>{var B,m;const P=p.current;if(P===null)return;if(!x.hasFocus()||!o()||l.current){l.current=!1;return}if(P.contains(x.activeElement)||r&&x.activeElement!==c.current&&x.activeElement!==u.current)return;if(x.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!f.current)return;let D=[];if((x.activeElement===c.current||x.activeElement===u.current)&&(D=i(p.current)),D.length>0){const E=!!((B=y.current)!=null&&B.shiftKey&&((m=y.current)==null?void 0:m.key)==="Tab"),R=D[0],I=D[D.length-1];typeof R!="string"&&typeof I!="string"&&(E?I.focus():R.focus())}else P.focus()};x.addEventListener("focusin",C),x.addEventListener("keydown",v,!0);const O=setInterval(()=>{x.activeElement&&x.activeElement.tagName==="BODY"&&C()},50);return()=>{clearInterval(O),x.removeEventListener("focusin",C),x.removeEventListener("keydown",v,!0)}},[t,r,s,o,a,i]);const b=x=>{h.current===null&&(h.current=x.relatedTarget),f.current=!0,d.current=x.target;const v=e.props.onFocus;v&&v(x)},w=x=>{h.current===null&&(h.current=x.relatedTarget),f.current=!0};return _.jsxs(S.Fragment,{children:[_.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:c,"data-testid":"sentinelStart"}),S.cloneElement(e,{ref:g,onFocus:b}),_.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:u,"data-testid":"sentinelEnd"})]})}function By(n){return typeof n=="function"?n():n}function Ny(n){return n?n.props.hasOwnProperty("in"):!1}const ic=()=>{},Os=new My;function $y(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:i,onTransitionExited:o,children:a,onClose:l,open:c,rootRef:u}=n,h=S.useRef({}),d=S.useRef(null),f=S.useRef(null),p=Qe(f,u),[g,y]=S.useState(!c),b=Ny(a);let w=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(w=!1);const x=()=>jt(d.current),v=()=>(h.current.modalRef=f.current,h.current.mount=d.current,h.current),C=()=>{Os.mount(v(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},O=yn(()=>{const M=By(e)||x().body;Os.add(v(),M),f.current&&C()}),P=()=>Os.isTopModal(v()),D=yn(M=>{d.current=M,M&&(c&&P()?C():f.current&&Un(f.current,w))}),B=S.useCallback(()=>{Os.remove(v(),w)},[w]);S.useEffect(()=>()=>{B()},[B]),S.useEffect(()=>{c?O():(!b||!s)&&B()},[c,B,b,s,O]);const m=M=>L=>{var $;($=M.onKeyDown)==null||$.call(M,L),!(L.key!=="Escape"||L.which===229||!P())&&(t||(L.stopPropagation(),l&&l(L,"escapeKeyDown")))},E=M=>L=>{var $;($=M.onClick)==null||$.call(M,L),L.target===L.currentTarget&&l&&l(L,"backdropClick")};return{getRootProps:(M={})=>{const L=Iu(n);delete L.onTransitionEnter,delete L.onTransitionExited;const $={...L,...M};return{role:"presentation",...$,onKeyDown:m($),ref:p}},getBackdropProps:(M={})=>{const L=M;return{"aria-hidden":!0,...L,onClick:E(L),open:c}},getTransitionProps:()=>{const M=()=>{y(!1),i&&i()},L=()=>{y(!0),o&&o(),s&&B()};return{onEnter:Fl(M,(a==null?void 0:a.props.onEnter)??ic),onExited:Fl(L,(a==null?void 0:a.props.onExited)??ic)}},rootRef:p,portalRef:D,isTopModal:P,exited:g,hasTransition:b}}function Wy(n){return ye("MuiModal",n)}be("MuiModal",["root","hidden","backdrop"]);const zy=n=>{const{open:e,exited:t,classes:r}=n;return ve({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},Wy,r)},Vy=V("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(Te(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Hy=V(uy,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),qy=S.forwardRef(function(e,t){const r=Oe({name:"MuiModal",props:e}),{BackdropComponent:s=Hy,BackdropProps:i,classes:o,className:a,closeAfterTransition:l=!1,children:c,container:u,component:h,components:d={},componentsProps:f={},disableAutoFocus:p=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:y=!1,disablePortal:b=!1,disableRestoreFocus:w=!1,disableScrollLock:x=!1,hideBackdrop:v=!1,keepMounted:C=!1,onBackdropClick:O,onClose:P,onTransitionEnter:D,onTransitionExited:B,open:m,slotProps:E={},slots:R={},theme:I,...F}=r,M={...r,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:g,disableEscapeKeyDown:y,disablePortal:b,disableRestoreFocus:w,disableScrollLock:x,hideBackdrop:v,keepMounted:C},{getRootProps:L,getBackdropProps:$,getTransitionProps:W,portalRef:N,isTopModal:ne,exited:ce,hasTransition:Be}=$y({...M,rootRef:t}),te={...M,exited:ce},J=zy(te),se={};if(c.props.tabIndex===void 0&&(se.tabIndex="-1"),Be){const{onEnter:Q,onExited:Ne}=W();se.onEnter=Q,se.onExited=Ne}const Ee={...F,slots:{root:d.Root,backdrop:d.Backdrop,...R},slotProps:{...f,...E}},[Pe,et]=_t("root",{elementType:Vy,externalForwardedProps:Ee,getSlotProps:L,additionalProps:{ref:t,as:h},ownerState:te,className:Z(a,J==null?void 0:J.root,!te.open&&te.exited&&(J==null?void 0:J.hidden))}),[ge,G]=_t("backdrop",{elementType:s,externalForwardedProps:Ee,additionalProps:i,getSlotProps:Q=>$({...Q,onClick:Ne=>{O&&O(Ne),Q!=null&&Q.onClick&&Q.onClick(Ne)}}),className:Z(i==null?void 0:i.className,J==null?void 0:J.backdrop),ownerState:te}),de=Qe(i==null?void 0:i.ref,G.ref);return!C&&!m&&(!Be||ce)?null:_.jsx(Ym,{ref:N,container:u,disablePortal:b,children:_.jsxs(Pe,{...et,children:[!v&&s?_.jsx(ge,{...G,ref:de}):null,_.jsx(Ly,{disableEnforceFocus:g,disableAutoFocus:p,disableRestoreFocus:w,isEnabled:ne,open:m,children:S.cloneElement(c,se)})]})})}),Xy=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:s,size:i,hiddenLabel:o,multiline:a}=n,l={root:["root",!t&&"underline",r&&"adornedStart",s&&"adornedEnd",i==="small"&&`size${U(i)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},c=ve(l,ny,e);return{...e,...c}},Yy=V(Hi,{shouldForwardProp:n=>Ot(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...zi(n,e),!t.disableUnderline&&e.underline]}})(Te(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${wr.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${wr.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${wr.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${wr.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${wr.disabled}, .${wr.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${wr.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(qt()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Gy=V(qi,{name:"MuiFilledInput",slot:"Input",overridesResolver:Vi})(Te(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Na=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:i={},componentsProps:o,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:h,slots:d={},type:f="text",...p}=r,g={...r,disableUnderline:s,fullWidth:a,inputComponent:c,multiline:u,type:f},y=Xy(r),b={root:{ownerState:g},input:{ownerState:g}},w=h??o?Ze(b,h??o):b,x=d.root??i.Root??Yy,v=d.input??i.Input??Gy;return _.jsx(Ba,{slots:{root:x,input:v},slotProps:w,fullWidth:a,inputComponent:c,multiline:u,ref:t,type:f,...p,classes:y})});Na.muiName="Input";function Uy(n){return ye("MuiFormControl",n)}be("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Ky=n=>{const{classes:e,margin:t,fullWidth:r}=n,s={root:["root",t!=="none"&&`margin${U(t)}`,r&&"fullWidth"]};return ve(s,Uy,e)},Zy=V("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${U(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Jy=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiFormControl"}),{children:s,className:i,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:f="none",required:p=!1,size:g="medium",variant:y="outlined",...b}=r,w={...r,color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:f,required:p,size:g,variant:y},x=Ky(w),[v,C]=S.useState(()=>{let M=!1;return s&&S.Children.forEach(s,L=>{if(!ao(L,["Input","Select"]))return;const $=ao(L,["Select"])?L.props.input:L;$&&Jm($.props)&&(M=!0)}),M}),[O,P]=S.useState(()=>{let M=!1;return s&&S.Children.forEach(s,L=>{ao(L,["Input","Select"])&&(mi(L.props,!0)||mi(L.props.inputProps,!0))&&(M=!0)}),M}),[D,B]=S.useState(!1);l&&D&&B(!1);const m=u!==void 0&&!l?u:D;let E;S.useRef(!1);const R=S.useCallback(()=>{P(!0)},[]),I=S.useCallback(()=>{P(!1)},[]),F=S.useMemo(()=>({adornedStart:v,setAdornedStart:C,color:o,disabled:l,error:c,filled:O,focused:m,fullWidth:h,hiddenLabel:d,size:g,onBlur:()=>{B(!1)},onFocus:()=>{B(!0)},onEmpty:I,onFilled:R,registerEffect:E,required:p,variant:y}),[v,o,l,c,O,m,h,d,E,I,R,p,g,y]);return _.jsx(La.Provider,{value:F,children:_.jsx(Zy,{as:a,ownerState:w,className:Z(x.root,i),ref:t,...b,children:s})})});function Qy(n){return ye("MuiFormControlLabel",n)}const Xn=be("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),e0=n=>{const{classes:e,disabled:t,labelPlacement:r,error:s,required:i}=n,o={root:["root",t&&"disabled",`labelPlacement${U(r)}`,s&&"error",i&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return ve(o,Qy,e)},t0=V("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Xn.label}`]:e.label},e.root,e[`labelPlacement${U(t.labelPlacement)}`]]}})(Te(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Xn.disabled}`]:{cursor:"default"},[`& .${Xn.label}`]:{[`&.${Xn.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),r0=V("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(Te(({theme:n})=>({[`&.${Xn.error}`]:{color:(n.vars||n).palette.error.main}}))),n0=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiFormControlLabel"}),{checked:s,className:i,componentsProps:o={},control:a,disabled:l,disableTypography:c,inputRef:u,label:h,labelPlacement:d="end",name:f,onChange:p,required:g,slots:y={},slotProps:b={},value:w,...x}=r,v=xr(),C=l??a.props.disabled??(v==null?void 0:v.disabled),O=g??a.props.required,P={disabled:C,required:O};["checked","name","onChange","value","inputRef"].forEach(M=>{typeof a.props[M]>"u"&&typeof r[M]<"u"&&(P[M]=r[M])});const D=Hr({props:r,muiFormControl:v,states:["error"]}),B={...r,disabled:C,labelPlacement:d,required:O,error:D.error},m=e0(B),E={slots:y,slotProps:{...o,...b}},[R,I]=_t("typography",{elementType:Go,externalForwardedProps:E,ownerState:B});let F=h;return F!=null&&F.type!==Go&&!c&&(F=_.jsx(R,{component:"span",...I,className:Z(m.label,I==null?void 0:I.className),children:F})),_.jsxs(t0,{className:Z(m.root,i),ownerState:B,ref:t,...x,children:[S.cloneElement(a,P),O?_.jsxs("div",{children:[F,_.jsxs(r0,{ownerState:B,"aria-hidden":!0,className:m.asterisk,children:["","*"]})]}):F]})});function s0(n){return ye("MuiFormHelperText",n)}const oc=be("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var ac;const i0=n=>{const{classes:e,contained:t,size:r,disabled:s,error:i,filled:o,focused:a,required:l}=n,c={root:["root",s&&"disabled",i&&"error",r&&`size${U(r)}`,t&&"contained",a&&"focused",o&&"filled",l&&"required"]};return ve(c,s0,e)},o0=V("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${U(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(Te(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${oc.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${oc.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),a0=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiFormHelperText"}),{children:s,className:i,component:o="p",disabled:a,error:l,filled:c,focused:u,margin:h,required:d,variant:f,...p}=r,g=xr(),y=Hr({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),b={...r,component:o,contained:y.variant==="filled"||y.variant==="outlined",variant:y.variant,size:y.size,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required};delete b.ownerState;const w=i0(b);return _.jsx(o0,{as:o,className:Z(w.root,i),ref:t,...p,ownerState:b,children:s===" "?ac||(ac=_.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):s})});function l0(n){return ye("MuiFormLabel",n)}const Kn=be("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),c0=n=>{const{classes:e,color:t,focused:r,disabled:s,error:i,filled:o,required:a}=n,l={root:["root",`color${U(t)}`,s&&"disabled",i&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",i&&"error"]};return ve(l,l0,e)},u0=V("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(Te(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(qt()).map(([e])=>({props:{color:e},style:{[`&.${Kn.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${Kn.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${Kn.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),h0=V("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(Te(({theme:n})=>({[`&.${Kn.error}`]:{color:(n.vars||n).palette.error.main}}))),d0=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiFormLabel"}),{children:s,className:i,color:o,component:a="label",disabled:l,error:c,filled:u,focused:h,required:d,...f}=r,p=xr(),g=Hr({props:r,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),y={...r,color:g.color||"primary",component:a,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},b=c0(y);return _.jsxs(u0,{as:a,ownerState:y,className:Z(b.root,i),ref:t,...f,children:[s,g.required&&_.jsxs(h0,{ownerState:y,"aria-hidden":!0,className:b.asterisk,children:["","*"]})]})});function Ko(n){return`scale(${n}, ${n**2})`}const f0={entering:{opacity:1,transform:Ko(1)},entered:{opacity:1,transform:"none"}},fo=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Zo=S.forwardRef(function(e,t){const{addEndListener:r,appear:s=!0,children:i,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:f,style:p,timeout:g="auto",TransitionComponent:y=Gt,...b}=e,w=Au(),x=S.useRef(),v=ja(),C=S.useRef(null),O=Qe(C,ys(i),t),P=M=>L=>{if(M){const $=C.current;L===void 0?M($):M($,L)}},D=P(u),B=P((M,L)=>{Xu(M);const{duration:$,delay:W,easing:N}=pi({style:p,timeout:g,easing:o},{mode:"enter"});let ne;g==="auto"?(ne=v.transitions.getAutoHeightDuration(M.clientHeight),x.current=ne):ne=$,M.style.transition=[v.transitions.create("opacity",{duration:ne,delay:W}),v.transitions.create("transform",{duration:fo?ne:ne*.666,delay:W,easing:N})].join(","),l&&l(M,L)}),m=P(c),E=P(f),R=P(M=>{const{duration:L,delay:$,easing:W}=pi({style:p,timeout:g,easing:o},{mode:"exit"});let N;g==="auto"?(N=v.transitions.getAutoHeightDuration(M.clientHeight),x.current=N):N=L,M.style.transition=[v.transitions.create("opacity",{duration:N,delay:$}),v.transitions.create("transform",{duration:fo?N:N*.666,delay:fo?$:$||N*.333,easing:W})].join(","),M.style.opacity=0,M.style.transform=Ko(.75),h&&h(M)}),I=P(d),F=M=>{g==="auto"&&w.start(x.current||0,M),r&&r(C.current,M)};return _.jsx(y,{appear:s,in:a,nodeRef:C,onEnter:B,onEntered:m,onEntering:D,onExit:R,onExited:I,onExiting:E,addEndListener:F,timeout:g==="auto"?null:g,...b,children:(M,{ownerState:L,...$})=>S.cloneElement(i,{style:{opacity:0,transform:Ko(.75),visibility:M==="exited"&&!a?"hidden":void 0,...f0[M],...p,...i.props.style},ref:O,...$})})});Zo&&(Zo.muiSupportAuto=!0);const p0=n=>{const{classes:e,disableUnderline:t}=n,s=ve({root:["root",!t&&"underline"],input:["input"]},ty,e);return{...e,...s}},g0=V(Hi,{shouldForwardProp:n=>Ot(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...zi(n,e),!t.disableUnderline&&e.underline]}})(Te(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Nn.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Nn.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Nn.disabled}, .${Nn.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${Nn.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(qt()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),m0=V(qi,{name:"MuiInput",slot:"Input",overridesResolver:Vi})({}),$a=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:i={},componentsProps:o,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:h={},type:d="text",...f}=r,p=p0(r),y={root:{ownerState:{disableUnderline:s}}},b=u??o?Ze(u??o,y):y,w=h.root??i.Root??g0,x=h.input??i.Input??m0;return _.jsx(Ba,{slots:{root:w,input:x},slotProps:b,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:d,...f,classes:p})});$a.muiName="Input";function y0(n){return ye("MuiInputLabel",n)}be("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const b0=n=>{const{classes:e,formControl:t,size:r,shrink:s,disableAnimation:i,variant:o,required:a}=n,l={root:["root",t&&"formControl",!i&&"animated",s&&"shrink",r&&r!=="normal"&&`size${U(r)}`,o],asterisk:[a&&"asterisk"]},c=ve(l,y0,e);return{...e,...c}},v0=V(d0,{shouldForwardProp:n=>Ot(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Kn.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(Te(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),x0=S.forwardRef(function(e,t){const r=Oe({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:i,shrink:o,variant:a,className:l,...c}=r,u=xr();let h=o;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const d=Hr({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),f={...r,disableAnimation:s,formControl:u,shrink:h,size:d.size,variant:d.variant,required:d.required,focused:d.focused},p=b0(f);return _.jsx(v0,{"data-shrink":h,ref:t,className:Z(p.root,l),...c,ownerState:f,classes:p})}),S0=S.createContext({});function C0(n){return ye("MuiList",n)}be("MuiList",["root","padding","dense","subheader"]);const _0=n=>{const{classes:e,disablePadding:t,dense:r,subheader:s}=n;return ve({root:["root",!t&&"padding",r&&"dense",s&&"subheader"]},C0,e)},w0=V("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),T0=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiList"}),{children:s,className:i,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,h=S.useMemo(()=>({dense:a}),[a]),d={...r,component:o,dense:a,disablePadding:l},f=_0(d);return _.jsx(S0.Provider,{value:h,children:_.jsxs(w0,{as:o,className:Z(f.root,i),ref:t,ownerState:d,...u,children:[c,s]})})});function po(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function lc(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function Gu(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function $n(n,e,t,r,s,i){let o=!1,a=s(n,e,e?t:!1);for(;a;){if(a===n.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Gu(a,i)||l)a=s(n,a,t);else return a.focus(),!0}return!1}const k0=S.forwardRef(function(e,t){const{actions:r,autoFocus:s=!1,autoFocusItem:i=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu",...d}=e,f=S.useRef(null),p=S.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Nr(()=>{s&&f.current.focus()},[s]),S.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(x,{direction:v})=>{const C=!f.current.style.width;if(x.clientHeight<f.current.clientHeight&&C){const O=`${Ru(lr(x))}px`;f.current.style[v==="rtl"?"paddingLeft":"paddingRight"]=O,f.current.style.width=`calc(100% + ${O})`}return f.current}}),[]);const g=x=>{const v=f.current,C=x.key;if(x.ctrlKey||x.metaKey||x.altKey){u&&u(x);return}const P=jt(v).activeElement;if(C==="ArrowDown")x.preventDefault(),$n(v,P,c,l,po);else if(C==="ArrowUp")x.preventDefault(),$n(v,P,c,l,lc);else if(C==="Home")x.preventDefault(),$n(v,null,c,l,po);else if(C==="End")x.preventDefault(),$n(v,null,c,l,lc);else if(C.length===1){const D=p.current,B=C.toLowerCase(),m=performance.now();D.keys.length>0&&(m-D.lastTime>500?(D.keys=[],D.repeating=!0,D.previousKeyMatched=!0):D.repeating&&B!==D.keys[0]&&(D.repeating=!1)),D.lastTime=m,D.keys.push(B);const E=P&&!D.repeating&&Gu(P,D);D.previousKeyMatched&&(E||$n(v,P,!1,l,po,D))?x.preventDefault():D.previousKeyMatched=!1}u&&u(x)},y=Qe(f,t);let b=-1;S.Children.forEach(o,(x,v)=>{if(!S.isValidElement(x)){b===v&&(b+=1,b>=o.length&&(b=-1));return}x.props.disabled||(h==="selectedMenu"&&x.props.selected||b===-1)&&(b=v),b===v&&(x.props.disabled||x.props.muiSkipListHighlight||x.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))});const w=S.Children.map(o,(x,v)=>{if(v===b){const C={};return i&&(C.autoFocus=!0),x.props.tabIndex===void 0&&h==="selectedMenu"&&(C.tabIndex=0),S.cloneElement(x,C)}return x});return _.jsx(T0,{role:"menu",ref:y,className:a,onKeyDown:g,tabIndex:s?0:-1,...d,children:w})});function O0(n){return ye("MuiPopover",n)}be("MuiPopover",["root","paper"]);function cc(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function uc(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function hc(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function go(n){return typeof n=="function"?n():n}const E0=n=>{const{classes:e}=n;return ve({root:["root"],paper:["paper"]},O0,e)},P0=V(qy,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Uu=V(hm,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),M0=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiPopover"}),{action:s,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:d=8,marginThreshold:f=16,open:p,PaperProps:g={},slots:y={},slotProps:b={},transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:x=Zo,transitionDuration:v="auto",TransitionProps:{onEntering:C,...O}={},disableScrollLock:P=!1,...D}=r,B=(b==null?void 0:b.paper)??g,m=S.useRef(),E={...r,anchorOrigin:o,anchorReference:l,elevation:d,marginThreshold:f,externalPaperSlotProps:B,transformOrigin:w,TransitionComponent:x,transitionDuration:v,TransitionProps:O},R=E0(E),I=S.useCallback(()=>{if(l==="anchorPosition")return a;const G=go(i),Q=(G&&G.nodeType===1?G:jt(m.current).body).getBoundingClientRect();return{top:Q.top+cc(Q,o.vertical),left:Q.left+uc(Q,o.horizontal)}},[i,o.horizontal,o.vertical,a,l]),F=S.useCallback(G=>({vertical:cc(G,w.vertical),horizontal:uc(G,w.horizontal)}),[w.horizontal,w.vertical]),M=S.useCallback(G=>{const de={width:G.offsetWidth,height:G.offsetHeight},Q=F(de);if(l==="none")return{top:null,left:null,transformOrigin:hc(Q)};const Ne=I();let ee=Ne.top-Q.vertical,Se=Ne.left-Q.horizontal;const pt=ee+de.height,tt=Se+de.width,qe=lr(go(i)),Ft=qe.innerHeight-f,rt=qe.innerWidth-f;if(f!==null&&ee<f){const ze=ee-f;ee-=ze,Q.vertical+=ze}else if(f!==null&&pt>Ft){const ze=pt-Ft;ee-=ze,Q.vertical+=ze}if(f!==null&&Se<f){const ze=Se-f;Se-=ze,Q.horizontal+=ze}else if(tt>rt){const ze=tt-rt;Se-=ze,Q.horizontal+=ze}return{top:`${Math.round(ee)}px`,left:`${Math.round(Se)}px`,transformOrigin:hc(Q)}},[i,l,I,F,f]),[L,$]=S.useState(p),W=S.useCallback(()=>{const G=m.current;if(!G)return;const de=M(G);de.top!==null&&G.style.setProperty("top",de.top),de.left!==null&&(G.style.left=de.left),G.style.transformOrigin=de.transformOrigin,$(!0)},[M]);S.useEffect(()=>(P&&window.addEventListener("scroll",W),()=>window.removeEventListener("scroll",W)),[i,P,W]);const N=(G,de)=>{C&&C(G,de),W()},ne=()=>{$(!1)};S.useEffect(()=>{p&&W()}),S.useImperativeHandle(s,()=>p?{updatePosition:()=>{W()}}:null,[p,W]),S.useEffect(()=>{if(!p)return;const G=Mu(()=>{W()}),de=lr(i);return de.addEventListener("resize",G),()=>{G.clear(),de.removeEventListener("resize",G)}},[i,p,W]);let ce=v;v==="auto"&&!x.muiSupportAuto&&(ce=void 0);const Be=h||(i?jt(go(i)).body:void 0),te={slots:y,slotProps:{...b,paper:B}},[J,se]=_t("paper",{elementType:Uu,externalForwardedProps:te,additionalProps:{elevation:d,className:Z(R.paper,B==null?void 0:B.className),style:L?B.style:{...B.style,opacity:0}},ownerState:E}),[Ee,{slotProps:Pe,...et}]=_t("root",{elementType:P0,externalForwardedProps:te,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Be,open:p},ownerState:E,className:Z(R.root,u)}),ge=Qe(m,se.ref);return _.jsx(Ee,{...et,...!Uo(Ee)&&{slotProps:Pe,disableScrollLock:P},...D,ref:t,children:_.jsx(x,{appear:!0,in:p,onEntering:N,onExited:ne,timeout:ce,...O,children:_.jsx(J,{...se,ref:ge,children:c})})})});function D0(n){return ye("MuiMenu",n)}be("MuiMenu",["root","paper","list"]);const A0={vertical:"top",horizontal:"right"},R0={vertical:"top",horizontal:"left"},j0=n=>{const{classes:e}=n;return ve({root:["root"],paper:["paper"],list:["list"]},D0,e)},I0=V(M0,{shouldForwardProp:n=>Ot(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),F0=V(Uu,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),L0=V(k0,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),B0=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:i,className:o,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:h={},PopoverClasses:d,transitionDuration:f="auto",TransitionProps:{onEntering:p,...g}={},variant:y="selectedMenu",slots:b={},slotProps:w={},...x}=r,v=lg(),C={...r,autoFocus:s,disableAutoFocusItem:a,MenuListProps:l,onEntering:p,PaperProps:h,transitionDuration:f,TransitionProps:g,variant:y},O=j0(C),P=s&&!a&&u,D=S.useRef(null),B=(L,$)=>{D.current&&D.current.adjustStyleForScrollbar(L,{direction:v?"rtl":"ltr"}),p&&p(L,$)},m=L=>{L.key==="Tab"&&(L.preventDefault(),c&&c(L,"tabKeyDown"))};let E=-1;S.Children.map(i,(L,$)=>{S.isValidElement(L)&&(L.props.disabled||(y==="selectedMenu"&&L.props.selected||E===-1)&&(E=$))});const R=b.paper??F0,I=w.paper??h,F=zl({elementType:b.root,externalSlotProps:w.root,ownerState:C,className:[O.root,o]}),M=zl({elementType:R,externalSlotProps:I,ownerState:C,className:O.paper});return _.jsx(I0,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:v?"right":"left"},transformOrigin:v?A0:R0,slots:{paper:R,root:b.root},slotProps:{root:F,paper:M},open:u,ref:t,transitionDuration:f,TransitionProps:{onEntering:B,...g},ownerState:C,...x,classes:d,children:_.jsx(L0,{onKeyDown:m,actions:D,autoFocus:s&&(E===-1||a),autoFocusItem:P,variant:y,...l,className:Z(O.list,l.className),children:i})})});function N0(n){return ye("MuiNativeSelect",n)}const Wa=be("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),$0=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:i,error:o}=n,a={select:["select",t,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${U(t)}`,i&&"iconOpen",r&&"disabled"]};return ve(a,N0,e)},Ku=V("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${Wa.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),W0=V(Ku,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ot,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${Wa.multiple}`]:e.multiple}]}})({}),Zu=V("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${Wa.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),z0=V(Zu,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${U(t.variant)}`],t.open&&e.iconOpen]}})({}),V0=S.forwardRef(function(e,t){const{className:r,disabled:s,error:i,IconComponent:o,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:s,variant:l,error:i},h=$0(u);return _.jsxs(S.Fragment,{children:[_.jsx(W0,{ownerState:u,className:Z(h.select,r),disabled:s,ref:a||t,...c}),e.multiple?null:_.jsx(z0,{as:o,ownerState:u,className:h.icon})]})});var dc;const H0=V("fieldset",{shouldForwardProp:Ot})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),q0=V("legend",{shouldForwardProp:Ot})(Te(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function X0(n){const{children:e,classes:t,className:r,label:s,notched:i,...o}=n,a=s!=null&&s!=="",l={...n,notched:i,withLabel:a};return _.jsx(H0,{"aria-hidden":!0,className:r,ownerState:l,...o,children:_.jsx(q0,{ownerState:l,children:a?_.jsx("span",{children:s}):dc||(dc=_.jsx("span",{className:"notranslate","aria-hidden":!0,children:""}))})})}const Y0=n=>{const{classes:e}=n,r=ve({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},ry,e);return{...e,...r}},G0=V(Hi,{shouldForwardProp:n=>Ot(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:zi})(Te(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Bt.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Bt.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Bt.focused} .${Bt.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(qt()).map(([t])=>({props:{color:t},style:{[`&.${Bt.focused} .${Bt.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Bt.error} .${Bt.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Bt.disabled} .${Bt.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),U0=V(X0,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(Te(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),K0=V(qi,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Vi})(Te(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),za=S.forwardRef(function(e,t){var r;const s=Oe({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:h={},type:d="text",...f}=s,p=Y0(s),g=xr(),y=Hr({props:s,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),b={...s,color:y.color||"primary",disabled:y.disabled,error:y.error,focused:y.focused,formControl:g,fullWidth:o,hiddenLabel:y.hiddenLabel,multiline:c,size:y.size,type:d},w=h.root??i.Root??G0,x=h.input??i.Input??K0;return _.jsx(Ba,{slots:{root:w,input:x},renderSuffix:v=>_.jsx(U0,{ownerState:b,className:p.notchedOutline,label:l!=null&&l!==""&&y.required?r||(r=_.jsxs(S.Fragment,{children:[l,"","*"]})):l,notched:typeof u<"u"?u:!!(v.startAdornment||v.filled||v.focused)}),fullWidth:o,inputComponent:a,multiline:c,ref:t,type:d,...f,classes:{...p,notchedOutline:null}})});za.muiName="Input";function Ju(n){return ye("MuiSelect",n)}const Wn=be("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var fc;const Z0=V(Ku,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Wn.select}`]:e.select},{[`&.${Wn.select}`]:e[t.variant]},{[`&.${Wn.error}`]:e.error},{[`&.${Wn.multiple}`]:e.multiple}]}})({[`&.${Wn.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),J0=V(Zu,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${U(t.variant)}`],t.open&&e.iconOpen]}})({}),Q0=V("input",{shouldForwardProp:n=>Vu(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function pc(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function eb(n){return n==null||typeof n=="string"&&!n.trim()}const tb=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:i,error:o}=n,a={select:["select",t,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${U(t)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ve(a,Ju,e)},rb=S.forwardRef(function(e,t){var gl;const{"aria-describedby":r,"aria-label":s,autoFocus:i,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:d,error:f=!1,IconComponent:p,inputRef:g,labelId:y,MenuProps:b={},multiple:w,name:x,onBlur:v,onChange:C,onClose:O,onFocus:P,onOpen:D,open:B,readOnly:m,renderValue:E,required:R,SelectDisplayProps:I={},tabIndex:F,type:M,value:L,variant:$="standard",...W}=e,[N,ne]=No({controlled:L,default:u,name:"Select"}),[ce,Be]=No({controlled:B,default:c,name:"Select"}),te=S.useRef(null),J=S.useRef(null),[se,Ee]=S.useState(null),{current:Pe}=S.useRef(B!=null),[et,ge]=S.useState(),G=Qe(t,g),de=S.useCallback(X=>{J.current=X,X&&Ee(X)},[]),Q=se==null?void 0:se.parentNode;S.useImperativeHandle(G,()=>({focus:()=>{J.current.focus()},node:te.current,value:N}),[N]),S.useEffect(()=>{c&&ce&&se&&!Pe&&(ge(o?null:Q.clientWidth),J.current.focus())},[se,o]),S.useEffect(()=>{i&&J.current.focus()},[i]),S.useEffect(()=>{if(!y)return;const X=jt(J.current).getElementById(y);if(X){const xe=()=>{getSelection().isCollapsed&&J.current.focus()};return X.addEventListener("click",xe),()=>{X.removeEventListener("click",xe)}}},[y]);const Ne=(X,xe)=>{X?D&&D(xe):O&&O(xe),Pe||(ge(o?null:Q.clientWidth),Be(X))},ee=X=>{X.button===0&&(X.preventDefault(),J.current.focus(),Ne(!0,X))},Se=X=>{Ne(!1,X)},pt=S.Children.toArray(a),tt=X=>{const xe=pt.find(Xe=>Xe.props.value===X.target.value);xe!==void 0&&(ne(xe.props.value),C&&C(X,xe))},qe=X=>xe=>{let Xe;if(xe.currentTarget.hasAttribute("tabindex")){if(w){Xe=Array.isArray(N)?N.slice():[];const Zr=N.indexOf(X.props.value);Zr===-1?Xe.push(X.props.value):Xe.splice(Zr,1)}else Xe=X.props.value;if(X.props.onClick&&X.props.onClick(xe),N!==Xe&&(ne(Xe),C)){const Zr=xe.nativeEvent||xe,ml=new Zr.constructor(Zr.type,Zr);Object.defineProperty(ml,"target",{writable:!0,value:{value:Xe,name:x}}),C(ml,X)}w||Ne(!1,xe)}},Ft=X=>{m||[" ","ArrowUp","ArrowDown","Enter"].includes(X.key)&&(X.preventDefault(),Ne(!0,X))},rt=se!==null&&ce,ze=X=>{!rt&&v&&(Object.defineProperty(X,"target",{writable:!0,value:{value:N,name:x}}),v(X))};delete W["aria-invalid"];let H,Xr;const ot=[];let Yr=!1;(mi({value:N})||d)&&(E?H=E(N):Yr=!0);const Rn=pt.map(X=>{if(!S.isValidElement(X))return null;let xe;if(w){if(!Array.isArray(N))throw new Error(or(2));xe=N.some(Xe=>pc(Xe,X.props.value)),xe&&Yr&&ot.push(X.props.children)}else xe=pc(N,X.props.value),xe&&Yr&&(Xr=X.props.children);return S.cloneElement(X,{"aria-selected":xe?"true":"false",onClick:qe(X),onKeyUp:Xe=>{Xe.key===" "&&Xe.preventDefault(),X.props.onKeyUp&&X.props.onKeyUp(Xe)},role:"option",selected:xe,value:void 0,"data-value":X.props.value})});Yr&&(w?ot.length===0?H=null:H=ot.reduce((X,xe,Xe)=>(X.push(xe),Xe<ot.length-1&&X.push(", "),X),[]):H=Xr);let jn=et;!o&&Pe&&se&&(jn=Q.clientWidth);let Gr;typeof F<"u"?Gr=F:Gr=h?null:0;const Ur=I.id||(x?`mui-component-select-${x}`:void 0),_r={...e,variant:$,value:N,open:rt,error:f},Ce=tb(_r),Kr={...b.PaperProps,...(gl=b.slotProps)==null?void 0:gl.paper},In=Ma();return _.jsxs(S.Fragment,{children:[_.jsx(Z0,{as:"div",ref:de,tabIndex:Gr,role:"combobox","aria-controls":rt?In:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":rt?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[y,Ur].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":R?"true":void 0,"aria-invalid":f?"true":void 0,onKeyDown:Ft,onMouseDown:h||m?null:ee,onBlur:ze,onFocus:P,...I,ownerState:_r,className:Z(I.className,Ce.select,l),id:Ur,children:eb(H)?fc||(fc=_.jsx("span",{className:"notranslate","aria-hidden":!0,children:""})):H}),_.jsx(Q0,{"aria-invalid":f,value:Array.isArray(N)?N.join(","):N,name:x,ref:te,"aria-hidden":!0,onChange:tt,tabIndex:-1,disabled:h,className:Ce.nativeInput,autoFocus:i,required:R,...W,ownerState:_r}),_.jsx(J0,{as:p,className:Ce.icon,ownerState:_r}),_.jsx(B0,{id:`menu-${x||""}`,anchorEl:Q,open:rt,onClose:Se,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...b,MenuListProps:{"aria-labelledby":y,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:In,...b.MenuListProps},slotProps:{...b.slotProps,paper:{...Kr,style:{minWidth:jn,...Kr!=null?Kr.style:null}}},children:Rn})]})}),nb=n=>{const{classes:e}=n,r=ve({root:["root"]},Ju,e);return{...e,...r}},Va={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>Ot(n)&&n!=="variant",slot:"Root"},sb=V($a,Va)(""),ib=V(za,Va)(""),ob=V(Na,Va)(""),Qu=S.forwardRef(function(e,t){const r=Oe({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:i,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=sy,id:h,input:d,inputProps:f,label:p,labelId:g,MenuProps:y,multiple:b=!1,native:w=!1,onClose:x,onOpen:v,open:C,renderValue:O,SelectDisplayProps:P,variant:D="outlined",...B}=r,m=w?V0:rb,E=xr(),R=Hr({props:r,muiFormControl:E,states:["variant","error"]}),I=R.variant||D,F={...r,variant:I,classes:o},M=nb(F),{root:L,...$}=M,W=d||{standard:_.jsx(sb,{ownerState:F}),outlined:_.jsx(ib,{label:p,ownerState:F}),filled:_.jsx(ob,{ownerState:F})}[I],N=Qe(t,ys(W));return _.jsx(S.Fragment,{children:S.cloneElement(W,{inputComponent:m,inputProps:{children:i,error:R.error,IconComponent:u,variant:I,type:void 0,multiple:b,...w?{id:h}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:y,onClose:x,onOpen:v,open:C,renderValue:O,SelectDisplayProps:{id:h,...P}},...f,classes:f?Ze($,f.classes):$,...d?d.props.inputProps:{}},...(b&&w||c)&&I==="outlined"?{notched:!0}:{},ref:N,className:Z(W.props.className,a,M.root),...!d&&{variant:I},...B})})});Qu.muiName="Select";function ab(n){return ye("MuiTextField",n)}be("MuiTextField",["root"]);const lb={standard:$a,filled:Na,outlined:za},cb=n=>{const{classes:e}=n;return ve({root:["root"]},ab,e)},ub=V(Jy,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),eh=S.forwardRef(function(e,t){const r=Oe({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:i=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:d,fullWidth:f=!1,helperText:p,id:g,InputLabelProps:y,inputProps:b,InputProps:w,inputRef:x,label:v,maxRows:C,minRows:O,multiline:P=!1,name:D,onBlur:B,onChange:m,onFocus:E,placeholder:R,required:I=!1,rows:F,select:M=!1,SelectProps:L,slots:$={},slotProps:W={},type:N,value:ne,variant:ce="outlined",...Be}=r,te={...r,autoFocus:i,color:l,disabled:u,error:h,fullWidth:f,multiline:P,required:I,select:M,variant:ce},J=cb(te),se=Ma(g),Ee=p&&se?`${se}-helper-text`:void 0,Pe=v&&se?`${se}-label`:void 0,et=lb[ce],ge={slots:$,slotProps:{input:w,inputLabel:y,htmlInput:b,formHelperText:d,select:L,...W}},G={},de=ge.slotProps.inputLabel;ce==="outlined"&&(de&&typeof de.shrink<"u"&&(G.notched=de.shrink),G.label=v),M&&((!L||!L.native)&&(G.id=void 0),G["aria-describedby"]=void 0);const[Q,Ne]=_t("input",{elementType:et,externalForwardedProps:ge,additionalProps:G,ownerState:te}),[ee,Se]=_t("inputLabel",{elementType:x0,externalForwardedProps:ge,ownerState:te}),[pt,tt]=_t("htmlInput",{elementType:"input",externalForwardedProps:ge,ownerState:te}),[qe,Ft]=_t("formHelperText",{elementType:a0,externalForwardedProps:ge,ownerState:te}),[rt,ze]=_t("select",{elementType:Qu,externalForwardedProps:ge,ownerState:te}),H=_.jsx(Q,{"aria-describedby":Ee,autoComplete:s,autoFocus:i,defaultValue:c,fullWidth:f,multiline:P,name:D,rows:F,maxRows:C,minRows:O,type:N,value:ne,id:se,inputRef:x,onBlur:B,onChange:m,onFocus:E,placeholder:R,inputProps:tt,slots:{input:$.htmlInput?pt:void 0},...Ne});return _.jsxs(ub,{className:Z(J.root,a),disabled:u,error:h,fullWidth:f,ref:t,required:I,color:l,variant:ce,ownerState:te,...Be,children:[v!=null&&v!==""&&_.jsx(ee,{htmlFor:se,id:Pe,...Se,children:v}),M?_.jsx(rt,{"aria-describedby":Ee,id:se,labelId:Pe,value:ne,input:H,...ze,children:o}):H,p&&_.jsx(qe,{id:Ee,...Ft,children:p})]})}),th=S.createContext(void 0);function hr(){const n=S.useContext(th);if(n===void 0)throw new Error("useEditorContext must be within a EditorProvider");return n}const rh=({children:n,editorId:e,hideForbiddenTools:t,activeTool:r,setActiveTool:s,activeColor:i,setActiveColor:o,shapes:a,addShape:l,addShapes:c,removeShape:u,configuration:h,metadata:d,setMetadata:f,onSubmit:p})=>_.jsx(th.Provider,{value:{editorId:e,hideForbiddenTools:t,activeTool:r,setActiveTool:s,activeColor:i,setActiveColor:o,shapes:a,addShape:l,addShapes:c,removeShape:u,configuration:h,metadata:d,setMetadata:f,onSubmit:p},children:n});rh.__docgenInfo={description:"",methods:[],displayName:"EditorProvider",props:{hideForbiddenTools:{required:!0,tsType:{name:"boolean"},description:""},activeTool:{required:!0,tsType:{name:"ToolEnum"},description:""},setActiveTool:{required:!0,tsType:{name:"signature",type:"function",raw:"(tool: ToolEnum) => void",signature:{arguments:[{type:{name:"ToolEnum"},name:"tool"}],return:{name:"void"}}},description:""},activeColor:{required:!0,tsType:{name:"string"},description:""},setActiveColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},shapes:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ type: ShapeType, shape: Shape }",signature:{properties:[{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"Record<string, { type: ShapeType, shape: Shape }>"},description:""},addShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, type: ShapeType, shape: Shape) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}]},name:"type"},{type:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}]},name:"shape"}],return:{name:"void"}}},description:""},addShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"(shapes: {id: string, type: ShapeType, shape: Shape}[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{id: string, type: ShapeType, shape: Shape}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"{id: string, type: ShapeType, shape: Shape}[]"},name:"shapes"}],return:{name:"void"}}},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},configuration:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: ConfigurationParameter[],
  rois: RoiConfiguration[],
  options?: {
    hideForbiddenTools?: boolean
    description?: string
  }
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  role: string
  type: Omit<ShapeType, 'pointer'>
  multiplicity: {
    operator: OperatorEnum
    threshold: number
  },
  parameters: ConfigurationParameter[],
}`,signature:{properties:[{key:"role",value:{name:"string",required:!0}},{key:"type",value:{name:"Omit",elements:[{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}]},{name:"literal",value:"'pointer'"}],raw:"Omit<ShapeType, 'pointer'>",required:!0}},{key:"multiplicity",value:{name:"signature",type:"object",raw:`{
  operator: OperatorEnum
  threshold: number
}`,signature:{properties:[{key:"operator",value:{name:"OperatorEnum",required:!0}},{key:"threshold",value:{name:"number",required:!0}}]},required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}}]}}],raw:"RoiConfiguration[]",required:!0}},{key:"options",value:{name:"signature",type:"object",raw:`{
  hideForbiddenTools?: boolean
  description?: string
}`,signature:{properties:[{key:"hideForbiddenTools",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}}]},required:!1}}]}},description:""},metadata:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: OutputParameter[]
  rois: {
    id: string,
    parameters: OutputParameter[],
    name: string
    role: string
  }[]
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string,
  parameters: OutputParameter[],
  name: string
  role: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"role",value:{name:"string",required:!0}}]}}],raw:`{
  id: string,
  parameters: OutputParameter[],
  name: string
  role: string
}[]`,required:!0}}]}},description:""},setMetadata:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: Metadata) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  parameters: OutputParameter[]
  rois: {
    id: string,
    parameters: OutputParameter[],
    name: string
    role: string
  }[]
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string,
  parameters: OutputParameter[],
  name: string
  role: string
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"role",value:{name:"string",required:!0}}]}}],raw:`{
  id: string,
  parameters: OutputParameter[],
  name: string
  role: string
}[]`,required:!0}}]}},name:"data"}],return:{name:"void"}}},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},editorId:{required:!0,tsType:{name:"string"},description:""}}};const nh=({children:n,style:e={},className:t="",component:r="span"})=>{const s=r;return _.jsx(s,{className:t,style:e,children:n})};nh.__docgenInfo={description:"",methods:[],displayName:"Typography",props:{style:{defaultValue:{value:"{}",computed:!1},required:!1},className:{defaultValue:{value:"''",computed:!1},required:!1},component:{defaultValue:{value:"'span'",computed:!1},required:!1}}};const Zn=(n,e,...t)=>e&&console[n](...t),q=(n,e,t)=>`${e[n]} ${e[`${n}-${t}`]} react-cam-roi-${n}${t?`react-cam-roi-${n}-${t}`:""}`,Ha=n=>n.replace(/([A-Z])/g," $1").replace("_"," ").replace(/^./,e=>e.toUpperCase()),Mt=(n,e)=>(Object.keys(e).forEach(t=>{n=n.replace(`{${t}}`,e[t].toString())}),n),gc={"icon-button":"_icon-button_wftrq_1","icon-button-light":"_icon-button-light_wftrq_9","icon-button-dark":"_icon-button-dark_wftrq_13","icon-button-disabled":"_icon-button-disabled_wftrq_17"},sh=({children:n,disabled:e,onClick:t})=>{const{themeMode:r}=S.useContext(Le);return _.jsx("div",{className:`${q("icon-button",gc,r)} ${e?q("icon-button-disabled",gc,r):""}`,onClick:e?void 0:t,children:n})};sh.__docgenInfo={description:"",methods:[],displayName:"IconButton"};const ih=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})});ih.__docgenInfo={description:"",methods:[],displayName:"DeleteIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const oh=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})});oh.__docgenInfo={description:"",methods:[],displayName:"EditIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const ah=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"m320-410 79-110h170L320-716v306ZM551-80 406-392 240-160v-720l560 440H516l144 309-109 51ZM399-520Z"})});ah.__docgenInfo={description:"",methods:[],displayName:"SelectIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};var Y=(n=>(n.Pointer="pointer",n.Polyline="polyline",n.Polygon="polygon",n.Rectangle="rect",n))(Y||{}),un=(n=>(n.Integer="int",n.Float="float",n.String="string",n.Boolean="bool",n))(un||{}),Ge=(n=>(n.Lt="lt",n.Lte="lte",n.Gt="gt",n.Gte="gte",n.Eq="eq",n))(Ge||{});const hb={info:n=>alert(`Info: ${n}`),warn:n=>alert(`Warning: ${n}`),error:n=>alert(`Error: ${n}`),success:n=>alert(`Success: ${n}`)},mc=n=>n.rois.length>0,db=n=>n.parameters.length>0,bn=(n,e,t,r,s)=>{const i=n.rois.find(l=>l.type===e);if(!i||!i.multiplicity||Object.keys(i.multiplicity).length===0)return!0;const o=Object.values(t).filter(l=>l.type===e).length;let a=!0;switch(i.multiplicity.operator){case Ge.Eq:case Ge.Lte:a=o+1<=i.multiplicity.threshold;break;case Ge.Lt:a=o+1<i.multiplicity.threshold;break;default:return!0}return!a&&r&&r.warn(s),a},fb=(n,e,t)=>{const r={};return n.forEach(s=>{s.required&&Jo(e[s.codename])&&(r[s.codename]="requiredField")}),Object.keys(r).length>0?(t(r),!1):!0},Jo=n=>typeof n=="string"||Array.isArray(n)?n.length===0:n==null,pb=(n,e,t,r)=>{const s=[];return n.parameters.length&&t.parameters.find(i=>{var o;return((o=n.parameters.find(a=>a.codename===i.codename))==null?void 0:o.required)&&Jo(i.value)})&&s.push(r.missingRequiredValuesInMainParameters),n.rois.forEach(i=>{if(i.multiplicity)switch(i.multiplicity.operator){case Ge.Eq:Object.values(e).filter(o=>o.type===i.type).length!==i.multiplicity.threshold&&s.push(Mt(r.shapesOfTypeShouldBeEqualToThreshold,{type:String(i.type),threshold:i.multiplicity.threshold}));break;case Ge.Lt:Object.values(e).filter(o=>o.type===i.type).length>=i.multiplicity.threshold&&s.push(Mt(r.shapesOfTypeShouldBeLessThanThreshold,{type:String(i.type),threshold:i.multiplicity.threshold}));break;case Ge.Lte:Object.values(e).filter(o=>o.type===i.type).length>i.multiplicity.threshold&&s.push(Mt(r.shapesOfTypeShouldBeLessThanOrEqualToThreshold,{type:String(i.type),threshold:i.multiplicity.threshold}));break;case Ge.Gt:Object.values(e).filter(o=>o.type===i.type).length<=i.multiplicity.threshold&&s.push(Mt(r.shapesOfTypeShouldBeGreaterThanThreshold,{type:String(i.type),threshold:i.multiplicity.threshold}));break;case Ge.Gte:Object.values(e).filter(o=>o.type===i.type).length<i.multiplicity.threshold&&s.push(Mt(r.shapesOfTypeShouldBeGreaterThanOrEqualToThreshold,{type:String(i.type),threshold:i.multiplicity.threshold}))}}),Object.keys(e).forEach(i=>{var l;const o=e[i].type;(((l=n.rois.find(c=>c.type===o))==null?void 0:l.parameters)??[]).forEach(c=>{var u,h;c.required&&Jo((h=(u=t.rois.find(d=>d.id===i))==null?void 0:u.parameters.find(d=>d.codename===d.codename))==null?void 0:h.value)&&s.push(r.missingRequiredValuesInShapeParameters.replace("{id}",i))})}),[s.length===0,s]},gb=(n,e)=>{switch(e){case Y.Rectangle:return{top:n.top,left:n.left,width:n.width,height:n.height,color:n.stroke};case Y.Polygon:case Y.Polyline:return{points:n.get("points"),top:n.top,left:n.left,color:n.stroke}}},lh=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",style:e,children:_.jsx("path",{fill:n,d:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"})});lh.__docgenInfo={description:"",methods:[],displayName:"CopyIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const ch=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M280-280h84l240-238-86-86-238 238v86Zm352-266 42-44q6-6 6-14t-6-14l-56-56q-6-6-14-6t-14 6l-44 42 86 86ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm280-590q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM200-200v-560 560Z"})});ch.__docgenInfo={description:"",methods:[],displayName:"AnnotateIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const qa=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})});qa.__docgenInfo={description:"",methods:[],displayName:"CloseIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const mb="_modal_hvjsg_1",sn={"modal-overlay":"_modal-overlay_hvjsg_1","modal-overlay-light":"_modal-overlay-light_hvjsg_13","modal-overlay-dark":"_modal-overlay-dark_hvjsg_17",modal:mb,"modal-light":"_modal-light_hvjsg_33","modal-dark":"_modal-dark_hvjsg_39","modal-xs":"_modal-xs_hvjsg_45","modal-sm":"_modal-sm_hvjsg_49","modal-md":"_modal-md_hvjsg_53","modal-lg":"_modal-lg_hvjsg_57","modal-xl":"_modal-xl_hvjsg_61","modal-header":"_modal-header_hvjsg_65","modal-title":"_modal-title_hvjsg_72","modal-title-light":"_modal-title-light_hvjsg_78","modal-title-dark":"_modal-title-dark_hvjsg_82","modal-footer":"_modal-footer_hvjsg_86"},yb=({isOpen:n,onClose:e,children:t,title:r,maxWidth:s,onSubmit:i})=>{const{themeMode:o,IconButton:a,Typography:l,Button:c,strings:u}=S.useContext(Le),h=o==="light"?"black":"white";return n?au.createPortal(_.jsx("div",{className:q("modal-overlay",sn,o),children:_.jsxs("div",{className:`${q("modal",sn,o)} ${q(`modal-${s}`,sn,o)}`,children:[_.jsxs("div",{className:q("modal-header",sn,o),children:[_.jsx(l,{component:"h6",className:q("modal-title",sn,o),children:r}),_.jsx(a,{onClick:e,children:_.jsx(qa,{color:h})})]}),t,_.jsxs("div",{className:q("modal-footer",sn,o),children:[_.jsx(c,{onClick:e,children:u.cancel}),i&&_.jsx(c,{primary:!0,onClick:i,children:u.save})]})]})}),document.body):null},Tr={"text-field":"_text-field_1h8ei_2","text-field-light":"_text-field-light_1h8ei_21","text-field-dark":"_text-field-dark_1h8ei_26","text-field-error":"_text-field-error_1h8ei_31","text-field-label":"_text-field-label_1h8ei_34","text-field-label-error":"_text-field-label-error_1h8ei_45","text-field-helper-text":"_text-field-helper-text_1h8ei_48","text-field-helper-text-error":"_text-field-helper-text-error_1h8ei_59"},uh=({onChange:n,type:e="text",value:t,label:r,helperText:s,error:i,required:o=!1,readOnly:a=!1,disabled:l=!1})=>{const{themeMode:c,Typography:u}=S.useContext(Le),h=d=>{n(d.target.value)};return _.jsxs("div",{className:q("text-field-wrapper",Tr,c),children:[_.jsx("label",{className:`${q("text-field-label",Tr,c)} ${i?q("text-field-label-error",Tr,null):""}`,children:_.jsxs(u,{children:[r,o&&" *"]})}),_.jsx("input",{type:e,className:`${q("text-field",Tr,c)} ${i?q("text-field-error",Tr,null):""}`,onChange:h,value:t,readOnly:a,disabled:l}),s&&_.jsx(u,{component:"div",className:`${q("text-field-helper-text",Tr,c)} ${i?q("text-field-helper-text-error",Tr,null):""}`,children:s})]})};uh.__docgenInfo={description:"",methods:[],displayName:"TextField",props:{type:{defaultValue:{value:"'text'",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},readOnly:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1}}};const kr={"number-field":"_number-field_177yi_2","number-field-light":"_number-field-light_177yi_20","number-field-dark":"_number-field-dark_177yi_25","number-field-error":"_number-field-error_177yi_30","number-field-label":"_number-field-label_177yi_33","number-field-label-error":"_number-field-label-error_177yi_44","number-field-helper-text":"_number-field-helper-text_177yi_47","number-field-helper-text-error":"_number-field-helper-text-error_177yi_58"},hh=({onChange:n,value:e,label:t,required:r,helperText:s,error:i})=>{const{themeMode:o,Typography:a}=S.useContext(Le),l=c=>{n(parseFloat(c.target.value))};return _.jsxs("div",{className:q("number-field-wrapper",kr,o),children:[_.jsx("label",{className:`${q("number-field-label",kr,o)} ${i?q("number-field-label-error",kr,null):""}`,children:_.jsxs(a,{children:[t,r&&" *"]})}),_.jsx("input",{type:"number",className:`${q("number-field",kr,o)} ${i?q("number-field-error",kr,null):""}`,onChange:l,value:e??""}),s&&_.jsx(a,{component:"div",className:`${q("number-field-helper-text",kr,o)} ${i?q("number-field-helper-text-error",kr,null):""}`,children:s})]})};hh.__docgenInfo={description:"",methods:[],displayName:"NumberField"};const Or={"bool-field":"_bool-field_116ff_2","bool-field-light":"_bool-field-light_116ff_20","bool-field-dark":"_bool-field-dark_116ff_25","bool-field-error":"_bool-field-error_116ff_30","bool-field-label":"_bool-field-label_116ff_33","bool-field-label-error":"_bool-field-label-error_116ff_44","bool-field-helper-text":"_bool-field-helper-text_116ff_47","bool-field-helper-text-error":"_bool-field-helper-text-error_116ff_58"},dh=({onChange:n,value:e,label:t,helperText:r,error:s,readOnly:i=!1,disabled:o=!1,required:a=!1})=>{const{themeMode:l,Typography:c}=S.useContext(Le),u=h=>{n(h.target.checked)};return _.jsxs("div",{className:q("bool-field-wrapper",Or,l),children:[_.jsx("label",{className:`${q("bool-field-label",Or,l)} ${s?q("bool-field-label-error",Or,null):""}`,children:_.jsxs(c,{children:[t,a&&" *"]})}),_.jsx("input",{type:"checkbox",className:`${q("bool-field",Or,l)} ${s?q("bool-field-error",Or,null):""}`,onChange:u,checked:e,readOnly:i,disabled:o}),r&&_.jsx(c,{component:"div",className:`${q("bool-field-helper-text",Or,l)} ${s?q("bool-field-helper-text-error",Or,null):""}`,children:r})]})};dh.__docgenInfo={description:"",methods:[],displayName:"BoolField",props:{readOnly:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1}}};const Er={"enum-field":"_enum-field_yraf1_2","enum-field-light":"_enum-field-light_yraf1_21","enum-field-dark":"_enum-field-dark_yraf1_26","enum-field-error":"_enum-field-error_yraf1_31","enum-field-label":"_enum-field-label_yraf1_34","enum-field-label-error":"_enum-field-label-error_yraf1_45","enum-field-helper-text":"_enum-field-helper-text_yraf1_48","enum-field-helper-text-error":"_enum-field-helper-text-error_yraf1_59"},Xa=({onChange:n,value:e,label:t,helperText:r,error:s,options:i,disabled:o=!1,required:a=!1,multiple:l=!1})=>{const{themeMode:c,Typography:u}=S.useContext(Le),h=d=>{const f=Array.from(d.target.selectedOptions,p=>isNaN(Number(p.value))?p.value:Number(p.value));n(l?f:f[0])};return _.jsxs("div",{className:q("enum-field-wrapper",Er,c),children:[_.jsx("label",{className:`${q("enum-field-label",Er,c)} ${s?q("enum-field-label-error",Er,null):""}`,children:_.jsxs(u,{children:[t,a&&" *"]})}),_.jsxs("select",{className:`${q("enum-field",Er,c)} ${s?q("enum-field-error",Er,null):""}`,onChange:h,value:e,disabled:o,multiple:l,children:[!a&&_.jsx("option",{value:""}),i.map(d=>_.jsx("option",{value:d.value,children:d.label},d.value))]}),r&&_.jsx(u,{component:"div",className:`${q("enum-field-helper-text",Er,c)} ${s?q("enum-field-helper-text-error",Er,null):""}`,children:r})]})};Xa.__docgenInfo={description:"",methods:[],displayName:"EnumField",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: T
  label: string
}`,signature:{properties:[{key:"value",value:{name:"T",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"EnumOption<T>[]"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{defaultValue:{value:"false",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1}}};const bb="_button_uq5o4_1",yc={button:bb,"button-light":"_button-light_uq5o4_16","button-dark":"_button-dark_uq5o4_21","button-disabled":"_button-disabled_uq5o4_26"},fh=({onClick:n,primary:e,disabled:t,children:r})=>{const{themeMode:s,primaryColor:i}=S.useContext(Le),o={};return e&&(o.backgroundColor=i,o.color="white"),_.jsx("button",{className:`${q("button",yc,s)}${t?` ${q("button-disabled",yc,s)}`:""}`,style:o,onClick:n,disabled:t,children:r})};fh.__docgenInfo={description:"",methods:[],displayName:"Button",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"event"}],return:{name:"void"}}},description:""},primary:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const ph=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"})});ph.__docgenInfo={description:"",methods:[],displayName:"SaveIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const we={enableLogs:!0,themeMode:"light",primaryColor:"#1976d2",primaryFgColor:"#fff",Typography:nh,IconButton:sh,Modal:yb,DeleteIcon:ih,EditIcon:oh,SelectIcon:ah,CopyIcon:lh,AnnotateIcon:ch,SaveIcon:ph,CloseIcon:qa,TextField:uh,NumberField:hh,BoolField:dh,EnumField:Xa,Button:fh,pickerColors:["#ffffff","#000000","#ff9900","#0099ff"],notify:hb,strings:{cancel:"Cancel",cannotDrawMorePolygons:"You cannot draw more polygons",cannotDrawMorePolylines:"You cannot draw more polylines",cannotDrawMoreRectangles:"You cannot draw more rectangles",id:"ID",invalidSubmission:"Invalid submission",mainParametersMetadata:"Main parameters",missingRequiredValuesInMainParameters:"Missing required values in main parameters",missingRequiredValuesInShapeParameters:"Missing required values in shape {id} parameters",name:"Name",polygon:"Polygon",polygonHelpText:"click to draw all the polygon points, double click on the last point to close the polygon",polyline:"Polyline",polylineHelpText:"click to draw all the polyline points, double click on the last point to stop drawing",rect:"Rectangle",rectHelpText:"click and drag to draw the rectangle",pointer:"Selection",pointerHelpText:"click a shape to select it",requiredField:"This field is required",roiMultiplicityEqRule:"a number of {role} ({type}) equal to {threshold}",roiMultiplicityGtRule:"a number of {role} ({type}) greater than {threshold}",roiMultiplicityGteRule:"a number of {role} ({type}) greater than or equal to {threshold}",roiMultiplicityLtRule:"a number of {role} ({type}) less than {threshold}",roiMultiplicityLteRule:"a number of {role} ({type}) less than or equal to {threshold}",roiMultiplicityNoRule:"a number of {role} ({type})",roisToBeDrawn:"ROIs to be drawn",role:"Role",save:"Save",shapeParametersMetadata:"Shape parameters",shapesOfTypeShouldBeEqualToThreshold:"Shapes of type {type} should be equal to {threshold}",shapesOfTypeShouldBeGreaterThanThreshold:"Shapes of type {type} should be greater than {threshold}",shapesOfTypeShouldBeGreaterThanOrEqualToThreshold:"Shapes of type {type} should be greater than or equal to {threshold}",shapesOfTypeShouldBeLessThanThreshold:"Shapes of type {type} should be less than {threshold}",shapesOfTypeShouldBeLessThanOrEqualToThreshold:"Shapes of type {type} should be less than or equal to {threshold}",type:"Type"}},Le=S.createContext(we),Ya=({children:n,enableLogs:e,themeMode:t,primaryColor:r,primaryFgColor:s,Typography:i,Modal:o,IconButton:a,DeleteIcon:l,EditIcon:c,SelectIcon:u,CopyIcon:h,AnnotateIcon:d,SaveIcon:f,CloseIcon:p,TextField:g,NumberField:y,BoolField:b,EnumField:w,Button:x,pickerColors:v,notify:C,strings:O})=>{const P={enableLogs:e??we.enableLogs,Typography:i??we.Typography,Modal:o??we.Modal,IconButton:a??we.IconButton,DeleteIcon:l??we.DeleteIcon,EditIcon:c??we.EditIcon,SelectIcon:u??we.SelectIcon,CopyIcon:h??we.CopyIcon,AnnotateIcon:d??we.AnnotateIcon,SaveIcon:f??we.SaveIcon,CloseIcon:p??we.CloseIcon,TextField:g??we.TextField,NumberField:y??we.NumberField,BoolField:b??we.BoolField,EnumField:w??we.EnumField,Button:x??we.Button,themeMode:t??we.themeMode,primaryColor:r??we.primaryColor,primaryFgColor:s??we.primaryFgColor,pickerColors:v??we.pickerColors,notify:C??we.notify,strings:O?{...we.strings,...O}:we.strings};return _.jsx(Le.Provider,{value:P,children:n})};Ya.__docgenInfo={description:"",methods:[],displayName:"UiProvider",props:{strings:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",raw:"UiContextType['strings']"}],raw:"Partial<UiContextType['strings']>"},description:""}}};const vb="_loader_10c9e_1",xb="_spin_10c9e_1",Sb={loader:vb,spin:xb,"loader-light":"_loader-light_10c9e_8","loader-dark":"_loader-dark_10c9e_13"},gh=()=>{const{themeMode:n}=S.useContext(Le);return _.jsx("div",{className:q("loader",Sb,n)})};gh.__docgenInfo={description:"",methods:[],displayName:"Loader"};function T(n,e,t){return(e=function(r){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bc(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bc(Object(t),!0).forEach(function(r){T(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bc(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function ke(n,e){if(n==null)return{};var t,r,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function Sr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class vc{constructor(){T(this,"browserShadowBlurConstant",1),T(this,"DPI",96),T(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),T(this,"perfLimitSizeTotal",2097152),T(this,"maxCacheSideLimit",4096),T(this,"minCacheSideLimit",256),T(this,"disableStyleCopyPaste",!1),T(this,"enableGLFiltering",!0),T(this,"textureSize",4096),T(this,"forceGLPutImageData",!1),T(this,"cachesBoundsOfCurve",!1),T(this,"fontPaths",{}),T(this,"NUM_FRACTION_DIGITS",4)}}const re=new class extends vc{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=k(k({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new vc,t=(n==null?void 0:n.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},br=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class Vt extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class Cb extends Vt{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class _b{}class wb extends _b{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),br("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const Tb={};let xc;const Xt=()=>xc||(xc={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new wb,dispose(){},copyPasteData:Tb}),On=()=>Xt().document,Ga=()=>Xt().window,mh=()=>{var n;return Math.max((n=re.devicePixelRatio)!==null&&n!==void 0?n:Ga().devicePixelRatio,1)},Jn=new class{constructor(){T(this,"charWidthsCache",{}),T(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=re,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Qo="6.5.4";function si(){}const bs=Math.PI/2,yi=2*Math.PI,Ua=Math.PI/180,it=Object.freeze([1,0,0,1,0,0]),Ka=16,gr=.4477152502,K="center",le="left",ct="top",ea="bottom",je="right",ut="none",Za=/\r?\n/,yh="moving",Xi="scaling",bh="rotating",Ja="rotate",vh="skewing",os="resizing",kb="modifyPoly",Ob="modifyPath",bi="changed",Yi="scale",ft="scaleX",Tt="scaleY",En="skewX",Pn="skewY",Ve="fill",ht="stroke",vi="modified",on="json",mo="svg",z=new class{constructor(){this[on]=new Map,this[mo]=new Map}has(n){return this[on].has(n)}getClass(n){const e=this[on].get(n);if(!e)throw new Vt("No class registered for ".concat(n));return e}setClass(n,e){e?this[on].set(e,n):(this[on].set(n.type,n),this[on].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[mo].get(n)}setSVGClass(n,e){this[mo].set(e??n.type.toLowerCase(),n)}},xi=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class Eb{constructor(){T(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,i]=r;this.on(s,i)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[i,o]=s;r.push(this.once(i,o))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,i]=r;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const hn=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},cr=n=>{if(n===0)return 1;switch(Math.abs(n)/bs){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},ur=n=>{if(n===0)return 0;const e=n/bs,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class A{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new A(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new A(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new A(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new A(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new A(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new A(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new A(this.x/e.x,this.y/e.y)}scalarDivide(e){return new A(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new A(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new A(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new A(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new A(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qa;const r=ur(e),s=cr(e),i=this.subtract(t);return new A(i.x*s-i.y*r,i.x*r+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new A(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Qa=new A(0,0),ii=n=>!!n&&Array.isArray(n._objects);function xh(n){class e extends n{constructor(){super(...arguments),T(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(r,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(r){this.getObjects().forEach((s,i,o)=>r(s,i,o))}getObjects(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(hn(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(hn(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==0){const o=this.findNewLowerIndex(r,i,s);return hn(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(r,i,s);return hn(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(hn(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(r,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(r){let{left:s,top:i,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new A(s,i),h=u.add(new A(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h)||f.isContainedWithinRect(u,h)||l&&f.containsPoint(u)||l&&f.containsPoint(h))&&c.push(f)}return c}}return e}class Sh extends Eb{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function oi(n){return Ga().requestAnimationFrame(n)}function Pb(n){return Ga().cancelAnimationFrame(n)}let Mb=0;const vr=()=>Mb++,It=()=>{const n=On().createElement("canvas");if(!n||n.getContext===void 0)throw new Vt("Failed to create `canvas` element");return n},Db=()=>On().createElement("img"),Yt=n=>{const e=It();return e.width=n.width,e.height=n.height,e},Ch=(n,e,t)=>n.toDataURL("image/".concat(e),t),Ie=n=>n*Ua,Wr=n=>n/Ua,Ab=n=>n.every((e,t)=>e===it[t]),at=(n,e,t)=>new A(n).transform(e,t),At=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:s}=new A(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},Ue=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],el=(n,e)=>n.reduceRight((t,r)=>r&&t?Ue(r,t,e):r||t,void 0)||it.concat(),_h=n=>{let[e,t]=n;return Math.atan2(t,e)},Si=n=>{const e=_h(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),s=(n[0]*n[3]-n[2]*n[1])/r,i=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Wr(e),scaleX:r,scaleY:s,skewX:Wr(i),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},vs=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function xs(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Ie(n),s=cr(r),i=ur(r);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const tl=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},wh=n=>Math.tan(Ie(n)),Th=n=>[1,0,wh(n),1,0,0],kh=n=>[1,wh(n),0,1,0,0],Gi=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=n,a=tl(r?-e:e,s?-t:t);return i&&(a=Ue(a,Th(i),!0)),o&&(a=Ue(a,kh(o),!0)),a},Rb=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let s=vs(e,t);r&&(s=Ue(s,xs({angle:r})));const i=Gi(n);return Ab(i)||(s=Ue(s,i)),s},ai=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new Cb("loadImage"));const i=Db();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(i)};n?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new Vt("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=n):a()})},as=function(n){let{signal:e,reviver:t=si}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(n.map(o=>z.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(r).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Ui=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const i=Object.values(n).map(a=>a&&a.type&&z.has(a.type)?as([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(n);Promise.all(i).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},Mn=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},rl=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),Sc={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},yo=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Cc=(n,e,t,r)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),i=Math.min(n,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},_c=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Es=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),wc=n=>{let[e,t,r,s=1]=n;const i=Math.round(.3*e+.59*t+.11*r);return[i,i,i,s]};class ue{constructor(e){if(T(this,"isUnrecognised",!1),e)if(e instanceof ue)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,i=1]=e;this.setSource([t,r,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in Sc&&(e=Sc[e]),e==="transparent"?[255,255,255,0]:ue.sourceFromHex(e)||ue.sourceFromRgb(e)||ue.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Cc(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=Cc(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(Es(e)).concat(Es(t)).concat(Es(r)).concat(Es(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(wc(this.getSource())),this}toBlackWhite(e){const[t,,,r]=wc(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof ue||(e=new ue(e));const t=this.getSource(),r=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return ue.fromRgba(e)}static fromRgba(e){return new ue(ue.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,s,i,_c(t[4])]}}static fromHsl(e){return ue.fromHsla(e)}static fromHsla(e){return new ue(ue.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ue.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,u=2*i-c;o=yo(u,c,r+1/3),a=yo(u,c,r),l=yo(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),_c(t[4])]}static fromHex(e){return new ue(ue.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=r.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Wr(r):t.includes("turn")?360*r:r}}const De=(n,e)=>parseFloat(Number(n).toFixed(e)),vn=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ka;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),s=re.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},jb=n=>{const[e,t]=n.trim().split(" "),[r,s]=(i=e)&&i!==ut?[i.slice(1,4),i.slice(5,8)]:i===ut?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},Ci=n=>"matrix("+n.map(e=>De(e,re.NUM_FRACTION_DIGITS)).join(" ")+")",ls=function(n,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new ue(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(r=o.toString())}else t="none";return s?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},wt=n=>!!n&&n.toLive!==void 0,Tc=n=>!!n&&typeof n.toObject=="function",kc=n=>!!n&&n.offsetX!==void 0&&"source"in n,Dr=n=>!!n&&"multiSelectionStacking"in n;function Oh(n){const e=n&&Dt(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let s=n;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,r=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const Dt=n=>n.ownerDocument||null,Eh=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},Ph=function(n,e,t){let{width:r,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=s,i>1&&(n.setAttribute("width",(r*i).toString()),n.setAttribute("height",(s*i).toString()),e.scale(i,i))},ta=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function Oc(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=ut,n}class Mh{constructor(e){T(this,"_originalCanvasStyle",void 0),T(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&On().getElementById(e)||It();var r;if(t.hasAttribute("data-fabric"))throw new Vt("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;Ph(r,s,e,t)}setCSSDimensions(e){ta(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&Dt(e),s={left:0,top:0};if(!r)return s;const i=((t=Eh(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=Oh(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){Xt().dispose(this.lower.el),delete this.lower}}const Ib={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...it]};class Ss extends xh(Sh){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return Ss.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Mh(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(br("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?mh():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=k({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],i=at(e,At(s));s[0]=t,s[3]=t;const o=at(i,s);s[4]+=r.x-o.x,s[5]+=r.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new A(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new A(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=oi(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=At(this.viewportTransform),s=at({x:0,y:0},r),i=at({x:e,y:t},r),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new A(a.x,o.y),bl:new A(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(Pb(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!s)return;const a=wt(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...i),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new A(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new A(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new A(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new A(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new A(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return at(this.getCenterPoint(),At(this.viewportTransform))}_centerObject(e,t){e.setXY(t,K,K),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return k(k(k({version:Qo},Mn(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return wt(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),wt(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=re.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(De(-l[4]/l[0],i)," ").concat(De(-l[5]/l[3],i)," ").concat(De(this.width/l[0],i)," ").concat(De(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Qo,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(vr()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(wt(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(i,{additionalTransform:r?Ci(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=re.fontPaths;this._objects.forEach(function i(o){e.push(o),ii(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:h=""}=u;!t[h]&&r[h]&&(t[h]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(r[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(wt(r)){const s=r.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?Ci(At(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!kc(r)?i:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!kc(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new Vt("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([as(i,{reviver:t,signal:r}),Ui({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[f,p]=d;return this.clear(),this.add(...f),this.set(s),this.set(p),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Yt(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return Ch(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,f=c*e,p=this.viewportTransform,g=[f,0,0,f,(p[4]-(s||0))*e,(p[5]-(i||0))*e],y=this.enableRetinaScaling,b=Yt({width:a,height:l}),w=o?this._objects.filter(x=>o(x)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=g,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),w),this.viewportTransform=p,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=d,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),xi.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}T(Ss,"ownDefaults",Ib);const Fb=["touchstart","touchmove","touchend"],Lb=n=>{const e=Oh(n.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(n);return new A(t.clientX+e.left,t.clientY+e.top)},ra=n=>Fb.includes(n.type)||n.pointerType==="touch",na=n=>{n.preventDefault(),n.stopPropagation()},sr=n=>{let e=0,t=0,r=0,s=0;for(let i=0,o=n.length;i<o;i++){const{x:a,y:l}=n[i];(a>r||!i)&&(r=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:r-e,height:s-t}},Bb=["translateX","translateY","scaleX","scaleY"],Nb=(n,e)=>_i(n,Ue(e,n.calcOwnMatrix())),_i=(n,e)=>{const t=Si(e),{translateX:r,translateY:s,scaleX:i,scaleY:o}=t,a=ke(t,Bb),l=new A(r,s);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:i,scaleY:o}),n.setPositionByOrigin(l,K,K)},$b=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},Dh=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),nl=(n,e,t)=>{const r=n/2,s=e/2,i=[new A(-r,-s),new A(r,-s),new A(-r,s),new A(r,s)].map(a=>a.transform(t)),o=sr(i);return new A(o.width,o.height)},Ki=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:it;return Ue(At(arguments.length>1&&arguments[1]!==void 0?arguments[1]:it),n)},xn=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it;return n.transform(Ki(e,t))},Wb=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it;return n.transform(Ki(e,t),!0)},zb=(n,e,t)=>{const r=Ki(e,t);return _i(n,Ue(r,n.calcOwnMatrix())),r},Ah=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),k(k({},e),{},{target:r})),r.fire(n,e)},Vb={left:-.5,top:-.5,center:0,bottom:.5,right:.5},We=n=>typeof n=="string"?Vb[n]:n-.5,wi="not-allowed";function Rh(n){return We(n.originX)===We(K)&&We(n.originY)===We(K)}function Ec(n){return .5-We(n)}const Rt=(n,e)=>n[e],jh=(n,e,t,r)=>({e:n,transform:e,pointer:new A(t,r)});function Ih(n,e){const t=n.getTotalAngle()+Wr(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function sl(n,e,t,r,s){var i;let{target:o,corner:a}=n;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,u=o.padding/c,h=function(d,f,p,g){const y=d.getRelativeCenterPoint(),b=p!==void 0&&g!==void 0?d.translateToGivenOrigin(y,K,K,p,g):new A(d.left,d.top);return(d.angle?f.rotate(-Ie(d.angle),y):f).subtract(b)}(o,new A(r,s),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const Hb=(n,e,t,r)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=r-o,c=!Rt(s,"lockMovementX")&&s.left!==a,u=!Rt(s,"lockMovementY")&&s.top!==l;return c&&s.set(le,a),u&&s.set(ct,l),(c||u)&&Ah(yh,jh(n,e,t,r)),c||u};class Fh{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):ut,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=ls(Ve,this.fill);return[ls(ht,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Ci(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,p=[],g=e.indexOf("COMMON_PARTS");let y;l&&(l.clipPathId="CLIPPATH_".concat(vr()),y='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&p.push("<g ",a,this.getSvgCommons(),` >
`),p.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const b=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[g]=b,wt(d)&&p.push(d.toSVG(this)),wt(h)&&p.push(h.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(y),p.push(e.join("")),p.push(`</g>
`),u&&p.push(`</g>
`),r?r(p.join("")):p.join("")}addPaintOrder(){return this.paintFirst!==Ve?' paint-order="'.concat(this.paintFirst,'" '):""}}function Zi(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Pc;const zr=String.raw(Pc||(Pc=Sr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),qb=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+zr+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+zr+"))?\\s+(.*)"),Xb={cx:le,x:le,r:"radius",cy:ct,y:ct,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},bo="font-size",vo="clip-path";Zi(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Zi(["symbol","image","marker","pattern","view","svg"]);const Mc=Zi(["symbol","g","a","svg","clipPath","defs"]),Yb=new A(1,0),Lh=new A,Bh=(n,e)=>n.rotate(e),sa=(n,e)=>new A(e).subtract(n),ia=n=>n.distanceFrom(Lh),oa=(n,e)=>Math.atan2(Qn(n,e),Ub(n,e)),Gb=n=>oa(Yb,n),il=n=>n.eq(Lh)?n:n.scalarDivide(ia(n)),Nh=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return il(new A(-n.y,n.x).scalarMultiply(e?1:-1))},Qn=(n,e)=>n.x*e.y-n.y*e.x,Ub=(n,e)=>n.x*e.x+n.y*e.y,Dc=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Qn(e,t),s=Qn(e,n),i=Qn(t,n);return r>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Ac="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Rc=new RegExp("(?:\\s|^)"+Ac+Ac+"("+zr+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class ir{constructor(e){const t=typeof e=="string"?ir.parseShadow(e):e;Object.assign(this,ir.ownDefaults,t),this.id=vr()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,i=0]=(Rc.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(Rc,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Bh(new A(this.offsetX,this.offsetY),Ie(-e.angle)),r=new ue(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*De((Math.abs(t.x)+this.blur)/e.width,re.NUM_FRACTION_DIGITS)+20,i=100*De((Math.abs(t.y)+this.blur)/e.height,re.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(De(this.blur?this.blur/2:0,re.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(De(t.x,re.NUM_FRACTION_DIGITS),'" dy="').concat(De(t.y,re.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=ir.ownDefaults;return this.includeDefaultValues?e:rl(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}T(ir,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),T(ir,"type","shadow"),z.setClass(ir,"shadow");const Tn=(n,e,t)=>Math.max(n,Math.min(e,t)),Kb=[ct,le,ft,Tt,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",En,Pn],dr=[Ve,ht,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],Zb={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:le,originY:ct,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:Ve,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Jb=(n,e,t,r)=>-t*Math.cos(n/r*bs)+t+e,Qb=()=>!1;class ol{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:i=0,easing:o=Jb,onStart:a=si,onChange:l=si,onComplete:c=si,abort:u=Qb,target:h}=e;T(this,"_state","pending"),T(this,"durationProgress",0),T(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>oi(e),this.delay):oi(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:i}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),oi(this.tick)))}register(){xi.push(this)}unregister(){xi.remove(this)}abort(){this._state="aborted",this.unregister()}}const ev=["startValue","endValue"];class tv extends ol{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(k(k({},ke(e,ev)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const rv=["startValue","endValue"];class nv extends ol{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(k(k({},ke(e,rv)),{},{startValue:t,byValue:r.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const sv=["startValue","endValue","easing","onChange","onComplete","abort"],iv=(n,e,t,r)=>e+t*(1-Math.cos(n/r*bs)),xo=n=>n&&((e,t,r)=>n(new ue(e).toRgba(),t,r));class ov extends ol{constructor(e){let{startValue:t,endValue:r,easing:s=iv,onChange:i,onComplete:o,abort:a}=e,l=ke(e,sv);const c=new ue(t).getSource(),u=new ue(r).getSource();super(k(k({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:s,onChange:xo(i),onComplete:xo(o),abort:xo(a)}))}calculate(e){const[t,r,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,s].map(Math.round),Tn(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function $h(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new nv(n):new tv(n);return e.start(),e}function av(n){const e=new ov(n);return e.start(),e}class Me{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const i=sa(t,r),o=sa(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new A(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,r);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-r.x,u=s.y-r.y,h=e.x-r.x,d=e.y-r.y,f=c*d-u*h,p=a*d-l*h,g=u*a-c*l;if(g!==0){const y=f/g,b=p/g;return(i||0<=y&&y<=1)&&(o||0<=b&&b<=1)?new Me("Intersection").append(new A(e.x+y*a,e.y+y*l)):new Me}if(f===0||p===0){const y=i||o||Me.isPointContained(e,r,s)||Me.isPointContained(t,r,s)||Me.isPointContained(r,e,t)||Me.isPointContained(s,e,t);return new Me(y?"Coincident":void 0)}return new Me("Parallel")}static intersectSegmentLine(e,t,r,s){return Me.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return Me.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Me,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=Me.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,r){return Me.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Me,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=Me.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),r.append(a,l)):r.append(...c.points)}return i.length>0&&i.length===e.length?new Me("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),i=t.max(r),o=new A(i.x,s.y),a=new A(s.x,i.y);return Me.intersectPolygonPolygon(e,[s,o,i,a])}}class lv extends Sh{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?at(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=at(e,At(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new A(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,r,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>at(a,o))}return i}intersectsWithRect(e,t){return Me.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Me.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:i,height:o}=this.getBoundingRect();return r>=e.x&&r+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Me.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return sr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(ft,e),this._set(Tt,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Wr(_h(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||it.concat()}calcACoords(){const e=xs({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=vs(t,r),i=Ue(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:at({x:-a,y:-l},i),tr:at({x:a,y:-l},i),bl:at({x:-a,y:l},i),br:at({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,We(this.originX),We(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===r[o])?s.value:(this.group&&(t=Ue(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=Rb(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new A(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,i=0;this.strokeUniform&&(s=0,i=r);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new A(o*t.scaleX,a*t.scaleY):nl(o,a,Gi(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,r,s,i){let o=e.x,a=e.y;const l=We(s)-We(t),c=We(i)-We(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new A(o,a)}translateToCenterPoint(e,t,r){if(t===K&&r===K)return e;const s=this.translateToGivenOrigin(e,t,r,K,K);return this.angle?s.rotate(Ie(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,K,K,t,r);return this.angle?s.rotate(Ie(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?at(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new A(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),le,ct)}}const cv=["type"],uv=["extraParam"];let Zt=class li extends lv{static getDefaults(){return li.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){br("warn","Setting type has no effect",e)}constructor(e){super(),T(this,"_cacheContext",null),Object.assign(this,li.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=It(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=re.maxCacheSideLimit,i=re.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=re.perfLimitSizeTotal)return t<i&&(e.width=i),r<i&&(e.height=i),e;const o=t/r,[a,l]=Jn.limitDimsByArea(o),c=Tn(i,a,s),u=Tn(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||s!==e.height,u=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(c||u){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new A(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=Si(this.calcTransformMatrix());return new A(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==ft&&e!==Tt||(t=this._constrainScale(t)),e===ft&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof ir||(t=new ir(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ht&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const r=Yt(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=At(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,wt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(wt(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(r==null?void 0:r.viewportTransform)||it,a=i*s,l=o*s,c=t.nonScaling?new A(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*re.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!wt(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===ht?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=Yt({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new A(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(z.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Dh(this),r=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?mh():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(w=>new Ss(w,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&$b(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&zb(this,this.getViewportTransform()),this.setCoords();const c=It(),u=this.getBoundingRect(),h=this.shadow,d=new A;if(h){const w=h.blur,x=h.nonScaling?new A(1,1):this.getObjectScaling();d.x=2*Math.round(i(h.offsetX)+w)*i(x.x),d.y=2*Math.round(i(h.offsetY)+w)*i(x.y)}const f=u.width+d.x,p=u.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(p);const g=l(c);e.format==="jpeg"&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new A(g.width/2,g.height/2),K,K);const y=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const b=g.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ch(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=K,this.originY=K,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=i,this.top=o,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){xi.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Xt().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[i,o]=s;return r[i]=this._animate(i,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u=k(k({},r),{},{target:this,startValue:a??s.reduce((h,d)=>h[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(h,d,f)=>{s.reduce((p,g,y)=>(y===s.length-1&&(p[g]=h),p[g]),this),l&&l(h,d,f)},onComplete:(h,d,f)=>{this.setCoords(),c&&c(h,d,f)}});return i?av(u):$h(u)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(s===r[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...r.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=r._objects.indexOf(s),a=r._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(li.customProperties,this.constructor.customProperties||[]);let t;const r=re.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:f,height:p,strokeWidth:g,strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:w,strokeUniform:x,strokeMiterLimit:v,scaleX:C,scaleY:O,angle:P,flipX:D,flipY:B,opacity:m,visible:E,backgroundColor:R,fillRule:I,paintFirst:F,globalCompositeOperation:M,skewX:L,skewY:$}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const W=ne=>De(ne,r),N=k(k({},Mn(this,e)),{},{type:this.constructor.type,version:Qo,originX:h,originY:d,left:W(c),top:W(u),width:W(f),height:W(p),fill:Tc(i)?i.toObject():i,stroke:Tc(o)?o.toObject():o,strokeWidth:W(g),strokeDashArray:l&&l.concat(),strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:w,strokeUniform:x,strokeMiterLimit:W(v),scaleX:W(C),scaleY:W(O),angle:W(P),flipX:D,flipY:B,opacity:W(m),shadow:a&&a.toObject(),visible:E,backgroundColor:R,fillRule:I,paintFirst:F,globalCompositeOperation:M,skewX:W(L),skewY:W($)},t?{clipPath:t}:null);return this.includeDefaultValues?N:this._removeDefaultValues(N)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return rl(e,(s,i)=>{if(i===le||i===ct||i==="type")return!0;const o=r[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=ke(e,cv),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,i=ke(r,uv);return Ui(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};T(Zt,"stateProperties",Kb),T(Zt,"cacheProperties",dr),T(Zt,"ownDefaults",Zb),T(Zt,"type","FabricObject"),T(Zt,"colorProperties",[Ve,ht,"backgroundColor"]),T(Zt,"customProperties",[]),z.setClass(Zt),z.setClass(Zt,"object");const Dn=(n,e,t)=>(r,s,i,o)=>{const a=e(r,s,i,o);return a&&Ah(n,k(k({},jh(r,s,i,o)),t)),a};function An(n){return(e,t,r,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=n(e,t,r,s);return i.setPositionByOrigin(c,t.originX,t.originY),u}}const jc=Dn(os,An((n,e,t,r)=>{const s=sl(e,e.originX,e.originY,t,r);if(We(e.originX)===We(K)||We(e.originX)===We(je)&&s.x<0||We(e.originX)===We(le)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=Rh(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function hv(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?ht:Ve,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor);let u,h=e,d=t;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,n.scale(1,o/i),d=t*i/o):o>i?(u=o,n.scale(i/o,1),h=e*o/i):u=i,n.beginPath(),n.arc(h,d,u/2,0,yi,!1),n[l](),c&&n.stroke(),n.restore()}function dv(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?ht:Ve,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor),u=i/2,h=o/2;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",n.translate(e,t);const d=s.getTotalAngle();n.rotate(Ie(d)),n["".concat(l,"Rect")](-u,-h,i,o),c&&n.strokeRect(-u,-h,i,o),n.restore()}class Pt{constructor(e){T(this,"visible",!0),T(this,"actionName",Yi),T(this,"angle",0),T(this,"x",0),T(this,"y",0),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"sizeX",0),T(this,"sizeY",0),T(this,"touchSizeX",0),T(this,"touchSizeY",0),T(this,"cursorStyle","crosshair"),T(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&Me.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new A(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,i,o){const a=el([vs(r,s),xs({angle:e}),tl((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new A(-.5,-.5).transform(a),tr:new A(.5,-.5).transform(a),br:new A(.5,.5).transform(a),bl:new A(-.5,.5).transform(a)}}render(e,t,r,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?hv.call(this,e,t,r,s,i):dv.call(this,e,t,r,s,i)}}const fv=(n,e,t)=>t.lockRotation?wi:e.cursorStyle,pv=Dn(bh,An((n,e,t,r)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(Rt(s,"lockRotation"))return!1;const h=Math.atan2(o-u.y,i-u.x),d=Math.atan2(r-u.y,t-u.x);let f=Wr(d-h+a);if(s.snapAngle&&s.snapAngle>0){const g=s.snapAngle,y=s.snapThreshold||g,b=Math.ceil(f/g)*g,w=Math.floor(f/g)*g;Math.abs(f-w)<y?f=w:Math.abs(f-b)<y&&(f=b)}f<0&&(f=360+f),f%=360;const p=s.angle!==f;return s.angle=f,p}));function Wh(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function zh(n,e,t){const r=Rt(n,"lockScalingX"),s=Rt(n,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=n;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const gv=["e","se","s","sw","w","nw","n","ne","e"],Yn=(n,e,t)=>{const r=Wh(n,t);if(zh(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return wi;const s=Ih(t,e);return"".concat(gv[s],"-resize")};function al(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=Wh(n,i);let l,c,u,h,d,f;if(zh(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=sl(e,e.originX,e.originY,t,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,f=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=f),Rt(i,"lockScalingFlip")&&(e.signX!==d||e.signY!==f))return!1;if(h=i._getTransformedDimensions(),a&&!o){const y=Math.abs(l.x)+Math.abs(l.y),{original:b}=e,w=y/(Math.abs(h.x*b.scaleX/i.scaleX)+Math.abs(h.y*b.scaleY/i.scaleY));c=b.scaleX*w,u=b.scaleY*w}else c=Math.abs(l.x*i.scaleX/h.x),u=Math.abs(l.y*i.scaleY/h.y);Rh(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Ec(e.originX),c*=-1,e.signX=d),e.signY!==f&&o!=="x"&&(e.originY=Ec(e.originY),u*=-1,e.signY=f)}const p=i.scaleX,g=i.scaleY;return o?(o==="x"&&i.set(ft,c),o==="y"&&i.set(Tt,u)):(!Rt(i,"lockScalingX")&&i.set(ft,c),!Rt(i,"lockScalingY")&&i.set(Tt,u)),p!==i.scaleX||g!==i.scaleY}const Ps=Dn(Xi,An((n,e,t,r)=>al(n,e,t,r))),mv=Dn(Xi,An((n,e,t,r)=>al(n,e,t,r,{by:"x"}))),yv=Dn(Xi,An((n,e,t,r)=>al(n,e,t,r,{by:"y"}))),bv=["target","ex","ey","skewingSide"],So={x:{counterAxis:"y",scale:ft,skew:En,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Tt,skew:Pn,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},vv=["ns","nesw","ew","nwse"],xv=(n,e,t)=>{if(e.x!==0&&Rt(t,"lockSkewingY")||e.y!==0&&Rt(t,"lockSkewingX"))return wi;const r=Ih(t,e)%4;return"".concat(vv[r],"-resize")};function Vh(n,e,t,r,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=So[n];if(Rt(i,l))return!1;const{origin:h,flip:d}=So[o],f=We(t[h])*(i[d]?-1:1),p=-Math.sign(f)*(i[u]?-1:1),g=.5*-((i[c]===0&&sl(t,K,K,r,s)[n]>0||i[c]>0?1:-1)*p)+.5;return Dn(vh,An((b,w,x,v)=>function(C,O,P){let{target:D,ex:B,ey:m,skewingSide:E}=O,R=ke(O,bv);const{skew:I}=So[C],F=P.subtract(new A(B,m)).divide(new A(D.scaleX,D.scaleY))[C],M=D[I],L=R[I],$=Math.tan(Ie(L)),W=C==="y"?D._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:D._getTransformedDimensions({scaleX:1,scaleY:1}).y,N=2*F*E/Math.max(W,1)+$,ne=Wr(Math.atan(N));D.set(I,ne);const ce=M!==D[I];if(ce&&C==="y"){const{skewX:Be,scaleX:te}=D,J=D._getTransformedDimensions({skewY:M}),se=D._getTransformedDimensions(),Ee=Be!==0?J.x/se.x:1;Ee!==1&&D.set(ft,Ee*te)}return ce}(n,w,new A(x,v))))(e,k(k({},t),{},{[a]:g,skewingSide:p}),r,s)}const Sv=(n,e,t,r)=>Vh("x",n,e,t,r),Cv=(n,e,t,r)=>Vh("y",n,e,t,r);function Ji(n,e){return n[e.canvas.altActionKey]}const Ms=(n,e,t)=>{const r=Ji(n,t);return e.x===0?r?En:Tt:e.y===0?r?Pn:ft:""},dn=(n,e,t)=>Ji(n,t)?xv(0,e,t):Yn(n,e,t),Ic=(n,e,t,r)=>Ji(n,e.target)?Cv(n,e,t,r):mv(n,e,t,r),Fc=(n,e,t,r)=>Ji(n,e.target)?Sv(n,e,t,r):yv(n,e,t,r),Hh=()=>({ml:new Pt({x:-.5,y:0,cursorStyleHandler:dn,actionHandler:Ic,getActionName:Ms}),mr:new Pt({x:.5,y:0,cursorStyleHandler:dn,actionHandler:Ic,getActionName:Ms}),mb:new Pt({x:0,y:.5,cursorStyleHandler:dn,actionHandler:Fc,getActionName:Ms}),mt:new Pt({x:0,y:-.5,cursorStyleHandler:dn,actionHandler:Fc,getActionName:Ms}),tl:new Pt({x:-.5,y:-.5,cursorStyleHandler:Yn,actionHandler:Ps}),tr:new Pt({x:.5,y:-.5,cursorStyleHandler:Yn,actionHandler:Ps}),bl:new Pt({x:-.5,y:.5,cursorStyleHandler:Yn,actionHandler:Ps}),br:new Pt({x:.5,y:.5,cursorStyleHandler:Yn,actionHandler:Ps}),mtr:new Pt({x:0,y:-.5,actionHandler:pv,cursorStyleHandler:fv,offsetY:-40,withConnection:!0,actionName:Ja})}),_v=()=>({mr:new Pt({x:.5,y:0,actionHandler:jc,cursorStyleHandler:dn,actionName:os}),ml:new Pt({x:-.5,y:0,actionHandler:jc,cursorStyleHandler:dn,actionName:os})}),wv=()=>k(k({},Hh()),_v());class cs extends Zt{static getDefaults(){return k(k({},super.getDefaults()),cs.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),cs.ownDefaults),this.setOptions(e)}static createControls(){return{controls:Hh()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(Yi))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[i,o]=r[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=vs(t.x,t.y),s=xs({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=Ue(r,s),o=Ue(e,i),a=Ue(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?Si(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(Ie(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=k({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,i=k({hasBorders:r,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=Ue(o,this.calcTransformMatrix()),u=Si(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(Ie(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const i=nl(this.width,this.height,Gi(t)),o=this.isStrokeAccountedForInDimensions()?Qa:(this.strokeUniform?new A().scalarAdd(this.canvas?this.canvas.getZoom():1):new A(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=k({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function qh(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}T(cs,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Je extends cs{}qh(Je,[Fh]),z.setClass(Je),z.setClass(Je,"object");const Tv=(n,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:i}=n.getImageData(e-r,t-r,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class Xh{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new A(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new A(1/this.options.scaleX,1/this.options.scaleY):new A(1,1)}createSideVector(e,t){const r=sa(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new A(e);return t.y+=t.x*Math.tan(Ie(this.options.skewY)),t.x+=t.y*Math.tan(Ie(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const kv=new A;class Sn extends Xh{static getOrthogonalRotationFactor(e,t){const r=t?oa(e,t):Gb(e);return Math.abs(r)<bs?-1:1}constructor(e,t,r,s){super(s),T(this,"AB",void 0),T(this,"AC",void 0),T(this,"alpha",void 0),T(this,"bisector",void 0),this.A=new A(e),this.B=new A(t),this.C=new A(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=oa(this.AB,this.AC),this.bisector=il(Bh(this.AB.eq(kv)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=Nh(s),o=Sn.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,r*o)}projectBevel(){const e=[];return(this.alpha%yi==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),i=this.options.strokeUniform?ia(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return ia(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new A(Sn.getOrthogonalRotationFactor(this.bisector),Sn.getOrthogonalRotationFactor(new A(this.bisector.y,this.bisector.x)));return[new A(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new A(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{Dc(i,e,t)&&r.push(this.A.add(i))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new A(Math.tan(Ie(s)),Math.tan(Ie(i))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new A(Math.sqrt(Math.max(u**2-h**2,0)),h),f=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),p=new A(f,Math.sqrt(Math.max(u**2-f**2,0)));return[p,p.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(g=>this.applySkew(l?g.multiply(this.strokeUniformScalar):g)).forEach(g=>{Dc(g,e,t)&&r.push(this.applySkew(this.A).add(g))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%yi==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),i=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Qn(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Lc extends Xh{constructor(e,t,r){super(r),this.A=new A(e),this.T=new A(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(Nh(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new A(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new Sn(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new A(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(il(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const Ov=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const s=n.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new A(o)),i),[new A(n[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?r.push(...new Lc(i,i,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new Sn(i,l,c,e).project()):r.push(...new Lc(i,o===0?c:l,e).project())}),r},ll=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=k({},n[t][r])})}),e},Ev=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),cl=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=Pv(n,r))!==!1&&e.push(t);return e},Pv=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},ul=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},Mv=(n,e)=>{const t=e.split(`
`),r=[];let s=-1,i={};n=ll(n);for(let o=0;o<t.length;o++){const a=cl(t[o]);if(n[o])for(let l=0;l<a.length;l++){s++;const c=n[o][l];c&&Object.keys(c).length>0&&(ul(i,c,!0)?r.push({start:s,end:s+1,style:c}):r[r.length-1].end++),i=c||{}}else s+=a.length,i={}}return r},Dv=(n,e)=>{if(!Array.isArray(n))return ll(n);const t=e.split(Za),r={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=cl(t[o]);for(let l=0;l<a.length;l++)s++,n[i]&&n[i].start<=s&&s<n[i].end&&(r[o]=r[o]||{},r[o][l]=k({},n[i].style),s===n[i].end-1&&i++)}return r},Cr=["display","transform",Ve,"fill-opacity","fill-rule","opacity",ht,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Bc(n,e){const t=n.nodeName,r=n.getAttribute("class"),s=n.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function Av(n,e){let t=!0;const r=Bc(n,e.pop());return r&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=Bc(s=s.parentElement,o);return i.length===0}(n,e)),r&&t&&e.length===0}const Rv=n=>{var e;return(e=Xb[n])!==null&&e!==void 0?e:n},jv=new RegExp("(".concat(zr,")"),"gi"),Iv=n=>n.replace(jv," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Nc,$c,Wc,zc,Vc,Hc,qc;const st="(".concat(zr,")"),Fv=String.raw(Nc||(Nc=Sr(["(skewX)(",")"],["(skewX)\\(","\\)"])),st),Lv=String.raw($c||($c=Sr(["(skewY)(",")"],["(skewY)\\(","\\)"])),st),Bv=String.raw(Wc||(Wc=Sr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),st,st,st),Nv=String.raw(zc||(zc=Sr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),st,st),$v=String.raw(Vc||(Vc=Sr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),st,st),Wv=String.raw(Hc||(Hc=Sr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),st,st,st,st,st,st),hl="(?:".concat(Wv,"|").concat($v,"|").concat(Bv,"|").concat(Nv,"|").concat(Fv,"|").concat(Lv,")"),zv="(?:".concat(hl,"*)"),Vv=String.raw(qc||(qc=Sr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),zv),Hv=new RegExp(Vv),qv=new RegExp(hl),Xv=new RegExp(hl,"g");function aa(n){const e=[];if(!(n=Iv(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!Hv.test(n))return[...it];for(const t of n.matchAll(Xv)){const r=qv.exec(t[0]);if(!r)continue;let s=it;const i=r.filter(p=>!!p),[,o,...a]=i,[l,c,u,h,d,f]=a.map(p=>parseFloat(p));switch(o){case"translate":s=vs(l,c);break;case Ja:s=xs({angle:l},{x:c,y:u});break;case Yi:s=tl(l,c);break;case En:s=Th(l);break;case Pn:s=kh(l);break;case"matrix":s=[l,c,u,h,d,f]}e.push(s)}return el(e)}function Yv(n,e,t,r){const s=Array.isArray(e);let i,o=e;if(n!==Ve&&n!==ht||e!==ut){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===ut?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Ue(t.transformMatrix,aa(e)):aa(e);else if(n==="visible")o=e!==ut&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?le:e==="end"?je:K;else if(n==="charSpacing")i=vn(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(Ve),l=e.indexOf(ht);o=Ve,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=ht)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(vn):vn(e,r)}}else o="";return!s&&isNaN(i)?o:i}function Gv(n,e){const t=n.match(qb);if(!t)return;const r=t[1],s=t[3],i=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=vn(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function Uv(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function Kv(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?Uv(t,e):function(r,s){Object.entries(r).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const Zv={stroke:"strokeOpacity",fill:"fillOpacity"};function fr(n,e,t){if(!n)return{};let r,s={},i=Ka;n.parentNode&&Mc.test(n.parentNode.nodeName)&&(s=fr(n.parentElement,e,t),s.fontSize&&(r=i=vn(s.fontSize)));const o=k(k(k({},e.reduce((c,u)=>{const h=n.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)Av(c,d.split(" "))&&(h=k(k({},h),u[d]));return h}(n,t)),Kv(n));o[vo]&&n.setAttribute(vo,o[vo]),o[bo]&&(r=vn(o[bo],i),o[bo]="".concat(r));const a={};for(const c in o){const u=Rv(c),h=Yv(u,o[c],s,r);a[u]=h}a.font&&Gv(a.font,a);const l=k(k({},s),a);return Mc.test(n.nodeName)?l:function(c){const u=Je.getDefaults();return Object.entries(Zv).forEach(h=>{let[d,f]=h;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const p=new ue(c[d]);c[d]=p.setAlpha(De(p.getAlpha()*c[f],2)).toRgba()}),c}(l)}const Jv=["left","top","width","height","visible"],Yh=["rx","ry"];class mt extends Je{static getDefaults(){return k(k({},super.getDefaults()),mt.ownDefaults)}constructor(e){super(),Object.assign(this,mt.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,i=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-gr*o,i,s+t,i+gr*a,s+t,i+a),e.lineTo(s+t,i+r-a),l&&e.bezierCurveTo(s+t,i+r-gr*a,s+t-gr*o,i+r,s+t-o,i+r),e.lineTo(s+o,i+r),l&&e.bezierCurveTo(s+gr*o,i+r,s,i+r-gr*a,s,i+r-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+gr*a,s+gr*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...Yh,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=fr(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,u=ke(s,Jv);return new this(k(k(k({},t),u),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}T(mt,"type","Rect"),T(mt,"cacheProperties",[...dr,...Yh]),T(mt,"ownDefaults",{rx:0,ry:0}),T(mt,"ATTRIBUTE_NAMES",[...Cr,"x","y","rx","ry","width","height"]),z.setClass(mt),z.setSVGClass(mt);const rr="initialization",Ti="added",dl="removed",ki="imperative",Gh=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:i,group:o}=e,a=o&&o!==n?Ki(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?Wb(new A(r,r),void 0,n.calcTransformMatrix()):Qa,h=!t&&c?r:0,d=nl(s+h,i+h,el([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class Qi{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===rr||t===ki||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==rr&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===ki&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=sr(e.map(h=>Gh(s,h)).reduce((h,d)=>h.concat(d),[])),c=new A(a,l),u=new A(i,o).add(c.scalarDivide(2));if(r===rr){const h=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new A(0,0),size:h}}return{center:u.transform(s.calcOwnMatrix()),size:c}}}T(Qi,"type","strategy");class la extends Qi{shouldPerformLayout(e){return!0}}T(la,"type","fit-content"),z.setClass(la);const Qv=["strategy"],ex=["target","strategy","bubbles","prevStrategy"],Uh="layoutManager";class us{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new la;T(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=k(k({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[vi,yh,os,bh,Xi,vh,bi,kb,Ob].map(s=>e.on(s,i=>this.performLayout(s===vi?{type:"object_modified",trigger:s,e:i,target:r}:{type:"object_modifying",trigger:s,e:i,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===rr||r===Ti?this.subscribeTargets(e):r===dl&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===ki&&e.deep){const i=ke(e,Qv);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(k(k({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,i=r.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===rr?new A:t.getRelativeCenterPoint(),{center:a,correction:l=new A,relativeCorrection:c=new A}=i,u=o.subtract(a).add(l).transform(s===rr?it:At(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:i}=t;var o,a;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===rr?r.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*We(r.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*We(r.originY)}):(r.setPositionByOrigin(i,K,K),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:i,prevStrategy:o}=e,a=ke(e,ex),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const c=r.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(k(k({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:Uh,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}z.setClass(us,Uh);const tx=["type","objects","layoutManager"];class rx extends us{performLayout(){}}class Br extends xh(Je){static getDefaults(){return k(k({},super.getDefaults()),Br.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"_activeObjects",[]),T(this,"__objectSelectionTracker",void 0),T(this,"__objectSelectionDisposer",void 0),Object.assign(this,Br.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new us,this.layoutManager.performLayout({type:rr,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(br("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(br("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(Ti,s),i}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...i);return this._onAfterObjectsChange(Ti,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(dl,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(r);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&_i(e,Ue(At(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(_i(e,Ue(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Je.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...At(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(k({target:this,type:ki},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=r;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return k(k(k({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=mt.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:i}=e,o=ke(e,tx);return Promise.all([as(s,t),Ui(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,k(k(k({},o),c),{},{layoutManager:new rx}));if(i){const h=z.getClass(i.type),d=z.getClass(i.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new us;return u.layoutManager.subscribeTargets({type:rr,target:u,targets:u.getObjects()}),u.setCoords(),u})}}T(Br,"type","Group"),T(Br,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),z.setClass(Br);const nx=(n,e)=>Math.min(e.width/n.width,e.height/n.height),sx=(n,e)=>Math.max(e.width/n.width,e.height/n.height),ca="\\s*,?\\s*",zn="".concat(ca,"(").concat(zr,")"),ix="".concat(zn).concat(zn).concat(zn).concat(ca,"([01])").concat(ca,"([01])").concat(zn).concat(zn),ox={m:"l",M:"L"},ax=(n,e,t,r,s,i,o,a,l,c,u)=>{const h=cr(n),d=ur(n),f=cr(e),p=ur(e),g=t*s*f-r*i*p+o,y=r*s*f+t*i*p+a;return["C",c+l*(-t*s*d-r*i*h),u+l*(-r*s*d+t*i*h),g+l*(t*s*p+r*i*f),y+l*(r*s*p-t*i*f),g,y]},Xc=(n,e,t,r)=>{const s=Math.atan2(e,n),i=Math.atan2(r,t);return i>=s?i-s:2*Math.PI-(s-i)};function Yc(n,e,t,r,s,i,o,a){let l;if(re.cachesBoundsOfCurve&&(l=[...arguments].join(),Jn.boundsOfCurveCache[l]))return Jn.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*n-12*t+6*s,p=-3*n+9*t-9*s+3*o,g=3*t-3*n;for(let v=0;v<2;++v){if(v>0&&(f=6*e-12*r+6*i,p=-3*e+9*r-9*i+3*a,g=3*r-3*e),u(p)<1e-12){if(u(f)<1e-12)continue;const B=-g/f;0<B&&B<1&&h.push(B);continue}const C=f*f-4*g*p;if(C<0)continue;const O=c(C),P=(-f+O)/(2*p);0<P&&P<1&&h.push(P);const D=(-f-O)/(2*p);0<D&&D<1&&h.push(D)}let y=h.length;const b=y,w=Kh(n,e,t,r,s,i,o,a);for(;y--;){const{x:v,y:C}=w(h[y]);d[0][y]=v,d[1][y]=C}d[0][b]=n,d[1][b]=e,d[0][b+1]=o,d[1][b+1]=a;const x=[new A(Math.min(...d[0]),Math.min(...d[1])),new A(Math.max(...d[0]),Math.max(...d[1]))];return re.cachesBoundsOfCurve&&(Jn.boundsOfCurveCache[l]=x),x}const lx=(n,e,t)=>{let[r,s,i,o,a,l,c,u]=t;const h=((d,f,p,g,y,b,w)=>{if(p===0||g===0)return[];let x=0,v=0,C=0;const O=Math.PI,P=w*Ua,D=ur(P),B=cr(P),m=.5*(-B*d-D*f),E=.5*(-B*f+D*d),R=p**2,I=g**2,F=E**2,M=m**2,L=R*I-R*F-I*M;let $=Math.abs(p),W=Math.abs(g);if(L<0){const G=Math.sqrt(1-L/(R*I));$*=G,W*=G}else C=(y===b?-1:1)*Math.sqrt(L/(R*F+I*M));const N=C*$*E/W,ne=-C*W*m/$,ce=B*N-D*ne+.5*d,Be=D*N+B*ne+.5*f;let te=Xc(1,0,(m-N)/$,(E-ne)/W),J=Xc((m-N)/$,(E-ne)/W,(-m-N)/$,(-E-ne)/W);b===0&&J>0?J-=2*O:b===1&&J<0&&(J+=2*O);const se=Math.ceil(Math.abs(J/O*2)),Ee=[],Pe=J/se,et=8/3*Math.sin(Pe/4)*Math.sin(Pe/4)/Math.sin(Pe/2);let ge=te+Pe;for(let G=0;G<se;G++)Ee[G]=ax(te,ge,B,D,$,W,ce,Be,et,x,v),x=Ee[G][5],v=Ee[G][6],te=ge,ge+=Pe;return Ee})(c-n,u-e,s,i,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=n,h[d][2]+=e,h[d][3]+=n,h[d][4]+=e,h[d][5]+=n,h[d][6]+=e;return h},cx=n=>{let e=0,t=0,r=0,s=0;const i=[];let o,a=0,l=0;for(const c of n){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],s=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":lx(e,t,u).forEach(d=>i.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=s,h=["Z"]}h?(i.push(h),o=h[0]):o=""}return i},Oi=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),Kh=(n,e,t,r,s,i,o,a)=>l=>{const c=l**3,u=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new A(o*c+s*u+t*h+n*d,a*c+i*u+r*h+e*d)},Zh=n=>n**2,Jh=n=>2*n*(1-n),Qh=n=>(1-n)**2,ux=(n,e,t,r,s,i,o,a)=>l=>{const c=Zh(l),u=Jh(l),h=Qh(l),d=3*(h*(t-n)+u*(s-t)+c*(o-s)),f=3*(h*(r-e)+u*(i-r)+c*(a-i));return Math.atan2(f,d)},hx=(n,e,t,r,s,i)=>o=>{const a=Zh(o),l=Jh(o),c=Qh(o);return new A(s*a+t*l+n*c,i*a+r*l+e*c)},dx=(n,e,t,r,s,i)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(s-t)),c=2*(a*(r-e)+o*(i-r));return Math.atan2(c,l)},Gc=(n,e,t)=>{let r=new A(e,t),s=0;for(let i=1;i<=100;i+=1){const o=n(i/100);s+=Oi(r.x,r.y,o.x,o.y),r=o}return s},fx=(n,e)=>{let t,r=0,s=0,i={x:n.x,y:n.y},o=k({},i),a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;s<e&&a>1e-4;)o=c(r),l=r,t=Oi(i.x,i.y,o.x,o.y),t+s>e?(r-=a,a/=2):(i=o,r+=a,s+=t);return k(k({},o),{},{angle:u(l)})},ed=n=>{let e,t,r=0,s=0,i=0,o=0,a=0;const l=[];for(const c of n){const u={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=u,t.length=Oi(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=Kh(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=ux(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Gc(e,s,i),s=c[5],i=c[6];break;case"Q":e=hx(s,i,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=dx(s,i,c[1],c[2],c[3],c[4]),t.length=Gc(e,s,i),s=c[3],i=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=Oi(s,i,o,a),s=o,i=a}r+=t.length,l.push(t)}return l.push({length:r,x:s,y:i}),l},px=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ed(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],i=e/s.length,o=n[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return k(k({},new A(s.x,s.y).lerp(new A(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return k(k({},new A(s.x,s.y).lerp(new A(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return fx(s,e)}},gx=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Uc=new RegExp(ix,"g"),mx=new RegExp(zr,"gi"),yx={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},bx=n=>{var e;const t=[],r=(e=n.match(gx))!==null&&e!==void 0?e:[];for(const s of r){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=yx[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){Uc.lastIndex=0;for(let l=null;l=Uc.exec(s);)a.push(...l.slice(1))}else a=s.match(mx)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=ox[i];c[0]=l>0&&u?u:i;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},vx=(n,e)=>n.map(t=>t.map((r,s)=>s===0||e===void 0?r:De(r,e)).join(" ")).join(" ");function ua(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,i]=r;return t.setProperty(s,i)}))}class xx extends Mh{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),T(this,"upper",void 0),T(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=It();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=On().createElement("div");return e.setAttribute("data-fabric","wrapper"),ua(e,{position:"relative"}),Oc(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;ua(e,k(k({},r),{},{"touch-action":s?"manipulation":ut})),Oc(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;Ph(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),ta(this.upper.el,e),ta(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),Xt().dispose(this.upper.el),delete this.upper,delete this.container}}class eo extends Ss{constructor(){super(...arguments),T(this,"targets",[]),T(this,"_hoveredTargets",[]),T(this,"_objectsToRender",void 0),T(this,"_currentTransform",null),T(this,"_groupSelector",null),T(this,"contextTopDirty",!1)}static getDefaults(){return k(k({},super.getDefaults()),eo.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new xx(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-r+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return Tv(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===Yi||t===ft||t===Tt||t===os?s=this.centeredScaling||e.centeredScaling:t===Ja&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=je:["mr","tr","br"].includes(t)&&(r.x=le),["tl","mt","tr"].includes(t)?r.y=ea:["bl","mb","br"].includes(t)&&(r.y=ct)),r}_setupCurrentTransform(e,t,r){var s;const i=t.group?xn(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):Hb,c=((f,p,g,y)=>{if(!p||!f)return"drag";const b=y.controls[p];return b.getActionName(g,b,y)})(r,o,e,t),u=e[this.centeredKey],h=this._shouldCenterTransform(t,c,u)?{x:K,y:K}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:h.x,originY:h.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:Ie(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:k(k({},Dh(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new A(t,r).transform(this.viewportTransform),a=new A(t+s,r+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,Je.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,ra(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=i,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),h=cr(u)*i,d=ur(u)*i,f=h+d,p=h-d;r=[new A(o.x-p,o.y-f),new A(a.x+f,a.y-p),new A(l.x+p,l.y+f),new A(c.x-f,c.y+p)]}return Me.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,xn(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(ii(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&ii(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!ii(o)||!o.interactive)return o}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let i=Lb(e),o=s.width||0,a=s.height||0;o&&a||(ct in s&&ea in s&&(a=Math.abs(s.top-s.bottom)),je in s&&le in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=xn(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new A(1,1):new A(r.width/o,r.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=It(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Dr(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Dr(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Dr(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(vi,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Dr(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,r);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Dr(t)&&this._activeObject===t){const r=Mn(e,["angle","flipX","flipY",le,ft,Tt,En,Pn,ct]);return Nb(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}T(eo,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class Sx{constructor(e){T(this,"targets",[]),T(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),hn(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const Cx=["target","oldTarget","fireCanvas","e"],gt={passive:!1},an=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},mr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},vt=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},_x={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class ha extends eo{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),T(this,"_isClick",void 0),T(this,"textEditingManager",new Sx(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(mr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(Eh(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,gt),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,gt)}removeListeners(){this.addOrRemove(vt,"remove");const e=this._getEventPrefix(),t=Dt(this.upperCanvasEl);vt(t,"".concat(e,"up"),this._onMouseUp),vt(t,"touchend",this._onTouchEnd,gt),vt(t,"".concat(e,"move"),this._onMouseMove,gt),vt(t,"touchmove",this._onMouseMove,gt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=k({e},an(this,e));this.fire("mouse:out",k(k({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",k({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",k(k({},r),{},{target:s})),s&&s.fire("mouseout",k({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",k({e},an(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void mr(this.upperCanvasEl,"drag",this._onDragProgress)}na(e)}_renderDragEffects(e,t,r){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==r&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==ut,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};vt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:r,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",k({e,target:t,subTargets:r,dragSource:this._dragSource},an(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&na(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=Dt(s);mr(o,"touchend",this._onTouchEnd,gt),t&&mr(o,"touchmove",this._onMouseMove,gt),vt(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();vt(t,"".concat(r,"move"),this._onMouseMove,gt);const s=Dt(t);mr(s,"".concat(r,"up"),this._onMouseUp),mr(s,"".concat(r,"move"),this._onMouseMove,gt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=Dt(this.upperCanvasEl);vt(r,"touchend",this._onTouchEnd,gt),vt(r,"touchmove",this._onMouseMove,gt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{mr(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=Dt(this.upperCanvasEl);vt(s,"".concat(r,"up"),this._onMouseUp),vt(s,"".concat(r,"move"),this._onMouseMove,gt),mr(t,"".concat(r,"move"),this._onMouseMove,gt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!s){const u=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!u&&i===this._activeObject)}if(i){const u=i.findControl(this.getViewportPoint(e),ra(e)),{key:h,control:d}=u||{};if(l=h,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(d){const f=d.getMouseUpHandler(e,i,d);f&&(a=this.getScenePoint(e),f.call(d,e,r,a.x,a.y))}i.isMoving=!1}if(r&&(r.target!==i||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],h=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire(e,t);return t}_handleEvent(e,t){const r=this._target,s=this.targets||[],i=k(k({e,target:r,subTargets:s},an(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),i),r&&r.fire("mouse".concat(t),i);for(let o=0;o<s.length;o++)s[o]!==r&&s[o].fire("mouse".concat(t),i)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(t){const o=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),ra(e));if(t===this._activeObject&&(a||!i)){this._setupCurrentTransform(e,t,o);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=xn(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:i,e:o}=t,a=ke(t,Cx);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=_x[e],d=s!==r;if(s&&d){const f=k(k({},a),{},{e:o,target:s,nextTarget:r},an(this,o));i&&this.fire(h,f),s.fire(c,f)}if(r&&d){const f=k(k({},a),{},{e:o,target:r,previousTarget:s},an(this,o));i&&this.fire(u,f),r.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,i=s.group?xn(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,r.x,r.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=Dr(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=Dr(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const i=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{r.isEditing&&r.exitEditing();const i=new(z.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new A(t,r),a=o.add(new A(s,i)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=z.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const td={x1:0,y1:0,x2:0,y2:0},wx=k(k({},td),{},{r1:0,r2:0}),fn=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,Tx=/^(\d+\.\d+)%|(\d+)%$/;function rd(n){return n&&Tx.test(n)}function nd(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(rd(n)?100:1):NaN;return Tn(0,fn(t,e),1)}const kx=/\s*;\s*/,Ox=/\s*:\s*/;function Ex(n,e){let t,r;const s=n.getAttribute("style");if(s){const o=s.split(kx);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(Ox).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const i=new ue(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:nd(n.getAttribute("offset"),0),color:i.toRgb(),opacity:fn(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function Px(n,e){const t=[],r=n.getElementsByTagName("stop"),s=nd(e,1);for(let i=r.length;i--;)t.push(Ex(r[i],s));return t}function sd(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function id(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Et(n,e){return n.getAttribute(e)}function Mx(n,e){return function(t,r){let s,{width:i,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?s=1:u==="-Infinity"?s=0:(s=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&rd(u)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(sd(n)==="linear"?function(t){return{x1:Et(t,"x1")||0,y1:Et(t,"y1")||0,x2:Et(t,"x2")||"100%",y2:Et(t,"y2")||0}}(n):function(t){return{x1:Et(t,"fx")||Et(t,"cx")||"50%",y1:Et(t,"fy")||Et(t,"cy")||"50%",r1:0,x2:Et(t,"cx")||"50%",y2:Et(t,"cy")||"50%",r2:Et(t,"r")||"50%"}}(n),k(k({},e),{},{gradientUnits:id(n)}))}class Ds{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:k(k({},t==="radial"?wx:td),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(vr()):vr()})}addColorStop(e){for(const t in e){const r=new ue(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return k(k({},Mn(this,e)),{},{type:this.type,coords:k({},this.coords),colorStops:this.colorStops.map(t=>k({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():it.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>k({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Ci(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:f,y2:p}=this.coords;r.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',f,'" y2="',p,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:f,y2:p,r1:g,r2:y}=this.coords,b=g>y;r.push("<radialGradient ",u,' cx="',b?h:f,'" cy="',b?d:p,'" r="',b?g:y,'" fx="',b?f:h,'" fy="',b?p:d,`">
`),b&&(o.reverse(),o.forEach(x=>{x.offset=1-x.offset}));const w=Math.min(g,y);if(w>0){const x=w/Math.max(g,y);o.forEach(v=>{v.offset+=x*(1-v.offset)})}}return o.forEach(h=>{let{color:d,offset:f,opacity:p}=h;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,p!==void 0?";stop-opacity: "+p:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,s,i):e.createRadialGradient(t,r,o,s,i,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new ue(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(k(k({},e),{},{colorStops:t?t.map(s=>k({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=id(e),i=t._findCenterFromElement();return new this(k({id:e.getAttribute("id")||void 0,type:sd(e),coords:Mx(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:Px(e,r.opacity),gradientUnits:s,gradientTransform:aa(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}T(Ds,"type","Gradient"),z.setClass(Ds,"gradient"),z.setClass(Ds,"linear"),z.setClass(Ds,"radial");const Dx=["type","source","patternTransform"];class Co{get type(){return"pattern"}set type(e){br("warn","Setting type has no effect",e)}constructor(e){T(this,"repeat","repeat"),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"crossOrigin",""),this.id=vr(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return k(k({},Mn(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:De(this.offsetX,re.NUM_FRACTION_DIGITS),offsetY:De(this.offsetY,re.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:i,id:o}=this,a=fn(this.offsetX/t,0),l=fn(this.offsetY/r,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):fn(s.width/t,0),u=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):fn(s.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:i}=e,o=ke(e,Dx);const a=await ai(s,k(k({},t),{},{crossOrigin:o.crossOrigin}));return new this(k(k({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}T(Co,"type","Pattern"),z.setClass(Co),z.setClass(Co,"pattern");const Ax=["path","left","top"],Rx=["d"];class Ar extends Je{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:i}=t,o=ke(t,Ax);super(),Object.assign(this,Ar.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(le,s),typeof i=="number"&&this.set(ct,i)}_setPath(e,t){this.path=cx(Array.isArray(e)?e:bx(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new A(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=vx(this.path,re.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=re.NUM_FRACTION_DIGITS;return" translate(".concat(De(-this.pathOffset.x,e),", ").concat(De(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,K,K)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:r},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,r=i;break;case"C":e.push(...Yc(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...Yc(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=r}return sr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return k(k({},e),{},{pathOffset:new A(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=fr(e,this.ATTRIBUTE_NAMES,r),{d:i}=s;return new this(i,k(k(k({},ke(s,Rx)),t),{},{left:void 0,top:void 0}))}}T(Ar,"type","Path"),T(Ar,"cacheProperties",[...dr,"path","fillRule"]),T(Ar,"ATTRIBUTE_NAMES",[...Cr,"d"]),z.setClass(Ar),z.setSVGClass(Ar);const jx=["left","top","radius"],od=["radius","startAngle","endAngle","counterClockwise"];class Jt extends Je{static getDefaults(){return k(k({},super.getDefaults()),Jt.ownDefaults)}constructor(e){super(),Object.assign(this,Jt.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,Ie(this.startAngle),Ie(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(ft)}getRadiusY(){return this.get("radius")*this.get(Tt)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...od,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=Ie(this.startAngle),s=Ie(this.endAngle),i=cr(r)*t,o=ur(r)*t,a=cr(s)*t,l=ur(s)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=fr(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,radius:a=0}=s;return new this(k(k({},ke(s,jx)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}T(Jt,"type","Circle"),T(Jt,"cacheProperties",[...dr,...od]),T(Jt,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),T(Jt,"ATTRIBUTE_NAMES",["cx","cy","r",...Cr]),z.setClass(Jt),z.setSVGClass(Jt);const Ix=["x1","y1","x2","y2"],Fx=["x1","y1","x2","y2"],da=["x1","x2","y1","y2"];class er extends Je{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,er.ownDefaults),this.setOptions(i),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(le,o),typeof a=="number"&&this.set(ct,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=sr([{x:e,y:t},{x:r,y:s}]),c=new A(i+a/2,o+l/2);this.setPositionByOrigin(c,K,K)}_set(e,t){return super._set(e,t),da.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;wt(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new A((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=r<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=fr(e,this.ATTRIBUTE_NAMES,r),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],ke(s,Ix))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:i}=e,o=ke(e,Fx);return this._fromObject(k(k({},o),{},{points:[t,r,s,i]}),{extraParam:"points"})}}T(er,"type","Line"),T(er,"cacheProperties",[...dr,...da]),T(er,"ATTRIBUTE_NAMES",Cr.concat(da)),z.setClass(er),z.setSVGClass(er);class jr extends Je{static getDefaults(){return k(k({},super.getDefaults()),jr.ownDefaults)}constructor(e){super(),Object.assign(this,jr.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}T(jr,"type","Triangle"),T(jr,"ownDefaults",{width:100,height:100}),z.setClass(jr),z.setSVGClass(jr);const ad=["rx","ry"];class Qt extends Je{static getDefaults(){return k(k({},super.getDefaults()),Qt.ownDefaults)}constructor(e){super(),Object.assign(this,Qt.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(ft)}getRy(){return this.get("ry")*this.get(Tt)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ad,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,yi,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=fr(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function Lx(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}T(Qt,"type","Ellipse"),T(Qt,"cacheProperties",[...dr,...ad]),T(Qt,"ownDefaults",{rx:0,ry:0}),T(Qt,"ATTRIBUTE_NAMES",[...Cr,"cx","cy","rx","ry"]),z.setClass(Qt),z.setSVGClass(Qt);const Bx=["left","top"],ld={exactBoundingBox:!1};class lt extends Je{static getDefaults(){return k(k({},super.getDefaults()),lt.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"strokeDiff",void 0),Object.assign(this,lt.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(le,r),typeof s=="number"&&this.set(ct,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return Ov(this.points,e,this.isOpen())}_calcDimensions(e){e=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new A,strokeOffset:new A,strokeDiff:new A};const r=sr(t),s=Gi(k(k({},e),{},{scaleX:1,scaleY:1})),i=sr(this.points.map(c=>at(c,s,!0))),o=new A(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(Ie(this.skewX)),l-=a*Math.tan(Ie(this.skewY))),k(k({},r),{},{pathOffset:new A(a,l),strokeOffset:new A(i.left,i.top).subtract(new A(r.left,r.top)).multiply(o),strokeDiff:new A(r.width,r.height).subtract(new A(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=sr(this.points);return new A(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new A(t+s/2,r+i/2),K,K)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new A(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new A((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var s,i;o=new A((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new A(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===ft||e===Tt)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=re.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(De(this.points[i].x-t,s),",",De(this.points[i].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-r,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(Lx(e.getAttribute("points")),k(k({},ke(fr(e,this.ATTRIBUTE_NAMES,r),Bx)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}T(lt,"ownDefaults",ld),T(lt,"type","Polyline"),T(lt,"layoutProperties",[En,Pn,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),T(lt,"cacheProperties",[...dr,"points"]),T(lt,"ATTRIBUTE_NAMES",[...Cr]),z.setClass(lt),z.setSVGClass(lt);class Ir extends lt{isOpen(){return!1}}T(Ir,"ownDefaults",ld),T(Ir,"type","Polygon"),z.setClass(Ir),z.setSVGClass(Ir);const cd=["fontSize","fontWeight","fontFamily","fontStyle"],ud=["underline","overline","linethrough"],hd=[...cd,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],dd=[...hd,...ud,"textBackgroundColor","direction"],Nx=[...cd,...ud,ht,"strokeWidth",Ve,"deltaY","textBackgroundColor"],$x={_reNewline:Za,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:le,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:le,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},zt="justify",Ei="justify-left",es="justify-right",ts="justify-center";class fd extends Je{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const i in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const i in r[s])if(r[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,i=0,o=!0,a=0;for(const l in t){r=0;for(const c in t[l]){const u=t[l][c]||{};i++,u[e]!==void 0?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete t[l][c]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,i;for(s in t){for(i in r=t[s],r)delete r[i][e],Object.keys(r[i]).length===0&&delete r[i];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const i=rl(k(k({},this._getStyleDeclaration(r,s)),t),o=>o!==void 0);this._setStyleDeclaration(r,s,i)}getSelectionStyles(e,t,r){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return k(k({},Mn(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}T(fd,"_styleProperties",Nx);const Wx=/  +/g,zx=/"/g;function _o(n,e,t,r,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:re.NUM_FRACTION_DIGITS;const d=ls(Ve,i,!1),[f,p,g,y]=[a,l,c,u].map(b=>De(b,h));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(p,'" width="').concat(g,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:s}),`
`)}const Vx=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let wo;class nt extends fd{static getDefaults(){return k(k({},super.getDefaults()),nt.ownDefaults)}constructor(e,t){super(),T(this,"__charBounds",[]),Object.assign(this,nt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=ed(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(zt)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===zt||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=i.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(i[u])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ht?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case K:e.textBaseline="middle";break;case"ascender":e.textBaseline=ct;break;case"descender":e.textBaseline=ea}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,i,o){this._renderChars(e,t,r,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let u,h,d=0,f=0,p=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let g=0;g<l;g++){const y=this.__charBounds[i][g];h=this.getValueOfPropertyAt(i,g,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=h,h&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):h!==p?(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=p,p&&e.fillRect(u,s,d,a/this.lineHeight),f=y.left,d=y.width,p=h):d+=y.kernedWidth}h&&!this.path&&(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,s,d,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const i=Jn.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let u,h,d,f;if(r&&i[r]!==void 0&&(d=i[r]),i[e]!==void 0&&(f=u=i[e]),l&&i[a]!==void 0&&(h=i[a],f=h-d),u===void 0||d===void 0||h===void 0){const p=function(){return wo||(wo=Yt({width:0,height:0}).getContext("2d")),wo}();this._setTextStyles(p,t,!0),u===void 0&&(f=u=p.measureText(e).width,i[e]=u),d===void 0&&l&&r&&(d=p.measureText(r).width,i[r]=d),l&&h===void 0&&(h=p.measureText(a).width,i[a]=h,f=h-d)}return{width:u*c,kernedWidth:f*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const i=this.pathSide===je,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];r=this._getGraphemeBox(h,e,u,t),c[u]=r,s+=r.kernedWidth,t=h}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case le:u=i?h-s:0;break;case K:u=(h-s)/2;break;case je:u=i?0:h-s}u+=this.pathStartOffset*(i?-1:1);for(let d=i?l-1:0;i?d>=0:d<l;i?d--:d++)r=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,i=px(s.path,r,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===je?Math.PI:0)}_getGraphemeBox(e,t,r,s,i){const o=this.getCompleteStyleDeclaration(t,r),a=s?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,s,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!i){const f=this.__charBounds[t][r-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+u,i+r+c,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(Ve))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(zt),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let p,g,y,b,w,x="",v=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?le:je),i-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,r.join(""),s,i),void t.restore();for(let C=0,O=r.length-1;C<=O;C++)b=C===O||this.charSpacing||c,x+=r[C],y=this.__charBounds[o][C],v===0?(s+=d*(y.kernedWidth-y.width),v+=y.width):v+=y.kernedWidth,l&&!b&&this._reSpaceAndTab.test(r[C])&&(b=!0),b||(p=p||this.getCompleteStyleDeclaration(o,C),g=this.getCompleteStyleDeclaration(o,C+1),b=ul(p,g,!1)),b&&(c?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,o,C,x,-v/2,0),t.restore()):(w=s,this._renderChar(e,t,o,C,x,w,i)),x="",p=g,s+=d*v,v=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=Yt({width:t,height:r}),i=s.getContext("2d");return s.width=t,s.height=r,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,r),i.lineTo(0,r),i.closePath(),i.translate(t/2,r/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,i;return wt(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:i}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,i,o,a){const l=this._getStyleDeclaration(r,s),c=this.getCompleteStyleDeclaration(r,s),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(i,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(t,c);t.strokeText(i,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*r.size,deltaY:o+i*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===zt||s===ts&&!o||s===es&&!o||s===Ei&&!o?0:(s===K&&(a=r/2),s===je&&(a=r),s===ts&&(a=r/2),s===es&&(a=r),i==="rtl"&&(s===je||s===zt||s===es?a=0:s===le||s===Ei?a=-r:s!==K&&s!==ts||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=u;continue}const h=this._textLines[l],d=u/this.lineHeight,f=this._getLineLeftOffset(l);let p,g,y=0,b=0,w=this.getValueOfPropertyAt(l,0,t),x=this.getValueOfPropertyAt(l,0,Ve);const v=r+d*(1-this._fontSizeFraction);let C=this.getHeightOfChar(l,0),O=this.getValueOfPropertyAt(l,0,"deltaY");for(let D=0,B=h.length;D<B;D++){const m=this.__charBounds[l][D];p=this.getValueOfPropertyAt(l,D,t),g=this.getValueOfPropertyAt(l,D,Ve);const E=this.getHeightOfChar(l,D),R=this.getValueOfPropertyAt(l,D,"deltaY");if(i&&p&&g)e.save(),e.fillStyle=x,e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),e.fillRect(-m.kernedWidth/2,a*E+R,m.kernedWidth,this.fontSize/15),e.restore();else if((p!==w||g!==x||E!==C||R!==O)&&b>0){let I=s+f+y;this.direction==="rtl"&&(I=this.width-I-b),w&&x&&(e.fillStyle=x,e.fillRect(I,v+a*C+O,b,this.fontSize/15)),y=m.left,b=m.width,w=p,x=g,C=E,O=R}else b+=m.kernedWidth}let P=s+f+y;this.direction==="rtl"&&(P=this.width-P-b),e.fillStyle=g,p&&g&&e.fillRect(P,v+a*C+O,b-o,this.fontSize/15),r+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||nt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return cl(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),i=i.concat(r[o],s);return i.pop(),{_unwrappedLines:r,lines:t,graphemeText:i,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject([...dd,...e])),{},{styles:Mv(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||r.includes(o),i=i||o==="path";else s=r.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=fr(e,nt.ATTRIBUTE_NAMES,r),i=k(k({},t),s),{textAnchor:o=le,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=Ka,strokeWidth:f=1}=i,p=ke(i,Vx),g=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),k({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},p)),y=g.getScaledHeight()/g.height,b=((g.height+g.strokeWidth)*g.lineHeight-g.height)*y,w=g.getScaledHeight()+b;let x=0;return o===K&&(x=g.getScaledWidth()/2),o===je&&(x=g.getScaledWidth()),g.set({left:g.left-x,top:g.top-(w-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:f}),g}static fromObject(e){return this._fromObject(k(k({},e),{},{styles:Dv(e.styles||{},e.text)}),{extraParam:"text"})}}T(nt,"textLayoutProperties",hd),T(nt,"cacheProperties",[...dr,...dd]),T(nt,"ownDefaults",$x),T(nt,"type","Text"),T(nt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),T(nt,"ATTRIBUTE_NAMES",Cr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),qh(nt,[class extends Fh{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(zx,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let s,i=n;this.backgroundColor&&r.push(..._o(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const s=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(Wx)),i=s?'style="'.concat(s,'"'):"",o=e.deltaY,a=o?' dy="'.concat(De(o,re.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(De(t,re.NUM_FRACTION_DIGITS),'" y="').concat(De(r,re.NUM_FRACTION_DIGITS),'" ').concat(a).concat(i,">").concat(Ev(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const s=this.getHeightOfLine(e),i=this.textAlign.includes(zt),o=this._textLines[e];let a,l,c,u,h,d="",f=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,g=o.length-1;p<=g;p++)h=p===g||this.charSpacing,d+=o[p],c=this.__charBounds[e][p],f===0?(t+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,i&&!h&&this._reSpaceAndTab.test(o[p])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,p),l=this.getCompleteStyleDeclaration(e,p+1),h=ul(a,l,!0)),h&&(u=this._getStyleDeclaration(e,p),n.push(this._createTextCharSpan(d,u,t,r)),d="",a=l,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:h,width:d,kernedWidth:f}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&n.push(..._o(c,t+l,r,a,i)),l=h,a=d,c=o):a+=f}o&&n.push(..._o(c,t+l,r,a,i))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c}=n,u=this.getSvgTextDecoration(n);return[s?ls(ht,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),i?ls(Ve,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),z.setClass(nt),z.setSVGClass(nt);class Hx{constructor(e){T(this,"target",void 0),T(this,"__mouseDownInPlace",!1),T(this,"__dragStartFired",!1),T(this,"__isDraggingOver",!1),T(this,"__dragStartSelection",void 0),T(this,"__dragImageDisposer",void 0),T(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new A(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),u=new A(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),p=u.subtract(new A(f.left,f.top)),g=a.viewportTransform,y=p.add(h).transform(g,!0),b=o.backgroundColor,w=ll(o.styles);o.backgroundColor="";const x={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(x,0,s),o.setSelectionStyles(x,i,o.text.length),o.dirty=!0;const v=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=b,o.styles=w,o.dirty=!0,ua(v,{position:"fixed",left:"".concat(-v.width,"px"),border:ut,width:"".concat(v.width/d,"px"),height:"".concat(v.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{v.remove()},Dt(e.target||this.target.hiddenTextarea).body.appendChild(v),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(v,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=k({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=i[Math.max(0,i.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(bi,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||ut;l===ut?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(bi,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Kc=/[ \n\.,;!\?\-]/;class qx extends nt{constructor(){super(...arguments),T(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:i}=e;return $h({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!Za.test(r[e-1]))?e-1:e,i=r[s];for(;s>0&&s<r.length&&!Kc.test(i);)s+=t,i=r[s];return t===-1&&Kc.test(i)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Dt(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==i||s!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=r.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,p=new A(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new A(c.clientWidth/u,c.clientHeight/h));return p.x<0&&(p.x=0),p.x>d&&(p.x=d),p.y<0&&(p.y=0),p.y>f&&(p.y=f),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:"".concat(p.x,"px"),top:"".concat(p.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(vi),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==i){if(this.styles[r])for(let a=s;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+a-o]=l)}for(let a=r+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const a=this.styles[r],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,r,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=t&&(l=!0,i[d-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+r]=i,u=!0),(u||o>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:k({},s[r-1])}:c?this.styles[e+r]={0:k({},c)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const i=this.styles[e],o=i?k({},i):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+r]=o[c],o[c-r]||delete i[c])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=k({},s[r]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=k({},a)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],r):r&&this.styles[s.lineIndex+o]&&r[0]&&(this.styles[s.lineIndex+o][0]=r[0]),r=r&&r.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,r,t),this._text=[...this._text.slice(0,r),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=le:this._selectionDirection===je&&(this._selectionDirection=le,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===je?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=je:this._selectionDirection===le&&(this._selectionDirection=je,this.selectionStart=t),this.selectionEnd=r)}}class Xx extends qx{initHiddenTextarea(){const e=this.canvas&&Dt(this.canvas.getElement())||On(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(bi),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,o=s.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,h,d,f,p=o-i;const g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),y=a>g.selectionStart;c?(h=this._text.slice(a,l),p+=l-a):o<i&&(h=y?this._text.slice(l+p,l):this._text.slice(a,a-p));const b=s.slice(g.selectionEnd-p,g.selectionEnd);if(h&&h.length&&(b.length&&(u=this.getSelectionStyles(a,a+1,!1),u=b.map(()=>u[0])),c?(d=a,f=l):y?(d=l-h.length,f=l):(d=l,f=l+h.length),this.removeStyleFromTo(d,f)),b.length){const{copyPasteData:w}=Xt();t&&b.join("")===w.copiedText&&!re.disableStyleCopyPaste&&(u=w.copiedTextStyle),this.insertNewStyleBlock(b,a,u)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=Xt();e.copiedText=this.getSelectedText(),re.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),u=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const u=o-s,h=o,d=Math.abs(u-t);a=Math.abs(h-t)<d?l:l-1;break}return i||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===je);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=Tn(0,this.selectionStart,s),this.selectionEnd=Tn(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===le?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=le,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===je&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=le,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===le&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=je,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=je,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const To=n=>!!n.button;class Yx extends Xx{constructor(){super(...arguments),T(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new Hx(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),na(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!To(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!To(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||To(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(At(this.calcTransformMatrix())).add(new A(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,i=0;for(let c=0;c<this._textLines.length&&r<=t.y;c++)r+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&s++;break}o=u,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const As="moveCursorUp",Rs="moveCursorDown",js="moveCursorLeft",Is="moveCursorRight",Fs="exitEditing",Gx=k({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Fs,27:Fs,33:As,34:Rs,35:Is,36:js,37:js,38:As,39:Is,40:Rs},keysMapRtl:{9:Fs,27:Fs,33:As,34:Rs,35:js,36:Is,37:Is,38:As,39:js,40:Rs},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class nr extends Yx{static getDefaults(){return k(k({},super.getDefaults()),nr.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,k(k({},nr.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof ha&&this.canvas.textEditingManager.remove(this),t instanceof ha&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(r=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===je||this.textAlign===zt||this.textAlign===es?l.left*=-1:this.textAlign===le||this.textAlign===Ei?l.left=o-(r>0?r:0):this.textAlign!==K&&this.textAlign!==ts||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,r){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(zt),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const p=this._getLineLeftOffset(f)||0;let g=this.getHeightOfLine(f),y=0,b=0,w=0;if(f===c&&(b=this.__charBounds[c][h].left),f>=c&&f<u)w=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)w=this.__charBounds[u][d].left;else{const P=this._getWidthOfCharSpacing();w=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-P}y=g,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(g/=this.lineHeight);let x=r.left+p+b,v=g,C=0;const O=w-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",v=1,C=g):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===je||this.textAlign===zt||this.textAlign===es?x=this.width-x-O:this.textAlign===le||this.textAlign===Ei?x=r.left+p-w:this.textAlign!==K&&this.textAlign!==ts||(x=r.left+p-w)),e.fillRect(x,r.top+r.topOffset+C,O,v),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,Ve)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}T(nr,"ownDefaults",Gx),T(nr,"type","IText"),z.setClass(nr),z.setClass(nr,"i-text");class Fr extends nr{static getDefaults(){return k(k({},super.getDefaults()),Fr.ownDefaults)}constructor(e,t){super(e,k(k({},Fr.ownDefaults),t))}static createControls(){return{controls:wv()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(zt)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(r++,s++),i[o]={line:t,offset:r},s+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=r&&(!i||h<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<r.wordsData.length;i++)s.push(...this._wrapLine(i,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return s=Math.max(h,s),a+=u.length+r.length,{word:u,width:h}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,r,!0).kernedWidth,r=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:i}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],f=0,p=0,g=!0;t-=o;const y=Math.max(t,s,this.dynamicMinWidth),b=i[e];let w;for(f=0,w=0;w<b.length;w++){const{word:x,width:v}=b[w];f+=x.length,h+=p+v-a,h>y&&!g?(c.push(d),d=[],h=v,g=!0):h+=a,g||l||d.push(u),d=d.concat(x),p=l?0:this._measureWord([u],e,f),f++,g=!1}return w&&c.push(d),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=r[i].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}T(Fr,"type","Textbox"),T(Fr,"textLayoutProperties",[...nr.textLayoutProperties,"width"]),T(Fr,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),z.setClass(Fr);class Zc extends Qi{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:i}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=sr(Gh(r,s)),l=new A(o,a);if(s.absolutePositioned)return{center:xn(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new A,correction:h=new A}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}T(Zc,"type","clip-path"),z.setClass(Zc);class Jc extends Qi{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new A(r.width||s.x,r.height||s.y)}}T(Jc,"type","fixed"),z.setClass(Jc);class Ux extends us{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!r.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Lr extends Br{static getDefaults(){return k(k({},super.getDefaults()),Lr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Lr.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:i}=t;this.groupInit(e,{left:r,top:s,layoutManager:i??new Ux})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(br("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:i}=s;i&&r.add(i)}),e===dl?r.forEach(s=>{s._onAfterObjectsChange(Ti,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=k(k({hasControls:!1},r),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}T(Lr,"type","ActiveSelection"),T(Lr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),z.setClass(Lr),z.setClass(Lr,"activeSelection");class Kx{constructor(){T(this,"resources",{})}applyFilters(e,t,r,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,s);const a={sourceWidth:r,sourceHeight:s,imageData:o.getImageData(0,0,r,s),originalEl:t,originalImageData:o.getImageData(0,0,r,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class pd{constructor(){let{tileSize:e=re.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),T(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Yt({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,r,s,c?void 0:t),targetTexture:this.createTexture(a,r,s),originalTexture:c||this.createTexture(a,r,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const f=d.targetCanvas,p=f.width,g=f.height,y=d.destinationWidth,b=d.destinationHeight;p===y&&g===b||(f.width=y,f.height=b)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:p}=e,g=e.createTexture();return e.bindTexture(a,g),e.texParameteri(a,h,i||o),e.texParameteri(a,d,i||o),e.texParameteri(a,f,u),e.texParameteri(a,p,u),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,r,0,l,c,null),g}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,r);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=r.height-s.height;i.drawImage(r,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let ko;function Zx(){const{WebGLProbe:n}=Xt();return n.queryWebGL(It()),re.enableGLFiltering&&n.isSupported(re.textureSize)?new pd({tileSize:re.textureSize}):new Kx}function Oo(){return!ko&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(ko=Zx()),ko}const Jx=["filters","resizeFilter","src","crossOrigin","type"],gd=["cropX","cropY"];class St extends Je{static getDefaults(){return k(k({},super.getDefaults()),St.ownDefaults)}constructor(e,t){super(),T(this,"_lastScaleX",1),T(this,"_lastScaleY",1),T(this,"_filterScalingX",1),T(this,"_filterScalingY",1),this.filters=[],Object.assign(this,St.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(vr()),this.setElement(typeof e=="string"?(this.canvas&&Dt(this.canvas.getElement())||On()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(St.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Oo(!1);t instanceof pd&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&Xt().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),k(k({},super.toObject([...gd,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=vr();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==Ve?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ai(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,i=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=Yt(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,Oo().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=Yt({width:r,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);Oo().applyFilters(e,this._originalElement,r,s,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*r,d=l*s,f=Math.min(i*r,c-h),p=Math.min(o*s,u-d),g=-i/2,y=-o/2,b=Math.min(i,c/r-a),w=Math.min(o,u/s-l);t&&e.drawImage(t,h,d,f,p,g,y,b,w)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=jb(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let i,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,f=0;return!e||e.alignX===ut&&e.alignY===ut?(l=t/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=nx(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(u=-i),e.alignX==="Max"&&(u=i),i=(r-a*c)/2,e.alignY==="Min"&&(h=-i),e.alignY==="Max"&&(h=i)),e.meetOrSlice==="slice"&&(l=c=sx(this._element,s),i=o-t/l,e.alignX==="Mid"&&(d=i/2),e.alignX==="Max"&&(d=i),i=a-r/c,e.alignY==="Mid"&&(f=i/2),e.alignY==="Max"&&(f=i),o=t/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=ke(e,Jx);return Promise.all([ai(i,k(k({},t),{},{crossOrigin:o})),r&&as(r,t),s&&as([s],t),Ui(l,t)]).then(c=>{let[u,h=[],[d]=[],f={}]=c;return new this(u,k(k({},l),{},{src:i,filters:h,resizeFilter:d},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return ai(e,{crossOrigin:t,signal:r}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=fr(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"],t,s).catch(i=>(br("log","Unable to parse Image",i),null))}}T(St,"type","Image"),T(St,"cacheProperties",[...dr,...gd]),T(St,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),T(St,"CSS_CANVAS","canvas-img"),T(St,"ATTRIBUTE_NAMES",[...Cr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),z.setClass(St),z.setSVGClass(St);Zi(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const to=n=>n.webgl!==void 0,fl="precision highp float",Qx=`
    `.concat(fl,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),eS=["type"],tS=["type"],rS=new RegExp(fl,"g");class He{get type(){return this.constructor.type}constructor(){let e=ke(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},eS);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return Qx}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Xt();s!=="highp"&&(t=t.replace(rS,fl.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new Vt("Vertex, fragment shader or program creation error");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Vt("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new Vt("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new Vt('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let i=0;i<r.length;i++)s[r[i]]=e.getUniformLocation(t,r[i]);return s}sendAttributeData(e,t,r){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){to(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=Yt({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return k({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(ke(e,tS))}}T(He,"type","BaseFilter"),T(He,"uniformLocations",[]);const nS={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Ls extends He{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(nS[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new ue(this.color).getSource(),s=this.alpha,i=r[0]*s,o=r[1]*s,a=r[2]*s,l=1-s;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];let f,p,g;switch(this.mode){case"multiply":f=u*i/255,p=h*o/255,g=d*a/255;break;case"screen":f=255-(255-u)*(255-i)/255,p=255-(255-h)*(255-o)/255,g=255-(255-d)*(255-a)/255;break;case"add":f=u+i,p=h+o,g=d+a;break;case"difference":f=Math.abs(u-i),p=Math.abs(h-o),g=Math.abs(d-a);break;case"subtract":f=u-i,p=h-o,g=d-a;break;case"darken":f=Math.min(u,i),p=Math.min(h,o),g=Math.min(d,a);break;case"lighten":f=Math.max(u,i),p=Math.max(h,o),g=Math.max(d,a);break;case"overlay":f=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,p=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,g=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":f=i+u-2*i*u/255,p=o+h-2*o*h/255,g=a+d-2*a*d/255;break;case"tint":f=i+u*l,p=o+h*l,g=a+d*l}t[c]=f,t[c+1]=p,t[c+2]=g}}sendUniformData(e,t){const r=new ue(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}T(Ls,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),T(Ls,"type","BlendColor"),T(Ls,"uniformLocations",["uColor"]),z.setClass(Ls);const sS={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},iS=["type","image"];class Bs extends He{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return sS[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=It());const a=i.blendImage,l=a.getContext("2d");a.width!==r||a.height!==s?(a.width=r,a.height=s):l.clearRect(0,0,r,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,s);const c=l.getImageData(0,0,r,s).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],f=t[u+2],p=t[u+3],g=c[u],y=c[u+1],b=c[u+2],w=c[u+3];switch(this.mode){case"multiply":t[u]=h*g/255,t[u+1]=d*y/255,t[u+2]=f*b/255,t[u+3]=p*w/255;break;case"mask":t[u+3]=w}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return k(k({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,i=ke(e,iS);return St.fromObject(s,t).then(o=>new this(k(k({},i),{},{image:o})))}}T(Bs,"type","BlendImage"),T(Bs,"defaults",{mode:"multiply",alpha:1}),T(Bs,"uniformLocations",["uTransformMatrix","uImage"]),z.setClass(Bs);class Ns extends He{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){to(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:s}}=e;const{width:i,height:o}=r;s.blurLayer1||(s.blurLayer1=It(),s.blurLayer2=It());const a=s.blurLayer1,l=s.blurLayer2;a.width===i&&a.height===o||(l.width=a.width=i,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),h=15,d=.06*this.blur*.5;let f,p,g,y;for(c.putImageData(r,0,0),u.clearRect(0,0,i,o),y=-15;y<=h;y++)f=(Math.random()-.5)/4,p=y/h,g=d*p*i+f,u.globalAlpha=1-Math.abs(p),u.drawImage(a,g,f),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(y=-15;y<=h;y++)f=(Math.random()-.5)/4,p=y/h,g=d*p*o+f,u.globalAlpha=1-Math.abs(p),u.drawImage(a,f,g),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const b=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),b}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}T(Ns,"type","Blur"),T(Ns,"defaults",{blur:0}),T(Ns,"uniformLocations",["uDelta"]),z.setClass(Ns);class $s extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}T($s,"type","Brightness"),T($s,"defaults",{brightness:0}),T($s,"uniformLocations",["uBrightness"]),z.setClass($s);const md={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class pn extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(t[i]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[i+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[i+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!s){const c=t[i+3];t[i]+=c*r[3],t[i+1]+=c*r[8],t[i+2]+=c*r[13],t[i+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return k(k({},super.toObject()),{},{matrix:[...this.matrix]})}}function qr(n,e){var t;const r=(T(t=class extends pn{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),T(t,"defaults",{colorsOnly:!1,matrix:e}),t);return z.setClass(r,n),r}T(pn,"type","ColorMatrix"),T(pn,"defaults",md),T(pn,"uniformLocations",["uColorMatrix","uConstants"]),z.setClass(pn);qr("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);qr("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);qr("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);qr("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);qr("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);qr("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);qr("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Qc extends He{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){to(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>z.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}T(Qc,"type","Composed"),z.setClass(Qc);class Ws extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}T(Ws,"type","Contrast"),T(Ws,"defaults",{contrast:0}),T(Ws,"uniformLocations",["uContrast"]),z.setClass(Ws);const oS={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class zs extends He{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return oS[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,p,g,y,b,w,x,v,C,O,P,D;for(O=0;O<l;O++)for(C=0;C<a;C++){for(y=4*(O*a+C),d=0,f=0,p=0,g=0,D=0;D<i;D++)for(P=0;P<i;P++)w=O+D-o,b=C+P-o,w<0||w>=l||b<0||b>=a||(x=4*(w*a+b),v=s[D*i+P],d+=r[x]*v,f+=r[x+1]*v,p+=r[x+2]*v,h||(g+=r[x+3]*v));u[y]=d,u[y+1]=f,u[y+2]=p,u[y+3]=h?r[y+3]:g}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return k(k({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}T(zs,"type","Convolute"),T(zs,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),T(zs,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),z.setClass(zs);const yd="Gamma";class Vs extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],i=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:yd,gamma:this.gamma.concat()}}}T(Vs,"type",yd),T(Vs,"defaults",{gamma:[1,1,1]}),T(Vs,"uniformLocations",["uGamma"]),z.setClass(Vs);const aS={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Hs extends He{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2];switch(this.mode){case"average":r=(i+o+a)/3;break;case"lightness":r=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":r=.21*i+.72*o+.07*a}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return aS[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}T(Hs,"type","Grayscale"),T(Hs,"defaults",{mode:"average"}),T(Hs,"uniformLocations",["uMode"]),z.setClass(Hs);const lS=k(k({},md),{},{rotation:0});class Eo extends pn{calculateMatrix(){const e=this.rotation*Math.PI,t=cr(e),r=ur(e),s=1/3,i=Math.sqrt(s)*r,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}T(Eo,"type","HueRotation"),T(Eo,"defaults",lS),z.setClass(Eo);class qs extends He{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}T(qs,"type","Invert"),T(qs,"defaults",{alpha:!1,invert:!0}),T(qs,"uniformLocations",["uInvert","uAlpha"]),z.setClass(qs);class Xs extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*r;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}T(Xs,"type","Noise"),T(Xs,"defaults",{noise:0}),T(Xs,"uniformLocations",["uNoise","uSeed"]),z.setClass(Xs);class Ys extends He{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*i*r+4*o,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=i;d<Math.min(i+this.blocksize,s);d++)for(let f=o;f<Math.min(o+this.blocksize,r);f++){const p=4*d*r+4*f;t[p]=l,t[p+1]=c,t[p+2]=u,t[p+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}T(Ys,"type","Pixelate"),T(Ys,"defaults",{blocksize:4}),T(Ys,"uniformLocations",["uBlocksize"]),z.setClass(Ys);class Gs extends He{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new ue(this.color).getSource(),i=[s[0]-r,s[1]-r,s[2]-r],o=[s[0]+r,s[1]+r,s[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>i[0]&&c>i[1]&&u>i[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new ue(this.color).getSource(),s=this.distance,i=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],o=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}T(Gs,"type","RemoveColor"),T(Gs,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),T(Gs,"uniformLocations",["uLow","uHigh"]),z.setClass(Gs);class Us extends He{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let i=1;i<=r;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){to(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*r),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,r,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=r*a;const d=e.filterBackend.resources;let f=0,p=0;const g=t;let y=0;d.sliceByTwo||(d.sliceByTwo=It());const b=d.sliceByTwo;(b.width<1.5*t||b.height<r)&&(b.width=1.5*t,b.height=r);const w=b.getContext("2d");for(w.clearRect(0,0,1.5*t,r),w.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=u,r=h,s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,l=!0),i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,c=!0),w.drawImage(b,f,p,t,r,g,y,u,h),f=g,p=y,y+=h;return w.getImageData(f,p,s,i)}lanczosResize(e,t,r,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,p=Math.ceil(u*this.lanczosLobes/2),g=Math.ceil(h*this.lanczosLobes/2),y={},b={x:0,y:0},w={x:0,y:0};return function x(v){let C,O,P,D,B,m,E,R,I,F,M;for(b.x=(v+.5)*u,w.x=Math.floor(b.x),C=0;C<i;C++){for(b.y=(C+.5)*h,w.y=Math.floor(b.y),B=0,m=0,E=0,R=0,I=0,O=w.x-p;O<=w.x+p;O++)if(!(O<0||O>=t)){F=Math.floor(1e3*Math.abs(O-b.x)),y[F]||(y[F]={});for(let L=w.y-g;L<=w.y+g;L++)L<0||L>=r||(M=Math.floor(1e3*Math.abs(L-b.y)),y[F][M]||(y[F][M]=c(Math.sqrt(Math.pow(F*d,2)+Math.pow(M*f,2))/1e3)),P=y[F][M],P>0&&(D=4*(L*t+O),B+=P,m+=P*o[D],E+=P*o[D+1],R+=P*o[D+2],I+=P*o[D+3]))}D=4*(C*s+v),l[D]=m/B,l[D+1]=E/B,l[D+2]=R/B,l[D+3]=I/B}return++v<s?x(v):a}(0)}bilinearFiltering(e,t,r,s,i){let o,a,l,c,u,h,d,f,p,g,y,b,w,x=0;const v=this.rcpScaleX,C=this.rcpScaleY,O=4*(t-1),P=e.imageData.data,D=e.ctx.createImageData(s,i),B=D.data;for(d=0;d<i;d++)for(f=0;f<s;f++)for(u=Math.floor(v*f),h=Math.floor(C*d),p=v*f-u,g=C*d-h,w=4*(h*t+u),y=0;y<4;y++)o=P[w+y],a=P[w+4+y],l=P[w+O+y],c=P[w+O+4+y],b=o*(1-p)*(1-g)+a*p*(1-g)+l*g*(1-p)+c*p*g,B[x++]=b;return D}hermiteFastResize(e,t,r,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(s,i),d=h.data;for(let f=0;f<i;f++)for(let p=0;p<s;p++){const g=4*(p+f*s);let y=0,b=0,w=0,x=0,v=0,C=0,O=0;const P=(f+.5)*a;for(let D=Math.floor(f*a);D<(f+1)*a;D++){const B=Math.abs(P-(D+.5))/c,m=(p+.5)*o,E=B*B;for(let R=Math.floor(p*o);R<(p+1)*o;R++){let I=Math.abs(m-(R+.5))/l;const F=Math.sqrt(E+I*I);F>1&&F<-1||(y=2*F*F*F-3*F*F+1,y>0&&(I=4*(R+D*t),O+=y*u[I+3],w+=y,u[I+3]<255&&(y=y*u[I+3]/250),x+=y*u[I],v+=y*u[I+1],C+=y*u[I+2],b+=y))}}d[g]=x/b,d[g+1]=v/b,d[g+2]=C/b,d[g+3]=O/w}return h}}T(Us,"type","Resize"),T(Us,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),T(Us,"uniformLocations",["uDelta","uTaps"]),z.setClass(Us);class Ks extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a);t[s]+=l!==i?(l-i)*r:0,t[s+1]+=l!==o?(l-o)*r:0,t[s+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}T(Ks,"type","Saturation"),T(Ks,"defaults",{saturation:0}),T(Ks,"uniformLocations",["uSaturation"]),z.setClass(Ks);class Zs extends He{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,u=2*Math.abs(l-c)/255*r;t[s]+=l!==i?(l-i)*u:0,t[s+1]+=l!==o?(l-o)*u:0,t[s+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}T(Zs,"type","Vibrance"),T(Zs,"defaults",{vibrance:0}),T(Zs,"uniformLocations",["uVibrance"]),z.setClass(Zs);const me={_prefix:"on_",_listeners:{},evtName:function(n){return this._prefix+n},register:function(n,e,t){const r=this.evtName(n);typeof this._listeners[r]>"u"&&(this._listeners[r]=[]),this._listeners[r].push([t||this,e])},unregister:function(n,e){const t=this.evtName(n);if(typeof e>"u")delete this._listeners[t];else for(let r=0;r<this._listeners[t].length;r++)this._listeners[t][r][1]===e&&this._listeners[t].splice(r,1)},emit:function(n,...e){const t=this.evtName(n);if(typeof this._listeners[t]<"u")for(let r=0,s=this._listeners[t].length;r<s;r++)this._listeners[t][r][1].call(this._listeners[t][r][0],n,...e)}},cS=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e),l={x:a.x,y:a.y},c=[...r,l];if(s(c),c.length>0){const u=new er([c[c.length-1].x,c[c.length-1].y,a.x,a.y],{stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1});e.add(u),o([...i,u])}},uS=(n,e,t,r,s,i,o,a)=>{r(!0),cS(n,e,t,s,i,o,a)},hS=(n,e,t,r)=>{if(t&&r.length>0){const s=e.getScenePoint(n.e);r[r.length-1].set({x2:s.x,y2:s.y}),e.renderAll()}},dS=(n,e,t,r,s,i,o,a)=>{if(s.length>2){const l=Vr(),c=new Ir(s,{fill:"transparent",stroke:t,strokeWidth:2,selectable:!1,hasControls:!0,hoverCursor:"default",id:l});e.add(c),me.emit(`canvas:${n}:shapeAdded`,{id:l,type:Y.Polygon,shape:c}),i([]);for(const u of o)e.remove(u);a([]),r(!1)}},fS=(n,e,t)=>{const r=Vr(),s=new Ir(t.points,{top:t.top+10,left:t.left+10,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return e.add(s),me.emit(`canvas:${n}:shapeAdded`,{id:r,type:Y.Polygon,shape:s}),s},pS=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e),l={x:a.x,y:a.y},c=[...r,l];if(s(c),c.length>0){const u=new er([c[c.length-1].x,c[c.length-1].y,a.x,a.y],{stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1});e.add(u),o([...i,u])}},gS=(n,e,t,r,s,i,o,a)=>{r(!0),pS(n,e,t,s,i,o,a)},mS=(n,e,t,r)=>{if(t&&r.length>0){const s=e.getScenePoint(n.e);r[r.length-1].set({x2:s.x,y2:s.y}),e.renderAll()}},yS=(n,e,t,r,s,i,o,a)=>{if(s.length>2){const l=Vr(),c=new lt(s,{fill:"transparent",stroke:t,strokeWidth:2,selectable:!1,hasControls:!0,lockRotation:!1,id:l});e.add(c),me.emit(`canvas:${n}:shapeAdded`,{id:l,type:Y.Polyline,shape:c}),i([]);for(const u of o)e.remove(u);a([]),r(!1)}},bS=(n,e,t)=>{const r=Vr(),s=new lt(t.points,{top:t.top+10,left:t.left+10,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return e.add(s),me.emit(`canvas:${n}:shapeAdded`,{id:r,type:Y.Polyline,shape:s}),s},vS=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e);r(a.x),s(a.y);const l=Vr(),c=new mt({left:a.x,top:a.y,originX:"left",originY:"top",width:0,height:0,fill:"transparent",stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:l});e.add(c),i(c),o(!0)},xS=(n,e,t,r,s,i)=>{if(i&&s){const o=e.getScenePoint(n.e);s.set({width:Math.abs(t-o.x),height:Math.abs(r-o.y)}),t>o.x&&s.set({left:o.x}),r>o.y&&s.set({top:o.y}),e.renderAll()}},SS=(n,e,t,r,s)=>{t(!1),r.setCoords(),me.emit(`canvas:${n}:shapeAdded`,{id:r.id,type:Y.Rectangle,shape:r}),s(null),e.defaultCursor="default"},CS=(n,e,t)=>{const r=Vr(),s=new mt({left:t.left+10,top:t.top+10,originX:"left",originY:"top",width:t.width,height:t.height,fill:"transparent",stroke:t.stroke,strokeWidth:t.strokeWidth,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return e.add(s),me.emit(`canvas:${n}:shapeAdded`,{id:r,type:Y.Rectangle,shape:s}),s},_S=n=>{const[e,t]=S.useState({width:0,height:0});return S.useEffect(()=>{const r=new Image;r.src=n,r.onload=()=>{t({width:r.width,height:r.height})}},[n]),{imageSize:e,isReady:e.width>0}},wS=n=>{const e=S.useRef(null),[t,r]=S.useState({width:0,height:0}),{imageSize:s,isReady:i}=_S(n);return S.useEffect(()=>{if(e.current){const o=()=>{const a=e.current.offsetWidth;a<s.width?r({width:a,height:a*(s.height/s.width)}):r({width:s.width,height:s.height})};s.width>0&&e.current&&o()}},[s,e.current]),{imageSize:s,canvasSize:t,wrapperRef:e,isReady:i}},TS=(n,e,t,r,s,i)=>{if(Zn("info",i??!1,"Loading initial shapes data",s,n.current),s!=null&&s.rois){const o=[],a=[];s.rois.forEach(l=>{var h,d,f;Zn("info",i??!1,"Loading initial shape",l);const c=Vr();let u;switch(l.type){case Y.Rectangle:u=new mt({left:l.shape.left,top:l.shape.top,originX:"left",originY:"top",width:l.shape.width,height:l.shape.height,fill:"transparent",stroke:l.shape.color,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:c}),(h=n.current)==null||h.add(u);break;case Y.Polygon:u=new Ir(l.shape.points,{top:l.shape.top+10,left:l.shape.left+10,fill:"transparent",stroke:l.shape.color,strokeWidth:2,selectable:!1,hasControls:!0,hoverCursor:"default",id:c}),(d=n.current)==null||d.add(u);break;case Y.Polyline:u=new lt(l.shape.points,{top:l.shape.top+10,left:l.shape.left+10,fill:"transparent",stroke:l.shape.color,strokeWidth:2,selectable:!1,hasControls:!0,hoverCursor:"default",id:c}),(f=n.current)==null||f.add(u);break}o.push({id:c,parameters:l.parameters,name:l.name,role:l.role}),a.push({id:c,type:l.type,shape:u})}),e(a),r({...t,rois:o})}},kS=n=>{const{editorId:e,configuration:t,activeTool:r,activeColor:s,shapes:i,addShape:o}=hr(),{notify:a,strings:l}=S.useContext(Le),[c,u]=S.useState(!1),[h,d]=S.useState(null),[f,p]=S.useState(0),[g,y]=S.useState(0),[b]=S.useState({x:0,y:0}),[w,x]=S.useState([]),[v,C]=S.useState([]),O=S.useCallback(D=>{me.emit(`canvas:${e}:shapeSelected`,D.selected??null)},[e]),P=S.useCallback(()=>{me.emit(`canvas:${e}:shapeSelected`,null)},[e]);S.useEffect(()=>{if(!n)return;r===Y.Pointer?(n.selection=!0,n.getObjects().forEach(R=>{R.selectable=!0}),n.renderAll()):(n.selection=!1,n.discardActiveObject(),me.emit(`canvas:${e}:shapeSelected`,null),n.renderAll());const D=R=>{switch(r){case Y.Rectangle:if(!bn(t,Y.Rectangle,i,a,l.cannotDrawMoreRectangles))return;vS(R,n,s,p,y,d,u);break;case Y.Polygon:if(!bn(t,Y.Polygon,i,a,l.cannotDrawMorePolygons))return;uS(R,n,s,u,w,x,v,C);break;case Y.Polyline:if(!bn(t,Y.Polyline,i,a,l.cannotDrawMorePolylines))return;gS(R,n,s,u,w,x,v,C);break}},B=R=>{switch(r){case Y.Rectangle:xS(R,n,f,g,h,c);break;case Y.Polygon:hS(R,n,c,v);break;case Y.Polyline:mS(R,n,c,v);break}},m=()=>{switch(r){case Y.Rectangle:SS(e,n,u,h,d);break}},E=()=>{switch(r){case Y.Polygon:dS(e,n,s,u,w,x,v,C);break;case Y.Polyline:yS(e,n,s,u,w,x,v,C);break}};return n.on("mouse:down",D),n.on("mouse:move",B),n.on("mouse:up",m),n.on("mouse:dblclick",E),n.on("selection:created",O),n.on("selection:updated",O),n.on("selection:cleared",P),()=>{n.off("mouse:down",D),n.off("mouse:move",B),n.off("mouse:up",m),n.off("mouse:dblclick",E),n.off("selection:created",O),n.off("selection:updated",O),n.off("selection:cleared",P)}},[r,s,c,h,f,g,b,v,w,n,o,O,P,t,a,l,i,e])},OS=n=>{const{configuration:e,shapes:t,addShape:r,setActiveTool:s,editorId:i}=hr(),{notify:o,strings:a}=S.useContext(Le);S.useEffect(()=>{const l=(h,d)=>{const f=n==null?void 0:n.getObjects().find(p=>p.id===d);f&&(n==null||n.remove(f))},c=(h,d)=>{const f=n==null?void 0:n.getObjects().find(g=>g.id===d);let p;switch(f==null?void 0:f.type){case Y.Polygon:if(!bn(e,Y.Polygon,t,o,a.cannotDrawMorePolygons))return;p=fS(i,n,f),me.emit(`canvas:${i}:selectShape`,p.id);break;case Y.Polyline:if(!bn(e,Y.Polyline,t,o,a.cannotDrawMorePolylines))return;p=bS(i,n,f),me.emit(`canvas:${i}:selectShape`,p.id);break;case Y.Rectangle:if(!bn(e,Y.Rectangle,t,o,a.cannotDrawMoreRectangles))return;p=CS(i,n,f),me.emit(`canvas:${i}:selectShape`,p.id);break}},u=(h,d)=>{const f=n==null?void 0:n.getObjects().find(p=>p.id===d);f&&(n==null||n.discardActiveObject(),n==null||n.setActiveObject(f),n==null||n.requestRenderAll(),s(Y.Pointer))};return me.register(`canvas:${i}:removeShape`,l),me.register(`canvas:${i}:copyShape`,c),me.register(`canvas:${i}:selectShape`,u),()=>{me.unregister(`canvas:${i}:removeShape`,l),me.unregister(`canvas:${i}:copyShape`,c),me.unregister(`canvas:${i}:selectShape`,u)}},[s,n,r,e,t,o,a,i])},ES=n=>{const[e,t]=S.useState({}),[r,s]=S.useState(n.reduce((o,a)=>({...o,[a.codename]:a.value}),{}));return{fields:r,setField:o=>a=>{s({...r,[o]:a})},setFields:s,errors:e,setErrors:t}},bd=({canvasSize:n,initialData:e})=>{const{metadata:t,setMetadata:r,addShapes:s,editorId:i}=hr(),{enableLogs:o}=S.useContext(Le),[a,l]=S.useState(!1),c=S.useRef(null);return kS(c.current),OS(c.current),S.useEffect(()=>(n.width!==0&&n.height!==0&&!a&&(c.current=new ha(`react-cam-roi-canvas-${i}`),c.current.setDimensions({width:n.width,height:n.height}),TS(c,s,t,r,e,o),l(!0)),()=>{var u;(u=c.current)==null||u.dispose()}),[n.width,n.height]),_.jsx("canvas",{id:`react-cam-roi-canvas-${i}`,style:{width:`${n.width}px`,height:`${n.height}px`}})};bd.__docgenInfo={description:"",methods:[],displayName:"Canvas"};const PS="_canvasWrapper_52cqe_1",MS={canvasWrapper:PS},vd=({onChange:n,value:e,required:t,shapeType:r,...s})=>{const{strings:i}=S.useContext(Le),{configuration:o}=hr(),a=[];return(o.rois||[]).filter(l=>l.type===r).forEach(l=>{a.includes(l.role)||a.push(l.role)}),S.useEffect(()=>{t&&n(a[0])},[]),_.jsx(Xa,{required:t,label:i.role,value:e,onChange:l=>n(l),options:a.map(l=>({value:l,label:Ha(l)})),...s})};vd.__docgenInfo={description:"",methods:[],displayName:"RoleField"};const ci=({value:n,onChange:e,parameter:t,errors:r})=>{var u,h;const{TextField:s,NumberField:i,BoolField:o,EnumField:a,strings:l}=S.useContext(Le),c={required:t.required,label:`${t.label}${t.unit?` (${t.unit})`:""}`,error:!!r[t.codename],helperText:r[t.codename]?l[r[t.codename]]:t.description};switch(t.type){case"string":return(u=t.options)!=null&&u.length?_.jsx(a,{value:n,onChange:d=>e(d),options:t.options,multiple:t.multiple,...c}):_.jsx(s,{type:"text",value:n,onChange:d=>e(d),...c});case"int":case"float":return(h=t.options)!=null&&h.length?_.jsx(a,{value:n,onChange:d=>e(d),options:t.options,multiple:t.multiple,...c}):_.jsx(i,{value:n,onChange:d=>e(d),...c});case"bool":return _.jsx(o,{value:n,onChange:d=>e(d),...c});default:return null}};ci.__docgenInfo={description:"",methods:[],displayName:"ParameterField",props:{value:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: T) => void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"void"}}},description:""},parameter:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}},description:""},errors:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""}}};const DS="_form_mzru3_1",AS={form:DS},pl=({title:n,onClose:e,parameters:t,data:r,onSubmit:s,shapeType:i,shapeName:o,shapeRole:a})=>{const{Modal:l,TextField:c,strings:u}=S.useContext(Le),[h,d]=S.useState(o??""),[f,p]=S.useState(a??""),{fields:g,setField:y,errors:b,setErrors:w}=ES(r),x=()=>{if(fb(t,g,w)){const v=[...t.map(C=>({codename:C.codename,value:g[C.codename]}))];i?s(v,{name:h,role:f}):s(v)}};return _.jsx(l,{onClose:e,title:n,isOpen:!0,maxWidth:"sm",onSubmit:x,children:_.jsxs("div",{className:q("form",AS,null),children:[i&&_.jsxs(_.Fragment,{children:[_.jsx(c,{required:!0,label:u.name,type:"text",value:h,onChange:d,error:!!b.name,helperText:b.name}),_.jsx(vd,{required:!0,value:f,onChange:p,error:!!b.name,helperText:b.name,shapeType:i})]}),t.map(v=>{switch(v.type){case"string":return _.jsx(ci,{value:String(g[v.codename]),onChange:y(v.codename),parameter:v,errors:b},v.codename);case"int":case"float":return _.jsx(ci,{value:g[v.codename],onChange:y(v.codename),parameter:v,errors:b},v.codename);case"bool":return _.jsx(ci,{value:g[v.codename],onChange:y(v.codename),parameter:v,errors:b},v.codename);default:return null}})]})})};pl.__docgenInfo={description:"",methods:[],displayName:"ParametersModalForm"};const RS="_shapesTableName_1wpy4_54",jS="_shapesTableColor_1wpy4_59",ln={"shapes-table":"_shapes-table_1wpy4_1","shapes-table-light":"_shapes-table-light_1wpy4_20","shapes-table-dark":"_shapes-table-dark_1wpy4_25","shapes-row-selected-light":"_shapes-row-selected-light_1wpy4_30","shapes-row-selected-dark":"_shapes-row-selected-dark_1wpy4_34","shapes-row-even-light":"_shapes-row-even-light_1wpy4_38","shapes-row-even-dark":"_shapes-row-even-dark_1wpy4_42","shapes-row-odd-light":"_shapes-row-odd-light_1wpy4_46","shapes-row-odd-dark":"_shapes-row-odd-dark_1wpy4_50",shapesTableName:RS,shapesTableColor:jS},xd=()=>{var m,E,R,I,F;const{strings:n,Typography:e,IconButton:t,DeleteIcon:r,AnnotateIcon:s,SelectIcon:i,CopyIcon:o,themeMode:a}=S.useContext(Le),{shapes:l,removeShape:c,configuration:u,metadata:h,setMetadata:d,addShape:f,editorId:p}=hr(),[g,y]=S.useState([]),[b,w]=S.useState({isOpen:!1,shapeId:"",type:null,shape:null});S.useEffect(()=>{const M=(L,{id:$,type:W,shape:N})=>{w({isOpen:!0,shapeId:$,type:W,shape:N})};return me.register(`canvas:${p}:shapeAdded`,M),()=>{me.unregister(`canvas:${p}:shapeAdded`,M)}},[p]),S.useEffect(()=>{const M=(L,$)=>y(($==null?void 0:$.map(W=>W.id))??[]);return me.register(`canvas:${p}:shapeSelected`,M),()=>{me.unregister(`canvas:${p}:shapeSelected`,M)}},[l,p]);const x=M=>L=>{L.stopPropagation(),me.emit(`canvas:${p}:copyShape`,M)},v=M=>()=>{me.emit(`canvas:${p}:removeShape`,M),c(M)},C=M=>()=>{me.emit(`canvas:${p}:selectShape`,M)},O=M=>()=>{w({isOpen:!0,shapeId:M,type:null,shape:null})},P=M=>(L,$)=>{b.type!==null&&f(M,b.type,b.shape),d({...h,rois:[...h.rois.filter(W=>W.id!==M),{id:M,parameters:L,...$}]}),w({isOpen:!1,shapeId:"",type:null,shape:null})},D=()=>{b.type!==null&&me.emit(`canvas:${p}:removeShape`,b.shapeId),w({isOpen:!1,shapeId:"",type:null,shape:null})},B=a==="light"?"black":"white";return _.jsxs(_.Fragment,{children:[_.jsxs("table",{className:q("shapes-table",ln,a),children:[Object.keys(l).length>0&&_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:_.jsx(e,{style:{fontWeight:"bold"},children:n.name})}),_.jsx("th",{children:_.jsx(e,{style:{fontWeight:"bold"},children:n.role})}),_.jsx("th",{children:_.jsx(e,{style:{fontWeight:"bold"},children:n.type})}),_.jsx("th",{})]})}),_.jsx("tbody",{children:Object.keys(l).map((M,L)=>{const $=h.rois.find(W=>W.id===M);return _.jsxs("tr",{onClick:C(M),className:g.indexOf(M)>-1?q("shapes-row-selected",ln,a):L%2===0?q("shapes-row-even",ln,a):q("shapes-row-odd",ln,a),children:[_.jsx("td",{children:_.jsxs("div",{className:ln.shapesTableName,children:[_.jsx("div",{className:ln.shapesTableColor,style:{backgroundColor:l[M].shape.stroke}}),_.jsx(e,{children:$==null?void 0:$.name})]})}),_.jsx("td",{children:_.jsx(e,{children:Ha(($==null?void 0:$.role)??"")})}),_.jsx("td",{children:_.jsx(e,{children:n[l[M].type]})}),_.jsxs("td",{children:[_.jsx(t,{onClick:C(M),children:_.jsx(i,{color:B})}),_.jsx(t,{onClick:x(M),children:_.jsx(o,{color:B})}),_.jsx(t,{onClick:O(M),children:_.jsx(s,{color:B})}),_.jsx(t,{onClick:v(M),children:_.jsx(r,{color:B})})]})]},M)})})]}),b.isOpen&&_.jsx(pl,{shapeType:b.type||l[b.shapeId].type,shapeName:((m=h.rois.find(M=>M.id===b.shapeId))==null?void 0:m.name)??"",shapeRole:((E=h.rois.find(M=>M.id===b.shapeId))==null?void 0:E.role)??"",parameters:((R=u.rois.find(M=>M.type===(b.type||l[b.shapeId].type)))==null?void 0:R.parameters)??[],data:((I=h.rois.find(M=>M.id===b.shapeId))==null?void 0:I.parameters)??((F=u.rois.find(M=>M.type===(b.type||l[b.shapeId].type)))==null?void 0:F.parameters)??[],title:n.shapeParametersMetadata,onClose:D,onSubmit:P(b.shapeId)})]})};xd.__docgenInfo={description:"",methods:[],displayName:"ShapesList"};const Sd=({color:n="black",style:e={height:"32px"}})=>_.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:_.jsx("path",{fill:n,d:"M13.3891,20.923l-3.1995-6.8869-3.47,4.8454V4.077l11.5606,9.0859h-5.9695l3.1679,6.7828-2.0893.9773h-.0002Z"})});Sd.__docgenInfo={description:"",methods:[],displayName:"PointerIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const Cd=({color:n="black",style:e={height:"32px"}})=>_.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:_.jsx("path",{fill:n,d:"M17.3836,17.058v-2.9301h2.1705v4.341l-9.7673,4.341-7.5967-7.5968L6.5311,5.4459h4.341v2.1705h-2.9301l-3.1472,7.1627,5.4263,5.4263,7.1627-3.1472M22.8099,5.4459v2.1705h-3.2558v3.2558h-2.1705v-3.2558h-3.2558v-2.1705h3.2558v-3.2558h2.1705v3.2558h3.2558Z"})});Cd.__docgenInfo={description:"",methods:[],displayName:"PolygonIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const _d=({color:n="black",style:e={height:"32px"}})=>_.jsxs("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:[_.jsx("polygon",{fill:n,points:"20.5216 8.6492 20.5216 5.4658 18.3992 5.4658 18.3992 8.6492 15.2159 8.6492 15.2159 10.7715 18.3992 10.7715 18.3992 13.955 20.5216 13.955 20.5216 10.7715 23.705 10.7715 23.705 8.6492 20.5216 8.6492"}),_.jsx("polygon",{fill:n,points:"12.3027 17.2 7.011 14.4951 7.011 11.5067 8.9251 9.2929 13.103 9.2929 13.103 3.577 7.3871 3.577 7.3871 7.7797 4.7908 10.7826 1.295 10.7826 1.295 16.4985 6.2004 16.4985 12.3027 19.6175 12.3027 21.423 18.0186 21.423 18.0186 15.7071 12.3027 15.7071 12.3027 17.2"})]});_d.__docgenInfo={description:"",methods:[],displayName:"PolylineIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const wd=({color:n="black",style:e={height:"32px"}})=>_.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:_.jsx("path",{fill:n,d:"M19.5541,7.0738h3.2558v2.1705h-3.2558v3.2558h-2.1705v-3.2558h-3.2558v-2.1705h3.2558v-3.2558h2.1705v3.2558M17.3836,19.0115v-3.2558h2.1705v5.4263H2.1901V7.0738h8.682v2.1705h-6.5115v9.7673h13.023,0Z"})});wd.__docgenInfo={description:"",methods:[],displayName:"RectangleIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const IS="_colorpickerWrapper_15gxc_1",Po={colorpickerWrapper:IS,"colorpicker-button":"_colorpicker-button_15gxc_7","colorpicker-button-active":"_colorpicker-button-active_15gxc_15"},Td=({style:n})=>{const{pickerColors:e,themeMode:t}=S.useContext(Le),{activeColor:r,setActiveColor:s}=hr();return _.jsx("div",{style:n,className:Po.colorpickerWrapper,children:e.map(i=>_.jsx("div",{onClick:()=>s(i),className:`${q("colorpicker-button",Po,t)} ${r===i?q("colorpicker-button-active",Po,t):""}`,style:{backgroundColor:i}},i))})};Td.__docgenInfo={description:"",methods:[],displayName:"ColorPicker"};const FS="_toolbar_jxl4s_1",eu={toolbar:FS,"toolbar-light":"_toolbar-light_jxl4s_7","toolbar-dark":"_toolbar-dark_jxl4s_11","toolbar-helper":"_toolbar-helper_jxl4s_15","toolbar-helper-light":"_toolbar-helper-light_jxl4s_19","toolbar-helper-dark":"_toolbar-helper-dark_jxl4s_24","toolbar-spacer":"_toolbar-spacer_jxl4s_29","toolbar-spacer-light":"_toolbar-spacer-light_jxl4s_35","toolbar-spacer-dark":"_toolbar-spacer-dark_jxl4s_39"},kd=()=>{var p;const{IconButton:n,themeMode:e,primaryColor:t,Typography:r,strings:s}=S.useContext(Le),{activeTool:i,setActiveTool:o,configuration:a}=hr(),l=g=>g===i?t:e==="light"?"black":"white",c=g=>()=>o(g),u=(p=a.options)==null?void 0:p.hideForbiddenTools,h=a.rois.find(g=>g.type===Y.Polyline),d=a.rois.find(g=>g.type===Y.Polygon),f=a.rois.find(g=>g.type===Y.Rectangle);return _.jsxs(_.Fragment,{children:[_.jsx("div",{className:q("toolbar",eu,e),children:mc(a)&&_.jsxs(_.Fragment,{children:[_.jsx(n,{onClick:c(Y.Pointer),children:_.jsx(Sd,{color:l(Y.Pointer)})}),(!u||h)&&_.jsx(n,{onClick:c(Y.Polyline),disabled:!h,children:_.jsx(_d,{color:l(Y.Polyline)})}),(!u||d)&&_.jsx(n,{onClick:c(Y.Polygon),disabled:!d,children:_.jsx(Cd,{color:l(Y.Polygon)})}),(!u||f)&&_.jsx(n,{onClick:c(Y.Rectangle),disabled:!f,children:_.jsx(wd,{color:l(Y.Rectangle)})}),_.jsx(Td,{style:{marginLeft:"auto",marginRight:".5rem"}})]})}),mc(a)&&_.jsx("div",{className:q("toolbar-helper",eu,e),children:_.jsxs(r,{children:[s[i],": ",s[`${i}HelpText`]]})})]})};kd.__docgenInfo={description:"",methods:[],displayName:"Toolbar"};const LS="_header_h2re4_1",BS="_headerButtons_h2re4_28",Mo={header:LS,"header-light":"_header-light_h2re4_8","header-dark":"_header-dark_h2re4_12","header-info":"_header-info_h2re4_16","header-info-light":"_header-info-light_h2re4_19","header-info-dark":"_header-info-dark_h2re4_23",headerButtons:BS},Od=()=>{var r;const{strings:n,Typography:e}=S.useContext(Le),{configuration:t}=hr();return(r=t.rois)!=null&&r.length?_.jsxs("div",{children:[_.jsxs(e,{component:"div",children:[n.roisToBeDrawn,":"]}),_.jsx("ul",{children:t.rois.map(s=>{var a,l;let i;const o={role:Ha(s.role),type:s.type,threshold:(a=s.multiplicity)==null?void 0:a.threshold};switch((l=s.multiplicity)==null?void 0:l.operator){case Ge.Eq:i=Mt(n.roiMultiplicityEqRule,o);break;case Ge.Lt:i=Mt(n.roiMultiplicityLtRule,o);break;case Ge.Lte:i=Mt(n.roiMultiplicityLteRule,o);break;case Ge.Gt:i=Mt(n.roiMultiplicityGtRule,o);break;case Ge.Gte:i=Mt(n.roiMultiplicityGteRule,o);break;default:i=Mt(n.roiMultiplicityNoRule,o)}return _.jsx("li",{children:i},s.role)})})]}):null};Od.__docgenInfo={description:"",methods:[],displayName:"RoisInfo"};const Ed=()=>{var g;const{themeMode:n,Typography:e,Button:t,strings:r,SaveIcon:s,primaryFgColor:i,AnnotateIcon:o}=S.useContext(Le),{configuration:a,onSubmit:l,metadata:c,setMetadata:u}=hr(),[h,d]=S.useState({isOpen:!1}),f=n==="light"?"black":"white",p=y=>{u({...c,parameters:y}),d({isOpen:!1})};return _.jsxs("div",{className:q("header",Mo,n),children:[_.jsxs("div",{className:q("header-info",Mo,n),children:[((g=a.options)==null?void 0:g.description)&&_.jsx(e,{children:a.options.description}),_.jsx(Od,{})]}),_.jsxs("div",{className:Mo.headerButtons,children:[db(a)&&_.jsxs(t,{onClick:()=>d({isOpen:!0}),children:[_.jsx(o,{color:f})," ",r.mainParametersMetadata]}),_.jsxs(t,{primary:!0,onClick:l,children:[_.jsx(s,{color:i})," ",r.save]})]}),h.isOpen&&_.jsx(pl,{parameters:a.parameters,data:c.parameters,title:r.mainParametersMetadata,onClose:()=>d({isOpen:!1}),onSubmit:p})]})};Ed.__docgenInfo={description:"",methods:[],displayName:"Header"};const Pd=({imageUrl:n,configuration:e,onSubmit:t,initialData:r,editorId:s})=>{var m;const{themeMode:i,enableLogs:o,pickerColors:a,strings:l,notify:c}=S.useContext(Le),{imageSize:u,canvasSize:h,wrapperRef:d,isReady:f}=wS(n),[p,g]=S.useState(Y.Pointer),[y,b]=S.useState(a[0]),[w,x]=S.useState({parameters:[...e.parameters.map(E=>{const R=r==null?void 0:r.parameters.find(I=>I.codename===I.codename);return{codename:E.codename,value:R?R.value:E.value}})??[]],rois:[]}),[v,C]=S.useState({}),O=S.useCallback((E,R,I)=>C({...v,[E]:{type:R,shape:I}}),[v]),P=S.useCallback(E=>C({...v,...E.reduce((R,I)=>({...R,[I.id]:I}),{})}),[v]),D=S.useCallback(E=>{const R={...v};delete R[E],C(R),x({...w,rois:w.rois.filter(I=>I.id!==E)})},[v,w]),B=S.useCallback(()=>{var I;const[E,R]=pb(e,v,w,l);E?t({parameters:((I=w.parameters)==null?void 0:I.map(F=>({codename:F.codename,value:F.value})))??[],rois:Object.keys(v).map(F=>{var M,L,$,W;return{parameters:((L=(M=w.rois.find(N=>N.id===F))==null?void 0:M.parameters)==null?void 0:L.map(N=>({codename:N.codename,value:N.value})))??[],name:(($=w.rois.find(N=>N.id===F))==null?void 0:$.name)??"",role:((W=w.rois.find(N=>N.id===F))==null?void 0:W.role)??"",type:v[F].type,shape:gb(v[F].shape,v[F].shape.type)}})}):c.error(l.invalidSubmission+`
`+R.map(F=>`- ${F}`).join(`
`))},[t,e,v,w,l,c]);return Zn("info",o,"react-cam-roi","active tool",p),Zn("info",o,"react-cam-roi","canvas size",h),Zn("info",o,"react-cam-roi","metadata",w),f?_.jsx(rh,{editorId:s,hideForbiddenTools:((m=e.options)==null?void 0:m.hideForbiddenTools)??!1,activeTool:p,setActiveTool:g,activeColor:y,setActiveColor:b,shapes:v,addShape:O,addShapes:P,removeShape:D,configuration:e,metadata:w,setMetadata:x,onSubmit:B,children:_.jsxs("div",{style:{maxWidth:"100%",width:`${u.width}px`},ref:d,children:[_.jsx(Ed,{}),_.jsx(kd,{}),_.jsx("div",{className:q("canvasWrapper",MS,i),style:{width:`${h.width}px`,height:`${h.height}px`,backgroundImage:`url(${n})`},children:_.jsx(bd,{canvasSize:h,initialData:r})}),_.jsx(xd,{})]})}):_.jsx(gh,{})};Pd.__docgenInfo={description:"",methods:[],displayName:"RoiEditor"};const NS={parameters:[{codename:"analytics_1",label:"Analytics param 1",description:"This is some descriptive text",unit:"s",type:un.Integer,options:[{value:7,label:"Seven"},{value:10,label:"Ten"}],multiple:!0,required:!0,value:10},{codename:"analytics_2",label:"Analytics param 2",description:"This is some descriptive text",unit:"s",type:un.Boolean,options:[],required:!0,value:""}],rois:[{role:"invasion_area",type:Y.Polygon,multiplicity:{operator:Ge.Lt,threshold:4},parameters:[{codename:"threshold",label:"Alert threshold",description:"Threshold used for triggering alarms",unit:"%",type:un.Integer,options:[],required:!0,value:null}]},{role:"profile",type:Y.Polygon,multiplicity:{operator:Ge.Gte,threshold:1},parameters:[{codename:"threshold",label:"Profile threshold",description:"Threshold used for profiles",unit:"m",type:un.Integer,options:[],required:!0,value:2}]},{role:"limit",type:Y.Polyline,multiplicity:{operator:Ge.Gte,threshold:1},parameters:[{codename:"height",label:"Limit height",description:"Height of the limit",unit:"m",type:un.Float,options:[],required:!0,value:null}]}],options:{hideForbiddenTools:!1,description:"Draw a polygon and one or more polylines."}},$S={parameters:[{codename:"analytics_1",value:"seven"},{codename:"analytics_2",value:10},{codename:"analytics_3",value:!0}],rois:[{parameters:[{codename:"threshold",value:9}],role:"invasion_area",name:"Pub",type:"polygon",shape:{points:[{x:169,y:211.203125},{x:292,y:350.203125},{x:338,y:110.203125},{x:221,y:105.203125},{x:221,y:105.203125}],top:104.203125,left:168,color:"#ffffff"}},{parameters:[{codename:"height",value:6.8}],type:"polyline",role:"limit",name:"Something",shape:{points:[{x:511,y:42.203125},{x:486,y:173.203125},{x:672,y:168.203125},{x:626,y:55.203125},{x:626,y:55.203125}],top:41.203125,left:485,color:"#ff9900"}}]},US={title:"ReactCamRoi/ROI Editor",component:Pd,decorators:[(n,e)=>_.jsxs("div",{children:[_.jsx("h2",{children:"react-cam-roi"}),_.jsx(Ya,{themeMode:e.globals.theme,children:_.jsx(n,{})})]})],args:{editorId:"meow",imageUrl:"https://placecats.com/800/600",configuration:NS,initialData:$S,onSubmit:n=>{console.log("output",n)}},parameters:{layout:"centered"}},Js={args:{editorId:"default"+String(new Date().getTime())}},WS=({onChange:n,...e})=>_.jsx(eh,{...e,onChange:t=>n(t.target.value),variant:"outlined"}),zS=({onChange:n,...e})=>_.jsx(eh,{...e,onChange:t=>n(t.target.value),variant:"outlined"}),VS=({onChange:n,checked:e,...t})=>_.jsx(n0,{...t,control:_.jsx(Ty,{checked:e,onChange:r=>n(r.target.checked)})}),Qs={decorators:[(n,e)=>_.jsxs("div",{children:[_.jsx("h3",{children:"Example using some MUI components"}),_.jsx("p",{children:"TextField, Checkbox, IconButton. Dark mode is not configured in this example."}),_.jsx(Ya,{themeMode:e.globals.theme,IconButton:$m,Typography:Go,TextField:WS,NumberField:zS,BoolField:VS,children:_.jsx(n,{})})]})],args:{editorId:"mui"},tags:["autodocs"]};var tu,ru,nu;Js.parameters={...Js.parameters,docs:{...(tu=Js.parameters)==null?void 0:tu.docs,source:{originalSource:`{
  args: {
    editorId: 'default' + String(new Date().getTime())
  }
}`,...(nu=(ru=Js.parameters)==null?void 0:ru.docs)==null?void 0:nu.source}}};var su,iu,ou;Qs.parameters={...Qs.parameters,docs:{...(su=Qs.parameters)==null?void 0:su.docs,source:{originalSource:`{
  decorators: [(Story, context) => {
    return <div>
          <h3>Example using some MUI components</h3>
          <p>TextField, Checkbox, IconButton. Dark mode is not configured in this example.</p>
          <UiProvider themeMode={context.globals.theme} IconButton={IconButton} Typography={Typography} TextField={CustomTextField} NumberField={CustomNumberField} BoolField={CustomBoolField}>
            <Story />
          </UiProvider>
        </div>;
  }],
  args: {
    editorId: 'mui'
  },
  tags: ['autodocs']
}`,...(ou=(iu=Qs.parameters)==null?void 0:iu.docs)==null?void 0:ou.source}}};const KS=["Default","Mui"];export{Js as Default,Qs as Mui,KS as __namedExportsOrder,US as default};
