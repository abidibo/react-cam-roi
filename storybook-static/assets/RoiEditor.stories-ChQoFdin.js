var Td=Object.defineProperty;var kd=(n,e,t)=>e in n?Td(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Rn=(n,e,t)=>kd(n,typeof e!="symbol"?e+"":e,t);import{j as _,M as Ss,r as ou}from"./index-D-TVCyVS.js";import{b as Mo,r as C,R as er}from"./index-cH8BGxVM.js";import{v as Wr}from"./v4-CtRu48qb.js";import"./index-Bts77hiZ.js";const ts={black:"#000",white:"#fff"},Kr={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Zr={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Jr={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Qr={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},en={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},jn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Od={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function ir(n,...e){const t=new URL(`https://mui.com/production-error/?code=${n}`);return e.forEach(r=>t.searchParams.append("args[]",r)),`Minified MUI error #${n}; visit ${t} for the full message.`}const da="$$material";function ci(){return ci=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ci.apply(null,arguments)}function Ed(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function Pd(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Md=function(){function n(t){var r=this;this._insertTag=function(s){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,i),r.tags.push(s)},this.isSpeedy=t.speedy===void 0?!0:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Pd(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Ed(s);try{i.insertRule(r,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var s;return(s=r.parentNode)==null?void 0:s.removeChild(r)}),this.tags=[],this.ctr=0},n}(),Ge="-ms-",ui="-moz-",ie="-webkit-",au="comm",fa="rule",pa="decl",Dd="@import",lu="@keyframes",Ad="@layer",Rd=Math.abs,Ei=String.fromCharCode,jd=Object.assign;function Fd(n,e){return Ye(n,0)^45?(((e<<2^Ye(n,0))<<2^Ye(n,1))<<2^Ye(n,2))<<2^Ye(n,3):0}function cu(n){return n.trim()}function Id(n,e){return(n=e.exec(n))?n[0]:n}function oe(n,e,t){return n.replace(e,t)}function Do(n,e){return n.indexOf(e)}function Ye(n,e){return n.charCodeAt(e)|0}function rs(n,e,t){return n.slice(e,t)}function Bt(n){return n.length}function ga(n){return n.length}function Cs(n,e){return e.push(n),n}function Ld(n,e){return n.map(e).join("")}var Pi=1,bn=1,uu=0,ht=0,Be=0,Cn="";function Mi(n,e,t,r,s,i,o){return{value:n,root:e,parent:t,type:r,props:s,children:i,line:Pi,column:bn,length:o,return:""}}function Fn(n,e){return jd(Mi("",null,null,"",null,null,0),n,{length:-n.length},e)}function Bd(){return Be}function Nd(){return Be=ht>0?Ye(Cn,--ht):0,bn--,Be===10&&(bn=1,Pi--),Be}function yt(){return Be=ht<uu?Ye(Cn,ht++):0,bn++,Be===10&&(bn=1,Pi++),Be}function Vt(){return Ye(Cn,ht)}function Qs(){return ht}function us(n,e){return rs(Cn,n,e)}function ns(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function hu(n){return Pi=bn=1,uu=Bt(Cn=n),ht=0,[]}function du(n){return Cn="",n}function ei(n){return cu(us(ht-1,Ao(n===91?n+2:n===40?n+1:n)))}function $d(n){for(;(Be=Vt())&&Be<33;)yt();return ns(n)>2||ns(Be)>3?"":" "}function Wd(n,e){for(;--e&&yt()&&!(Be<48||Be>102||Be>57&&Be<65||Be>70&&Be<97););return us(n,Qs()+(e<6&&Vt()==32&&yt()==32))}function Ao(n){for(;yt();)switch(Be){case n:return ht;case 34:case 39:n!==34&&n!==39&&Ao(Be);break;case 40:n===41&&Ao(n);break;case 92:yt();break}return ht}function zd(n,e){for(;yt()&&n+Be!==57;)if(n+Be===84&&Vt()===47)break;return"/*"+us(e,ht-1)+"*"+Ei(n===47?n:yt())}function Vd(n){for(;!ns(Vt());)yt();return us(n,ht)}function Hd(n){return du(ti("",null,null,null,[""],n=hu(n),0,[0],n))}function ti(n,e,t,r,s,i,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,g=1,y=1,b=1,w=0,v="",S=s,x=i,O=r,P=v;y;)switch(p=w,w=yt()){case 40:if(p!=108&&Ye(P,h-1)==58){Do(P+=oe(ei(w),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:P+=ei(w);break;case 9:case 10:case 13:case 32:P+=$d(p);break;case 92:P+=Wd(Qs()-1,7);continue;case 47:switch(Vt()){case 42:case 47:Cs(qd(zd(yt(),Qs()),e,t),l);break;default:P+="/"}break;case 123*g:a[c++]=Bt(P)*b;case 125*g:case 59:case 0:switch(w){case 0:case 125:y=0;case 59+u:b==-1&&(P=oe(P,/\f/g,"")),f>0&&Bt(P)-h&&Cs(f>32?yl(P+";",r,t,h-1):yl(oe(P," ","")+";",r,t,h-2),l);break;case 59:P+=";";default:if(Cs(O=ml(P,e,t,c,u,s,a,v,S=[],x=[],h),i),w===123)if(u===0)ti(P,e,O,O,S,i,h,a,x);else switch(d===99&&Ye(P,3)===110?100:d){case 100:case 108:case 109:case 115:ti(n,O,O,r&&Cs(ml(n,O,O,0,0,s,a,v,s,S=[],h),x),s,x,h,a,r?S:x);break;default:ti(P,O,O,O,[""],x,0,a,x)}}c=u=f=0,g=b=1,v=P="",h=o;break;case 58:h=1+Bt(P),f=p;default:if(g<1){if(w==123)--g;else if(w==125&&g++==0&&Nd()==125)continue}switch(P+=Ei(w),w*g){case 38:b=u>0?1:(P+="\f",-1);break;case 44:a[c++]=(Bt(P)-1)*b,b=1;break;case 64:Vt()===45&&(P+=ei(yt())),d=Vt(),u=h=Bt(v=P+=Vd(Qs())),w++;break;case 45:p===45&&Bt(P)==2&&(g=0)}}return i}function ml(n,e,t,r,s,i,o,a,l,c,u){for(var h=s-1,d=s===0?i:[""],f=ga(d),p=0,g=0,y=0;p<r;++p)for(var b=0,w=rs(n,h+1,h=Rd(g=o[p])),v=n;b<f;++b)(v=cu(g>0?d[b]+" "+w:oe(w,/&\f/g,d[b])))&&(l[y++]=v);return Mi(n,e,t,s===0?fa:a,l,c,u)}function qd(n,e,t){return Mi(n,e,t,au,Ei(Bd()),rs(n,2,-2),0)}function yl(n,e,t,r){return Mi(n,e,t,pa,rs(n,0,r),rs(n,r+1,-1),r)}function hn(n,e){for(var t="",r=ga(n),s=0;s<r;s++)t+=e(n[s],s,n,e)||"";return t}function Xd(n,e,t,r){switch(n.type){case Ad:if(n.children.length)break;case Dd:case pa:return n.return=n.return||n.value;case au:return"";case lu:return n.return=n.value+"{"+hn(n.children,r)+"}";case fa:n.value=n.props.join(",")}return Bt(t=hn(n.children,r))?n.return=n.value+"{"+t+"}":""}function Yd(n){var e=ga(n);return function(t,r,s,i){for(var o="",a=0;a<e;a++)o+=n[a](t,r,s,i)||"";return o}}function Ud(n){return function(e){e.root||(e=e.return)&&n(e)}}function fu(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Gd=function(e,t,r){for(var s=0,i=0;s=i,i=Vt(),s===38&&i===12&&(t[r]=1),!ns(i);)yt();return us(e,ht)},Kd=function(e,t){var r=-1,s=44;do switch(ns(s)){case 0:s===38&&Vt()===12&&(t[r]=1),e[r]+=Gd(ht-1,t,r);break;case 2:e[r]+=ei(s);break;case 4:if(s===44){e[++r]=Vt()===58?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Ei(s)}while(s=yt());return e},Zd=function(e,t){return du(Kd(hu(e),t))},bl=new WeakMap,Jd=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!bl.get(r))&&!s){bl.set(e,!0);for(var i=[],o=Zd(t,i),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=i[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},Qd=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function pu(n,e){switch(Fd(n,e)){case 5103:return ie+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ie+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ie+n+ui+n+Ge+n+n;case 6828:case 4268:return ie+n+Ge+n+n;case 6165:return ie+n+Ge+"flex-"+n+n;case 5187:return ie+n+oe(n,/(\w+).+(:[^]+)/,ie+"box-$1$2"+Ge+"flex-$1$2")+n;case 5443:return ie+n+Ge+"flex-item-"+oe(n,/flex-|-self/,"")+n;case 4675:return ie+n+Ge+"flex-line-pack"+oe(n,/align-content|flex-|-self/,"")+n;case 5548:return ie+n+Ge+oe(n,"shrink","negative")+n;case 5292:return ie+n+Ge+oe(n,"basis","preferred-size")+n;case 6060:return ie+"box-"+oe(n,"-grow","")+ie+n+Ge+oe(n,"grow","positive")+n;case 4554:return ie+oe(n,/([^-])(transform)/g,"$1"+ie+"$2")+n;case 6187:return oe(oe(oe(n,/(zoom-|grab)/,ie+"$1"),/(image-set)/,ie+"$1"),n,"")+n;case 5495:case 3959:return oe(n,/(image-set\([^]*)/,ie+"$1$`$1");case 4968:return oe(oe(n,/(.+:)(flex-)?(.*)/,ie+"box-pack:$3"+Ge+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ie+n+n;case 4095:case 3583:case 4068:case 2532:return oe(n,/(.+)-inline(.+)/,ie+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Bt(n)-1-e>6)switch(Ye(n,e+1)){case 109:if(Ye(n,e+4)!==45)break;case 102:return oe(n,/(.+:)(.+)-([^]+)/,"$1"+ie+"$2-$3$1"+ui+(Ye(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Do(n,"stretch")?pu(oe(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(Ye(n,e+1)!==115)break;case 6444:switch(Ye(n,Bt(n)-3-(~Do(n,"!important")&&10))){case 107:return oe(n,":",":"+ie)+n;case 101:return oe(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ie+(Ye(n,14)===45?"inline-":"")+"box$3$1"+ie+"$2$3$1"+Ge+"$2box$3")+n}break;case 5936:switch(Ye(n,e+11)){case 114:return ie+n+Ge+oe(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ie+n+Ge+oe(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ie+n+Ge+oe(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ie+n+Ge+n+n}return n}var ef=function(e,t,r,s){if(e.length>-1&&!e.return)switch(e.type){case pa:e.return=pu(e.value,e.length);break;case lu:return hn([Fn(e,{value:oe(e.value,"@","@"+ie)})],s);case fa:if(e.length)return Ld(e.props,function(i){switch(Id(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return hn([Fn(e,{props:[oe(i,/:(read-\w+)/,":"+ui+"$1")]})],s);case"::placeholder":return hn([Fn(e,{props:[oe(i,/:(plac\w+)/,":"+ie+"input-$1")]}),Fn(e,{props:[oe(i,/:(plac\w+)/,":"+ui+"$1")]}),Fn(e,{props:[oe(i,/:(plac\w+)/,Ge+"input-$1")]})],s)}return""})}},tf=[ef],rf=function(e){var t=e.key;if(t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var y=g.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=e.stylisPlugins||tf,i={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(g){for(var y=g.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)i[y[b]]=!0;a.push(g)});var l,c=[Jd,Qd];{var u,h=[Xd,Ud(function(g){u.insert(g)})],d=Yd(c.concat(s,h)),f=function(y){return hn(Hd(y),d)};l=function(y,b,w,v){u=w,f(y?y+"{"+b.styles+"}":b.styles),v&&(p.inserted[b.name]=!0)}}var p={key:t,sheet:new Md({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return p.sheet.hydrate(a),p},to={exports:{}},ae={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl;function nf(){if(vl)return ae;vl=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,i=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,c=n?Symbol.for("react.concurrent_mode"):60111,u=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,f=n?Symbol.for("react.memo"):60115,p=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function v(x){if(typeof x=="object"&&x!==null){var O=x.$$typeof;switch(O){case e:switch(x=x.type,x){case l:case c:case r:case i:case s:case h:return x;default:switch(x=x&&x.$$typeof,x){case a:case u:case p:case f:case o:return x;default:return O}}case t:return O}}}function S(x){return v(x)===c}return ae.AsyncMode=l,ae.ConcurrentMode=c,ae.ContextConsumer=a,ae.ContextProvider=o,ae.Element=e,ae.ForwardRef=u,ae.Fragment=r,ae.Lazy=p,ae.Memo=f,ae.Portal=t,ae.Profiler=i,ae.StrictMode=s,ae.Suspense=h,ae.isAsyncMode=function(x){return S(x)||v(x)===l},ae.isConcurrentMode=S,ae.isContextConsumer=function(x){return v(x)===a},ae.isContextProvider=function(x){return v(x)===o},ae.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},ae.isForwardRef=function(x){return v(x)===u},ae.isFragment=function(x){return v(x)===r},ae.isLazy=function(x){return v(x)===p},ae.isMemo=function(x){return v(x)===f},ae.isPortal=function(x){return v(x)===t},ae.isProfiler=function(x){return v(x)===i},ae.isStrictMode=function(x){return v(x)===s},ae.isSuspense=function(x){return v(x)===h},ae.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===r||x===c||x===i||x===s||x===h||x===d||typeof x=="object"&&x!==null&&(x.$$typeof===p||x.$$typeof===f||x.$$typeof===o||x.$$typeof===a||x.$$typeof===u||x.$$typeof===y||x.$$typeof===b||x.$$typeof===w||x.$$typeof===g)},ae.typeOf=v,ae}var xl;function sf(){return xl||(xl=1,to.exports=nf()),to.exports}var ro,Sl;function of(){if(Sl)return ro;Sl=1;var n=sf(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[n.ForwardRef]=r,i[n.Memo]=s;function o(p){return n.isMemo(p)?s:i[p.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,d=Object.prototype;function f(p,g,y){if(typeof g!="string"){if(d){var b=h(g);b&&b!==d&&f(p,b,y)}var w=l(g);c&&(w=w.concat(c(g)));for(var v=o(p),S=o(g),x=0;x<w.length;++x){var O=w[x];if(!t[O]&&!(y&&y[O])&&!(S&&S[O])&&!(v&&v[O])){var P=u(g,O);try{a(p,O,P)}catch{}}}}return p}return ro=f,ro}of();var af=!0;function gu(n,e,t){var r="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(r+=s+" ")}),r}var ma=function(e,t,r){var s=e.key+"-"+t.name;(r===!1||af===!1)&&e.registered[s]===void 0&&(e.registered[s]=t.styles)},ya=function(e,t,r){ma(e,t,r);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var i=t;do e.insert(t===i?"."+s:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function lf(n){for(var e=0,t,r=0,s=n.length;s>=4;++r,s-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var cf={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},uf=/[A-Z]|^ms/g,hf=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mu=function(e){return e.charCodeAt(1)===45},Cl=function(e){return e!=null&&typeof e!="boolean"},no=fu(function(n){return mu(n)?n:n.replace(uf,"-$&").toLowerCase()}),_l=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(hf,function(r,s,i){return Nt={name:s,styles:i,next:Nt},s})}return cf[e]!==1&&!mu(e)&&typeof t=="number"&&t!==0?t+"px":t};function ss(n,e,t){if(t==null)return"";var r=t;if(r.__emotion_styles!==void 0)return r;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Nt={name:s.name,styles:s.styles,next:Nt},s.name;var i=t;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Nt={name:o.name,styles:o.styles,next:Nt},o=o.next;var a=i.styles+";";return a}return df(n,e,t)}case"function":{if(n!==void 0){var l=Nt,c=t(n);return Nt=l,ss(n,e,c)}break}}var u=t;if(e==null)return u;var h=e[u];return h!==void 0?h:u}function df(n,e,t){var r="";if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=ss(n,e,t[s])+";";else for(var i in t){var o=t[i];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?r+=i+"{"+e[a]+"}":Cl(a)&&(r+=no(i)+":"+_l(i,a)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var l=0;l<o.length;l++)Cl(o[l])&&(r+=no(i)+":"+_l(i,o[l])+";");else{var c=ss(n,e,o);switch(i){case"animation":case"animationName":{r+=no(i)+":"+c+";";break}default:r+=i+"{"+c+"}"}}}return r}var wl=/label:\s*([^\s;{]+)\s*(;|$)/g,Nt;function hs(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var r=!0,s="";Nt=void 0;var i=n[0];if(i==null||i.raw===void 0)r=!1,s+=ss(t,e,i);else{var o=i;s+=o[0]}for(var a=1;a<n.length;a++)if(s+=ss(t,e,n[a]),r){var l=i;s+=l[a]}wl.lastIndex=0;for(var c="",u;(u=wl.exec(s))!==null;)c+="-"+u[1];var h=lf(s)+c;return{name:h,styles:s,next:Nt}}var ff=function(e){return e()},yu=Mo.useInsertionEffect?Mo.useInsertionEffect:!1,bu=yu||ff,Tl=yu||C.useLayoutEffect,vu=C.createContext(typeof HTMLElement<"u"?rf({key:"css"}):null);vu.Provider;var ba=function(e){return C.forwardRef(function(t,r){var s=C.useContext(vu);return e(t,s,r)})},Di=C.createContext({}),va={}.hasOwnProperty,Ro="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",pf=function(e,t){var r={};for(var s in t)va.call(t,s)&&(r[s]=t[s]);return r[Ro]=e,r},gf=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return ma(t,r,s),bu(function(){return ya(t,r,s)}),null},mf=ba(function(n,e,t){var r=n.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var s=n[Ro],i=[r],o="";typeof n.className=="string"?o=gu(e.registered,i,n.className):n.className!=null&&(o=n.className+" ");var a=hs(i,void 0,C.useContext(Di));o+=e.key+"-"+a.name;var l={};for(var c in n)va.call(n,c)&&c!=="css"&&c!==Ro&&(l[c]=n[c]);return l.className=o,t&&(l.ref=t),C.createElement(C.Fragment,null,C.createElement(gf,{cache:e,serialized:a,isStringTag:typeof s=="string"}),C.createElement(s,l))}),yf=mf,bf=function(e,t){var r=arguments;if(t==null||!va.call(t,"css"))return C.createElement.apply(void 0,r);var s=r.length,i=new Array(s);i[0]=yf,i[1]=pf(e,t);for(var o=2;o<s;o++)i[o]=r[o];return C.createElement.apply(null,i)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(bf);var vf=ba(function(n,e){var t=n.styles,r=hs([t],void 0,C.useContext(Di)),s=C.useRef();return Tl(function(){var i=e.key+"-global",o=new e.sheet.constructor({key:i,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",i),o.hydrate([l])),s.current=[o,a],function(){o.flush()}},[e]),Tl(function(){var i=s.current,o=i[0],a=i[1];if(a){i[1]=!1;return}if(r.next!==void 0&&ya(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function xa(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return hs(e)}function ds(){var n=xa.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var xf=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Sf=fu(function(n){return xf.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),Cf=Sf,_f=function(e){return e!=="theme"},kl=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Cf:_f},Ol=function(e,t,r){var s;if(t){var i=t.shouldForwardProp;s=e.__emotion_forwardProp&&i?function(o){return e.__emotion_forwardProp(o)&&i(o)}:i}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},wf=function(e){var t=e.cache,r=e.serialized,s=e.isStringTag;return ma(t,r,s),bu(function(){return ya(t,r,s)}),null},Tf=function n(e,t){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,i,o;t!==void 0&&(i=t.label,o=t.target);var a=Ol(e,t,r),l=a||kl(s),c=!l("as");return function(){var u=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)h.push.apply(h,u);else{var d=u[0];h.push(d[0]);for(var f=u.length,p=1;p<f;p++)h.push(u[p],d[p])}var g=ba(function(y,b,w){var v=c&&y.as||s,S="",x=[],O=y;if(y.theme==null){O={};for(var P in y)O[P]=y[P];O.theme=C.useContext(Di)}typeof y.className=="string"?S=gu(b.registered,x,y.className):y.className!=null&&(S=y.className+" ");var M=hs(h.concat(x),b.registered,O);S+=b.key+"-"+M.name,o!==void 0&&(S+=" "+o);var L=c&&a===void 0?kl(v):l,m={};for(var E in y)c&&E==="as"||L(E)&&(m[E]=y[E]);return m.className=S,w&&(m.ref=w),C.createElement(C.Fragment,null,C.createElement(wf,{cache:b,serialized:M,isStringTag:typeof v=="string"}),C.createElement(v,m))});return g.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",g.defaultProps=e.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=h,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(y,b){var w=n(y,ci({},t,b,{shouldForwardProp:Ol(g,b,!0)}));return w.apply(void 0,h)},g}},kf=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jo=Tf.bind(null);kf.forEach(function(n){jo[n]=jo(n)});function Of(n){return n==null||Object.keys(n).length===0}function Ef(n){const{styles:e,defaultTheme:t={}}=n,r=typeof e=="function"?s=>e(Of(s)?t:s):e;return _.jsx(vf,{styles:r})}/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Pf(n,e){return jo(n,e)}function Mf(n,e){Array.isArray(n.__emotion_styles)&&(n.__emotion_styles=e(n.__emotion_styles))}const El=[];function Pl(n){return El[0]=n,hs(El)}var so={exports:{}},he={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ml;function Df(){if(Ml)return he;Ml=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),f=Symbol.for("react.client.reference");function p(g){if(typeof g=="object"&&g!==null){var y=g.$$typeof;switch(y){case n:switch(g=g.type,g){case t:case s:case r:case l:case c:return g;default:switch(g=g&&g.$$typeof,g){case o:case a:case h:case u:return g;case i:return g;default:return y}}case e:return y}}}return he.ContextConsumer=i,he.ContextProvider=o,he.Element=n,he.ForwardRef=a,he.Fragment=t,he.Lazy=h,he.Memo=u,he.Portal=e,he.Profiler=s,he.StrictMode=r,he.Suspense=l,he.SuspenseList=c,he.isContextConsumer=function(g){return p(g)===i},he.isContextProvider=function(g){return p(g)===o},he.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===n},he.isForwardRef=function(g){return p(g)===a},he.isFragment=function(g){return p(g)===t},he.isLazy=function(g){return p(g)===h},he.isMemo=function(g){return p(g)===u},he.isPortal=function(g){return p(g)===e},he.isProfiler=function(g){return p(g)===s},he.isStrictMode=function(g){return p(g)===r},he.isSuspense=function(g){return p(g)===l},he.isSuspenseList=function(g){return p(g)===c},he.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===t||g===s||g===r||g===l||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===a||g.$$typeof===f||g.getModuleId!==void 0)},he.typeOf=p,he}var Dl;function Af(){return Dl||(Dl=1,so.exports=Df()),so.exports}var xu=Af();function $t(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function Su(n){if(C.isValidElement(n)||xu.isValidElementType(n)||!$t(n))return n;const e={};return Object.keys(n).forEach(t=>{e[t]=Su(n[t])}),e}function Ke(n,e,t={clone:!0}){const r=t.clone?{...n}:n;return $t(n)&&$t(e)&&Object.keys(e).forEach(s=>{C.isValidElement(e[s])||xu.isValidElementType(e[s])?r[s]=e[s]:$t(e[s])&&Object.prototype.hasOwnProperty.call(n,s)&&$t(n[s])?r[s]=Ke(n[s],e[s],t):t.clone?r[s]=$t(e[s])?Su(e[s]):e[s]:r[s]=e[s]}),r}const Rf=n=>{const e=Object.keys(n).map(t=>({key:t,val:n[t]}))||[];return e.sort((t,r)=>t.val-r.val),e.reduce((t,r)=>({...t,[r.key]:r.val}),{})};function jf(n){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:t="px",step:r=5,...s}=n,i=Rf(e),o=Object.keys(i);function a(d){return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t})`}function l(d){return`@media (max-width:${(typeof e[d]=="number"?e[d]:d)-r/100}${t})`}function c(d,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[d]=="number"?e[d]:d}${t}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${t})`}function u(d){return o.indexOf(d)+1<o.length?c(d,o[o.indexOf(d)+1]):a(d)}function h(d){const f=o.indexOf(d);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(d,o[o.indexOf(d)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:a,down:l,between:c,only:u,not:h,unit:t,...s}}function Ff(n,e){if(!n.containerQueries)return e;const t=Object.keys(e).filter(r=>r.startsWith("@container")).sort((r,s)=>{var o,a;const i=/min-width:\s*([0-9.]+)/;return+(((o=r.match(i))==null?void 0:o[1])||0)-+(((a=s.match(i))==null?void 0:a[1])||0)});return t.length?t.reduce((r,s)=>{const i=e[s];return delete r[s],r[s]=i,r},{...e}):e}function If(n,e){return e==="@"||e.startsWith("@")&&(n.some(t=>e.startsWith(`@${t}`))||!!e.match(/^@\d/))}function Lf(n,e){const t=e.match(/^@([^/]+)?\/?(.+)?$/);if(!t)return null;const[,r,s]=t,i=Number.isNaN(+r)?r||0:+r;return n.containerQueries(s).up(i)}function Bf(n){const e=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function t(i,o){i.up=(...a)=>e(n.breakpoints.up(...a),o),i.down=(...a)=>e(n.breakpoints.down(...a),o),i.between=(...a)=>e(n.breakpoints.between(...a),o),i.only=(...a)=>e(n.breakpoints.only(...a),o),i.not=(...a)=>{const l=e(n.breakpoints.not(...a),o);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const r={},s=i=>(t(r,i),r);return t(s),{...n,containerQueries:s}}const Nf={borderRadius:4};function Yn(n,e){return e?Ke(n,e,{clone:!1}):n}const Ai={xs:0,sm:600,md:900,lg:1200,xl:1536},Al={keys:["xs","sm","md","lg","xl"],up:n=>`@media (min-width:${Ai[n]}px)`},$f={containerQueries:n=>({up:e=>{let t=typeof e=="number"?e:Ai[e]||e;return typeof t=="number"&&(t=`${t}px`),n?`@container ${n} (min-width:${t})`:`@container (min-width:${t})`}})};function or(n,e,t){const r=n.theme||{};if(Array.isArray(e)){const i=r.breakpoints||Al;return e.reduce((o,a,l)=>(o[i.up(i.keys[l])]=t(e[l]),o),{})}if(typeof e=="object"){const i=r.breakpoints||Al;return Object.keys(e).reduce((o,a)=>{if(If(i.keys,a)){const l=Lf(r.containerQueries?r:$f,a);l&&(o[l]=t(e[a],a))}else if(Object.keys(i.values||Ai).includes(a)){const l=i.up(a);o[l]=t(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return t(e)}function Wf(n={}){var t;return((t=n.keys)==null?void 0:t.reduce((r,s)=>{const i=n.up(s);return r[i]={},r},{}))||{}}function zf(n,e){return n.reduce((t,r)=>{const s=t[r];return(!s||Object.keys(s).length===0)&&delete t[r],t},e)}function G(n){if(typeof n!="string")throw new Error(ir(7));return n.charAt(0).toUpperCase()+n.slice(1)}function Ri(n,e,t=!0){if(!e||typeof e!="string")return null;if(n&&n.vars&&t){const r=`vars.${e}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,n);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,n)}function hi(n,e,t,r=t){let s;return typeof n=="function"?s=n(t):Array.isArray(n)?s=n[t]||r:s=Ri(n,t)||r,e&&(s=e(s,r,n)),s}function Fe(n){const{prop:e,cssProperty:t=n.prop,themeKey:r,transform:s}=n,i=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=Ri(l,r)||{};return or(o,a,h=>{let d=hi(c,s,h);return h===d&&typeof h=="string"&&(d=hi(c,s,`${e}${h==="default"?"":G(h)}`,h)),t===!1?d:{[t]:d}})};return i.propTypes={},i.filterProps=[e],i}function Vf(n){const e={};return t=>(e[t]===void 0&&(e[t]=n(t)),e[t])}const Hf={m:"margin",p:"padding"},qf={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Rl={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Xf=Vf(n=>{if(n.length>2)if(Rl[n])n=Rl[n];else return[n];const[e,t]=n.split(""),r=Hf[e],s=qf[t]||"";return Array.isArray(s)?s.map(i=>r+i):[r+s]}),Sa=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ca=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Sa,...Ca];function fs(n,e,t,r){const s=Ri(n,e,!0)??t;return typeof s=="number"||typeof s=="string"?i=>typeof i=="string"?i:typeof s=="string"?`calc(${i} * ${s})`:s*i:Array.isArray(s)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),a=s[o];return i>=0?a:typeof a=="number"?-a:`-${a}`}:typeof s=="function"?s:()=>{}}function _a(n){return fs(n,"spacing",8)}function ps(n,e){return typeof e=="string"||e==null?e:n(e)}function Yf(n,e){return t=>n.reduce((r,s)=>(r[s]=ps(e,t),r),{})}function Uf(n,e,t,r){if(!e.includes(t))return null;const s=Xf(t),i=Yf(s,r),o=n[t];return or(n,o,i)}function Cu(n,e){const t=_a(n.theme);return Object.keys(n).map(r=>Uf(n,e,r,t)).reduce(Yn,{})}function De(n){return Cu(n,Sa)}De.propTypes={};De.filterProps=Sa;function Ae(n){return Cu(n,Ca)}Ae.propTypes={};Ae.filterProps=Ca;function _u(n=8,e=_a({spacing:n})){if(n.mui)return n;const t=(...r)=>(r.length===0?[1]:r).map(i=>{const o=e(i);return typeof o=="number"?`${o}px`:o}).join(" ");return t.mui=!0,t}function ji(...n){const e=n.reduce((r,s)=>(s.filterProps.forEach(i=>{r[i]=s}),r),{}),t=r=>Object.keys(r).reduce((s,i)=>e[i]?Yn(s,e[i](r)):s,{});return t.propTypes={},t.filterProps=n.reduce((r,s)=>r.concat(s.filterProps),[]),t}function St(n){return typeof n!="number"?n:`${n}px solid`}function Tt(n,e){return Fe({prop:n,themeKey:"borders",transform:e})}const Gf=Tt("border",St),Kf=Tt("borderTop",St),Zf=Tt("borderRight",St),Jf=Tt("borderBottom",St),Qf=Tt("borderLeft",St),ep=Tt("borderColor"),tp=Tt("borderTopColor"),rp=Tt("borderRightColor"),np=Tt("borderBottomColor"),sp=Tt("borderLeftColor"),ip=Tt("outline",St),op=Tt("outlineColor"),Fi=n=>{if(n.borderRadius!==void 0&&n.borderRadius!==null){const e=fs(n.theme,"shape.borderRadius",4),t=r=>({borderRadius:ps(e,r)});return or(n,n.borderRadius,t)}return null};Fi.propTypes={};Fi.filterProps=["borderRadius"];ji(Gf,Kf,Zf,Jf,Qf,ep,tp,rp,np,sp,Fi,ip,op);const Ii=n=>{if(n.gap!==void 0&&n.gap!==null){const e=fs(n.theme,"spacing",8),t=r=>({gap:ps(e,r)});return or(n,n.gap,t)}return null};Ii.propTypes={};Ii.filterProps=["gap"];const Li=n=>{if(n.columnGap!==void 0&&n.columnGap!==null){const e=fs(n.theme,"spacing",8),t=r=>({columnGap:ps(e,r)});return or(n,n.columnGap,t)}return null};Li.propTypes={};Li.filterProps=["columnGap"];const Bi=n=>{if(n.rowGap!==void 0&&n.rowGap!==null){const e=fs(n.theme,"spacing",8),t=r=>({rowGap:ps(e,r)});return or(n,n.rowGap,t)}return null};Bi.propTypes={};Bi.filterProps=["rowGap"];const ap=Fe({prop:"gridColumn"}),lp=Fe({prop:"gridRow"}),cp=Fe({prop:"gridAutoFlow"}),up=Fe({prop:"gridAutoColumns"}),hp=Fe({prop:"gridAutoRows"}),dp=Fe({prop:"gridTemplateColumns"}),fp=Fe({prop:"gridTemplateRows"}),pp=Fe({prop:"gridTemplateAreas"}),gp=Fe({prop:"gridArea"});ji(Ii,Li,Bi,ap,lp,cp,up,hp,dp,fp,pp,gp);function dn(n,e){return e==="grey"?e:n}const mp=Fe({prop:"color",themeKey:"palette",transform:dn}),yp=Fe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:dn}),bp=Fe({prop:"backgroundColor",themeKey:"palette",transform:dn});ji(mp,yp,bp);function mt(n){return n<=1&&n!==0?`${n*100}%`:n}const vp=Fe({prop:"width",transform:mt}),wa=n=>{if(n.maxWidth!==void 0&&n.maxWidth!==null){const e=t=>{var s,i,o,a,l;const r=((o=(i=(s=n.theme)==null?void 0:s.breakpoints)==null?void 0:i.values)==null?void 0:o[t])||Ai[t];return r?((l=(a=n.theme)==null?void 0:a.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${r}${n.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:mt(t)}};return or(n,n.maxWidth,e)}return null};wa.filterProps=["maxWidth"];const xp=Fe({prop:"minWidth",transform:mt}),Sp=Fe({prop:"height",transform:mt}),Cp=Fe({prop:"maxHeight",transform:mt}),_p=Fe({prop:"minHeight",transform:mt});Fe({prop:"size",cssProperty:"width",transform:mt});Fe({prop:"size",cssProperty:"height",transform:mt});const wp=Fe({prop:"boxSizing"});ji(vp,wa,xp,Sp,Cp,_p,wp);const gs={border:{themeKey:"borders",transform:St},borderTop:{themeKey:"borders",transform:St},borderRight:{themeKey:"borders",transform:St},borderBottom:{themeKey:"borders",transform:St},borderLeft:{themeKey:"borders",transform:St},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:St},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Fi},color:{themeKey:"palette",transform:dn},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:dn},backgroundColor:{themeKey:"palette",transform:dn},p:{style:Ae},pt:{style:Ae},pr:{style:Ae},pb:{style:Ae},pl:{style:Ae},px:{style:Ae},py:{style:Ae},padding:{style:Ae},paddingTop:{style:Ae},paddingRight:{style:Ae},paddingBottom:{style:Ae},paddingLeft:{style:Ae},paddingX:{style:Ae},paddingY:{style:Ae},paddingInline:{style:Ae},paddingInlineStart:{style:Ae},paddingInlineEnd:{style:Ae},paddingBlock:{style:Ae},paddingBlockStart:{style:Ae},paddingBlockEnd:{style:Ae},m:{style:De},mt:{style:De},mr:{style:De},mb:{style:De},ml:{style:De},mx:{style:De},my:{style:De},margin:{style:De},marginTop:{style:De},marginRight:{style:De},marginBottom:{style:De},marginLeft:{style:De},marginX:{style:De},marginY:{style:De},marginInline:{style:De},marginInlineStart:{style:De},marginInlineEnd:{style:De},marginBlock:{style:De},marginBlockStart:{style:De},marginBlockEnd:{style:De},displayPrint:{cssProperty:!1,transform:n=>({"@media print":{display:n}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Ii},rowGap:{style:Bi},columnGap:{style:Li},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:mt},maxWidth:{style:wa},minWidth:{transform:mt},height:{transform:mt},maxHeight:{transform:mt},minHeight:{transform:mt},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Tp(...n){const e=n.reduce((r,s)=>r.concat(Object.keys(s)),[]),t=new Set(e);return n.every(r=>t.size===Object.keys(r).length)}function kp(n,e){return typeof n=="function"?n(e):n}function Op(){function n(t,r,s,i){const o={[t]:r,theme:s},a=i[t];if(!a)return{[t]:r};const{cssProperty:l=t,themeKey:c,transform:u,style:h}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[t]:r};const d=Ri(s,c)||{};return h?h(o):or(o,r,p=>{let g=hi(d,u,p);return p===g&&typeof p=="string"&&(g=hi(d,u,`${t}${p==="default"?"":G(p)}`,p)),l===!1?g:{[l]:g}})}function e(t){const{sx:r,theme:s={}}=t||{};if(!r)return null;const i=s.unstable_sxConfig??gs;function o(a){let l=a;if(typeof a=="function")l=a(s);else if(typeof a!="object")return a;if(!l)return null;const c=Wf(s.breakpoints),u=Object.keys(c);let h=c;return Object.keys(l).forEach(d=>{const f=kp(l[d],s);if(f!=null)if(typeof f=="object")if(i[d])h=Yn(h,n(d,f,s,i));else{const p=or({theme:s},f,g=>({[d]:g}));Tp(p,f)?h[d]=e({sx:f,theme:s}):h=Yn(h,p)}else h=Yn(h,n(d,f,s,i))}),Ff(s,zf(u,h))}return Array.isArray(r)?r.map(o):o(r)}return e}const vn=Op();vn.filterProps=["sx"];function Ep(n,e){var r;const t=this;if(t.vars){if(!((r=t.colorSchemes)!=null&&r[n])||typeof t.getColorSchemeSelector!="function")return{};let s=t.getColorSchemeSelector(n);return s==="&"?e:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:e})}return t.palette.mode===n?e:{}}function Ta(n={},...e){const{breakpoints:t={},palette:r={},spacing:s,shape:i={},...o}=n,a=jf(t),l=_u(s);let c=Ke({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:l,shape:{...Nf,...i}},o);return c=Bf(c),c.applyStyles=Ep,c=e.reduce((u,h)=>Ke(u,h),c),c.unstable_sxConfig={...gs,...o==null?void 0:o.unstable_sxConfig},c.unstable_sx=function(h){return vn({sx:h,theme:this})},c}function Pp(n){return Object.keys(n).length===0}function Mp(n=null){const e=C.useContext(Di);return!e||Pp(e)?n:e}const Dp=Ta();function wu(n=Dp){return Mp(n)}function Ap({styles:n,themeId:e,defaultTheme:t={}}){const r=wu(t),s=typeof n=="function"?n(e&&r[e]||r):n;return _.jsx(Ef,{styles:s})}const Rp=n=>{var r;const e={systemProps:{},otherProps:{}},t=((r=n==null?void 0:n.theme)==null?void 0:r.unstable_sxConfig)??gs;return Object.keys(n).forEach(s=>{t[s]?e.systemProps[s]=n[s]:e.otherProps[s]=n[s]}),e};function jp(n){const{sx:e,...t}=n,{systemProps:r,otherProps:s}=Rp(t);let i;return Array.isArray(e)?i=[r,...e]:typeof e=="function"?i=(...o)=>{const a=e(...o);return $t(a)?{...r,...a}:r}:i={...r,...e},{...s,sx:i}}const jl=n=>n,Fp=()=>{let n=jl;return{configure(e){n=e},generate(e){return n(e)},reset(){n=jl}}},Ip=Fp();function Tu(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=Tu(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Z(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=Tu(n))&&(r&&(r+=" "),r+=e);return r}const Lp={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function me(n,e,t="Mui"){const r=Lp[e];return r?`${t}-${r}`:`${Ip.generate(n)}-${e}`}function ye(n,e,t="Mui"){const r={};return e.forEach(s=>{r[s]=me(n,s,t)}),r}function ku(n){const{variants:e,...t}=n,r={variants:e,style:Pl(t),isProcessed:!0};return r.style===t||e&&e.forEach(s=>{typeof s.style!="function"&&(s.style=Pl(s.style))}),r}const Bp=Ta();function io(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}function Np(n){return n?(e,t)=>t[n]:null}function $p(n,e,t){n.theme=Vp(n.theme)?t:n.theme[e]||n.theme}function ri(n,e){const t=typeof e=="function"?e(n):e;if(Array.isArray(t))return t.flatMap(r=>ri(n,r));if(Array.isArray(t==null?void 0:t.variants)){let r;if(t.isProcessed)r=t.style;else{const{variants:s,...i}=t;r=i}return Ou(n,t.variants,[r])}return t!=null&&t.isProcessed?t.style:t}function Ou(n,e,t=[]){var s;let r;e:for(let i=0;i<e.length;i+=1){const o=e[i];if(typeof o.props=="function"){if(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),!o.props(r))continue}else for(const a in o.props)if(n[a]!==o.props[a]&&((s=n.ownerState)==null?void 0:s[a])!==o.props[a])continue e;typeof o.style=="function"?(r??(r={...n,...n.ownerState,ownerState:n.ownerState}),t.push(o.style(r))):t.push(o.style)}return t}function Wp(n={}){const{themeId:e,defaultTheme:t=Bp,rootShouldForwardProp:r=io,slotShouldForwardProp:s=io}=n;function i(a){$p(a,e,t)}return(a,l={})=>{Mf(a,x=>x.filter(O=>O!==vn));const{name:c,slot:u,skipVariantsResolver:h,skipSx:d,overridesResolver:f=Np(qp(u)),...p}=l,g=h!==void 0?h:u&&u!=="Root"&&u!=="root"||!1,y=d||!1;let b=io;u==="Root"||u==="root"?b=r:u?b=s:Hp(a)&&(b=void 0);const w=Pf(a,{shouldForwardProp:b,label:zp(),...p}),v=x=>{if(typeof x=="function"&&x.__emotion_real!==x)return function(P){return ri(P,x)};if($t(x)){const O=ku(x);return O.variants?function(M){return ri(M,O)}:O.style}return x},S=(...x)=>{const O=[],P=x.map(v),M=[];if(O.push(i),c&&f&&M.push(function(j){var B,$;const I=($=(B=j.theme.components)==null?void 0:B[c])==null?void 0:$.styleOverrides;if(!I)return null;const F={};for(const z in I)F[z]=ri(j,I[z]);return f(j,F)}),c&&!g&&M.push(function(j){var F,B;const R=j.theme,I=(B=(F=R==null?void 0:R.components)==null?void 0:F[c])==null?void 0:B.variants;return I?Ou(j,I):null}),y||M.push(vn),Array.isArray(P[0])){const E=P.shift(),j=new Array(O.length).fill(""),R=new Array(M.length).fill("");let I;I=[...j,...E,...R],I.raw=[...j,...E.raw,...R],O.unshift(I)}const L=[...O,...P,...M],m=w(...L);return a.muiName&&(m.muiName=a.muiName),m};return w.withConfig&&(S.withConfig=w.withConfig),S}}function zp(n,e){return void 0}function Vp(n){for(const e in n)return!1;return!0}function Hp(n){return typeof n=="string"&&n.charCodeAt(0)>96}function qp(n){return n&&n.charAt(0).toLowerCase()+n.slice(1)}function Fo(n,e){const t={...e};for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const s=r;if(s==="components"||s==="slots")t[s]={...n[s],...t[s]};else if(s==="componentsProps"||s==="slotProps"){const i=n[s],o=e[s];if(!o)t[s]=i||{};else if(!i)t[s]=o;else{t[s]={...o};for(const a in i)if(Object.prototype.hasOwnProperty.call(i,a)){const l=a;t[s][l]=Fo(i[l],o[l])}}}else t[s]===void 0&&(t[s]=n[s])}return t}const Lr=typeof window<"u"?C.useLayoutEffect:C.useEffect;function Xp(n,e=Number.MIN_SAFE_INTEGER,t=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(n,t))}function ka(n,e=0,t=1){return Xp(n,e,t)}function Yp(n){n=n.slice(1);const e=new RegExp(`.{1,${n.length>=6?2:1}}`,"g");let t=n.match(e);return t&&t[0].length===1&&(t=t.map(r=>r+r)),t?`rgb${t.length===4?"a":""}(${t.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function gr(n){if(n.type)return n;if(n.charAt(0)==="#")return gr(Yp(n));const e=n.indexOf("("),t=n.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(t))throw new Error(ir(9,n));let r=n.substring(e+1,n.length-1),s;if(t==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(ir(10,s))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:t,values:r,colorSpace:s}}const Up=n=>{const e=gr(n);return e.values.slice(0,3).map((t,r)=>e.type.includes("hsl")&&r!==0?`${t}%`:t).join(" ")},Wn=(n,e)=>{try{return Up(n)}catch{return n}};function Ni(n){const{type:e,colorSpace:t}=n;let{values:r}=n;return e.includes("rgb")?r=r.map((s,i)=>i<3?parseInt(s,10):s):e.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.includes("color")?r=`${t} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function Eu(n){n=gr(n);const{values:e}=n,t=e[0],r=e[1]/100,s=e[2]/100,i=r*Math.min(s,1-s),o=(c,u=(c+t/30)%12)=>s-i*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return n.type==="hsla"&&(a+="a",l.push(e[3])),Ni({type:a,values:l})}function Io(n){n=gr(n);let e=n.type==="hsl"||n.type==="hsla"?gr(Eu(n)).values:n.values;return e=e.map(t=>(n.type!=="color"&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function Gp(n,e){const t=Io(n),r=Io(e);return(Math.max(t,r)+.05)/(Math.min(t,r)+.05)}function Br(n,e){return n=gr(n),e=ka(e),(n.type==="rgb"||n.type==="hsl")&&(n.type+="a"),n.type==="color"?n.values[3]=`/${e}`:n.values[3]=e,Ni(n)}function _s(n,e,t){try{return Br(n,e)}catch{return n}}function Oa(n,e){if(n=gr(n),e=ka(e),n.type.includes("hsl"))n.values[2]*=1-e;else if(n.type.includes("rgb")||n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]*=1-e;return Ni(n)}function fe(n,e,t){try{return Oa(n,e)}catch{return n}}function Ea(n,e){if(n=gr(n),e=ka(e),n.type.includes("hsl"))n.values[2]+=(100-n.values[2])*e;else if(n.type.includes("rgb"))for(let t=0;t<3;t+=1)n.values[t]+=(255-n.values[t])*e;else if(n.type.includes("color"))for(let t=0;t<3;t+=1)n.values[t]+=(1-n.values[t])*e;return Ni(n)}function pe(n,e,t){try{return Ea(n,e)}catch{return n}}function Kp(n,e=.15){return Io(n)>.5?Oa(n,e):Ea(n,e)}function ws(n,e,t){try{return Kp(n,e)}catch{return n}}function Fl(...n){return n.reduce((e,t)=>t==null?e:function(...s){e.apply(this,s),t.apply(this,s)},()=>{})}function Pu(n,e=166){let t;function r(...s){const i=()=>{n.apply(this,s)};clearTimeout(t),t=setTimeout(i,e)}return r.clear=()=>{clearTimeout(t)},r}function oo(n,e){var t,r,s;return C.isValidElement(n)&&e.indexOf(n.type.muiName??((s=(r=(t=n.type)==null?void 0:t._payload)==null?void 0:r.value)==null?void 0:s.muiName))!==-1}function Rt(n){return n&&n.ownerDocument||document}function ar(n){return Rt(n).defaultView||window}function Lo(n,e){typeof n=="function"?n(e):n&&(n.current=e)}let Il=0;function Zp(n){const[e,t]=C.useState(n),r=n||e;return C.useEffect(()=>{e==null&&(Il+=1,t(`mui-${Il}`))},[e]),r}const Jp={...Mo},Ll=Jp.useId;function Pa(n){if(Ll!==void 0){const e=Ll();return n??e}return Zp(n)}function Bo({controlled:n,default:e,name:t,state:r="value"}){const{current:s}=C.useRef(n!==void 0),[i,o]=C.useState(e),a=s?n:i,l=C.useCallback(c=>{s||o(c)},[]);return[a,l]}function fn(n){const e=C.useRef(n);return Lr(()=>{e.current=n}),C.useRef((...t)=>(0,e.current)(...t)).current}function Je(...n){return C.useMemo(()=>n.every(e=>e==null)?null:e=>{n.forEach(t=>{Lo(t,e)})},n)}const Bl={};function Mu(n,e){const t=C.useRef(Bl);return t.current===Bl&&(t.current=n(e)),t}const Qp=[];function eg(n){C.useEffect(n,Qp)}class Ma{constructor(){Rn(this,"currentId",null);Rn(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Rn(this,"disposeEffect",()=>this.clear)}static create(){return new Ma}start(e,t){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,t()},e)}}function Du(){const n=Mu(Ma.create).current;return eg(n.disposeEffect),n}function Nl(n){try{return n.matches(":focus-visible")}catch{}return!1}function Au(n=window){const e=n.document.documentElement.clientWidth;return n.innerWidth-e}function be(n,e,t=void 0){const r={};for(const s in n){const i=n[s];let o="",a=!0;for(let l=0;l<i.length;l+=1){const c=i[l];c&&(o+=(a===!0?"":" ")+e(c),a=!1,t&&t[c]&&(o+=" "+t[c]))}r[s]=o}return r}function tg(n){return typeof n=="string"}function Ru(n,e,t){return n===void 0||tg(n)?e:{...e,ownerState:{...e.ownerState,...t}}}function ju(n,e=[]){if(n===void 0)return{};const t={};return Object.keys(n).filter(r=>r.match(/^on[A-Z]/)&&typeof n[r]=="function"&&!e.includes(r)).forEach(r=>{t[r]=n[r]}),t}function $l(n){if(n===void 0)return{};const e={};return Object.keys(n).filter(t=>!(t.match(/^on[A-Z]/)&&typeof n[t]=="function")).forEach(t=>{e[t]=n[t]}),e}function Fu(n){const{getSlotProps:e,additionalProps:t,externalSlotProps:r,externalForwardedProps:s,className:i}=n;if(!e){const f=Z(t==null?void 0:t.className,i,s==null?void 0:s.className,r==null?void 0:r.className),p={...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},g={...t,...s,...r};return f.length>0&&(g.className=f),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const o=ju({...s,...r}),a=$l(r),l=$l(s),c=e(o),u=Z(c==null?void 0:c.className,t==null?void 0:t.className,i,s==null?void 0:s.className,r==null?void 0:r.className),h={...c==null?void 0:c.style,...t==null?void 0:t.style,...s==null?void 0:s.style,...r==null?void 0:r.style},d={...c,...t,...l,...a};return u.length>0&&(d.className=u),Object.keys(h).length>0&&(d.style=h),{props:d,internalRef:c.ref}}function Iu(n,e,t){return typeof n=="function"?n(e,t):n}function Wl(n){var h;const{elementType:e,externalSlotProps:t,ownerState:r,skipResolvingSlotProps:s=!1,...i}=n,o=s?{}:Iu(t,r),{props:a,internalRef:l}=Fu({...i,externalSlotProps:o}),c=Je(l,o==null?void 0:o.ref,(h=n.additionalProps)==null?void 0:h.ref);return Ru(e,{...a,ref:c},r)}function ms(n){var e;return parseInt(C.version,10)>=19?((e=n==null?void 0:n.props)==null?void 0:e.ref)||null:(n==null?void 0:n.ref)||null}const rg=C.createContext(),ng=()=>C.useContext(rg)??!1,sg=C.createContext(void 0);function ig(n){const{theme:e,name:t,props:r}=n;if(!e||!e.components||!e.components[t])return r;const s=e.components[t];return s.defaultProps?Fo(s.defaultProps,r):!s.styleOverrides&&!s.variants?Fo(s,r):r}function og({props:n,name:e}){const t=C.useContext(sg);return ig({props:n,name:e,theme:{components:t}})}const zl={theme:void 0};function ag(n){let e,t;return function(s){let i=e;return(i===void 0||s.theme!==t)&&(zl.theme=s.theme,i=ku(n(zl)),e=i,t=s.theme),i}}function lg(n=""){function e(...r){if(!r.length)return"";const s=r[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${n?`${n}-`:""}${s}${e(...r.slice(1))})`:`, ${s}`}return(r,...s)=>`var(--${n?`${n}-`:""}${r}${e(...s)})`}const Vl=(n,e,t,r=[])=>{let s=n;e.forEach((i,o)=>{o===e.length-1?Array.isArray(s)?s[Number(i)]=t:s&&typeof s=="object"&&(s[i]=t):s&&typeof s=="object"&&(s[i]||(s[i]=r.includes(i)?[]:{}),s=s[i])})},cg=(n,e,t)=>{function r(s,i=[],o=[]){Object.entries(s).forEach(([a,l])=>{(!t||!t([...i,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...i,a],Array.isArray(l)?[...o,a]:o):e([...i,a],l,o))})}r(n)},ug=(n,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>n.includes(r))||n[n.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function ao(n,e){const{prefix:t,shouldSkipGeneratingVar:r}=e||{},s={},i={},o={};return cg(n,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${t?`${t}-`:""}${a.join("-")}`,h=ug(a,l);Object.assign(s,{[u]:h}),Vl(i,a,`var(${u})`,c),Vl(o,a,`var(${u}, ${h})`,c)}},a=>a[0]==="vars"),{css:s,vars:i,varsWithDefaults:o}}function hg(n,e={}){const{getSelector:t=y,disableCssColorScheme:r,colorSchemeSelector:s}=e,{colorSchemes:i={},components:o,defaultColorScheme:a="light",...l}=n,{vars:c,css:u,varsWithDefaults:h}=ao(l,e);let d=h;const f={},{[a]:p,...g}=i;if(Object.entries(g||{}).forEach(([v,S])=>{const{vars:x,css:O,varsWithDefaults:P}=ao(S,e);d=Ke(d,P),f[v]={css:O,vars:x}}),p){const{css:v,vars:S,varsWithDefaults:x}=ao(p,e);d=Ke(d,x),f[a]={css:v,vars:S}}function y(v,S){var O,P;let x=s;if(s==="class"&&(x=".%s"),s==="data"&&(x="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(x=`[${s}="%s"]`),v){if(x==="media")return n.defaultColorScheme===v?":root":{[`@media (prefers-color-scheme: ${((P=(O=i[v])==null?void 0:O.palette)==null?void 0:P.mode)||v})`]:{":root":S}};if(x)return n.defaultColorScheme===v?`:root, ${x.replace("%s",String(v))}`:x.replace("%s",String(v))}return":root"}return{vars:d,generateThemeVars:()=>{let v={...c};return Object.entries(f).forEach(([,{vars:S}])=>{v=Ke(v,S)}),v},generateStyleSheets:()=>{var M,L;const v=[],S=n.defaultColorScheme||"light";function x(m,E){Object.keys(E).length&&v.push(typeof m=="string"?{[m]:{...E}}:m)}x(t(void 0,{...u}),u);const{[S]:O,...P}=f;if(O){const{css:m}=O,E=(L=(M=i[S])==null?void 0:M.palette)==null?void 0:L.mode,j=!r&&E?{colorScheme:E,...m}:{...m};x(t(S,{...j}),j)}return Object.entries(P).forEach(([m,{css:E}])=>{var I,F;const j=(F=(I=i[m])==null?void 0:I.palette)==null?void 0:F.mode,R=!r&&j?{colorScheme:j,...E}:{...E};x(t(m,{...R}),R)}),v}}}function dg(n){return function(t){return n==="media"?`@media (prefers-color-scheme: ${t})`:n?n.startsWith("data-")&&!n.includes("%s")?`[${n}="${t}"] &`:n==="class"?`.${t} &`:n==="data"?`[data-${t}] &`:`${n.replace("%s",t)} &`:"&"}}function Lu(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ts.white,default:ts.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const fg=Lu();function Bu(){return{text:{primary:ts.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ts.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Hl=Bu();function ql(n,e,t,r){const s=r.light||r,i=r.dark||r*1.5;n[e]||(n.hasOwnProperty(t)?n[e]=n[t]:e==="light"?n.light=Ea(n.main,s):e==="dark"&&(n.dark=Oa(n.main,i)))}function pg(n="light"){return n==="dark"?{main:Jr[200],light:Jr[50],dark:Jr[400]}:{main:Jr[700],light:Jr[400],dark:Jr[800]}}function gg(n="light"){return n==="dark"?{main:Zr[200],light:Zr[50],dark:Zr[400]}:{main:Zr[500],light:Zr[300],dark:Zr[700]}}function mg(n="light"){return n==="dark"?{main:Kr[500],light:Kr[300],dark:Kr[700]}:{main:Kr[700],light:Kr[400],dark:Kr[800]}}function yg(n="light"){return n==="dark"?{main:Qr[400],light:Qr[300],dark:Qr[700]}:{main:Qr[700],light:Qr[500],dark:Qr[900]}}function bg(n="light"){return n==="dark"?{main:en[400],light:en[300],dark:en[700]}:{main:en[800],light:en[500],dark:en[900]}}function vg(n="light"){return n==="dark"?{main:jn[400],light:jn[300],dark:jn[700]}:{main:"#ed6c02",light:jn[500],dark:jn[900]}}function Da(n){const{mode:e="light",contrastThreshold:t=3,tonalOffset:r=.2,...s}=n,i=n.primary||pg(e),o=n.secondary||gg(e),a=n.error||mg(e),l=n.info||yg(e),c=n.success||bg(e),u=n.warning||vg(e);function h(g){return Gp(g,Hl.text.primary)>=t?Hl.text.primary:fg.text.primary}const d=({color:g,name:y,mainShade:b=500,lightShade:w=300,darkShade:v=700})=>{if(g={...g},!g.main&&g[b]&&(g.main=g[b]),!g.hasOwnProperty("main"))throw new Error(ir(11,y?` (${y})`:"",b));if(typeof g.main!="string")throw new Error(ir(12,y?` (${y})`:"",JSON.stringify(g.main)));return ql(g,"light",w,r),ql(g,"dark",v,r),g.contrastText||(g.contrastText=h(g.main)),g};let f;return e==="light"?f=Lu():e==="dark"&&(f=Bu()),Ke({common:{...ts},mode:e,primary:d({color:i,name:"primary"}),secondary:d({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:a,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:Od,contrastThreshold:t,getContrastText:h,augmentColor:d,tonalOffset:r,...f},s)}function xg(n){const e={};return Object.entries(n).forEach(r=>{const[s,i]=r;typeof i=="object"&&(e[s]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),e}function Sg(n,e){return{toolbar:{minHeight:56,[n.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[n.up("sm")]:{minHeight:64}},...e}}function Cg(n){return Math.round(n*1e5)/1e5}const Xl={textTransform:"uppercase"},Yl='"Roboto", "Helvetica", "Arial", sans-serif';function _g(n,e){const{fontFamily:t=Yl,fontSize:r=14,fontWeightLight:s=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...h}=typeof e=="function"?e(n):e,d=r/14,f=u||(y=>`${y/l*d}rem`),p=(y,b,w,v,S)=>({fontFamily:t,fontWeight:y,fontSize:f(b),lineHeight:w,...t===Yl?{letterSpacing:`${Cg(v/b)}em`}:{},...S,...c}),g={h1:p(s,96,1.167,-1.5),h2:p(s,60,1.2,-.5),h3:p(i,48,1.167,0),h4:p(i,34,1.235,.25),h5:p(i,24,1.334,0),h6:p(o,20,1.6,.15),subtitle1:p(i,16,1.75,.15),subtitle2:p(o,14,1.57,.1),body1:p(i,16,1.5,.15),body2:p(i,14,1.43,.15),button:p(o,14,1.75,.4,Xl),caption:p(i,12,1.66,.4),overline:p(i,12,2.66,1,Xl),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ke({htmlFontSize:l,pxToRem:f,fontFamily:t,fontSize:r,fontWeightLight:s,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:a,...g},h,{clone:!1})}const wg=.2,Tg=.14,kg=.12;function Ce(...n){return[`${n[0]}px ${n[1]}px ${n[2]}px ${n[3]}px rgba(0,0,0,${wg})`,`${n[4]}px ${n[5]}px ${n[6]}px ${n[7]}px rgba(0,0,0,${Tg})`,`${n[8]}px ${n[9]}px ${n[10]}px ${n[11]}px rgba(0,0,0,${kg})`].join(",")}const Og=["none",Ce(0,2,1,-1,0,1,1,0,0,1,3,0),Ce(0,3,1,-2,0,2,2,0,0,1,5,0),Ce(0,3,3,-2,0,3,4,0,0,1,8,0),Ce(0,2,4,-1,0,4,5,0,0,1,10,0),Ce(0,3,5,-1,0,5,8,0,0,1,14,0),Ce(0,3,5,-1,0,6,10,0,0,1,18,0),Ce(0,4,5,-2,0,7,10,1,0,2,16,1),Ce(0,5,5,-3,0,8,10,1,0,3,14,2),Ce(0,5,6,-3,0,9,12,1,0,3,16,2),Ce(0,6,6,-3,0,10,14,1,0,4,18,3),Ce(0,6,7,-4,0,11,15,1,0,4,20,3),Ce(0,7,8,-4,0,12,17,2,0,5,22,4),Ce(0,7,8,-4,0,13,19,2,0,5,24,4),Ce(0,7,9,-4,0,14,21,2,0,5,26,4),Ce(0,8,9,-5,0,15,22,2,0,6,28,5),Ce(0,8,10,-5,0,16,24,2,0,6,30,5),Ce(0,8,11,-5,0,17,26,2,0,6,32,5),Ce(0,9,11,-5,0,18,28,2,0,7,34,6),Ce(0,9,12,-6,0,19,29,2,0,7,36,6),Ce(0,10,13,-6,0,20,31,3,0,8,38,7),Ce(0,10,13,-6,0,21,33,3,0,8,40,7),Ce(0,10,14,-6,0,22,35,3,0,8,42,7),Ce(0,11,14,-7,0,23,36,3,0,9,44,8),Ce(0,11,15,-7,0,24,38,3,0,9,46,8)],Eg={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Pg={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ul(n){return`${Math.round(n)}ms`}function Mg(n){if(!n)return 0;const e=n/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function Dg(n){const e={...Eg,...n.easing},t={...Pg,...n.duration};return{getAutoHeightDuration:Mg,create:(s=["all"],i={})=>{const{duration:o=t.standard,easing:a=e.easeInOut,delay:l=0,...c}=i;return(Array.isArray(s)?s:[s]).map(u=>`${u} ${typeof o=="string"?o:Ul(o)} ${a} ${typeof l=="string"?l:Ul(l)}`).join(",")},...n,easing:e,duration:t}}const Ag={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Rg(n){return $t(n)||typeof n>"u"||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||Array.isArray(n)}function Nu(n={}){const e={...n};function t(r){const s=Object.entries(r);for(let i=0;i<s.length;i++){const[o,a]=s[i];!Rg(a)||o.startsWith("unstable_")?delete r[o]:$t(a)&&(r[o]={...a},t(r[o]))}}return t(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function No(n={},...e){const{breakpoints:t,mixins:r={},spacing:s,palette:i={},transitions:o={},typography:a={},shape:l,...c}=n;if(n.vars)throw new Error(ir(20));const u=Da(i),h=Ta(n);let d=Ke(h,{mixins:Sg(h.breakpoints,r),palette:u,shadows:Og.slice(),typography:_g(u,a),transitions:Dg(o),zIndex:{...Ag}});return d=Ke(d,c),d=e.reduce((f,p)=>Ke(f,p),d),d.unstable_sxConfig={...gs,...c==null?void 0:c.unstable_sxConfig},d.unstable_sx=function(p){return vn({sx:p,theme:this})},d.toRuntimeSource=Nu,d}function $o(n){let e;return n<1?e=5.11916*n**2:e=4.5*Math.log(n+1)+2,Math.round(e*10)/1e3}const jg=[...Array(25)].map((n,e)=>{if(e===0)return"none";const t=$o(e);return`linear-gradient(rgba(255 255 255 / ${t}), rgba(255 255 255 / ${t}))`});function $u(n){return{inputPlaceholder:n==="dark"?.5:.42,inputUnderline:n==="dark"?.7:.42,switchTrackDisabled:n==="dark"?.2:.12,switchTrack:n==="dark"?.3:.38}}function Wu(n){return n==="dark"?jg:[]}function Fg(n){const{palette:e={mode:"light"},opacity:t,overlays:r,...s}=n,i=Da(e);return{palette:i,opacity:{...$u(i.mode),...t},overlays:r||Wu(i.mode),...s}}function Ig(n){var e;return!!n[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!n[0].match(/sxConfig$/)||n[0]==="palette"&&!!((e=n[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const Lg=n=>[...[...Array(25)].map((e,t)=>`--${n?`${n}-`:""}overlays-${t}`),`--${n?`${n}-`:""}palette-AppBar-darkBg`,`--${n?`${n}-`:""}palette-AppBar-darkColor`],Bg=n=>(e,t)=>{const r=n.rootSelector||":root",s=n.colorSchemeSelector;let i=s;if(s==="class"&&(i=".%s"),s==="data"&&(i="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(i=`[${s}="%s"]`),n.defaultColorScheme===e){if(e==="dark"){const o={};return Lg(n.cssVarPrefix).forEach(a=>{o[a]=t[a],delete t[a]}),i==="media"?{[r]:t,"@media (prefers-color-scheme: dark)":{[r]:o}}:i?{[i.replace("%s",e)]:o,[`${r}, ${i.replace("%s",e)}`]:t}:{[r]:{...t,...o}}}if(i&&i!=="media")return`${r}, ${i.replace("%s",String(e))}`}else if(e){if(i==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[r]:t}};if(i)return i.replace("%s",String(e))}return r};function Ng(n,e){e.forEach(t=>{n[t]||(n[t]={})})}function A(n,e,t){!n[e]&&t&&(n[e]=t)}function zn(n){return typeof n!="string"||!n.startsWith("hsl")?n:Eu(n)}function Ut(n,e){`${e}Channel`in n||(n[`${e}Channel`]=Wn(zn(n[e])))}function $g(n){return typeof n=="number"?`${n}px`:typeof n=="string"||typeof n=="function"||Array.isArray(n)?n:"8px"}const It=n=>{try{return n()}catch{}},Wg=(n="mui")=>lg(n);function lo(n,e,t,r){if(!e)return;e=e===!0?{}:e;const s=r==="dark"?"dark":"light";if(!t){n[r]=Fg({...e,palette:{mode:s,...e==null?void 0:e.palette}});return}const{palette:i,...o}=No({...t,palette:{mode:s,...e==null?void 0:e.palette}});return n[r]={...e,palette:i,opacity:{...$u(s),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||Wu(s)},o}function zg(n={},...e){const{colorSchemes:t={light:!0},defaultColorScheme:r,disableCssColorScheme:s=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:o=Ig,colorSchemeSelector:a=t.light&&t.dark?"media":void 0,rootSelector:l=":root",...c}=n,u=Object.keys(t)[0],h=r||(t.light&&u!=="light"?"light":u),d=Wg(i),{[h]:f,light:p,dark:g,...y}=t,b={...y};let w=f;if((h==="dark"&&!("dark"in t)||h==="light"&&!("light"in t))&&(w=!0),!w)throw new Error(ir(21,h));const v=lo(b,w,c,h);p&&!b.light&&lo(b,p,void 0,"light"),g&&!b.dark&&lo(b,g,void 0,"dark");let S={defaultColorScheme:h,...v,cssVarPrefix:i,colorSchemeSelector:a,rootSelector:l,getCssVar:d,colorSchemes:b,font:{...xg(v.typography),...v.font},spacing:$g(c.spacing)};Object.keys(S.colorSchemes).forEach(L=>{const m=S.colorSchemes[L].palette,E=j=>{const R=j.split("-"),I=R[1],F=R[2];return d(j,m[I][F])};if(m.mode==="light"&&(A(m.common,"background","#fff"),A(m.common,"onBackground","#000")),m.mode==="dark"&&(A(m.common,"background","#000"),A(m.common,"onBackground","#fff")),Ng(m,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),m.mode==="light"){A(m.Alert,"errorColor",fe(m.error.light,.6)),A(m.Alert,"infoColor",fe(m.info.light,.6)),A(m.Alert,"successColor",fe(m.success.light,.6)),A(m.Alert,"warningColor",fe(m.warning.light,.6)),A(m.Alert,"errorFilledBg",E("palette-error-main")),A(m.Alert,"infoFilledBg",E("palette-info-main")),A(m.Alert,"successFilledBg",E("palette-success-main")),A(m.Alert,"warningFilledBg",E("palette-warning-main")),A(m.Alert,"errorFilledColor",It(()=>m.getContrastText(m.error.main))),A(m.Alert,"infoFilledColor",It(()=>m.getContrastText(m.info.main))),A(m.Alert,"successFilledColor",It(()=>m.getContrastText(m.success.main))),A(m.Alert,"warningFilledColor",It(()=>m.getContrastText(m.warning.main))),A(m.Alert,"errorStandardBg",pe(m.error.light,.9)),A(m.Alert,"infoStandardBg",pe(m.info.light,.9)),A(m.Alert,"successStandardBg",pe(m.success.light,.9)),A(m.Alert,"warningStandardBg",pe(m.warning.light,.9)),A(m.Alert,"errorIconColor",E("palette-error-main")),A(m.Alert,"infoIconColor",E("palette-info-main")),A(m.Alert,"successIconColor",E("palette-success-main")),A(m.Alert,"warningIconColor",E("palette-warning-main")),A(m.AppBar,"defaultBg",E("palette-grey-100")),A(m.Avatar,"defaultBg",E("palette-grey-400")),A(m.Button,"inheritContainedBg",E("palette-grey-300")),A(m.Button,"inheritContainedHoverBg",E("palette-grey-A100")),A(m.Chip,"defaultBorder",E("palette-grey-400")),A(m.Chip,"defaultAvatarColor",E("palette-grey-700")),A(m.Chip,"defaultIconColor",E("palette-grey-700")),A(m.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),A(m.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),A(m.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),A(m.LinearProgress,"primaryBg",pe(m.primary.main,.62)),A(m.LinearProgress,"secondaryBg",pe(m.secondary.main,.62)),A(m.LinearProgress,"errorBg",pe(m.error.main,.62)),A(m.LinearProgress,"infoBg",pe(m.info.main,.62)),A(m.LinearProgress,"successBg",pe(m.success.main,.62)),A(m.LinearProgress,"warningBg",pe(m.warning.main,.62)),A(m.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.11)`),A(m.Slider,"primaryTrack",pe(m.primary.main,.62)),A(m.Slider,"secondaryTrack",pe(m.secondary.main,.62)),A(m.Slider,"errorTrack",pe(m.error.main,.62)),A(m.Slider,"infoTrack",pe(m.info.main,.62)),A(m.Slider,"successTrack",pe(m.success.main,.62)),A(m.Slider,"warningTrack",pe(m.warning.main,.62));const j=ws(m.background.default,.8);A(m.SnackbarContent,"bg",j),A(m.SnackbarContent,"color",It(()=>m.getContrastText(j))),A(m.SpeedDialAction,"fabHoverBg",ws(m.background.paper,.15)),A(m.StepConnector,"border",E("palette-grey-400")),A(m.StepContent,"border",E("palette-grey-400")),A(m.Switch,"defaultColor",E("palette-common-white")),A(m.Switch,"defaultDisabledColor",E("palette-grey-100")),A(m.Switch,"primaryDisabledColor",pe(m.primary.main,.62)),A(m.Switch,"secondaryDisabledColor",pe(m.secondary.main,.62)),A(m.Switch,"errorDisabledColor",pe(m.error.main,.62)),A(m.Switch,"infoDisabledColor",pe(m.info.main,.62)),A(m.Switch,"successDisabledColor",pe(m.success.main,.62)),A(m.Switch,"warningDisabledColor",pe(m.warning.main,.62)),A(m.TableCell,"border",pe(_s(m.divider,1),.88)),A(m.Tooltip,"bg",_s(m.grey[700],.92))}if(m.mode==="dark"){A(m.Alert,"errorColor",pe(m.error.light,.6)),A(m.Alert,"infoColor",pe(m.info.light,.6)),A(m.Alert,"successColor",pe(m.success.light,.6)),A(m.Alert,"warningColor",pe(m.warning.light,.6)),A(m.Alert,"errorFilledBg",E("palette-error-dark")),A(m.Alert,"infoFilledBg",E("palette-info-dark")),A(m.Alert,"successFilledBg",E("palette-success-dark")),A(m.Alert,"warningFilledBg",E("palette-warning-dark")),A(m.Alert,"errorFilledColor",It(()=>m.getContrastText(m.error.dark))),A(m.Alert,"infoFilledColor",It(()=>m.getContrastText(m.info.dark))),A(m.Alert,"successFilledColor",It(()=>m.getContrastText(m.success.dark))),A(m.Alert,"warningFilledColor",It(()=>m.getContrastText(m.warning.dark))),A(m.Alert,"errorStandardBg",fe(m.error.light,.9)),A(m.Alert,"infoStandardBg",fe(m.info.light,.9)),A(m.Alert,"successStandardBg",fe(m.success.light,.9)),A(m.Alert,"warningStandardBg",fe(m.warning.light,.9)),A(m.Alert,"errorIconColor",E("palette-error-main")),A(m.Alert,"infoIconColor",E("palette-info-main")),A(m.Alert,"successIconColor",E("palette-success-main")),A(m.Alert,"warningIconColor",E("palette-warning-main")),A(m.AppBar,"defaultBg",E("palette-grey-900")),A(m.AppBar,"darkBg",E("palette-background-paper")),A(m.AppBar,"darkColor",E("palette-text-primary")),A(m.Avatar,"defaultBg",E("palette-grey-600")),A(m.Button,"inheritContainedBg",E("palette-grey-800")),A(m.Button,"inheritContainedHoverBg",E("palette-grey-700")),A(m.Chip,"defaultBorder",E("palette-grey-700")),A(m.Chip,"defaultAvatarColor",E("palette-grey-300")),A(m.Chip,"defaultIconColor",E("palette-grey-300")),A(m.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),A(m.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),A(m.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),A(m.LinearProgress,"primaryBg",fe(m.primary.main,.5)),A(m.LinearProgress,"secondaryBg",fe(m.secondary.main,.5)),A(m.LinearProgress,"errorBg",fe(m.error.main,.5)),A(m.LinearProgress,"infoBg",fe(m.info.main,.5)),A(m.LinearProgress,"successBg",fe(m.success.main,.5)),A(m.LinearProgress,"warningBg",fe(m.warning.main,.5)),A(m.Skeleton,"bg",`rgba(${E("palette-text-primaryChannel")} / 0.13)`),A(m.Slider,"primaryTrack",fe(m.primary.main,.5)),A(m.Slider,"secondaryTrack",fe(m.secondary.main,.5)),A(m.Slider,"errorTrack",fe(m.error.main,.5)),A(m.Slider,"infoTrack",fe(m.info.main,.5)),A(m.Slider,"successTrack",fe(m.success.main,.5)),A(m.Slider,"warningTrack",fe(m.warning.main,.5));const j=ws(m.background.default,.98);A(m.SnackbarContent,"bg",j),A(m.SnackbarContent,"color",It(()=>m.getContrastText(j))),A(m.SpeedDialAction,"fabHoverBg",ws(m.background.paper,.15)),A(m.StepConnector,"border",E("palette-grey-600")),A(m.StepContent,"border",E("palette-grey-600")),A(m.Switch,"defaultColor",E("palette-grey-300")),A(m.Switch,"defaultDisabledColor",E("palette-grey-600")),A(m.Switch,"primaryDisabledColor",fe(m.primary.main,.55)),A(m.Switch,"secondaryDisabledColor",fe(m.secondary.main,.55)),A(m.Switch,"errorDisabledColor",fe(m.error.main,.55)),A(m.Switch,"infoDisabledColor",fe(m.info.main,.55)),A(m.Switch,"successDisabledColor",fe(m.success.main,.55)),A(m.Switch,"warningDisabledColor",fe(m.warning.main,.55)),A(m.TableCell,"border",fe(_s(m.divider,1),.68)),A(m.Tooltip,"bg",_s(m.grey[700],.92))}Ut(m.background,"default"),Ut(m.background,"paper"),Ut(m.common,"background"),Ut(m.common,"onBackground"),Ut(m,"divider"),Object.keys(m).forEach(j=>{const R=m[j];j!=="tonalOffset"&&R&&typeof R=="object"&&(R.main&&A(m[j],"mainChannel",Wn(zn(R.main))),R.light&&A(m[j],"lightChannel",Wn(zn(R.light))),R.dark&&A(m[j],"darkChannel",Wn(zn(R.dark))),R.contrastText&&A(m[j],"contrastTextChannel",Wn(zn(R.contrastText))),j==="text"&&(Ut(m[j],"primary"),Ut(m[j],"secondary")),j==="action"&&(R.active&&Ut(m[j],"active"),R.selected&&Ut(m[j],"selected")))})}),S=e.reduce((L,m)=>Ke(L,m),S);const x={prefix:i,disableCssColorScheme:s,shouldSkipGeneratingVar:o,getSelector:Bg(S)},{vars:O,generateThemeVars:P,generateStyleSheets:M}=hg(S,x);return S.vars=O,Object.entries(S.colorSchemes[S.defaultColorScheme]).forEach(([L,m])=>{S[L]=m}),S.generateThemeVars=P,S.generateStyleSheets=M,S.generateSpacing=function(){return _u(c.spacing,_a(this))},S.getColorSchemeSelector=dg(a),S.spacing=S.generateSpacing(),S.shouldSkipGeneratingVar=o,S.unstable_sxConfig={...gs,...c==null?void 0:c.unstable_sxConfig},S.unstable_sx=function(m){return vn({sx:m,theme:this})},S.toRuntimeSource=Nu,S}function Gl(n,e,t){n.colorSchemes&&t&&(n.colorSchemes[e]={...t!==!0&&t,palette:Da({...t===!0?{}:t.palette,mode:e})})}function Vg(n={},...e){const{palette:t,cssVariables:r=!1,colorSchemes:s=t?void 0:{light:!0},defaultColorScheme:i=t==null?void 0:t.mode,...o}=n,a=i||"light",l=s==null?void 0:s[a],c={...s,...t?{[a]:{...typeof l!="boolean"&&l,palette:t}}:void 0};if(r===!1){if(!("colorSchemes"in n))return No(n,...e);let u=t;"palette"in n||c[a]&&(c[a]!==!0?u=c[a].palette:a==="dark"&&(u={mode:"dark"}));const h=No({...n,palette:u},...e);return h.defaultColorScheme=a,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},Gl(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},Gl(h,"light",c.light)),h}return!t&&!("light"in c)&&a==="light"&&(c.light=!0),zg({...o,colorSchemes:c,defaultColorScheme:a,...typeof r!="boolean"&&r},...e)}const Aa=Vg();function Ra(){const n=wu(Aa);return n[da]||n}function zu(n){return n!=="ownerState"&&n!=="theme"&&n!=="sx"&&n!=="as"}const kt=n=>zu(n)&&n!=="classes",V=Wp({themeId:da,defaultTheme:Aa,rootShouldForwardProp:kt});function Hg(n){return _.jsx(Ap,{...n,defaultTheme:Aa,themeId:da})}function qg(n){return function(t){return _.jsx(Hg,{styles:typeof n=="function"?r=>n({theme:r,...t}):n})}}function Xg(){return jp}const _e=ag;function Te(n){return og(n)}function Yg(n){return me("MuiSvgIcon",n)}ye("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Ug=n=>{const{color:e,fontSize:t,classes:r}=n,s={root:["root",e!=="inherit"&&`color${G(e)}`,`fontSize${G(t)}`]};return be(s,Yg,r)},Gg=V("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color!=="inherit"&&e[`color${G(t.color)}`],e[`fontSize${G(t.fontSize)}`]]}})(_e(({theme:n})=>{var e,t,r,s,i,o,a,l,c,u,h,d,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(e=n.transitions)==null?void 0:e.create)==null?void 0:s.call(e,"fill",{duration:(r=(t=(n.vars??n).transitions)==null?void 0:t.duration)==null?void 0:r.shorter}),variants:[{props:g=>!g.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((o=(i=n.typography)==null?void 0:i.pxToRem)==null?void 0:o.call(i,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(a=n.typography)==null?void 0:a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((u=(c=n.typography)==null?void 0:c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}},...Object.entries((n.vars??n).palette).filter(([,g])=>g&&g.main).map(([g])=>{var y,b;return{props:{color:g},style:{color:(b=(y=(n.vars??n).palette)==null?void 0:y[g])==null?void 0:b.main}}}),{props:{color:"action"},style:{color:(d=(h=(n.vars??n).palette)==null?void 0:h.action)==null?void 0:d.active}},{props:{color:"disabled"},style:{color:(p=(f=(n.vars??n).palette)==null?void 0:f.action)==null?void 0:p.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Wo=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiSvgIcon"}),{children:s,className:i,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:h,viewBox:d="0 0 24 24",...f}=r,p=C.isValidElement(s)&&s.type==="svg",g={...r,color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:p},y={};u||(y.viewBox=d);const b=Ug(g);return _.jsxs(Gg,{as:a,className:Z(b.root,i),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:t,...y,...f,...p&&s.props,ownerState:g,children:[p?s.props.children:s,h?_.jsx("title",{children:h}):null]})});Wo.muiName="SvgIcon";function $i(n,e){function t(r,s){return _.jsx(Wo,{"data-testid":`${e}Icon`,ref:s,...r,children:n})}return t.muiName=Wo.muiName,C.memo(C.forwardRef(t))}function Vu(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function zo(n,e){return zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},zo(n,e)}function Hu(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,zo(n,e)}const Kl={disabled:!1},di=er.createContext(null);var Kg=function(e){return e.scrollTop},Vn="unmounted",Or="exited",Er="entering",on="entered",Vo="exiting",Yt=function(n){Hu(e,n);function e(r,s){var i;i=n.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,l;return i.appearStatus=null,r.in?a?(l=Or,i.appearStatus=Er):l=on:r.unmountOnExit||r.mountOnEnter?l=Vn:l=Or,i.state={status:l},i.nextCallback=null,i}e.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Vn?{status:Or}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Er&&o!==on&&(i=Er):(o===Er||o===on)&&(i=Vo)}this.updateStatus(!1,i)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},t.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===Er){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Ss.findDOMNode(this);o&&Kg(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Or&&this.setState({status:Vn})},t.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[Ss.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),d=a?h.appear:h.enter;if(!s&&!o||Kl.disabled){this.safeSetState({status:on},function(){i.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Er},function(){i.props.onEntering(c,u),i.onTransitionEnd(d,function(){i.safeSetState({status:on},function(){i.props.onEntered(c,u)})})})},t.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Ss.findDOMNode(this);if(!i||Kl.disabled){this.safeSetState({status:Or},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Vo},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:Or},function(){s.props.onExited(a)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},t.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},t.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Ss.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},t.render=function(){var s=this.state.status;if(s===Vn)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=Vu(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return er.createElement(di.Provider,{value:null},typeof o=="function"?o(s,a):er.cloneElement(er.Children.only(o),a))},e}(er.Component);Yt.contextType=di;Yt.propTypes={};function tn(){}Yt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:tn,onEntering:tn,onEntered:tn,onExit:tn,onExiting:tn,onExited:tn};Yt.UNMOUNTED=Vn;Yt.EXITED=Or;Yt.ENTERING=Er;Yt.ENTERED=on;Yt.EXITING=Vo;function Zg(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ja(n,e){var t=function(i){return e&&C.isValidElement(i)?e(i):i},r=Object.create(null);return n&&C.Children.map(n,function(s){return s}).forEach(function(s){r[s.key]=t(s)}),r}function Jg(n,e){n=n||{},e=e||{};function t(u){return u in e?e[u]:n[u]}var r=Object.create(null),s=[];for(var i in n)i in e?s.length&&(r[i]=s,s=[]):s.push(i);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=t(c)}a[l]=t(l)}for(o=0;o<s.length;o++)a[s[o]]=t(s[o]);return a}function Dr(n,e,t){return t[e]!=null?t[e]:n.props[e]}function Qg(n,e){return ja(n.children,function(t){return C.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:Dr(t,"appear",n),enter:Dr(t,"enter",n),exit:Dr(t,"exit",n)})})}function em(n,e,t){var r=ja(n.children),s=Jg(e,r);return Object.keys(s).forEach(function(i){var o=s[i];if(C.isValidElement(o)){var a=i in e,l=i in r,c=e[i],u=C.isValidElement(c)&&!c.props.in;l&&(!a||u)?s[i]=C.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:Dr(o,"exit",n),enter:Dr(o,"enter",n)}):!l&&a&&!u?s[i]=C.cloneElement(o,{in:!1}):l&&a&&C.isValidElement(c)&&(s[i]=C.cloneElement(o,{onExited:t.bind(null,o),in:c.props.in,exit:Dr(o,"exit",n),enter:Dr(o,"enter",n)}))}}),s}var tm=Object.values||function(n){return Object.keys(n).map(function(e){return n[e]})},rm={component:"div",childFactory:function(e){return e}},Fa=function(n){Hu(e,n);function e(r,s){var i;i=n.call(this,r,s)||this;var o=i.handleExited.bind(Zg(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,i){var o=i.children,a=i.handleExited,l=i.firstRender;return{children:l?Qg(s,a):em(s,o,a),firstRender:!1}},t.handleExited=function(s,i){var o=ja(this.props.children);s.key in o||(s.props.onExited&&s.props.onExited(i),this.mounted&&this.setState(function(a){var l=ci({},a.children);return delete l[s.key],{children:l}}))},t.render=function(){var s=this.props,i=s.component,o=s.childFactory,a=Vu(s,["component","childFactory"]),l=this.state.contextValue,c=tm(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,i===null?er.createElement(di.Provider,{value:l},c):er.createElement(di.Provider,{value:l},er.createElement(i,a,c))},e}(er.Component);Fa.propTypes={};Fa.defaultProps=rm;const qu=n=>n.scrollTop;function fi(n,e){const{timeout:t,easing:r,style:s={}}=n;return{duration:s.transitionDuration??(typeof t=="number"?t:t[e.mode]||0),easing:s.transitionTimingFunction??(typeof r=="object"?r[e.mode]:r),delay:s.transitionDelay}}function nm(n){return me("MuiPaper",n)}ye("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const sm=n=>{const{square:e,elevation:t,variant:r,classes:s}=n,i={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${t}`]};return be(i,nm,s)},im=V("div",{name:"MuiPaper",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],!t.square&&e.rounded,t.variant==="elevation"&&e[`elevation${t.elevation}`]]}})(_e(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow"),variants:[{props:({ownerState:e})=>!e.square,style:{borderRadius:n.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(n.vars||n).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),om=C.forwardRef(function(e,t){var f;const r=Te({props:e,name:"MuiPaper"}),s=Ra(),{className:i,component:o="div",elevation:a=1,square:l=!1,variant:c="elevation",...u}=r,h={...r,component:o,elevation:a,square:l,variant:c},d=sm(h);return _.jsx(im,{as:o,ownerState:h,className:Z(d.root,i),ref:t,...u,style:{...c==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[a],...s.vars&&{"--Paper-overlay":(f=s.vars.overlays)==null?void 0:f[a]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Br("#fff",$o(a))}, ${Br("#fff",$o(a))})`}},...u.style}})});function Ct(n,e){const{className:t,elementType:r,ownerState:s,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...l}=e,{component:c,slots:u={[n]:void 0},slotProps:h={[n]:void 0},...d}=i,f=u[n]||r,p=Iu(h[n],s),{props:{component:g,...y},internalRef:b}=Fu({className:t,...l,externalForwardedProps:n==="root"?d:void 0,externalSlotProps:p}),w=Je(b,p==null?void 0:p.ref,e.ref),v=n==="root"?g||c:g,S=Ru(f,{...n==="root"&&!c&&!u[n]&&o,...n!=="root"&&!u[n]&&o,...y,...v&&!a&&{as:v},...v&&a&&{component:v},ref:w},s);return[f,S]}class pi{constructor(){Rn(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new pi}static use(){const e=Mu(pi.create).current,[t,r]=C.useState(!1);return e.shouldMount=t,e.setShouldMount=r,C.useEffect(e.mountEffect,[t]),e}mount(){return this.mounted||(this.mounted=lm(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.start(...e)})}stop(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.stop(...e)})}pulsate(...e){this.mount().then(()=>{var t;return(t=this.ref.current)==null?void 0:t.pulsate(...e)})}}function am(){return pi.use()}function lm(){let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t}function cm(n){const{className:e,classes:t,pulsate:r=!1,rippleX:s,rippleY:i,rippleSize:o,in:a,onExited:l,timeout:c}=n,[u,h]=C.useState(!1),d=Z(e,t.ripple,t.rippleVisible,r&&t.ripplePulsate),f={width:o,height:o,top:-(o/2)+i,left:-(o/2)+s},p=Z(t.child,u&&t.childLeaving,r&&t.childPulsate);return!a&&!u&&h(!0),C.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),_.jsx("span",{className:d,style:f,children:_.jsx("span",{className:p})})}const vt=ye("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ho=550,um=80,hm=ds`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,dm=ds`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,fm=ds`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,pm=V("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),gm=V(cm,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${vt.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${hm};
    animation-duration: ${Ho}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  &.${vt.ripplePulsate} {
    animation-duration: ${({theme:n})=>n.transitions.duration.shorter}ms;
  }

  & .${vt.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${vt.childLeaving} {
    opacity: 0;
    animation-name: ${dm};
    animation-duration: ${Ho}ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
  }

  & .${vt.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${fm};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:n})=>n.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,mm=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiTouchRipple"}),{center:s=!1,classes:i={},className:o,...a}=r,[l,c]=C.useState([]),u=C.useRef(0),h=C.useRef(null);C.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const d=C.useRef(!1),f=Du(),p=C.useRef(null),g=C.useRef(null),y=C.useCallback(S=>{const{pulsate:x,rippleX:O,rippleY:P,rippleSize:M,cb:L}=S;c(m=>[...m,_.jsx(gm,{classes:{ripple:Z(i.ripple,vt.ripple),rippleVisible:Z(i.rippleVisible,vt.rippleVisible),ripplePulsate:Z(i.ripplePulsate,vt.ripplePulsate),child:Z(i.child,vt.child),childLeaving:Z(i.childLeaving,vt.childLeaving),childPulsate:Z(i.childPulsate,vt.childPulsate)},timeout:Ho,pulsate:x,rippleX:O,rippleY:P,rippleSize:M},u.current)]),u.current+=1,h.current=L},[i]),b=C.useCallback((S={},x={},O=()=>{})=>{const{pulsate:P=!1,center:M=s||x.pulsate,fakeElement:L=!1}=x;if((S==null?void 0:S.type)==="mousedown"&&d.current){d.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(d.current=!0);const m=L?null:g.current,E=m?m.getBoundingClientRect():{width:0,height:0,left:0,top:0};let j,R,I;if(M||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)j=Math.round(E.width/2),R=Math.round(E.height/2);else{const{clientX:F,clientY:B}=S.touches&&S.touches.length>0?S.touches[0]:S;j=Math.round(F-E.left),R=Math.round(B-E.top)}if(M)I=Math.sqrt((2*E.width**2+E.height**2)/3),I%2===0&&(I+=1);else{const F=Math.max(Math.abs((m?m.clientWidth:0)-j),j)*2+2,B=Math.max(Math.abs((m?m.clientHeight:0)-R),R)*2+2;I=Math.sqrt(F**2+B**2)}S!=null&&S.touches?p.current===null&&(p.current=()=>{y({pulsate:P,rippleX:j,rippleY:R,rippleSize:I,cb:O})},f.start(um,()=>{p.current&&(p.current(),p.current=null)})):y({pulsate:P,rippleX:j,rippleY:R,rippleSize:I,cb:O})},[s,y,f]),w=C.useCallback(()=>{b({},{pulsate:!0})},[b]),v=C.useCallback((S,x)=>{if(f.clear(),(S==null?void 0:S.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{v(S,x)});return}p.current=null,c(O=>O.length>0?O.slice(1):O),h.current=x},[f]);return C.useImperativeHandle(t,()=>({pulsate:w,start:b,stop:v}),[w,b,v]),_.jsx(pm,{className:Z(vt.root,i.root,o),ref:g,...a,children:_.jsx(Fa,{component:null,exit:!0,children:l})})});function ym(n){return me("MuiButtonBase",n)}const bm=ye("MuiButtonBase",["root","disabled","focusVisible"]),vm=n=>{const{disabled:e,focusVisible:t,focusVisibleClassName:r,classes:s}=n,o=be({root:["root",e&&"disabled",t&&"focusVisible"]},ym,s);return t&&r&&(o.root+=` ${r}`),o},xm=V("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(n,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${bm.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Xu=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiButtonBase"}),{action:s,centerRipple:i=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:h=!1,focusRipple:d=!1,focusVisibleClassName:f,LinkComponent:p="a",onBlur:g,onClick:y,onContextMenu:b,onDragLeave:w,onFocus:v,onFocusVisible:S,onKeyDown:x,onKeyUp:O,onMouseDown:P,onMouseLeave:M,onMouseUp:L,onTouchEnd:m,onTouchMove:E,onTouchStart:j,tabIndex:R=0,TouchRippleProps:I,touchRippleRef:F,type:B,...$}=r,z=C.useRef(null),N=am(),ne=Je(N.ref,F),[ce,Ie]=C.useState(!1);c&&ce&&Ie(!1),C.useImperativeHandle(s,()=>({focusVisible:()=>{Ie(!0),z.current.focus()}}),[]);const te=N.shouldMount&&!u&&!c;C.useEffect(()=>{ce&&d&&!u&&N.pulsate()},[u,d,ce,N]);const J=Gt(N,"start",P,h),se=Gt(N,"stop",b,h),ke=Gt(N,"stop",w,h),Oe=Gt(N,"stop",L,h),Qe=Gt(N,"stop",H=>{ce&&H.preventDefault(),M&&M(H)},h),ge=Gt(N,"start",j,h),U=Gt(N,"stop",m,h),de=Gt(N,"stop",E,h),Q=Gt(N,"stop",H=>{Nl(H.target)||Ie(!1),g&&g(H)},!1),Le=fn(H=>{z.current||(z.current=H.currentTarget),Nl(H.target)&&(Ie(!0),S&&S(H)),v&&v(H)}),ee=()=>{const H=z.current;return l&&l!=="button"&&!(H.tagName==="A"&&H.href)},xe=fn(H=>{d&&!H.repeat&&ce&&H.key===" "&&N.stop(H,()=>{N.start(H)}),H.target===H.currentTarget&&ee()&&H.key===" "&&H.preventDefault(),x&&x(H),H.target===H.currentTarget&&ee()&&H.key==="Enter"&&!c&&(H.preventDefault(),y&&y(H))}),ft=fn(H=>{d&&H.key===" "&&ce&&!H.defaultPrevented&&N.stop(H,()=>{N.pulsate(H)}),O&&O(H),y&&H.target===H.currentTarget&&ee()&&H.key===" "&&!H.defaultPrevented&&y(H)});let et=l;et==="button"&&($.href||$.to)&&(et=p);const Ve={};et==="button"?(Ve.type=B===void 0?"button":B,Ve.disabled=c):(!$.href&&!$.to&&(Ve.role="button"),c&&(Ve["aria-disabled"]=c));const Ft=Je(t,z),tt={...r,centerRipple:i,component:l,disabled:c,disableRipple:u,disableTouchRipple:h,focusRipple:d,tabIndex:R,focusVisible:ce},$e=vm(tt);return _.jsxs(xm,{as:et,className:Z($e.root,a),ownerState:tt,onBlur:Q,onClick:y,onContextMenu:se,onFocus:Le,onKeyDown:xe,onKeyUp:ft,onMouseDown:J,onMouseLeave:Qe,onMouseUp:Oe,onDragLeave:ke,onTouchEnd:U,onTouchMove:de,onTouchStart:ge,ref:Ft,tabIndex:c?-1:R,type:B,...Ve,...$,children:[o,te?_.jsx(mm,{ref:ne,center:i,...I}):null]})});function Gt(n,e,t,r=!1){return fn(s=>(t&&t(s),r||n[e](s),!0))}function Sm(n){return typeof n.main=="string"}function Cm(n,e=[]){if(!Sm(n))return!1;for(const t of e)if(!n.hasOwnProperty(t)||typeof n[t]!="string")return!1;return!0}function Ht(n=[]){return([,e])=>e&&Cm(e,n)}function _m(n){return me("MuiCircularProgress",n)}ye("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const dr=44,qo=ds`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,Xo=ds`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,wm=typeof qo!="string"?xa`
        animation: ${qo} 1.4s linear infinite;
      `:null,Tm=typeof Xo!="string"?xa`
        animation: ${Xo} 1.4s ease-in-out infinite;
      `:null,km=n=>{const{classes:e,variant:t,color:r,disableShrink:s}=n,i={root:["root",t,`color${G(r)}`],svg:["svg"],circle:["circle",`circle${G(t)}`,s&&"circleDisableShrink"]};return be(i,_m,e)},Om=V("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[t.variant],e[`color${G(t.color)}`]]}})(_e(({theme:n})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("transform")}},{props:{variant:"indeterminate"},style:wm||{animation:`${qo} 1.4s linear infinite`}},...Object.entries(n.palette).filter(Ht()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}}))]}))),Em=V("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(n,e)=>e.svg})({display:"block"}),Pm=V("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.circle,e[`circle${G(t.variant)}`],t.disableShrink&&e.circleDisableShrink]}})(_e(({theme:n})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:n.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink,style:Tm||{animation:`${Xo} 1.4s ease-in-out infinite`}}]}))),Mm=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiCircularProgress"}),{className:s,color:i="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:h="indeterminate",...d}=r,f={...r,color:i,disableShrink:o,size:a,thickness:c,value:u,variant:h},p=km(f),g={},y={},b={};if(h==="determinate"){const w=2*Math.PI*((dr-c)/2);g.strokeDasharray=w.toFixed(3),b["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*w).toFixed(3)}px`,y.transform="rotate(-90deg)"}return _.jsx(Om,{className:Z(p.root,s),style:{width:a,height:a,...y,...l},ownerState:f,ref:t,role:"progressbar",...b,...d,children:_.jsx(Em,{className:p.svg,ownerState:f,viewBox:`${dr/2} ${dr/2} ${dr} ${dr}`,children:_.jsx(Pm,{className:p.circle,style:g,ownerState:f,cx:dr,cy:dr,r:(dr-c)/2,fill:"none",strokeWidth:c})})})});function Dm(n){return me("MuiIconButton",n)}const Zl=ye("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Am=n=>{const{classes:e,disabled:t,color:r,edge:s,size:i,loading:o}=n,a={root:["root",o&&"loading",t&&"disabled",r!=="default"&&`color${G(r)}`,s&&`edge${G(s)}`,`size${G(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return be(a,Dm,e)},Rm=V(Xu,{name:"MuiIconButton",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.loading&&e.loading,t.color!=="default"&&e[`color${G(t.color)}`],t.edge&&e[`edge${G(t.edge)}`],e[`size${G(t.size)}`]]}})(_e(({theme:n})=>({textAlign:"center",flex:"0 0 auto",fontSize:n.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(n.vars||n).palette.action.active,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Br(n.palette.action.active,n.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),_e(({theme:n})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(n.palette).filter(Ht()).map(([e])=>({props:{color:e},style:{color:(n.vars||n).palette[e].main}})),...Object.entries(n.palette).filter(Ht()).map(([e])=>({props:{color:e},style:{"--IconButton-hoverBg":n.vars?`rgba(${(n.vars||n).palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Br((n.vars||n).palette[e].main,n.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}],[`&.${Zl.disabled}`]:{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled},[`&.${Zl.loading}`]:{color:"transparent"}}))),jm=V("span",{name:"MuiIconButton",slot:"LoadingIndicator",overridesResolver:(n,e)=>e.loadingIndicator})(({theme:n})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(n.vars||n).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),Fm=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiIconButton"}),{edge:s=!1,children:i,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium",id:h,loading:d=null,loadingIndicator:f,...p}=r,g=Pa(h),y=f??_.jsx(Mm,{"aria-labelledby":g,color:"inherit",size:16}),b={...r,edge:s,color:a,disabled:l,disableFocusRipple:c,loading:d,loadingIndicator:y,size:u},w=Am(b);return _.jsxs(Rm,{id:g,className:Z(w.root,o),centerRipple:!0,focusRipple:!c,disabled:l||d,ref:t,...p,ownerState:b,children:[typeof d=="boolean"&&_.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:_.jsx(jm,{className:w.loadingIndicator,ownerState:b,children:d&&y})}),i]})});function Im(n){return me("MuiTypography",n)}ye("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Lm={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Bm=Xg(),Nm=n=>{const{align:e,gutterBottom:t,noWrap:r,paragraph:s,variant:i,classes:o}=n,a={root:["root",i,n.align!=="inherit"&&`align${G(e)}`,t&&"gutterBottom",r&&"noWrap",s&&"paragraph"]};return be(a,Im,o)},$m=V("span",{name:"MuiTypography",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.variant&&e[t.variant],t.align!=="inherit"&&e[`align${G(t.align)}`],t.noWrap&&e.noWrap,t.gutterBottom&&e.gutterBottom,t.paragraph&&e.paragraph]}})(_e(({theme:n})=>{var e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(n.typography).filter(([t,r])=>t!=="inherit"&&r&&typeof r=="object").map(([t,r])=>({props:{variant:t},style:r})),...Object.entries(n.palette).filter(Ht()).map(([t])=>({props:{color:t},style:{color:(n.vars||n).palette[t].main}})),...Object.entries(((e=n.palette)==null?void 0:e.text)||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${G(t)}`},style:{color:(n.vars||n).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}})),Jl={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Yo=C.forwardRef(function(e,t){const{color:r,...s}=Te({props:e,name:"MuiTypography"}),i=!Lm[r],o=Bm({...s,...i&&{color:r}}),{align:a="inherit",className:l,component:c,gutterBottom:u=!1,noWrap:h=!1,paragraph:d=!1,variant:f="body1",variantMapping:p=Jl,...g}=o,y={...o,align:a,color:r,className:l,component:c,gutterBottom:u,noWrap:h,paragraph:d,variant:f,variantMapping:p},b=c||(d?"p":p[f]||Jl[f])||"span",w=Nm(y);return _.jsx($m,{as:b,ref:t,className:Z(w.root,l),...g,ownerState:y,style:{...a!=="inherit"&&{"--Typography-textAlign":a},...g.style}})});function Wm(n){return typeof n=="function"?n():n}const zm=C.forwardRef(function(e,t){const{children:r,container:s,disablePortal:i=!1}=e,[o,a]=C.useState(null),l=Je(C.isValidElement(r)?ms(r):null,t);if(Lr(()=>{i||a(Wm(s)||document.body)},[s,i]),Lr(()=>{if(o&&!i)return Lo(t,o),()=>{Lo(t,null)}},[t,o,i]),i){if(C.isValidElement(r)){const c={ref:l};return C.cloneElement(r,c)}return r}return o&&ou.createPortal(r,o)});function Ts(n){return parseInt(n,10)||0}const Vm={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Hm(n){for(const e in n)return!1;return!0}function qm(n){return Hm(n)||n.outerHeightStyle===0&&!n.overflowing}const Xm=C.forwardRef(function(e,t){const{onChange:r,maxRows:s,minRows:i=1,style:o,value:a,...l}=e,{current:c}=C.useRef(a!=null),u=C.useRef(null),h=Je(t,u),d=C.useRef(null),f=C.useRef(null),p=C.useCallback(()=>{const w=u.current,v=f.current;if(!w||!v)return;const x=ar(w).getComputedStyle(w);if(x.width==="0px")return{outerHeightStyle:0,overflowing:!1};v.style.width=x.width,v.value=w.value||e.placeholder||"x",v.value.slice(-1)===`
`&&(v.value+=" ");const O=x.boxSizing,P=Ts(x.paddingBottom)+Ts(x.paddingTop),M=Ts(x.borderBottomWidth)+Ts(x.borderTopWidth),L=v.scrollHeight;v.value="x";const m=v.scrollHeight;let E=L;i&&(E=Math.max(Number(i)*m,E)),s&&(E=Math.min(Number(s)*m,E)),E=Math.max(E,m);const j=E+(O==="border-box"?P+M:0),R=Math.abs(E-L)<=1;return{outerHeightStyle:j,overflowing:R}},[s,i,e.placeholder]),g=C.useCallback(()=>{const w=u.current,v=p();if(!w||!v||qm(v))return;const S=v.outerHeightStyle;d.current!==S&&(d.current=S,w.style.height=`${S}px`),w.style.overflow=v.overflowing?"hidden":""},[p]),y=C.useRef(-1);Lr(()=>{const w=Pu(()=>g()),v=u==null?void 0:u.current;if(!v)return;const S=ar(v);S.addEventListener("resize",w);let x;return typeof ResizeObserver<"u"&&(x=new ResizeObserver(()=>{x.unobserve(v),cancelAnimationFrame(y.current),g(),y.current=requestAnimationFrame(()=>{x.observe(v)})}),x.observe(v)),()=>{w.clear(),cancelAnimationFrame(y.current),S.removeEventListener("resize",w),x&&x.disconnect()}},[p,g]),Lr(()=>{g()});const b=w=>{c||g(),r&&r(w)};return _.jsxs(C.Fragment,{children:[_.jsx("textarea",{value:a,onChange:b,ref:h,rows:i,style:o,...l}),_.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:f,tabIndex:-1,style:{...Vm.shadow,...o,paddingTop:0,paddingBottom:0}})]})});function Uo(n){return typeof n=="string"}function zr({props:n,states:e,muiFormControl:t}){return e.reduce((r,s)=>(r[s]=n[s],t&&typeof n[s]>"u"&&(r[s]=t[s]),r),{})}const Ia=C.createContext(void 0);function br(){return C.useContext(Ia)}function Ql(n){return n!=null&&!(Array.isArray(n)&&n.length===0)}function gi(n,e=!1){return n&&(Ql(n.value)&&n.value!==""||e&&Ql(n.defaultValue)&&n.defaultValue!=="")}function Ym(n){return n.startAdornment}function Um(n){return me("MuiInputBase",n)}const xn=ye("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var ec;const Wi=(n,e)=>{const{ownerState:t}=n;return[e.root,t.formControl&&e.formControl,t.startAdornment&&e.adornedStart,t.endAdornment&&e.adornedEnd,t.error&&e.error,t.size==="small"&&e.sizeSmall,t.multiline&&e.multiline,t.color&&e[`color${G(t.color)}`],t.fullWidth&&e.fullWidth,t.hiddenLabel&&e.hiddenLabel]},zi=(n,e)=>{const{ownerState:t}=n;return[e.input,t.size==="small"&&e.inputSizeSmall,t.multiline&&e.inputMultiline,t.type==="search"&&e.inputTypeSearch,t.startAdornment&&e.inputAdornedStart,t.endAdornment&&e.inputAdornedEnd,t.hiddenLabel&&e.inputHiddenLabel]},Gm=n=>{const{classes:e,color:t,disabled:r,error:s,endAdornment:i,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:h,size:d,startAdornment:f,type:p}=n,g={root:["root",`color${G(t)}`,r&&"disabled",s&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",d&&d!=="medium"&&`size${G(d)}`,u&&"multiline",f&&"adornedStart",i&&"adornedEnd",c&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",i&&"inputAdornedEnd",h&&"readOnly"]};return be(g,Um,e)},Vi=V("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Wi})(_e(({theme:n})=>({...n.typography.body1,color:(n.vars||n).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${xn.disabled}`]:{color:(n.vars||n).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:e})=>e.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:e,size:t})=>e.multiline&&t==="small",style:{paddingTop:1}},{props:({ownerState:e})=>e.fullWidth,style:{width:"100%"}}]}))),Hi=V("input",{name:"MuiInputBase",slot:"Input",overridesResolver:zi})(_e(({theme:n})=>{const e=n.palette.mode==="light",t={color:"currentColor",...n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5},transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})},r={opacity:"0 !important"},s=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:e?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&::-ms-input-placeholder":t,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${xn.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${xn.disabled}`]:{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled},variants:[{props:({ownerState:i})=>!i.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:i})=>i.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),tc=qg({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),La=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:i,autoFocus:o,className:a,color:l,components:c={},componentsProps:u={},defaultValue:h,disabled:d,disableInjectingGlobalStyles:f,endAdornment:p,error:g,fullWidth:y=!1,id:b,inputComponent:w="input",inputProps:v={},inputRef:S,margin:x,maxRows:O,minRows:P,multiline:M=!1,name:L,onBlur:m,onChange:E,onClick:j,onFocus:R,onKeyDown:I,onKeyUp:F,placeholder:B,readOnly:$,renderSuffix:z,rows:N,size:ne,slotProps:ce={},slots:Ie={},startAdornment:te,type:J="text",value:se,...ke}=r,Oe=v.value!=null?v.value:se,{current:Qe}=C.useRef(Oe!=null),ge=C.useRef(),U=C.useCallback(Se=>{},[]),de=Je(ge,S,v.ref,U),[Q,Le]=C.useState(!1),ee=br(),xe=zr({props:r,muiFormControl:ee,states:["color","disabled","error","hiddenLabel","size","required","filled"]});xe.focused=ee?ee.focused:Q,C.useEffect(()=>{!ee&&d&&Q&&(Le(!1),m&&m())},[ee,d,Q,m]);const ft=ee&&ee.onFilled,et=ee&&ee.onEmpty,Ve=C.useCallback(Se=>{gi(Se)?ft&&ft():et&&et()},[ft,et]);Lr(()=>{Qe&&Ve({value:Oe})},[Oe,Ve,Qe]);const Ft=Se=>{R&&R(Se),v.onFocus&&v.onFocus(Se),ee&&ee.onFocus?ee.onFocus(Se):Le(!0)},tt=Se=>{m&&m(Se),v.onBlur&&v.onBlur(Se),ee&&ee.onBlur?ee.onBlur(Se):Le(!1)},$e=(Se,...Ur)=>{if(!Qe){const An=Se.target||ge.current;if(An==null)throw new Error(ir(1));Ve({value:An.value})}v.onChange&&v.onChange(Se,...Ur),E&&E(Se,...Ur)};C.useEffect(()=>{Ve(ge.current)},[]);const H=Se=>{ge.current&&Se.currentTarget===Se.target&&ge.current.focus(),j&&j(Se)};let Hr=w,it=v;M&&Hr==="input"&&(N?it={type:void 0,minRows:N,maxRows:N,...it}:it={type:void 0,maxRows:O,minRows:P,...it},Hr=Xm);const qr=Se=>{Ve(Se.animationName==="mui-auto-fill-cancel"?ge.current:{value:"x"})};C.useEffect(()=>{ee&&ee.setAdornedStart(!!te)},[ee,te]);const Mn={...r,color:xe.color||"primary",disabled:xe.disabled,endAdornment:p,error:xe.error,focused:xe.focused,formControl:ee,fullWidth:y,hiddenLabel:xe.hiddenLabel,multiline:M,size:xe.size,startAdornment:te,type:J},Dn=Gm(Mn),Xr=Ie.root||c.Root||Vi,Yr=ce.root||u.root||{},Sr=Ie.input||c.Input||Hi;return it={...it,...ce.input??u.input},_.jsxs(C.Fragment,{children:[!f&&typeof tc=="function"&&(ec||(ec=_.jsx(tc,{}))),_.jsxs(Xr,{...Yr,ref:t,onClick:H,...ke,...!Uo(Xr)&&{ownerState:{...Mn,...Yr.ownerState}},className:Z(Dn.root,Yr.className,a,$&&"MuiInputBase-readOnly"),children:[te,_.jsx(Ia.Provider,{value:null,children:_.jsx(Sr,{"aria-invalid":xe.error,"aria-describedby":s,autoComplete:i,autoFocus:o,defaultValue:h,disabled:xe.disabled,id:b,onAnimationStart:qr,name:L,placeholder:B,readOnly:$,required:xe.required,rows:N,value:Oe,onKeyDown:I,onKeyUp:F,type:J,...it,...!Uo(Sr)&&{as:Hr,ownerState:{...Mn,...it.ownerState}},ref:de,className:Z(Dn.input,it.className,$&&"MuiInputBase-readOnly"),onBlur:tt,onChange:$e,onFocus:Ft})}),p,z?z({...xe,startAdornment:te}):null]})]})});function Km(n){return me("MuiInput",n)}const In={...xn,...ye("MuiInput",["root","underline","input"])};function Zm(n){return me("MuiOutlinedInput",n)}const Lt={...xn,...ye("MuiOutlinedInput",["root","notchedOutline","input"])};function Jm(n){return me("MuiFilledInput",n)}const Cr={...xn,...ye("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Qm=$i(_.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),ey={entering:{opacity:1},entered:{opacity:1}},ty=C.forwardRef(function(e,t){const r=Ra(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:h,onEntering:d,onExit:f,onExited:p,onExiting:g,style:y,timeout:b=s,TransitionComponent:w=Yt,...v}=e,S=C.useRef(null),x=Je(S,ms(a),t),O=I=>F=>{if(I){const B=S.current;F===void 0?I(B):I(B,F)}},P=O(d),M=O((I,F)=>{qu(I);const B=fi({style:y,timeout:b,easing:l},{mode:"enter"});I.style.webkitTransition=r.transitions.create("opacity",B),I.style.transition=r.transitions.create("opacity",B),u&&u(I,F)}),L=O(h),m=O(g),E=O(I=>{const F=fi({style:y,timeout:b,easing:l},{mode:"exit"});I.style.webkitTransition=r.transitions.create("opacity",F),I.style.transition=r.transitions.create("opacity",F),f&&f(I)}),j=O(p),R=I=>{i&&i(S.current,I)};return _.jsx(w,{appear:o,in:c,nodeRef:S,onEnter:M,onEntered:L,onEntering:P,onExit:E,onExited:j,onExiting:m,addEndListener:R,timeout:b,...v,children:(I,{ownerState:F,...B})=>C.cloneElement(a,{style:{opacity:0,visibility:I==="exited"&&!c?"hidden":void 0,...ey[I],...y,...a.props.style},ref:x,...B})})});function ry(n){return me("MuiBackdrop",n)}ye("MuiBackdrop",["root","invisible"]);const ny=n=>{const{classes:e,invisible:t}=n;return be({root:["root",t&&"invisible"]},ry,e)},sy=V("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.invisible&&e.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),iy=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiBackdrop"}),{children:s,className:i,component:o="div",invisible:a=!1,open:l,components:c={},componentsProps:u={},slotProps:h={},slots:d={},TransitionComponent:f,transitionDuration:p,...g}=r,y={...r,component:o,invisible:a},b=ny(y),w={transition:f,root:c.Root,...d},v={...u,...h},S={slots:w,slotProps:v},[x,O]=Ct("root",{elementType:sy,externalForwardedProps:S,className:Z(b.root,i),ownerState:y}),[P,M]=Ct("transition",{elementType:ty,externalForwardedProps:S,ownerState:y});return _.jsx(P,{in:l,timeout:p,...g,...M,children:_.jsx(x,{"aria-hidden":!0,...O,classes:b,ref:t,children:s})})});function oy(n){return me("PrivateSwitchBase",n)}ye("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const ay=n=>{const{classes:e,checked:t,disabled:r,edge:s}=n,i={root:["root",t&&"checked",r&&"disabled",s&&`edge${G(s)}`],input:["input"]};return be(i,oy,e)},ly=V(Xu)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:e})=>n==="start"&&e.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:e})=>n==="end"&&e.size!=="small",style:{marginRight:-12}}]}),cy=V("input",{shouldForwardProp:kt})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),uy=C.forwardRef(function(e,t){const{autoFocus:r,checked:s,checkedIcon:i,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:h,id:d,inputProps:f,inputRef:p,name:g,onBlur:y,onChange:b,onFocus:w,readOnly:v,required:S=!1,tabIndex:x,type:O,value:P,...M}=e,[L,m]=Bo({controlled:s,default:!!a,name:"SwitchBase",state:"checked"}),E=br(),j=N=>{w&&w(N),E&&E.onFocus&&E.onFocus(N)},R=N=>{y&&y(N),E&&E.onBlur&&E.onBlur(N)},I=N=>{if(N.nativeEvent.defaultPrevented)return;const ne=N.target.checked;m(ne),b&&b(N,ne)};let F=l;E&&typeof F>"u"&&(F=E.disabled);const B=O==="checkbox"||O==="radio",$={...e,checked:L,disabled:F,disableFocusRipple:c,edge:u},z=ay($);return _.jsxs(ly,{component:"span",className:Z(z.root,o),centerRipple:!0,focusRipple:!c,disabled:F,tabIndex:null,role:void 0,onFocus:j,onBlur:R,ownerState:$,ref:t,...M,children:[_.jsx(cy,{autoFocus:r,checked:s,defaultChecked:a,className:z.input,disabled:F,id:B?d:void 0,name:g,onChange:I,readOnly:v,ref:p,required:S,ownerState:$,tabIndex:x,type:O,...O==="checkbox"&&P===void 0?{}:{value:P},...f}),L?i:h]})}),hy=$i(_.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),dy=$i(_.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),fy=$i(_.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function py(n){return me("MuiCheckbox",n)}const co=ye("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),gy=n=>{const{classes:e,indeterminate:t,color:r,size:s}=n,i={root:["root",t&&"indeterminate",`color${G(r)}`,`size${G(s)}`]},o=be(i,py,e);return{...e,...o}},my=V(uy,{shouldForwardProp:n=>kt(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.indeterminate&&e.indeterminate,e[`size${G(t.size)}`],t.color!=="default"&&e[`color${G(t.color)}`]]}})(_e(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Br(n.palette.action.active,n.palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Ht()).map(([e])=>({props:{color:e,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[e].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Br(n.palette[e].main,n.palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Ht()).map(([e])=>({props:{color:e},style:{[`&.${co.checked}, &.${co.indeterminate}`]:{color:(n.vars||n).palette[e].main},[`&.${co.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),yy=_.jsx(dy,{}),by=_.jsx(hy,{}),vy=_.jsx(fy,{}),xy=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiCheckbox"}),{checkedIcon:s=yy,color:i="primary",icon:o=by,indeterminate:a=!1,indeterminateIcon:l=vy,inputProps:c,size:u="medium",disableRipple:h=!1,className:d,...f}=r,p=a?l:o,g=a?l:s,y={...r,disableRipple:h,color:i,indeterminate:a,size:u},b=gy(y);return _.jsx(my,{type:"checkbox",inputProps:{"data-indeterminate":a,...c},icon:C.cloneElement(p,{fontSize:p.props.fontSize??u}),checkedIcon:C.cloneElement(g,{fontSize:g.props.fontSize??u}),ownerState:y,ref:t,className:Z(b.root,d),disableRipple:h,...f,classes:b})});function Sy(n){const e=Rt(n);return e.body===n?ar(n).innerWidth>e.documentElement.clientWidth:n.scrollHeight>n.clientHeight}function Un(n,e){e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")}function rc(n){return parseInt(ar(n).getComputedStyle(n).paddingRight,10)||0}function Cy(n){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(n.tagName),r=n.tagName==="INPUT"&&n.getAttribute("type")==="hidden";return t||r}function nc(n,e,t,r,s){const i=[e,t,...r];[].forEach.call(n.children,o=>{const a=!i.includes(o),l=!Cy(o);a&&l&&Un(o,s)})}function uo(n,e){let t=-1;return n.some((r,s)=>e(r)?(t=s,!0):!1),t}function _y(n,e){const t=[],r=n.container;if(!e.disableScrollLock){if(Sy(r)){const o=Au(ar(r));t.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${rc(r)+o}px`;const a=Rt(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{t.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${rc(l)+o}px`})}let i;if(r.parentNode instanceof DocumentFragment)i=Rt(r).body;else{const o=r.parentElement,a=ar(r);i=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}t.push({value:i.style.overflow,property:"overflow",el:i},{value:i.style.overflowX,property:"overflow-x",el:i},{value:i.style.overflowY,property:"overflow-y",el:i}),i.style.overflow="hidden"}return()=>{t.forEach(({value:i,el:o,property:a})=>{i?o.style.setProperty(a,i):o.style.removeProperty(a)})}}function wy(n){const e=[];return[].forEach.call(n.children,t=>{t.getAttribute("aria-hidden")==="true"&&e.push(t)}),e}class Ty{constructor(){this.modals=[],this.containers=[]}add(e,t){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Un(e.modalRef,!1);const s=wy(t);nc(t,e.mount,e.modalRef,s,!0);const i=uo(this.containers,o=>o.container===t);return i!==-1?(this.containers[i].modals.push(e),r):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:s}),r)}mount(e,t){const r=uo(this.containers,i=>i.modals.includes(e)),s=this.containers[r];s.restore||(s.restore=_y(s,t))}remove(e,t=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const s=uo(this.containers,o=>o.modals.includes(e)),i=this.containers[s];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(r,1),i.modals.length===0)i.restore&&i.restore(),e.modalRef&&Un(e.modalRef,t),nc(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(s,1);else{const o=i.modals[i.modals.length-1];o.modalRef&&Un(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}const ky=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Oy(n){const e=parseInt(n.getAttribute("tabindex")||"",10);return Number.isNaN(e)?n.contentEditable==="true"||(n.nodeName==="AUDIO"||n.nodeName==="VIDEO"||n.nodeName==="DETAILS")&&n.getAttribute("tabindex")===null?0:n.tabIndex:e}function Ey(n){if(n.tagName!=="INPUT"||n.type!=="radio"||!n.name)return!1;const e=r=>n.ownerDocument.querySelector(`input[type="radio"]${r}`);let t=e(`[name="${n.name}"]:checked`);return t||(t=e(`[name="${n.name}"]`)),t!==n}function Py(n){return!(n.disabled||n.tagName==="INPUT"&&n.type==="hidden"||Ey(n))}function My(n){const e=[],t=[];return Array.from(n.querySelectorAll(ky)).forEach((r,s)=>{const i=Oy(r);i===-1||!Py(r)||(i===0?e.push(r):t.push({documentOrder:s,tabIndex:i,node:r}))}),t.sort((r,s)=>r.tabIndex===s.tabIndex?r.documentOrder-s.documentOrder:r.tabIndex-s.tabIndex).map(r=>r.node).concat(e)}function Dy(){return!0}function Ay(n){const{children:e,disableAutoFocus:t=!1,disableEnforceFocus:r=!1,disableRestoreFocus:s=!1,getTabbable:i=My,isEnabled:o=Dy,open:a}=n,l=C.useRef(!1),c=C.useRef(null),u=C.useRef(null),h=C.useRef(null),d=C.useRef(null),f=C.useRef(!1),p=C.useRef(null),g=Je(ms(e),p),y=C.useRef(null);C.useEffect(()=>{!a||!p.current||(f.current=!t)},[t,a]),C.useEffect(()=>{if(!a||!p.current)return;const v=Rt(p.current);return p.current.contains(v.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{s||(h.current&&h.current.focus&&(l.current=!0,h.current.focus()),h.current=null)}},[a]),C.useEffect(()=>{if(!a||!p.current)return;const v=Rt(p.current),S=P=>{y.current=P,!(r||!o()||P.key!=="Tab")&&v.activeElement===p.current&&P.shiftKey&&(l.current=!0,u.current&&u.current.focus())},x=()=>{var L,m;const P=p.current;if(P===null)return;if(!v.hasFocus()||!o()||l.current){l.current=!1;return}if(P.contains(v.activeElement)||r&&v.activeElement!==c.current&&v.activeElement!==u.current)return;if(v.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!f.current)return;let M=[];if((v.activeElement===c.current||v.activeElement===u.current)&&(M=i(p.current)),M.length>0){const E=!!((L=y.current)!=null&&L.shiftKey&&((m=y.current)==null?void 0:m.key)==="Tab"),j=M[0],R=M[M.length-1];typeof j!="string"&&typeof R!="string"&&(E?R.focus():j.focus())}else P.focus()};v.addEventListener("focusin",x),v.addEventListener("keydown",S,!0);const O=setInterval(()=>{v.activeElement&&v.activeElement.tagName==="BODY"&&x()},50);return()=>{clearInterval(O),v.removeEventListener("focusin",x),v.removeEventListener("keydown",S,!0)}},[t,r,s,o,a,i]);const b=v=>{h.current===null&&(h.current=v.relatedTarget),f.current=!0,d.current=v.target;const S=e.props.onFocus;S&&S(v)},w=v=>{h.current===null&&(h.current=v.relatedTarget),f.current=!0};return _.jsxs(C.Fragment,{children:[_.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:c,"data-testid":"sentinelStart"}),C.cloneElement(e,{ref:g,onFocus:b}),_.jsx("div",{tabIndex:a?0:-1,onFocus:w,ref:u,"data-testid":"sentinelEnd"})]})}function Ry(n){return typeof n=="function"?n():n}function jy(n){return n?n.props.hasOwnProperty("in"):!1}const sc=()=>{},ks=new Ty;function Fy(n){const{container:e,disableEscapeKeyDown:t=!1,disableScrollLock:r=!1,closeAfterTransition:s=!1,onTransitionEnter:i,onTransitionExited:o,children:a,onClose:l,open:c,rootRef:u}=n,h=C.useRef({}),d=C.useRef(null),f=C.useRef(null),p=Je(f,u),[g,y]=C.useState(!c),b=jy(a);let w=!0;(n["aria-hidden"]==="false"||n["aria-hidden"]===!1)&&(w=!1);const v=()=>Rt(d.current),S=()=>(h.current.modalRef=f.current,h.current.mount=d.current,h.current),x=()=>{ks.mount(S(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},O=fn(()=>{const F=Ry(e)||v().body;ks.add(S(),F),f.current&&x()}),P=()=>ks.isTopModal(S()),M=fn(F=>{d.current=F,F&&(c&&P()?x():f.current&&Un(f.current,w))}),L=C.useCallback(()=>{ks.remove(S(),w)},[w]);C.useEffect(()=>()=>{L()},[L]),C.useEffect(()=>{c?O():(!b||!s)&&L()},[c,L,b,s,O]);const m=F=>B=>{var $;($=F.onKeyDown)==null||$.call(F,B),!(B.key!=="Escape"||B.which===229||!P())&&(t||(B.stopPropagation(),l&&l(B,"escapeKeyDown")))},E=F=>B=>{var $;($=F.onClick)==null||$.call(F,B),B.target===B.currentTarget&&l&&l(B,"backdropClick")};return{getRootProps:(F={})=>{const B=ju(n);delete B.onTransitionEnter,delete B.onTransitionExited;const $={...B,...F};return{role:"presentation",...$,onKeyDown:m($),ref:p}},getBackdropProps:(F={})=>{const B=F;return{"aria-hidden":!0,...B,onClick:E(B),open:c}},getTransitionProps:()=>{const F=()=>{y(!1),i&&i()},B=()=>{y(!0),o&&o(),s&&L()};return{onEnter:Fl(F,(a==null?void 0:a.props.onEnter)??sc),onExited:Fl(B,(a==null?void 0:a.props.onExited)??sc)}},rootRef:p,portalRef:M,isTopModal:P,exited:g,hasTransition:b}}function Iy(n){return me("MuiModal",n)}ye("MuiModal",["root","hidden","backdrop"]);const Ly=n=>{const{open:e,exited:t,classes:r}=n;return be({root:["root",!e&&t&&"hidden"],backdrop:["backdrop"]},Iy,r)},By=V("div",{name:"MuiModal",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.open&&t.exited&&e.hidden]}})(_e(({theme:n})=>({position:"fixed",zIndex:(n.vars||n).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:e})=>!e.open&&e.exited,style:{visibility:"hidden"}}]}))),Ny=V(iy,{name:"MuiModal",slot:"Backdrop",overridesResolver:(n,e)=>e.backdrop})({zIndex:-1}),$y=C.forwardRef(function(e,t){const r=Te({name:"MuiModal",props:e}),{BackdropComponent:s=Ny,BackdropProps:i,classes:o,className:a,closeAfterTransition:l=!1,children:c,container:u,component:h,components:d={},componentsProps:f={},disableAutoFocus:p=!1,disableEnforceFocus:g=!1,disableEscapeKeyDown:y=!1,disablePortal:b=!1,disableRestoreFocus:w=!1,disableScrollLock:v=!1,hideBackdrop:S=!1,keepMounted:x=!1,onBackdropClick:O,onClose:P,onTransitionEnter:M,onTransitionExited:L,open:m,slotProps:E={},slots:j={},theme:R,...I}=r,F={...r,closeAfterTransition:l,disableAutoFocus:p,disableEnforceFocus:g,disableEscapeKeyDown:y,disablePortal:b,disableRestoreFocus:w,disableScrollLock:v,hideBackdrop:S,keepMounted:x},{getRootProps:B,getBackdropProps:$,getTransitionProps:z,portalRef:N,isTopModal:ne,exited:ce,hasTransition:Ie}=Fy({...F,rootRef:t}),te={...F,exited:ce},J=Ly(te),se={};if(c.props.tabIndex===void 0&&(se.tabIndex="-1"),Ie){const{onEnter:Q,onExited:Le}=z();se.onEnter=Q,se.onExited=Le}const ke={...I,slots:{root:d.Root,backdrop:d.Backdrop,...j},slotProps:{...f,...E}},[Oe,Qe]=Ct("root",{elementType:By,externalForwardedProps:ke,getSlotProps:B,additionalProps:{ref:t,as:h},ownerState:te,className:Z(a,J==null?void 0:J.root,!te.open&&te.exited&&(J==null?void 0:J.hidden))}),[ge,U]=Ct("backdrop",{elementType:s,externalForwardedProps:ke,additionalProps:i,getSlotProps:Q=>$({...Q,onClick:Le=>{O&&O(Le),Q!=null&&Q.onClick&&Q.onClick(Le)}}),className:Z(i==null?void 0:i.className,J==null?void 0:J.backdrop),ownerState:te}),de=Je(i==null?void 0:i.ref,U.ref);return!x&&!m&&(!Ie||ce)?null:_.jsx(zm,{ref:N,container:u,disablePortal:b,children:_.jsxs(Oe,{...Qe,children:[!S&&s?_.jsx(ge,{...U,ref:de}):null,_.jsx(Ay,{disableEnforceFocus:g,disableAutoFocus:p,disableRestoreFocus:w,isEnabled:ne,open:m,children:C.cloneElement(c,se)})]})})}),Wy=n=>{const{classes:e,disableUnderline:t,startAdornment:r,endAdornment:s,size:i,hiddenLabel:o,multiline:a}=n,l={root:["root",!t&&"underline",r&&"adornedStart",s&&"adornedEnd",i==="small"&&`size${G(i)}`,o&&"hiddenLabel",a&&"multiline"],input:["input"]},c=be(l,Jm,e);return{...e,...c}},zy=V(Vi,{shouldForwardProp:n=>kt(n)||n==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Wi(n,e),!t.disableUnderline&&e.underline]}})(_e(({theme:n})=>{const e=n.palette.mode==="light",t=e?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=e?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=e?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",i=e?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(n.vars||n).shape.borderRadius,borderTopRightRadius:(n.vars||n).shape.borderRadius,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),"&:hover":{backgroundColor:n.vars?n.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r}},[`&.${Cr.focused}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.bg:r},[`&.${Cr.disabled}`]:{backgroundColor:n.vars?n.vars.palette.FilledInput.disabledBg:i},variants:[{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Cr.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Cr.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`:t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Cr.disabled}, .${Cr.error}):before`]:{borderBottom:`1px solid ${(n.vars||n).palette.text.primary}`},[`&.${Cr.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Ht()).map(([o])=>{var a;return{props:{disableUnderline:!1,color:o},style:{"&::after":{borderBottom:`2px solid ${(a=(n.vars||n).palette[o])==null?void 0:a.main}`}}}}),{props:({ownerState:o})=>o.startAdornment,style:{paddingLeft:12}},{props:({ownerState:o})=>o.endAdornment,style:{paddingRight:12}},{props:({ownerState:o})=>o.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:o,size:a})=>o.multiline&&a==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:o})=>o.multiline&&o.hiddenLabel&&o.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),Vy=V(Hi,{name:"MuiFilledInput",slot:"Input",overridesResolver:zi})(_e(({theme:n})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:e})=>e.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}},{props:({ownerState:e})=>e.hiddenLabel&&e.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:e})=>e.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),Ba=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiFilledInput"}),{disableUnderline:s=!1,components:i={},componentsProps:o,fullWidth:a=!1,hiddenLabel:l,inputComponent:c="input",multiline:u=!1,slotProps:h,slots:d={},type:f="text",...p}=r,g={...r,disableUnderline:s,fullWidth:a,inputComponent:c,multiline:u,type:f},y=Wy(r),b={root:{ownerState:g},input:{ownerState:g}},w=h??o?Ke(b,h??o):b,v=d.root??i.Root??zy,S=d.input??i.Input??Vy;return _.jsx(La,{slots:{root:v,input:S},slotProps:w,fullWidth:a,inputComponent:c,multiline:u,ref:t,type:f,...p,classes:y})});Ba.muiName="Input";function Hy(n){return me("MuiFormControl",n)}ye("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const qy=n=>{const{classes:e,margin:t,fullWidth:r}=n,s={root:["root",t!=="none"&&`margin${G(t)}`,r&&"fullWidth"]};return be(s,Hy,e)},Xy=V("div",{name:"MuiFormControl",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,e[`margin${G(t.margin)}`],t.fullWidth&&e.fullWidth]}})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),Yy=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiFormControl"}),{children:s,className:i,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:h=!1,hiddenLabel:d=!1,margin:f="none",required:p=!1,size:g="medium",variant:y="outlined",...b}=r,w={...r,color:o,component:a,disabled:l,error:c,fullWidth:h,hiddenLabel:d,margin:f,required:p,size:g,variant:y},v=qy(w),[S,x]=C.useState(()=>{let F=!1;return s&&C.Children.forEach(s,B=>{if(!oo(B,["Input","Select"]))return;const $=oo(B,["Select"])?B.props.input:B;$&&Ym($.props)&&(F=!0)}),F}),[O,P]=C.useState(()=>{let F=!1;return s&&C.Children.forEach(s,B=>{oo(B,["Input","Select"])&&(gi(B.props,!0)||gi(B.props.inputProps,!0))&&(F=!0)}),F}),[M,L]=C.useState(!1);l&&M&&L(!1);const m=u!==void 0&&!l?u:M;let E;C.useRef(!1);const j=C.useCallback(()=>{P(!0)},[]),R=C.useCallback(()=>{P(!1)},[]),I=C.useMemo(()=>({adornedStart:S,setAdornedStart:x,color:o,disabled:l,error:c,filled:O,focused:m,fullWidth:h,hiddenLabel:d,size:g,onBlur:()=>{L(!1)},onFocus:()=>{L(!0)},onEmpty:R,onFilled:j,registerEffect:E,required:p,variant:y}),[S,o,l,c,O,m,h,d,E,R,j,p,g,y]);return _.jsx(Ia.Provider,{value:I,children:_.jsx(Xy,{as:a,ownerState:w,className:Z(v.root,i),ref:t,...b,children:s})})});function Uy(n){return me("MuiFormControlLabel",n)}const Hn=ye("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Gy=n=>{const{classes:e,disabled:t,labelPlacement:r,error:s,required:i}=n,o={root:["root",t&&"disabled",`labelPlacement${G(r)}`,s&&"error",i&&"required"],label:["label",t&&"disabled"],asterisk:["asterisk",s&&"error"]};return be(o,Uy,e)},Ky=V("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Hn.label}`]:e.label},e.root,e[`labelPlacement${G(t.labelPlacement)}`]]}})(_e(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Hn.disabled}`]:{cursor:"default"},[`& .${Hn.label}`]:{[`&.${Hn.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:e})=>e==="start"||e==="top"||e==="bottom",style:{marginLeft:16}}]}))),Zy=V("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(_e(({theme:n})=>({[`&.${Hn.error}`]:{color:(n.vars||n).palette.error.main}}))),Jy=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiFormControlLabel"}),{checked:s,className:i,componentsProps:o={},control:a,disabled:l,disableTypography:c,inputRef:u,label:h,labelPlacement:d="end",name:f,onChange:p,required:g,slots:y={},slotProps:b={},value:w,...v}=r,S=br(),x=l??a.props.disabled??(S==null?void 0:S.disabled),O=g??a.props.required,P={disabled:x,required:O};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof a.props[F]>"u"&&typeof r[F]<"u"&&(P[F]=r[F])});const M=zr({props:r,muiFormControl:S,states:["error"]}),L={...r,disabled:x,labelPlacement:d,required:O,error:M.error},m=Gy(L),E={slots:y,slotProps:{...o,...b}},[j,R]=Ct("typography",{elementType:Yo,externalForwardedProps:E,ownerState:L});let I=h;return I!=null&&I.type!==Yo&&!c&&(I=_.jsx(j,{component:"span",...R,className:Z(m.label,R==null?void 0:R.className),children:I})),_.jsxs(Ky,{className:Z(m.root,i),ownerState:L,ref:t,...v,children:[C.cloneElement(a,P),O?_.jsxs("div",{children:[I,_.jsxs(Zy,{ownerState:L,"aria-hidden":!0,className:m.asterisk,children:[" ","*"]})]}):I]})});function Qy(n){return me("MuiFormHelperText",n)}const ic=ye("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oc;const e0=n=>{const{classes:e,contained:t,size:r,disabled:s,error:i,filled:o,focused:a,required:l}=n,c={root:["root",s&&"disabled",i&&"error",r&&`size${G(r)}`,t&&"contained",a&&"focused",o&&"filled",l&&"required"]};return be(c,Qy,e)},t0=V("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.size&&e[`size${G(t.size)}`],t.contained&&e.contained,t.filled&&e.filled]}})(_e(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ic.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${ic.error}`]:{color:(n.vars||n).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),r0=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiFormHelperText"}),{children:s,className:i,component:o="p",disabled:a,error:l,filled:c,focused:u,margin:h,required:d,variant:f,...p}=r,g=br(),y=zr({props:r,muiFormControl:g,states:["variant","size","disabled","error","filled","focused","required"]}),b={...r,component:o,contained:y.variant==="filled"||y.variant==="outlined",variant:y.variant,size:y.size,disabled:y.disabled,error:y.error,filled:y.filled,focused:y.focused,required:y.required};delete b.ownerState;const w=e0(b);return _.jsx(t0,{as:o,className:Z(w.root,i),ref:t,...p,ownerState:b,children:s===" "?oc||(oc=_.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):s})});function n0(n){return me("MuiFormLabel",n)}const Gn=ye("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),s0=n=>{const{classes:e,color:t,focused:r,disabled:s,error:i,filled:o,required:a}=n,l={root:["root",`color${G(t)}`,s&&"disabled",i&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",i&&"error"]};return be(l,n0,e)},i0=V("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled]}})(_e(({theme:n})=>({color:(n.vars||n).palette.text.secondary,...n.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(n.palette).filter(Ht()).map(([e])=>({props:{color:e},style:{[`&.${Gn.focused}`]:{color:(n.vars||n).palette[e].main}}})),{props:{},style:{[`&.${Gn.disabled}`]:{color:(n.vars||n).palette.text.disabled},[`&.${Gn.error}`]:{color:(n.vars||n).palette.error.main}}}]}))),o0=V("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(n,e)=>e.asterisk})(_e(({theme:n})=>({[`&.${Gn.error}`]:{color:(n.vars||n).palette.error.main}}))),a0=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiFormLabel"}),{children:s,className:i,color:o,component:a="label",disabled:l,error:c,filled:u,focused:h,required:d,...f}=r,p=br(),g=zr({props:r,muiFormControl:p,states:["color","required","focused","disabled","error","filled"]}),y={...r,color:g.color||"primary",component:a,disabled:g.disabled,error:g.error,filled:g.filled,focused:g.focused,required:g.required},b=s0(y);return _.jsxs(i0,{as:a,ownerState:y,className:Z(b.root,i),ref:t,...f,children:[s,g.required&&_.jsxs(o0,{ownerState:y,"aria-hidden":!0,className:b.asterisk,children:[" ","*"]})]})});function Go(n){return`scale(${n}, ${n**2})`}const l0={entering:{opacity:1,transform:Go(1)},entered:{opacity:1,transform:"none"}},ho=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Ko=C.forwardRef(function(e,t){const{addEndListener:r,appear:s=!0,children:i,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:h,onExited:d,onExiting:f,style:p,timeout:g="auto",TransitionComponent:y=Yt,...b}=e,w=Du(),v=C.useRef(),S=Ra(),x=C.useRef(null),O=Je(x,ms(i),t),P=F=>B=>{if(F){const $=x.current;B===void 0?F($):F($,B)}},M=P(u),L=P((F,B)=>{qu(F);const{duration:$,delay:z,easing:N}=fi({style:p,timeout:g,easing:o},{mode:"enter"});let ne;g==="auto"?(ne=S.transitions.getAutoHeightDuration(F.clientHeight),v.current=ne):ne=$,F.style.transition=[S.transitions.create("opacity",{duration:ne,delay:z}),S.transitions.create("transform",{duration:ho?ne:ne*.666,delay:z,easing:N})].join(","),l&&l(F,B)}),m=P(c),E=P(f),j=P(F=>{const{duration:B,delay:$,easing:z}=fi({style:p,timeout:g,easing:o},{mode:"exit"});let N;g==="auto"?(N=S.transitions.getAutoHeightDuration(F.clientHeight),v.current=N):N=B,F.style.transition=[S.transitions.create("opacity",{duration:N,delay:$}),S.transitions.create("transform",{duration:ho?N:N*.666,delay:ho?$:$||N*.333,easing:z})].join(","),F.style.opacity=0,F.style.transform=Go(.75),h&&h(F)}),R=P(d),I=F=>{g==="auto"&&w.start(v.current||0,F),r&&r(x.current,F)};return _.jsx(y,{appear:s,in:a,nodeRef:x,onEnter:L,onEntered:m,onEntering:M,onExit:j,onExited:R,onExiting:E,addEndListener:I,timeout:g==="auto"?null:g,...b,children:(F,{ownerState:B,...$})=>C.cloneElement(i,{style:{opacity:0,transform:Go(.75),visibility:F==="exited"&&!a?"hidden":void 0,...l0[F],...p,...i.props.style},ref:O,...$})})});Ko&&(Ko.muiSupportAuto=!0);const c0=n=>{const{classes:e,disableUnderline:t}=n,s=be({root:["root",!t&&"underline"],input:["input"]},Km,e);return{...e,...s}},u0=V(Vi,{shouldForwardProp:n=>kt(n)||n==="classes",name:"MuiInput",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[...Wi(n,e),!t.disableUnderline&&e.underline]}})(_e(({theme:n})=>{let t=n.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return n.vars&&(t=`rgba(${n.vars.palette.common.onBackgroundChannel} / ${n.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:n.transitions.create("transform",{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${In.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${In.error}`]:{"&::before, &::after":{borderBottomColor:(n.vars||n).palette.error.main}},"&::before":{borderBottom:`1px solid ${t}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:n.transitions.create("border-bottom-color",{duration:n.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${In.disabled}, .${In.error}):before`]:{borderBottom:`2px solid ${(n.vars||n).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${t}`}},[`&.${In.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(n.palette).filter(Ht()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(n.vars||n).palette[r].main}`}}}))]}})),h0=V(Hi,{name:"MuiInput",slot:"Input",overridesResolver:zi})({}),Na=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiInput"}),{disableUnderline:s=!1,components:i={},componentsProps:o,fullWidth:a=!1,inputComponent:l="input",multiline:c=!1,slotProps:u,slots:h={},type:d="text",...f}=r,p=c0(r),y={root:{ownerState:{disableUnderline:s}}},b=u??o?Ke(u??o,y):y,w=h.root??i.Root??u0,v=h.input??i.Input??h0;return _.jsx(La,{slots:{root:w,input:v},slotProps:b,fullWidth:a,inputComponent:l,multiline:c,ref:t,type:d,...f,classes:p})});Na.muiName="Input";function d0(n){return me("MuiInputLabel",n)}ye("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const f0=n=>{const{classes:e,formControl:t,size:r,shrink:s,disableAnimation:i,variant:o,required:a}=n,l={root:["root",t&&"formControl",!i&&"animated",s&&"shrink",r&&r!=="normal"&&`size${G(r)}`,o],asterisk:[a&&"asterisk"]},c=be(l,d0,e);return{...e,...c}},p0=V(a0,{shouldForwardProp:n=>kt(n)||n==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`& .${Gn.asterisk}`]:e.asterisk},e.root,t.formControl&&e.formControl,t.size==="small"&&e.sizeSmall,t.shrink&&e.shrink,!t.disableAnimation&&e.animated,t.focused&&e.focused,e[t.variant]]}})(_e(({theme:n})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:e})=>e.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:e})=>e.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:e})=>!e.disableAnimation,style:{transition:n.transitions.create(["color","transform","max-width"],{duration:n.transitions.duration.shorter,easing:n.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="filled"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:e,ownerState:t,size:r})=>e==="filled"&&t.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:e,ownerState:t})=>e==="outlined"&&t.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),g0=C.forwardRef(function(e,t){const r=Te({name:"MuiInputLabel",props:e}),{disableAnimation:s=!1,margin:i,shrink:o,variant:a,className:l,...c}=r,u=br();let h=o;typeof h>"u"&&u&&(h=u.filled||u.focused||u.adornedStart);const d=zr({props:r,muiFormControl:u,states:["size","variant","required","focused"]}),f={...r,disableAnimation:s,formControl:u,shrink:h,size:d.size,variant:d.variant,required:d.required,focused:d.focused},p=f0(f);return _.jsx(p0,{"data-shrink":h,ref:t,className:Z(p.root,l),...c,ownerState:f,classes:p})}),m0=C.createContext({});function y0(n){return me("MuiList",n)}ye("MuiList",["root","padding","dense","subheader"]);const b0=n=>{const{classes:e,disablePadding:t,dense:r,subheader:s}=n;return be({root:["root",!t&&"padding",r&&"dense",s&&"subheader"]},y0,e)},v0=V("ul",{name:"MuiList",slot:"Root",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.root,!t.disablePadding&&e.padding,t.dense&&e.dense,t.subheader&&e.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:n})=>!n.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:n})=>n.subheader,style:{paddingTop:0}}]}),x0=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiList"}),{children:s,className:i,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=r,h=C.useMemo(()=>({dense:a}),[a]),d={...r,component:o,dense:a,disablePadding:l},f=b0(d);return _.jsx(m0.Provider,{value:h,children:_.jsxs(v0,{as:o,className:Z(f.root,i),ref:t,ownerState:d,...u,children:[c,s]})})});function fo(n,e,t){return n===e?n.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t?null:n.firstChild}function ac(n,e,t){return n===e?t?n.firstChild:n.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t?null:n.lastChild}function Yu(n,e){if(e===void 0)return!0;let t=n.innerText;return t===void 0&&(t=n.textContent),t=t.trim().toLowerCase(),t.length===0?!1:e.repeating?t[0]===e.keys[0]:t.startsWith(e.keys.join(""))}function Ln(n,e,t,r,s,i){let o=!1,a=s(n,e,e?t:!1);for(;a;){if(a===n.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!Yu(a,i)||l)a=s(n,a,t);else return a.focus(),!0}return!1}const S0=C.forwardRef(function(e,t){const{actions:r,autoFocus:s=!1,autoFocusItem:i=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:h="selectedMenu",...d}=e,f=C.useRef(null),p=C.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Lr(()=>{s&&f.current.focus()},[s]),C.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(v,{direction:S})=>{const x=!f.current.style.width;if(v.clientHeight<f.current.clientHeight&&x){const O=`${Au(ar(v))}px`;f.current.style[S==="rtl"?"paddingLeft":"paddingRight"]=O,f.current.style.width=`calc(100% + ${O})`}return f.current}}),[]);const g=v=>{const S=f.current,x=v.key;if(v.ctrlKey||v.metaKey||v.altKey){u&&u(v);return}const P=Rt(S).activeElement;if(x==="ArrowDown")v.preventDefault(),Ln(S,P,c,l,fo);else if(x==="ArrowUp")v.preventDefault(),Ln(S,P,c,l,ac);else if(x==="Home")v.preventDefault(),Ln(S,null,c,l,fo);else if(x==="End")v.preventDefault(),Ln(S,null,c,l,ac);else if(x.length===1){const M=p.current,L=x.toLowerCase(),m=performance.now();M.keys.length>0&&(m-M.lastTime>500?(M.keys=[],M.repeating=!0,M.previousKeyMatched=!0):M.repeating&&L!==M.keys[0]&&(M.repeating=!1)),M.lastTime=m,M.keys.push(L);const E=P&&!M.repeating&&Yu(P,M);M.previousKeyMatched&&(E||Ln(S,P,!1,l,fo,M))?v.preventDefault():M.previousKeyMatched=!1}u&&u(v)},y=Je(f,t);let b=-1;C.Children.forEach(o,(v,S)=>{if(!C.isValidElement(v)){b===S&&(b+=1,b>=o.length&&(b=-1));return}v.props.disabled||(h==="selectedMenu"&&v.props.selected||b===-1)&&(b=S),b===S&&(v.props.disabled||v.props.muiSkipListHighlight||v.type.muiSkipListHighlight)&&(b+=1,b>=o.length&&(b=-1))});const w=C.Children.map(o,(v,S)=>{if(S===b){const x={};return i&&(x.autoFocus=!0),v.props.tabIndex===void 0&&h==="selectedMenu"&&(x.tabIndex=0),C.cloneElement(v,x)}return v});return _.jsx(x0,{role:"menu",ref:y,className:a,onKeyDown:g,tabIndex:s?0:-1,...d,children:w})});function C0(n){return me("MuiPopover",n)}ye("MuiPopover",["root","paper"]);function lc(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.height/2:e==="bottom"&&(t=n.height),t}function cc(n,e){let t=0;return typeof e=="number"?t=e:e==="center"?t=n.width/2:e==="right"&&(t=n.width),t}function uc(n){return[n.horizontal,n.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function po(n){return typeof n=="function"?n():n}const _0=n=>{const{classes:e}=n;return be({root:["root"],paper:["paper"]},C0,e)},w0=V($y,{name:"MuiPopover",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Uu=V(om,{name:"MuiPopover",slot:"Paper",overridesResolver:(n,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),T0=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiPopover"}),{action:s,anchorEl:i,anchorOrigin:o={vertical:"top",horizontal:"left"},anchorPosition:a,anchorReference:l="anchorEl",children:c,className:u,container:h,elevation:d=8,marginThreshold:f=16,open:p,PaperProps:g={},slots:y={},slotProps:b={},transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:v=Ko,transitionDuration:S="auto",TransitionProps:{onEntering:x,...O}={},disableScrollLock:P=!1,...M}=r,L=(b==null?void 0:b.paper)??g,m=C.useRef(),E={...r,anchorOrigin:o,anchorReference:l,elevation:d,marginThreshold:f,externalPaperSlotProps:L,transformOrigin:w,TransitionComponent:v,transitionDuration:S,TransitionProps:O},j=_0(E),R=C.useCallback(()=>{if(l==="anchorPosition")return a;const U=po(i),Q=(U&&U.nodeType===1?U:Rt(m.current).body).getBoundingClientRect();return{top:Q.top+lc(Q,o.vertical),left:Q.left+cc(Q,o.horizontal)}},[i,o.horizontal,o.vertical,a,l]),I=C.useCallback(U=>({vertical:lc(U,w.vertical),horizontal:cc(U,w.horizontal)}),[w.horizontal,w.vertical]),F=C.useCallback(U=>{const de={width:U.offsetWidth,height:U.offsetHeight},Q=I(de);if(l==="none")return{top:null,left:null,transformOrigin:uc(Q)};const Le=R();let ee=Le.top-Q.vertical,xe=Le.left-Q.horizontal;const ft=ee+de.height,et=xe+de.width,Ve=ar(po(i)),Ft=Ve.innerHeight-f,tt=Ve.innerWidth-f;if(f!==null&&ee<f){const $e=ee-f;ee-=$e,Q.vertical+=$e}else if(f!==null&&ft>Ft){const $e=ft-Ft;ee-=$e,Q.vertical+=$e}if(f!==null&&xe<f){const $e=xe-f;xe-=$e,Q.horizontal+=$e}else if(et>tt){const $e=et-tt;xe-=$e,Q.horizontal+=$e}return{top:`${Math.round(ee)}px`,left:`${Math.round(xe)}px`,transformOrigin:uc(Q)}},[i,l,R,I,f]),[B,$]=C.useState(p),z=C.useCallback(()=>{const U=m.current;if(!U)return;const de=F(U);de.top!==null&&U.style.setProperty("top",de.top),de.left!==null&&(U.style.left=de.left),U.style.transformOrigin=de.transformOrigin,$(!0)},[F]);C.useEffect(()=>(P&&window.addEventListener("scroll",z),()=>window.removeEventListener("scroll",z)),[i,P,z]);const N=(U,de)=>{x&&x(U,de),z()},ne=()=>{$(!1)};C.useEffect(()=>{p&&z()}),C.useImperativeHandle(s,()=>p?{updatePosition:()=>{z()}}:null,[p,z]),C.useEffect(()=>{if(!p)return;const U=Pu(()=>{z()}),de=ar(i);return de.addEventListener("resize",U),()=>{U.clear(),de.removeEventListener("resize",U)}},[i,p,z]);let ce=S;S==="auto"&&!v.muiSupportAuto&&(ce=void 0);const Ie=h||(i?Rt(po(i)).body:void 0),te={slots:y,slotProps:{...b,paper:L}},[J,se]=Ct("paper",{elementType:Uu,externalForwardedProps:te,additionalProps:{elevation:d,className:Z(j.paper,L==null?void 0:L.className),style:B?L.style:{...L.style,opacity:0}},ownerState:E}),[ke,{slotProps:Oe,...Qe}]=Ct("root",{elementType:w0,externalForwardedProps:te,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Ie,open:p},ownerState:E,className:Z(j.root,u)}),ge=Je(m,se.ref);return _.jsx(ke,{...Qe,...!Uo(ke)&&{slotProps:Oe,disableScrollLock:P},...M,ref:t,children:_.jsx(v,{appear:!0,in:p,onEntering:N,onExited:ne,timeout:ce,...O,children:_.jsx(J,{...se,ref:ge,children:c})})})});function k0(n){return me("MuiMenu",n)}ye("MuiMenu",["root","paper","list"]);const O0={vertical:"top",horizontal:"right"},E0={vertical:"top",horizontal:"left"},P0=n=>{const{classes:e}=n;return be({root:["root"],paper:["paper"],list:["list"]},k0,e)},M0=V(T0,{shouldForwardProp:n=>kt(n)||n==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(n,e)=>e.root})({}),D0=V(Uu,{name:"MuiMenu",slot:"Paper",overridesResolver:(n,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),A0=V(S0,{name:"MuiMenu",slot:"List",overridesResolver:(n,e)=>e.list})({outline:0}),R0=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiMenu"}),{autoFocus:s=!0,children:i,className:o,disableAutoFocusItem:a=!1,MenuListProps:l={},onClose:c,open:u,PaperProps:h={},PopoverClasses:d,transitionDuration:f="auto",TransitionProps:{onEntering:p,...g}={},variant:y="selectedMenu",slots:b={},slotProps:w={},...v}=r,S=ng(),x={...r,autoFocus:s,disableAutoFocusItem:a,MenuListProps:l,onEntering:p,PaperProps:h,transitionDuration:f,TransitionProps:g,variant:y},O=P0(x),P=s&&!a&&u,M=C.useRef(null),L=(B,$)=>{M.current&&M.current.adjustStyleForScrollbar(B,{direction:S?"rtl":"ltr"}),p&&p(B,$)},m=B=>{B.key==="Tab"&&(B.preventDefault(),c&&c(B,"tabKeyDown"))};let E=-1;C.Children.map(i,(B,$)=>{C.isValidElement(B)&&(B.props.disabled||(y==="selectedMenu"&&B.props.selected||E===-1)&&(E=$))});const j=b.paper??D0,R=w.paper??h,I=Wl({elementType:b.root,externalSlotProps:w.root,ownerState:x,className:[O.root,o]}),F=Wl({elementType:j,externalSlotProps:R,ownerState:x,className:O.paper});return _.jsx(M0,{onClose:c,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?O0:E0,slots:{paper:j,root:b.root},slotProps:{root:I,paper:F},open:u,ref:t,transitionDuration:f,TransitionProps:{onEntering:L,...g},ownerState:x,...v,classes:d,children:_.jsx(A0,{onKeyDown:m,actions:M,autoFocus:s&&(E===-1||a),autoFocusItem:P,variant:y,...l,className:Z(O.list,l.className),children:i})})});function j0(n){return me("MuiNativeSelect",n)}const $a=ye("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),F0=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:i,error:o}=n,a={select:["select",t,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${G(t)}`,i&&"iconOpen",r&&"disabled"]};return be(a,j0,e)},Gu=V("select")(({theme:n})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${$a.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(n.vars||n).palette.background.paper},variants:[{props:({ownerState:e})=>e.variant!=="filled"&&e.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(n.vars||n).shape.borderRadius,"&:focus":{borderRadius:(n.vars||n).shape.borderRadius},"&&&":{paddingRight:32}}}]})),I0=V(Gu,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:kt,overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.select,e[t.variant],t.error&&e.error,{[`&.${$a.multiple}`]:e.multiple}]}})({}),Ku=V("svg")(({theme:n})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(n.vars||n).palette.action.active,[`&.${$a.disabled}`]:{color:(n.vars||n).palette.action.disabled},variants:[{props:({ownerState:e})=>e.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),L0=V(Ku,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${G(t.variant)}`],t.open&&e.iconOpen]}})({}),B0=C.forwardRef(function(e,t){const{className:r,disabled:s,error:i,IconComponent:o,inputRef:a,variant:l="standard",...c}=e,u={...e,disabled:s,variant:l,error:i},h=F0(u);return _.jsxs(C.Fragment,{children:[_.jsx(I0,{ownerState:u,className:Z(h.select,r),disabled:s,ref:a||t,...c}),e.multiple?null:_.jsx(L0,{as:o,ownerState:u,className:h.icon})]})});var hc;const N0=V("fieldset",{shouldForwardProp:kt})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),$0=V("legend",{shouldForwardProp:kt})(_e(({theme:n})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:e})=>!e.withLabel,style:{padding:0,lineHeight:"11px",transition:n.transitions.create("width",{duration:150,easing:n.transitions.easing.easeOut})}},{props:({ownerState:e})=>e.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:n.transitions.create("max-width",{duration:50,easing:n.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:e})=>e.withLabel&&e.notched,style:{maxWidth:"100%",transition:n.transitions.create("max-width",{duration:100,easing:n.transitions.easing.easeOut,delay:50})}}]})));function W0(n){const{children:e,classes:t,className:r,label:s,notched:i,...o}=n,a=s!=null&&s!=="",l={...n,notched:i,withLabel:a};return _.jsx(N0,{"aria-hidden":!0,className:r,ownerState:l,...o,children:_.jsx($0,{ownerState:l,children:a?_.jsx("span",{children:s}):hc||(hc=_.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"}))})})}const z0=n=>{const{classes:e}=n,r=be({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Zm,e);return{...e,...r}},V0=V(Vi,{shouldForwardProp:n=>kt(n)||n==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Wi})(_e(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(n.vars||n).shape.borderRadius,[`&:hover .${Lt.notchedOutline}`]:{borderColor:(n.vars||n).palette.text.primary},"@media (hover: none)":{[`&:hover .${Lt.notchedOutline}`]:{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}},[`&.${Lt.focused} .${Lt.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(n.palette).filter(Ht()).map(([t])=>({props:{color:t},style:{[`&.${Lt.focused} .${Lt.notchedOutline}`]:{borderColor:(n.vars||n).palette[t].main}}})),{props:{},style:{[`&.${Lt.error} .${Lt.notchedOutline}`]:{borderColor:(n.vars||n).palette.error.main},[`&.${Lt.disabled} .${Lt.notchedOutline}`]:{borderColor:(n.vars||n).palette.action.disabled}}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:14}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:14}},{props:({ownerState:t})=>t.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:t,size:r})=>t.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),H0=V(W0,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(n,e)=>e.notchedOutline})(_e(({theme:n})=>{const e=n.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:n.vars?`rgba(${n.vars.palette.common.onBackgroundChannel} / 0.23)`:e}})),q0=V(Hi,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:zi})(_e(({theme:n})=>({padding:"16.5px 14px",...!n.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:n.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:n.palette.mode==="light"?null:"#fff",caretColor:n.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...n.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[n.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:e})=>e.multiline,style:{padding:0}},{props:({ownerState:e})=>e.startAdornment,style:{paddingLeft:0}},{props:({ownerState:e})=>e.endAdornment,style:{paddingRight:0}}]}))),Wa=C.forwardRef(function(e,t){var r;const s=Te({props:e,name:"MuiOutlinedInput"}),{components:i={},fullWidth:o=!1,inputComponent:a="input",label:l,multiline:c=!1,notched:u,slots:h={},type:d="text",...f}=s,p=z0(s),g=br(),y=zr({props:s,muiFormControl:g,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),b={...s,color:y.color||"primary",disabled:y.disabled,error:y.error,focused:y.focused,formControl:g,fullWidth:o,hiddenLabel:y.hiddenLabel,multiline:c,size:y.size,type:d},w=h.root??i.Root??V0,v=h.input??i.Input??q0;return _.jsx(La,{slots:{root:w,input:v},renderSuffix:S=>_.jsx(H0,{ownerState:b,className:p.notchedOutline,label:l!=null&&l!==""&&y.required?r||(r=_.jsxs(C.Fragment,{children:[l," ","*"]})):l,notched:typeof u<"u"?u:!!(S.startAdornment||S.filled||S.focused)}),fullWidth:o,inputComponent:a,multiline:c,ref:t,type:d,...f,classes:{...p,notchedOutline:null}})});Wa.muiName="Input";function Zu(n){return me("MuiSelect",n)}const Bn=ye("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var dc;const X0=V(Gu,{name:"MuiSelect",slot:"Select",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[{[`&.${Bn.select}`]:e.select},{[`&.${Bn.select}`]:e[t.variant]},{[`&.${Bn.error}`]:e.error},{[`&.${Bn.multiple}`]:e.multiple}]}})({[`&.${Bn.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),Y0=V(Ku,{name:"MuiSelect",slot:"Icon",overridesResolver:(n,e)=>{const{ownerState:t}=n;return[e.icon,t.variant&&e[`icon${G(t.variant)}`],t.open&&e.iconOpen]}})({}),U0=V("input",{shouldForwardProp:n=>zu(n)&&n!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(n,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function fc(n,e){return typeof e=="object"&&e!==null?n===e:String(n)===String(e)}function G0(n){return n==null||typeof n=="string"&&!n.trim()}const K0=n=>{const{classes:e,variant:t,disabled:r,multiple:s,open:i,error:o}=n,a={select:["select",t,r&&"disabled",s&&"multiple",o&&"error"],icon:["icon",`icon${G(t)}`,i&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return be(a,Zu,e)},Z0=C.forwardRef(function(e,t){var pl;const{"aria-describedby":r,"aria-label":s,autoFocus:i,autoWidth:o,children:a,className:l,defaultOpen:c,defaultValue:u,disabled:h,displayEmpty:d,error:f=!1,IconComponent:p,inputRef:g,labelId:y,MenuProps:b={},multiple:w,name:v,onBlur:S,onChange:x,onClose:O,onFocus:P,onOpen:M,open:L,readOnly:m,renderValue:E,required:j,SelectDisplayProps:R={},tabIndex:I,type:F,value:B,variant:$="standard",...z}=e,[N,ne]=Bo({controlled:B,default:u,name:"Select"}),[ce,Ie]=Bo({controlled:L,default:c,name:"Select"}),te=C.useRef(null),J=C.useRef(null),[se,ke]=C.useState(null),{current:Oe}=C.useRef(L!=null),[Qe,ge]=C.useState(),U=Je(t,g),de=C.useCallback(Y=>{J.current=Y,Y&&ke(Y)},[]),Q=se==null?void 0:se.parentNode;C.useImperativeHandle(U,()=>({focus:()=>{J.current.focus()},node:te.current,value:N}),[N]),C.useEffect(()=>{c&&ce&&se&&!Oe&&(ge(o?null:Q.clientWidth),J.current.focus())},[se,o]),C.useEffect(()=>{i&&J.current.focus()},[i]),C.useEffect(()=>{if(!y)return;const Y=Rt(J.current).getElementById(y);if(Y){const ve=()=>{getSelection().isCollapsed&&J.current.focus()};return Y.addEventListener("click",ve),()=>{Y.removeEventListener("click",ve)}}},[y]);const Le=(Y,ve)=>{Y?M&&M(ve):O&&O(ve),Oe||(ge(o?null:Q.clientWidth),Ie(Y))},ee=Y=>{Y.button===0&&(Y.preventDefault(),J.current.focus(),Le(!0,Y))},xe=Y=>{Le(!1,Y)},ft=C.Children.toArray(a),et=Y=>{const ve=ft.find(qe=>qe.props.value===Y.target.value);ve!==void 0&&(ne(ve.props.value),x&&x(Y,ve))},Ve=Y=>ve=>{let qe;if(ve.currentTarget.hasAttribute("tabindex")){if(w){qe=Array.isArray(N)?N.slice():[];const Gr=N.indexOf(Y.props.value);Gr===-1?qe.push(Y.props.value):qe.splice(Gr,1)}else qe=Y.props.value;if(Y.props.onClick&&Y.props.onClick(ve),N!==qe&&(ne(qe),x)){const Gr=ve.nativeEvent||ve,gl=new Gr.constructor(Gr.type,Gr);Object.defineProperty(gl,"target",{writable:!0,value:{value:qe,name:v}}),x(gl,Y)}w||Le(!1,ve)}},Ft=Y=>{m||[" ","ArrowUp","ArrowDown","Enter"].includes(Y.key)&&(Y.preventDefault(),Le(!0,Y))},tt=se!==null&&ce,$e=Y=>{!tt&&S&&(Object.defineProperty(Y,"target",{writable:!0,value:{value:N,name:v}}),S(Y))};delete z["aria-invalid"];let H,Hr;const it=[];let qr=!1;(gi({value:N})||d)&&(E?H=E(N):qr=!0);const Mn=ft.map(Y=>{if(!C.isValidElement(Y))return null;let ve;if(w){if(!Array.isArray(N))throw new Error(ir(2));ve=N.some(qe=>fc(qe,Y.props.value)),ve&&qr&&it.push(Y.props.children)}else ve=fc(N,Y.props.value),ve&&qr&&(Hr=Y.props.children);return C.cloneElement(Y,{"aria-selected":ve?"true":"false",onClick:Ve(Y),onKeyUp:qe=>{qe.key===" "&&qe.preventDefault(),Y.props.onKeyUp&&Y.props.onKeyUp(qe)},role:"option",selected:ve,value:void 0,"data-value":Y.props.value})});qr&&(w?it.length===0?H=null:H=it.reduce((Y,ve,qe)=>(Y.push(ve),qe<it.length-1&&Y.push(", "),Y),[]):H=Hr);let Dn=Qe;!o&&Oe&&se&&(Dn=Q.clientWidth);let Xr;typeof I<"u"?Xr=I:Xr=h?null:0;const Yr=R.id||(v?`mui-component-select-${v}`:void 0),Sr={...e,variant:$,value:N,open:tt,error:f},Se=K0(Sr),Ur={...b.PaperProps,...(pl=b.slotProps)==null?void 0:pl.paper},An=Pa();return _.jsxs(C.Fragment,{children:[_.jsx(X0,{as:"div",ref:de,tabIndex:Xr,role:"combobox","aria-controls":tt?An:void 0,"aria-disabled":h?"true":void 0,"aria-expanded":tt?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[y,Yr].filter(Boolean).join(" ")||void 0,"aria-describedby":r,"aria-required":j?"true":void 0,"aria-invalid":f?"true":void 0,onKeyDown:Ft,onMouseDown:h||m?null:ee,onBlur:$e,onFocus:P,...R,ownerState:Sr,className:Z(R.className,Se.select,l),id:Yr,children:G0(H)?dc||(dc=_.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):H}),_.jsx(U0,{"aria-invalid":f,value:Array.isArray(N)?N.join(","):N,name:v,ref:te,"aria-hidden":!0,onChange:et,tabIndex:-1,disabled:h,className:Se.nativeInput,autoFocus:i,required:j,...z,ownerState:Sr}),_.jsx(Y0,{as:p,className:Se.icon,ownerState:Sr}),_.jsx(R0,{id:`menu-${v||""}`,anchorEl:Q,open:tt,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...b,MenuListProps:{"aria-labelledby":y,role:"listbox","aria-multiselectable":w?"true":void 0,disableListWrap:!0,id:An,...b.MenuListProps},slotProps:{...b.slotProps,paper:{...Ur,style:{minWidth:Dn,...Ur!=null?Ur.style:null}}},children:Mn})]})}),J0=n=>{const{classes:e}=n,r=be({root:["root"]},Zu,e);return{...e,...r}},za={name:"MuiSelect",overridesResolver:(n,e)=>e.root,shouldForwardProp:n=>kt(n)&&n!=="variant",slot:"Root"},Q0=V(Na,za)(""),eb=V(Wa,za)(""),tb=V(Ba,za)(""),Ju=C.forwardRef(function(e,t){const r=Te({name:"MuiSelect",props:e}),{autoWidth:s=!1,children:i,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Qm,id:h,input:d,inputProps:f,label:p,labelId:g,MenuProps:y,multiple:b=!1,native:w=!1,onClose:v,onOpen:S,open:x,renderValue:O,SelectDisplayProps:P,variant:M="outlined",...L}=r,m=w?B0:Z0,E=br(),j=zr({props:r,muiFormControl:E,states:["variant","error"]}),R=j.variant||M,I={...r,variant:R,classes:o},F=J0(I),{root:B,...$}=F,z=d||{standard:_.jsx(Q0,{ownerState:I}),outlined:_.jsx(eb,{label:p,ownerState:I}),filled:_.jsx(tb,{ownerState:I})}[R],N=Je(t,ms(z));return _.jsx(C.Fragment,{children:C.cloneElement(z,{inputComponent:m,inputProps:{children:i,error:j.error,IconComponent:u,variant:R,type:void 0,multiple:b,...w?{id:h}:{autoWidth:s,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:y,onClose:v,onOpen:S,open:x,renderValue:O,SelectDisplayProps:{id:h,...P}},...f,classes:f?Ke($,f.classes):$,...d?d.props.inputProps:{}},...(b&&w||c)&&R==="outlined"?{notched:!0}:{},ref:N,className:Z(z.props.className,a,F.root),...!d&&{variant:R},...L})})});Ju.muiName="Select";function rb(n){return me("MuiTextField",n)}ye("MuiTextField",["root"]);const nb={standard:Na,filled:Ba,outlined:Wa},sb=n=>{const{classes:e}=n;return be({root:["root"]},rb,e)},ib=V(Yy,{name:"MuiTextField",slot:"Root",overridesResolver:(n,e)=>e.root})({}),Qu=C.forwardRef(function(e,t){const r=Te({props:e,name:"MuiTextField"}),{autoComplete:s,autoFocus:i=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:h=!1,FormHelperTextProps:d,fullWidth:f=!1,helperText:p,id:g,InputLabelProps:y,inputProps:b,InputProps:w,inputRef:v,label:S,maxRows:x,minRows:O,multiline:P=!1,name:M,onBlur:L,onChange:m,onFocus:E,placeholder:j,required:R=!1,rows:I,select:F=!1,SelectProps:B,slots:$={},slotProps:z={},type:N,value:ne,variant:ce="outlined",...Ie}=r,te={...r,autoFocus:i,color:l,disabled:u,error:h,fullWidth:f,multiline:P,required:R,select:F,variant:ce},J=sb(te),se=Pa(g),ke=p&&se?`${se}-helper-text`:void 0,Oe=S&&se?`${se}-label`:void 0,Qe=nb[ce],ge={slots:$,slotProps:{input:w,inputLabel:y,htmlInput:b,formHelperText:d,select:B,...z}},U={},de=ge.slotProps.inputLabel;ce==="outlined"&&(de&&typeof de.shrink<"u"&&(U.notched=de.shrink),U.label=S),F&&((!B||!B.native)&&(U.id=void 0),U["aria-describedby"]=void 0);const[Q,Le]=Ct("input",{elementType:Qe,externalForwardedProps:ge,additionalProps:U,ownerState:te}),[ee,xe]=Ct("inputLabel",{elementType:g0,externalForwardedProps:ge,ownerState:te}),[ft,et]=Ct("htmlInput",{elementType:"input",externalForwardedProps:ge,ownerState:te}),[Ve,Ft]=Ct("formHelperText",{elementType:r0,externalForwardedProps:ge,ownerState:te}),[tt,$e]=Ct("select",{elementType:Ju,externalForwardedProps:ge,ownerState:te}),H=_.jsx(Q,{"aria-describedby":ke,autoComplete:s,autoFocus:i,defaultValue:c,fullWidth:f,multiline:P,name:M,rows:I,maxRows:x,minRows:O,type:N,value:ne,id:se,inputRef:v,onBlur:L,onChange:m,onFocus:E,placeholder:j,inputProps:et,slots:{input:$.htmlInput?ft:void 0},...Le});return _.jsxs(ib,{className:Z(J.root,a),disabled:u,error:h,fullWidth:f,ref:t,required:R,color:l,variant:ce,ownerState:te,...Ie,children:[S!=null&&S!==""&&_.jsx(ee,{htmlFor:se,id:Oe,...xe,children:S}),F?_.jsx(tt,{"aria-describedby":ke,id:se,labelId:Oe,value:ne,input:H,...$e,children:o}):H,p&&_.jsx(Ve,{id:ke,...Ft,children:p})]})}),eh=C.createContext(void 0);function _n(){const n=C.useContext(eh);if(n===void 0)throw new Error("useEditorContext must be within a EditorProvider");return n}const th=({children:n,id:e,hideForbiddenTools:t,activeTool:r,setActiveTool:s,activeColor:i,setActiveColor:o,shapes:a,addShape:l,addShapes:c,removeShape:u,configuration:h,metadata:d,setMetadata:f,onSubmit:p})=>_.jsx(eh.Provider,{value:{id:e,hideForbiddenTools:t,activeTool:r,setActiveTool:s,activeColor:i,setActiveColor:o,shapes:a,addShape:l,addShapes:c,removeShape:u,configuration:h,metadata:d,setMetadata:f,onSubmit:p},children:n});th.__docgenInfo={description:"",methods:[],displayName:"EditorProvider",props:{hideForbiddenTools:{required:!0,tsType:{name:"boolean"},description:""},activeTool:{required:!0,tsType:{name:"ToolEnum"},description:""},setActiveTool:{required:!0,tsType:{name:"signature",type:"function",raw:"(tool: ToolEnum) => void",signature:{arguments:[{type:{name:"ToolEnum"},name:"tool"}],return:{name:"void"}}},description:""},activeColor:{required:!0,tsType:{name:"string"},description:""},setActiveColor:{required:!0,tsType:{name:"signature",type:"function",raw:"(color: string) => void",signature:{arguments:[{type:{name:"string"},name:"color"}],return:{name:"void"}}},description:""},shapes:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:"{ type: ShapeType, shape: Shape }",signature:{properties:[{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"Record<string, { type: ShapeType, shape: Shape }>"},description:""},addShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string, type: ShapeType, shape: Shape) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}]},name:"type"},{type:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}]},name:"shape"}],return:{name:"void"}}},description:""},addShapes:{required:!0,tsType:{name:"signature",type:"function",raw:"(shapes: {id: string, type: ShapeType, shape: Shape}[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:"{id: string, type: ShapeType, shape: Shape}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}],required:!0}},{key:"shape",value:{name:"intersection",raw:"(fabric.Rect | fabric.Polygon | fabric.Polyline) & { id?: string }",elements:[{name:"unknown"},{name:"signature",type:"object",raw:"{ id?: string }",signature:{properties:[{key:"id",value:{name:"string",required:!1}}]}}],required:!0}}]}}],raw:"{id: string, type: ShapeType, shape: Shape}[]"},name:"shapes"}],return:{name:"void"}}},description:""},removeShape:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},configuration:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: ConfigurationParameter[],
  rois: RoiConfiguration[],
  options?: {
    hideForbiddenTools?: boolean
    description?: string
  }
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  role: string
  type: Omit<ShapeType, 'pointer'>
  multiplicity: {
    operator: OperatorEnum
    threshold: number
  },
  parameters: ConfigurationParameter[],
}`,signature:{properties:[{key:"role",value:{name:"string",required:!0}},{key:"type",value:{name:"Omit",elements:[{name:"union",raw:"ToolEnum.Polyline | ToolEnum.Polygon | ToolEnum.Rectangle",elements:[{name:"ToolEnum.Polyline"},{name:"ToolEnum.Polygon"},{name:"ToolEnum.Rectangle"}]},{name:"literal",value:"'pointer'"}],raw:"Omit<ShapeType, 'pointer'>",required:!0}},{key:"multiplicity",value:{name:"signature",type:"object",raw:`{
  operator: OperatorEnum
  threshold: number
}`,signature:{properties:[{key:"operator",value:{name:"OperatorEnum",required:!0}},{key:"threshold",value:{name:"number",required:!0}}]},required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}}],raw:"ConfigurationParameter[]",required:!0}}]}}],raw:"RoiConfiguration[]",required:!0}},{key:"options",value:{name:"signature",type:"object",raw:`{
  hideForbiddenTools?: boolean
  description?: string
}`,signature:{properties:[{key:"hideForbiddenTools",value:{name:"boolean",required:!1}},{key:"description",value:{name:"string",required:!1}}]},required:!1}}]}},description:""},metadata:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  parameters: OutputParameter[]
  rois: {
    id: string,
    parameters: OutputParameter[],
  }[]
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string,
  parameters: OutputParameter[],
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}}]}}],raw:`{
  id: string,
  parameters: OutputParameter[],
}[]`,required:!0}}]}},description:""},setMetadata:{required:!0,tsType:{name:"signature",type:"function",raw:"(data: Metadata) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  parameters: OutputParameter[]
  rois: {
    id: string,
    parameters: OutputParameter[],
  }[]
}`,signature:{properties:[{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}},{key:"rois",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string,
  parameters: OutputParameter[],
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"parameters",value:{name:"Array",elements:[{name:"OutputParameter"}],raw:"OutputParameter[]",required:!0}}]}}],raw:`{
  id: string,
  parameters: OutputParameter[],
}[]`,required:!0}}]}},name:"data"}],return:{name:"void"}}},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},id:{required:!0,tsType:{name:"string"},description:""}}};const rh=({children:n,style:e={},className:t="",component:r="span"})=>{const s=r;return _.jsx(s,{className:t,style:e,children:n})};rh.__docgenInfo={description:"",methods:[],displayName:"Typography",props:{style:{defaultValue:{value:"{}",computed:!1},required:!1},className:{defaultValue:{value:"''",computed:!1},required:!1},component:{defaultValue:{value:"'span'",computed:!1},required:!1}}};const Kn=(n,e,...t)=>e&&console[n](...t),q=(n,e,t)=>`${e[n]} ${e[`${n}-${t}`]} react-cam-roi-${n}${t?`react-cam-roi-${n}-${t}`:""}`,pc={"icon-button":"_icon-button_wftrq_1","icon-button-light":"_icon-button-light_wftrq_9","icon-button-dark":"_icon-button-dark_wftrq_13","icon-button-disabled":"_icon-button-disabled_wftrq_17"},nh=({children:n,disabled:e,onClick:t})=>{const{themeMode:r}=C.useContext(He);return _.jsx("div",{className:`${q("icon-button",pc,r)} ${e?q("icon-button-disabled",pc,r):""}`,onClick:e?void 0:t,children:n})};nh.__docgenInfo={description:"",methods:[],displayName:"IconButton"};const sh=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"})});sh.__docgenInfo={description:"",methods:[],displayName:"DeleteIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const ih=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"})});ih.__docgenInfo={description:"",methods:[],displayName:"EditIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const oh=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"m320-410 79-110h170L320-716v306ZM551-80 406-392 240-160v-720l560 440H516l144 309-109 51ZM399-520Z"})});oh.__docgenInfo={description:"",methods:[],displayName:"SelectIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};var X=(n=>(n.Pointer="pointer",n.Polyline="polyline",n.Polygon="polygon",n.Rectangle="rect",n))(X||{}),qn=(n=>(n.Integer="int",n.Float="float",n.String="string",n.Boolean="bool",n))(qn||{}),Pt=(n=>(n.Lt="lt",n.Lte="lte",n.Gt="gt",n.Gte="gte",n.Eq="eq",n))(Pt||{});const ob={info:n=>alert(`Info: ${n}`),warn:n=>alert(`Warning: ${n}`),error:n=>alert(`Error: ${n}`),success:n=>alert(`Success: ${n}`)},go=n=>n.rois.length>0,gc=n=>n.parameters.length>0,pn=(n,e,t,r,s)=>{const i=n.rois.find(l=>l.type===e);if(!i||!i.multiplicity||Object.keys(i.multiplicity).length===0)return!0;const o=Object.values(t).filter(l=>l.type===e).length;let a=!0;switch(i.multiplicity.operator){case Pt.Eq:case Pt.Lte:a=o+1<=i.multiplicity.threshold;break;case Pt.Lt:a=o+1<i.multiplicity.threshold;break;default:return!0}return!a&&r&&r.warn(s),a},ab=(n,e,t)=>{const r={};return n.forEach(s=>{s.required&&Zo(e[s.codename])&&(r[s.codename]="requiredField")}),Object.keys(r).length>0?(t(r),!1):!0},Zo=n=>typeof n=="string"||Array.isArray(n)?n.length===0:n==null,lb=(n,e,t,r)=>{const s=[];return n.parameters.length&&t.parameters.find(i=>{var o;return((o=n.parameters.find(a=>a.codename===i.codename))==null?void 0:o.required)&&Zo(i.value)})&&s.push(r.missingRequiredValuesInMainParameters),n.rois.forEach(i=>{if(i.multiplicity)switch(i.multiplicity.operator){case Pt.Eq:Object.values(e).filter(o=>o.type===i.type).length!==i.multiplicity.threshold&&s.push(r.shapesOfTypeShouldBeEqualToThreshold.replace("{type}",String(i.type)).replace("{threshold}",i.multiplicity.threshold.toString()));break;case Pt.Lt:Object.values(e).filter(o=>o.type===i.type).length>=i.multiplicity.threshold&&s.push(r.shapesOfTypeShouldBeLessThanThreshold.replace("{type}",String(i.type)).replace("{threshold}",i.multiplicity.threshold.toString()));break;case Pt.Lte:Object.values(e).filter(o=>o.type===i.type).length>i.multiplicity.threshold&&s.push(r.shapesOfTypeShouldBeLessThanOrEqualToThreshold.replace("{type}",String(i.type)).replace("{threshold}",i.multiplicity.threshold.toString()));break;case Pt.Gt:Object.values(e).filter(o=>o.type===i.type).length<=i.multiplicity.threshold&&s.push(r.shapesOfTypeShouldBeGreaterThanThreshold.replace("{type}",String(i.type)).replace("{threshold}",i.multiplicity.threshold.toString()));break;case Pt.Gte:Object.values(e).filter(o=>o.type===i.type).length<i.multiplicity.threshold&&s.push(r.shapesOfTypeShouldBeGreaterThanOrEqualToThreshold.replace("{type}",String(i.type)).replace("{threshold}",i.multiplicity.threshold.toString()))}}),Object.keys(e).forEach(i=>{var l;const o=e[i].type;(((l=n.rois.find(c=>c.type===o))==null?void 0:l.parameters)??[]).forEach(c=>{var u,h;c.required&&Zo((h=(u=t.rois.find(d=>d.id===i))==null?void 0:u.parameters.find(d=>d.codename===d.codename))==null?void 0:h.value)&&s.push(r.missingRequiredValuesInShapeParameters.replace("{id}",i))})}),[s.length===0,s]},cb=(n,e)=>{switch(e){case X.Rectangle:return{top:n.top,left:n.left,width:n.width,height:n.height,color:n.stroke};case X.Polygon:case X.Polyline:return{points:n.get("points"),top:n.top,left:n.left,color:n.stroke}}},ah=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",style:e,children:_.jsx("path",{fill:n,d:"M360-240q-33 0-56.5-23.5T280-320v-480q0-33 23.5-56.5T360-880h360q33 0 56.5 23.5T800-800v480q0 33-23.5 56.5T720-240H360Zm0-80h360v-480H360v480ZM200-80q-33 0-56.5-23.5T120-160v-560h80v560h440v80H200Zm160-240v-480 480Z"})});ah.__docgenInfo={description:"",methods:[],displayName:"CopyIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Va=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M280-280h84l240-238-86-86-238 238v86Zm352-266 42-44q6-6 6-14t-6-14l-56-56q-6-6-14-6t-14 6l-44 42 86 86ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h168q13-36 43.5-58t68.5-22q38 0 68.5 22t43.5 58h168q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm280-590q13 0 21.5-8.5T510-820q0-13-8.5-21.5T480-850q-13 0-21.5 8.5T450-820q0 13 8.5 21.5T480-790ZM200-200v-560 560Z"})});Va.__docgenInfo={description:"",methods:[],displayName:"AnnotateIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Ha=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})});Ha.__docgenInfo={description:"",methods:[],displayName:"CloseIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const ub="_modal_hvjsg_1",rn={"modal-overlay":"_modal-overlay_hvjsg_1","modal-overlay-light":"_modal-overlay-light_hvjsg_13","modal-overlay-dark":"_modal-overlay-dark_hvjsg_17",modal:ub,"modal-light":"_modal-light_hvjsg_33","modal-dark":"_modal-dark_hvjsg_39","modal-xs":"_modal-xs_hvjsg_45","modal-sm":"_modal-sm_hvjsg_49","modal-md":"_modal-md_hvjsg_53","modal-lg":"_modal-lg_hvjsg_57","modal-xl":"_modal-xl_hvjsg_61","modal-header":"_modal-header_hvjsg_65","modal-title":"_modal-title_hvjsg_72","modal-title-light":"_modal-title-light_hvjsg_78","modal-title-dark":"_modal-title-dark_hvjsg_82","modal-footer":"_modal-footer_hvjsg_86"},hb=({isOpen:n,onClose:e,children:t,title:r,maxWidth:s,onSubmit:i})=>{const{themeMode:o,IconButton:a,Typography:l,Button:c,strings:u}=C.useContext(He),h=o==="light"?"black":"white";return n?ou.createPortal(_.jsx("div",{className:q("modal-overlay",rn,o),children:_.jsxs("div",{className:`${q("modal",rn,o)} ${q(`modal-${s}`,rn,o)}`,children:[_.jsxs("div",{className:q("modal-header",rn,o),children:[_.jsx(l,{component:"h6",className:q("modal-title",rn,o),children:r}),_.jsx(a,{onClick:e,children:_.jsx(Ha,{color:h})})]}),t,_.jsxs("div",{className:q("modal-footer",rn,o),children:[_.jsx(c,{onClick:e,children:u.cancel}),i&&_.jsx(c,{primary:!0,onClick:i,children:u.save})]})]})}),document.body):null},_r={"text-field":"_text-field_1h8ei_2","text-field-light":"_text-field-light_1h8ei_21","text-field-dark":"_text-field-dark_1h8ei_26","text-field-error":"_text-field-error_1h8ei_31","text-field-label":"_text-field-label_1h8ei_34","text-field-label-error":"_text-field-label-error_1h8ei_45","text-field-helper-text":"_text-field-helper-text_1h8ei_48","text-field-helper-text-error":"_text-field-helper-text-error_1h8ei_59"},lh=({onChange:n,type:e="text",value:t,label:r,helperText:s,error:i,required:o=!1,readOnly:a=!1,disabled:l=!1})=>{const{themeMode:c,Typography:u}=C.useContext(He),h=d=>{n(d.target.value)};return _.jsxs("div",{className:q("text-field-wrapper",_r,c),children:[_.jsx("label",{className:`${q("text-field-label",_r,c)} ${i?q("text-field-label-error",_r,null):""}`,children:_.jsxs(u,{children:[r,o&&" *"]})}),_.jsx("input",{type:e,className:`${q("text-field",_r,c)} ${i?q("text-field-error",_r,null):""}`,onChange:h,value:t,readOnly:a,disabled:l}),s&&_.jsx(u,{component:"div",className:`${q("text-field-helper-text",_r,c)} ${i?q("text-field-helper-text-error",_r,null):""}`,children:s})]})};lh.__docgenInfo={description:"",methods:[],displayName:"TextField",props:{type:{defaultValue:{value:"'text'",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1},readOnly:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1}}};const wr={"number-field":"_number-field_177yi_2","number-field-light":"_number-field-light_177yi_20","number-field-dark":"_number-field-dark_177yi_25","number-field-error":"_number-field-error_177yi_30","number-field-label":"_number-field-label_177yi_33","number-field-label-error":"_number-field-label-error_177yi_44","number-field-helper-text":"_number-field-helper-text_177yi_47","number-field-helper-text-error":"_number-field-helper-text-error_177yi_58"},ch=({onChange:n,value:e,label:t,required:r,helperText:s,error:i})=>{const{themeMode:o,Typography:a}=C.useContext(He),l=c=>{n(parseFloat(c.target.value))};return _.jsxs("div",{className:q("number-field-wrapper",wr,o),children:[_.jsx("label",{className:`${q("number-field-label",wr,o)} ${i?q("number-field-label-error",wr,null):""}`,children:_.jsxs(a,{children:[t,r&&" *"]})}),_.jsx("input",{type:"number",className:`${q("number-field",wr,o)} ${i?q("number-field-error",wr,null):""}`,onChange:l,value:e??""}),s&&_.jsx(a,{component:"div",className:`${q("number-field-helper-text",wr,o)} ${i?q("number-field-helper-text-error",wr,null):""}`,children:s})]})};ch.__docgenInfo={description:"",methods:[],displayName:"NumberField"};const Tr={"bool-field":"_bool-field_116ff_2","bool-field-light":"_bool-field-light_116ff_20","bool-field-dark":"_bool-field-dark_116ff_25","bool-field-error":"_bool-field-error_116ff_30","bool-field-label":"_bool-field-label_116ff_33","bool-field-label-error":"_bool-field-label-error_116ff_44","bool-field-helper-text":"_bool-field-helper-text_116ff_47","bool-field-helper-text-error":"_bool-field-helper-text-error_116ff_58"},uh=({onChange:n,value:e,label:t,helperText:r,error:s,readOnly:i=!1,disabled:o=!1,required:a=!1})=>{const{themeMode:l,Typography:c}=C.useContext(He),u=h=>{n(h.target.checked)};return _.jsxs("div",{className:q("bool-field-wrapper",Tr,l),children:[_.jsx("label",{className:`${q("bool-field-label",Tr,l)} ${s?q("bool-field-label-error",Tr,null):""}`,children:_.jsxs(c,{children:[t,a&&" *"]})}),_.jsx("input",{type:"checkbox",className:`${q("bool-field",Tr,l)} ${s?q("bool-field-error",Tr,null):""}`,onChange:u,checked:e,readOnly:i,disabled:o}),r&&_.jsx(c,{component:"div",className:`${q("bool-field-helper-text",Tr,l)} ${s?q("bool-field-helper-text-error",Tr,null):""}`,children:r})]})};uh.__docgenInfo={description:"",methods:[],displayName:"BoolField",props:{readOnly:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1}}};const kr={"enum-field":"_enum-field_yraf1_2","enum-field-light":"_enum-field-light_yraf1_21","enum-field-dark":"_enum-field-dark_yraf1_26","enum-field-error":"_enum-field-error_yraf1_31","enum-field-label":"_enum-field-label_yraf1_34","enum-field-label-error":"_enum-field-label-error_yraf1_45","enum-field-helper-text":"_enum-field-helper-text_yraf1_48","enum-field-helper-text-error":"_enum-field-helper-text-error_yraf1_59"},hh=({onChange:n,value:e,label:t,helperText:r,error:s,options:i,disabled:o=!1,required:a=!1,multiple:l=!1})=>{const{themeMode:c,Typography:u}=C.useContext(He),h=d=>{const f=Array.from(d.target.selectedOptions,p=>isNaN(Number(p.value))?p.value:Number(p.value));n(l?f:f[0])};return _.jsxs("div",{className:q("enum-field-wrapper",kr,c),children:[_.jsx("label",{className:`${q("enum-field-label",kr,c)} ${s?q("enum-field-label-error",kr,null):""}`,children:_.jsxs(u,{children:[t,a&&" *"]})}),_.jsxs("select",{className:`${q("enum-field",kr,c)} ${s?q("enum-field-error",kr,null):""}`,onChange:h,value:e,disabled:o,multiple:l,children:[!a&&_.jsx("option",{value:""}),i.map(d=>_.jsx("option",{value:d.value,children:d.label},d.value))]}),r&&_.jsx(u,{component:"div",className:`${q("enum-field-helper-text",kr,c)} ${s?q("enum-field-helper-text-error",kr,null):""}`,children:r})]})};hh.__docgenInfo={description:"",methods:[],displayName:"EnumField",props:{options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  value: string | number
  label: string
}`,signature:{properties:[{key:"value",value:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"EnumOption[]"},description:""},multiple:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},disabled:{defaultValue:{value:"false",computed:!1},required:!1},required:{defaultValue:{value:"false",computed:!1},required:!1}}};const db="_button_1b4rk_1",mc={button:db,"button-light":"_button-light_1b4rk_14","button-dark":"_button-dark_1b4rk_19","button-disabled":"_button-disabled_1b4rk_24"},dh=({onClick:n,primary:e,disabled:t,children:r})=>{const{themeMode:s,primaryColor:i}=C.useContext(He),o={};return e&&(o.backgroundColor=i,o.color="white"),_.jsx("button",{className:`${q("button",mc,s)}${t?` ${q("button-disabled",mc,s)}`:""}`,style:o,onClick:n,disabled:t,children:r})};dh.__docgenInfo={description:"",methods:[],displayName:"Button",props:{onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"(event: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"event"}],return:{name:"void"}}},description:""},primary:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const qa=({color:n="black",style:e={}})=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 -960 960 960",width:"24px",style:e,children:_.jsx("path",{fill:n,d:"M840-680v480q0 33-23.5 56.5T760-120H200q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h480l160 160Zm-80 34L646-760H200v560h560v-446ZM480-240q50 0 85-35t35-85q0-50-35-85t-85-35q-50 0-85 35t-35 85q0 50 35 85t85 35ZM240-560h360v-160H240v160Zm-40-86v446-560 114Z"})});qa.__docgenInfo={description:"",methods:[],displayName:"SaveIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{}",computed:!1},required:!1}}};const Ee={enableLogs:!0,themeMode:"light",primaryColor:"#1976d2",Typography:rh,IconButton:nh,Modal:hb,DeleteIcon:sh,EditIcon:ih,SelectIcon:oh,CopyIcon:ah,AnnotateIcon:Va,SaveIcon:qa,CloseIcon:Ha,TextField:lh,NumberField:ch,BoolField:uh,EnumField:hh,Button:dh,pickerColors:["#ffffff","#000000","#ff9900","#0099ff"],notify:ob,strings:{cancel:"Cancel",cannotDrawMorePolygons:"You cannot draw more polygons",cannotDrawMorePolylines:"You cannot draw more polylines",cannotDrawMoreRectangles:"You cannot draw more rectangles",id:"ID",invalidSubmission:"Invalid submission",mainParametersMetadata:"Main parameters",missingRequiredValuesInMainParameters:"Missing required values in main parameters",missingRequiredValuesInShapeParameters:"Missing required values in shape {id} parameters",polygon:"Polygon",polygonHelpText:"click to draw all the polygon points, double click on the last point to close the polygon",polyline:"Polyline",polylineHelpText:"click to draw all the polyline points, double click on the last point to stop drawing",rect:"Rectangle",rectHelpText:"click and drag to draw the rectangle",pointer:"Selection",pointerHelpText:"click a shape to select it",requiredField:"This field is required",save:"Save",shapesOfTypeShouldBeEqualToThreshold:"Shapes of type {type} should be equal to {threshold}",shapesOfTypeShouldBeGreaterThanThreshold:"Shapes of type {type} should be greater than {threshold}",shapesOfTypeShouldBeGreaterThanOrEqualToThreshold:"Shapes of type {type} should be greater than or equal to {threshold}",shapesOfTypeShouldBeLessThanThreshold:"Shapes of type {type} should be less than {threshold}",shapesOfTypeShouldBeLessThanOrEqualToThreshold:"Shapes of type {type} should be less than or equal to {threshold}",type:"Type"}},He=C.createContext(Ee),Xa=({children:n,enableLogs:e,themeMode:t,primaryColor:r,Typography:s,Modal:i,IconButton:o,DeleteIcon:a,EditIcon:l,SelectIcon:c,CopyIcon:u,AnnotateIcon:h,SaveIcon:d,CloseIcon:f,TextField:p,NumberField:g,BoolField:y,EnumField:b,Button:w,pickerColors:v,notify:S,strings:x})=>{const O={enableLogs:e??Ee.enableLogs,Typography:s??Ee.Typography,Modal:i??Ee.Modal,IconButton:o??Ee.IconButton,DeleteIcon:a??Ee.DeleteIcon,EditIcon:l??Ee.EditIcon,SelectIcon:c??Ee.SelectIcon,CopyIcon:u??Ee.CopyIcon,AnnotateIcon:h??Ee.AnnotateIcon,SaveIcon:d??Ee.SaveIcon,CloseIcon:f??Ee.CloseIcon,TextField:p??Ee.TextField,NumberField:g??Ee.NumberField,BoolField:y??Ee.BoolField,EnumField:b??Ee.EnumField,Button:w??Ee.Button,themeMode:t??Ee.themeMode,primaryColor:r??Ee.primaryColor,pickerColors:v??Ee.pickerColors,notify:S??Ee.notify,strings:x?{...Ee.strings,...x}:Ee.strings};return _.jsx(He.Provider,{value:O,children:n})};Xa.__docgenInfo={description:"",methods:[],displayName:"UiProvider",props:{strings:{required:!1,tsType:{name:"Partial",elements:[{name:"signature",raw:"UiContextType['strings']"}],raw:"Partial<UiContextType['strings']>"},description:""}}};const fb="_loader_10c9e_1",pb="_spin_10c9e_1",gb={loader:fb,spin:pb,"loader-light":"_loader-light_10c9e_8","loader-dark":"_loader-dark_10c9e_13"},fh=()=>{const{themeMode:n}=C.useContext(He);return _.jsx("div",{className:q("loader",gb,n)})};fh.__docgenInfo={description:"",methods:[],displayName:"Loader"};function T(n,e,t){return(e=function(r){var s=function(i,o){if(typeof i!="object"||!i)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var l=a.call(i,o||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(i)}(r,"string");return typeof s=="symbol"?s:s+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yc(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yc(Object(t),!0).forEach(function(r){T(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):yc(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function we(n,e){if(n==null)return{};var t,r,s=function(o,a){if(o==null)return{};var l={};for(var c in o)if({}.hasOwnProperty.call(o,c)){if(a.indexOf(c)>=0)continue;l[c]=o[c]}return l}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function vr(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}class bc{constructor(){T(this,"browserShadowBlurConstant",1),T(this,"DPI",96),T(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),T(this,"perfLimitSizeTotal",2097152),T(this,"maxCacheSideLimit",4096),T(this,"minCacheSideLimit",256),T(this,"disableStyleCopyPaste",!1),T(this,"enableGLFiltering",!0),T(this,"textureSize",4096),T(this,"forceGLPutImageData",!1),T(this,"cachesBoundsOfCurve",!1),T(this,"fontPaths",{}),T(this,"NUM_FRACTION_DIGITS",4)}}const re=new class extends bc{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=k(k({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const e=new bc,t=(n==null?void 0:n.reduce((r,s)=>(r[s]=e[s],r),{}))||e;this.configure(t)}},mr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return console[n]("fabric",...t)};class zt extends Error{constructor(e,t){super("fabric: ".concat(e),t)}}class mb extends zt{constructor(e){super("".concat(e," 'options.signal' is in 'aborted' state"))}}class yb{}class bb extends yb{testPrecision(e,t){const r="precision ".concat(t,` float;
void main(){}`),s=e.createShader(e.FRAGMENT_SHADER);return!!s&&(e.shaderSource(s,r),e.compileShader(s),!!e.getShaderParameter(s,e.COMPILE_STATUS))}queryWebGL(e){const t=e.getContext("webgl");t&&(this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(r=>this.testPrecision(t,r)),t.getExtension("WEBGL_lose_context").loseContext(),mr("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(e){return!!this.maxTextureSize&&this.maxTextureSize>=e}}const vb={};let vc;const qt=()=>vc||(vc={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new bb,dispose(){},copyPasteData:vb}),wn=()=>qt().document,Ya=()=>qt().window,ph=()=>{var n;return Math.max((n=re.devicePixelRatio)!==null&&n!==void 0?n:Ya().devicePixelRatio,1)},Zn=new class{constructor(){T(this,"charWidthsCache",{}),T(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:e,fontStyle:t,fontWeight:r}=n;e=e.toLowerCase(),this.charWidthsCache[e]||(this.charWidthsCache[e]={});const s=this.charWidthsCache[e],i="".concat(t.toLowerCase(),"_").concat((r+"").toLowerCase());return s[i]||(s[i]={}),s[i]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:e}=re,t=Math.sqrt(e*n);return[Math.floor(t),Math.floor(e/t)]}},Jo="6.5.4";function ni(){}const ys=Math.PI/2,mi=2*Math.PI,Ua=Math.PI/180,st=Object.freeze([1,0,0,1,0,0]),Ga=16,fr=.4477152502,K="center",le="left",lt="top",Qo="bottom",Re="right",ct="none",Ka=/\r?\n/,gh="moving",qi="scaling",mh="rotating",Za="rotate",yh="skewing",is="resizing",xb="modifyPoly",Sb="modifyPath",yi="changed",Xi="scale",dt="scaleX",wt="scaleY",Tn="skewX",kn="skewY",We="fill",ut="stroke",bi="modified",nn="json",mo="svg",W=new class{constructor(){this[nn]=new Map,this[mo]=new Map}has(n){return this[nn].has(n)}getClass(n){const e=this[nn].get(n);if(!e)throw new zt("No class registered for ".concat(n));return e}setClass(n,e){e?this[nn].set(e,n):(this[nn].set(n.type,n),this[nn].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[mo].get(n)}setSVGClass(n,e){this[mo].set(e??n.type.toLowerCase(),n)}},vi=new class extends Array{remove(n){const e=this.indexOf(n);e>-1&&this.splice(e,1)}cancelAll(){const n=this.splice(0);return n.forEach(e=>e.abort()),n}cancelByCanvas(n){if(!n)return[];const e=this.filter(t=>{var r;return t.target===n||typeof t.target=="object"&&((r=t.target)===null||r===void 0?void 0:r.canvas)===n});return e.forEach(t=>t.abort()),e}cancelByTarget(n){if(!n)return[];const e=this.filter(t=>t.target===n);return e.forEach(t=>t.abort()),e}};class Cb{constructor(){T(this,"__eventListeners",{})}on(e,t){if(this.__eventListeners||(this.__eventListeners={}),typeof e=="object")return Object.entries(e).forEach(r=>{let[s,i]=r;this.on(s,i)}),()=>this.off(e);if(t){const r=e;return this.__eventListeners[r]||(this.__eventListeners[r]=[]),this.__eventListeners[r].push(t),()=>this.off(r,t)}return()=>!1}once(e,t){if(typeof e=="object"){const r=[];return Object.entries(e).forEach(s=>{let[i,o]=s;r.push(this.once(i,o))}),()=>r.forEach(s=>s())}if(t){const r=this.on(e,function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];t.call(this,...i),r()});return r}return()=>!1}_removeEventListener(e,t){if(this.__eventListeners[e])if(t){const r=this.__eventListeners[e],s=r.indexOf(t);s>-1&&r.splice(s,1)}else this.__eventListeners[e]=[]}off(e,t){if(this.__eventListeners)if(e===void 0)for(const r in this.__eventListeners)this._removeEventListener(r);else typeof e=="object"?Object.entries(e).forEach(r=>{let[s,i]=r;this._removeEventListener(s,i)}):this._removeEventListener(e,t)}fire(e,t){var r;if(!this.__eventListeners)return;const s=(r=this.__eventListeners[e])===null||r===void 0?void 0:r.concat();if(s)for(let i=0;i<s.length;i++)s[i].call(this,t||{})}}const an=(n,e)=>{const t=n.indexOf(e);return t!==-1&&n.splice(t,1),n},lr=n=>{if(n===0)return 1;switch(Math.abs(n)/ys){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},cr=n=>{if(n===0)return 0;const e=n/ys,t=Math.sign(n);switch(e){case 1:return t;case 2:return 0;case 3:return-t}return Math.sin(n)};class D{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof e=="object"?(this.x=e.x,this.y=e.y):(this.x=e,this.y=t)}add(e){return new D(this.x+e.x,this.y+e.y)}addEquals(e){return this.x+=e.x,this.y+=e.y,this}scalarAdd(e){return new D(this.x+e,this.y+e)}scalarAddEquals(e){return this.x+=e,this.y+=e,this}subtract(e){return new D(this.x-e.x,this.y-e.y)}subtractEquals(e){return this.x-=e.x,this.y-=e.y,this}scalarSubtract(e){return new D(this.x-e,this.y-e)}scalarSubtractEquals(e){return this.x-=e,this.y-=e,this}multiply(e){return new D(this.x*e.x,this.y*e.y)}scalarMultiply(e){return new D(this.x*e,this.y*e)}scalarMultiplyEquals(e){return this.x*=e,this.y*=e,this}divide(e){return new D(this.x/e.x,this.y/e.y)}scalarDivide(e){return new D(this.x/e,this.y/e)}scalarDivideEquals(e){return this.x/=e,this.y/=e,this}eq(e){return this.x===e.x&&this.y===e.y}lt(e){return this.x<e.x&&this.y<e.y}lte(e){return this.x<=e.x&&this.y<=e.y}gt(e){return this.x>e.x&&this.y>e.y}gte(e){return this.x>=e.x&&this.y>=e.y}lerp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return t=Math.max(Math.min(1,t),0),new D(this.x+(e.x-this.x)*t,this.y+(e.y-this.y)*t)}distanceFrom(e){const t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)}midPointFrom(e){return this.lerp(e)}min(e){return new D(Math.min(this.x,e.x),Math.min(this.y,e.y))}max(e){return new D(Math.max(this.x,e.x),Math.max(this.y,e.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(e,t){return this.x=e,this.y=t,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setFromPoint(e){return this.x=e.x,this.y=e.y,this}swap(e){const t=this.x,r=this.y;this.x=e.x,this.y=e.y,e.x=t,e.y=r}clone(){return new D(this.x,this.y)}rotate(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ja;const r=cr(e),s=lr(e),i=this.subtract(t);return new D(i.x*s-i.y*r,i.x*r+i.y*s).add(t)}transform(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new D(e[0]*this.x+e[2]*this.y+(t?0:e[4]),e[1]*this.x+e[3]*this.y+(t?0:e[5]))}}const Ja=new D(0,0),si=n=>!!n&&Array.isArray(n._objects);function bh(n){class e extends n{constructor(){super(...arguments),T(this,"_objects",[])}_onObjectAdded(r){}_onObjectRemoved(r){}_onStackOrderChanged(r){}add(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const o=this._objects.push(...s);return s.forEach(a=>this._onObjectAdded(a)),o}insertAt(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return this._objects.splice(r,0,...i),i.forEach(a=>this._onObjectAdded(a)),this._objects.length}remove(){const r=this._objects,s=[];for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return o.forEach(l=>{const c=r.indexOf(l);c!==-1&&(r.splice(c,1),s.push(l),this._onObjectRemoved(l))}),s}forEachObject(r){this.getObjects().forEach((s,i,o)=>r(s,i,o))}getObjects(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(r){return this._objects[r]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(r,s){return!!this._objects.includes(r)||!!s&&this._objects.some(i=>i instanceof e&&i.contains(r,!0))}complexity(){return this._objects.reduce((r,s)=>r+=s.complexity?s.complexity():0,0)}sendObjectToBack(r){return!(!r||r===this._objects[0])&&(an(this._objects,r),this._objects.unshift(r),this._onStackOrderChanged(r),!0)}bringObjectToFront(r){return!(!r||r===this._objects[this._objects.length-1])&&(an(this._objects,r),this._objects.push(r),this._onStackOrderChanged(r),!0)}sendObjectBackwards(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==0){const o=this.findNewLowerIndex(r,i,s);return an(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}bringObjectForward(r,s){if(!r)return!1;const i=this._objects.indexOf(r);if(i!==this._objects.length-1){const o=this.findNewUpperIndex(r,i,s);return an(this._objects,r),this._objects.splice(o,0,r),this._onStackOrderChanged(r),!0}return!1}moveObjectTo(r,s){return r!==this._objects[s]&&(an(this._objects,r),this._objects.splice(s,0,r),this._onStackOrderChanged(r),!0)}findNewLowerIndex(r,s,i){let o;if(i){o=s;for(let a=s-1;a>=0;--a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s-1;return o}findNewUpperIndex(r,s,i){let o;if(i){o=s;for(let a=s+1;a<this._objects.length;++a)if(r.isOverlapping(this._objects[a])){o=a;break}}else o=s+1;return o}collectObjects(r){let{left:s,top:i,width:o,height:a}=r,{includeIntersecting:l=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const c=[],u=new D(s,i),h=u.add(new D(o,a));for(let d=this._objects.length-1;d>=0;d--){const f=this._objects[d];f.selectable&&f.visible&&(l&&f.intersectsWithRect(u,h)||f.isContainedWithinRect(u,h)||l&&f.containsPoint(u)||l&&f.containsPoint(h))&&c.push(f)}return c}}return e}class vh extends Cb{_setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const t in e)this.set(t,e[t])}_setObject(e){for(const t in e)this._set(t,e[t])}set(e,t){return typeof e=="object"?this._setObject(e):this._set(e,t),this}_set(e,t){this[e]=t}toggle(e){const t=this.get(e);return typeof t=="boolean"&&this.set(e,!t),this}get(e){return this[e]}}function ii(n){return Ya().requestAnimationFrame(n)}function _b(n){return Ya().cancelAnimationFrame(n)}let wb=0;const yr=()=>wb++,jt=()=>{const n=wn().createElement("canvas");if(!n||n.getContext===void 0)throw new zt("Failed to create `canvas` element");return n},Tb=()=>wn().createElement("img"),Xt=n=>{const e=jt();return e.width=n.width,e.height=n.height,e},xh=(n,e,t)=>n.toDataURL("image/".concat(e),t),je=n=>n*Ua,Nr=n=>n/Ua,kb=n=>n.every((e,t)=>e===st[t]),ot=(n,e,t)=>new D(n).transform(e,t),Dt=n=>{const e=1/(n[0]*n[3]-n[1]*n[2]),t=[e*n[3],-e*n[1],-e*n[2],e*n[0],0,0],{x:r,y:s}=new D(n[4],n[5]).transform(t,!0);return t[4]=-r,t[5]=-s,t},Ue=(n,e,t)=>[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],t?0:n[0]*e[4]+n[2]*e[5]+n[4],t?0:n[1]*e[4]+n[3]*e[5]+n[5]],Qa=(n,e)=>n.reduceRight((t,r)=>r&&t?Ue(r,t,e):r||t,void 0)||st.concat(),Sh=n=>{let[e,t]=n;return Math.atan2(t,e)},xi=n=>{const e=Sh(n),t=Math.pow(n[0],2)+Math.pow(n[1],2),r=Math.sqrt(t),s=(n[0]*n[3]-n[2]*n[1])/r,i=Math.atan2(n[0]*n[2]+n[1]*n[3],t);return{angle:Nr(e),scaleX:r,scaleY:s,skewX:Nr(i),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},bs=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function vs(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:e=0,y:t=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=je(n),s=lr(r),i=cr(r);return[s,i,-i,s,e?e-(s*e-i*t):0,t?t-(i*e+s*t):0]}const el=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},Ch=n=>Math.tan(je(n)),_h=n=>[1,0,Ch(n),1,0,0],wh=n=>[1,Ch(n),0,1,0,0],Yi=n=>{let{scaleX:e=1,scaleY:t=1,flipX:r=!1,flipY:s=!1,skewX:i=0,skewY:o=0}=n,a=el(r?-e:e,s?-t:t);return i&&(a=Ue(a,_h(i),!0)),o&&(a=Ue(a,wh(o),!0)),a},Ob=n=>{const{translateX:e=0,translateY:t=0,angle:r=0}=n;let s=bs(e,t);r&&(s=Ue(s,vs({angle:r})));const i=Yi(n);return kb(i)||(s=Ue(s,i)),s},oi=function(n){let{signal:e,crossOrigin:t=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(e&&e.aborted)return s(new mb("loadImage"));const i=Tb();let o;e&&(o=function(l){i.src="",s(l)},e.addEventListener("abort",o,{once:!0}));const a=function(){i.onload=i.onerror=null,o&&(e==null||e.removeEventListener("abort",o)),r(i)};n?(i.onload=a,i.onerror=function(){o&&(e==null||e.removeEventListener("abort",o)),s(new zt("Error loading ".concat(i.src)))},t&&(i.crossOrigin=t),i.src=n):a()})},os=function(n){let{signal:e,reviver:t=ni}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((r,s)=>{const i=[];e&&e.addEventListener("abort",s,{once:!0}),Promise.all(n.map(o=>W.getClass(o.type).fromObject(o,{signal:e}).then(a=>(t(o,a),i.push(a),a)))).then(r).catch(o=>{i.forEach(a=>{a.dispose&&a.dispose()}),s(o)}).finally(()=>{e&&e.removeEventListener("abort",s)})})},Ui=function(n){let{signal:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((t,r)=>{const s=[];e&&e.addEventListener("abort",r,{once:!0});const i=Object.values(n).map(a=>a&&a.type&&W.has(a.type)?os([a],{signal:e}).then(l=>{let[c]=l;return s.push(c),c}):a),o=Object.keys(n);Promise.all(i).then(a=>a.reduce((l,c,u)=>(l[o[u]]=c,l),{})).then(t).catch(a=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(a)}).finally(()=>{e&&e.removeEventListener("abort",r)})})},On=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((e,t)=>(t in n&&(e[t]=n[t]),e),{})},tl=(n,e)=>Object.keys(n).reduce((t,r)=>(e(n[r],r,n)&&(t[r]=n[r]),t),{}),xc={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},yo=(n,e,t)=>(t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+(e-n)*(2/3-t)*6:n),Sc=(n,e,t,r)=>{n/=255,e/=255,t/=255;const s=Math.max(n,e,t),i=Math.min(n,e,t);let o,a;const l=(s+i)/2;if(s===i)o=a=0;else{const c=s-i;switch(a=l>.5?c/(2-s-i):c/(s+i),s){case n:o=(e-t)/c+(e<t?6:0);break;case e:o=(t-n)/c+2;break;case t:o=(n-e)/c+4}o/=6}return[Math.round(360*o),Math.round(100*a),Math.round(100*l),r]},Cc=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Os=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),_c=n=>{let[e,t,r,s=1]=n;const i=Math.round(.3*e+.59*t+.11*r);return[i,i,i,s]};class ue{constructor(e){if(T(this,"isUnrecognised",!1),e)if(e instanceof ue)this.setSource([...e._source]);else if(Array.isArray(e)){const[t,r,s,i=1]=e;this.setSource([t,r,s,i])}else this.setSource(this._tryParsingColor(e));else this.setSource([0,0,0,1])}_tryParsingColor(e){return(e=e.toLowerCase())in xc&&(e=xc[e]),e==="transparent"?[255,255,255,0]:ue.sourceFromHex(e)||ue.sourceFromRgb(e)||ue.sourceFromHsl(e)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(e){this._source=e}toRgb(){const[e,t,r]=this.getSource();return"rgb(".concat(e,",").concat(t,",").concat(r,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[e,t,r]=Sc(...this.getSource());return"hsl(".concat(e,",").concat(t,"%,").concat(r,"%)")}toHsla(){const[e,t,r,s]=Sc(...this.getSource());return"hsla(".concat(e,",").concat(t,"%,").concat(r,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[e,t,r,s]=this.getSource();return"".concat(Os(e)).concat(Os(t)).concat(Os(r)).concat(Os(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(e){return this._source[3]=e,this}toGrayscale(){return this.setSource(_c(this.getSource())),this}toBlackWhite(e){const[t,,,r]=_c(this.getSource()),s=t<(e||127)?0:255;return this.setSource([s,s,s,r]),this}overlayWith(e){e instanceof ue||(e=new ue(e));const t=this.getSource(),r=e.getSource(),[s,i,o]=t.map((a,l)=>Math.round(.5*a+.5*r[l]));return this.setSource([s,i,o,t[3]]),this}static fromRgb(e){return ue.fromRgba(e)}static fromRgba(e){return new ue(ue.sourceFromRgb(e))}static sourceFromRgb(e){const t=e.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(t){const[r,s,i]=t.slice(1,4).map(o=>{const a=parseFloat(o);return o.endsWith("%")?Math.round(2.55*a):a});return[r,s,i,Cc(t[4])]}}static fromHsl(e){return ue.fromHsla(e)}static fromHsla(e){return new ue(ue.sourceFromHsl(e))}static sourceFromHsl(e){const t=e.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!t)return;const r=(ue.parseAngletoDegrees(t[1])%360+360)%360/360,s=parseFloat(t[2])/100,i=parseFloat(t[3])/100;let o,a,l;if(s===0)o=a=l=i;else{const c=i<=.5?i*(s+1):i+s-i*s,u=2*i-c;o=yo(u,c,r+1/3),a=yo(u,c,r),l=yo(u,c,r-1/3)}return[Math.round(255*o),Math.round(255*a),Math.round(255*l),Cc(t[4])]}static fromHex(e){return new ue(ue.sourceFromHex(e))}static sourceFromHex(e){if(e.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const t=e.slice(e.indexOf("#")+1);let r;r=t.length<=4?t.split("").map(l=>l+l):t.match(/.{2}/g);const[s,i,o,a=255]=r.map(l=>parseInt(l,16));return[s,i,o,a/255]}}static parseAngletoDegrees(e){const t=e.toLowerCase(),r=parseFloat(t);return t.includes("rad")?Nr(r):t.includes("turn")?360*r:r}}const Me=(n,e)=>parseFloat(Number(n).toFixed(e)),gn=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ga;const t=/\D{0,2}$/.exec(n),r=parseFloat(n),s=re.DPI;switch(t==null?void 0:t[0]){case"mm":return r*s/25.4;case"cm":return r*s/2.54;case"in":return r*s;case"pt":return r*s/72;case"pc":return r*s/72*12;case"em":return r*e;default:return r}},Eb=n=>{const[e,t]=n.trim().split(" "),[r,s]=(i=e)&&i!==ct?[i.slice(1,4),i.slice(5,8)]:i===ct?[i,i]:["Mid","Mid"];var i;return{meetOrSlice:t||"meet",alignX:r,alignY:s}},Si=n=>"matrix("+n.map(e=>Me(e,re.NUM_FRACTION_DIGITS)).join(" ")+")",as=function(n,e){let t,r,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(e)if(e.toLive)t="url(#SVGID_".concat(e.id,")");else{const i=new ue(e),o=i.getAlpha();t=i.toRgb(),o!==1&&(r=o.toString())}else t="none";return s?"".concat(n,": ").concat(t,"; ").concat(r?"".concat(n,"-opacity: ").concat(r,"; "):""):"".concat(n,'="').concat(t,'" ').concat(r?"".concat(n,'-opacity="').concat(r,'" '):"")},_t=n=>!!n&&n.toLive!==void 0,wc=n=>!!n&&typeof n.toObject=="function",Tc=n=>!!n&&n.offsetX!==void 0&&"source"in n,Pr=n=>!!n&&"multiSelectionStacking"in n;function Th(n){const e=n&&Mt(n);let t=0,r=0;if(!n||!e)return{left:t,top:r};let s=n;const i=e.documentElement,o=e.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===e?(t=o.scrollLeft||i.scrollLeft||0,r=o.scrollTop||i.scrollTop||0):(t+=s.scrollLeft||0,r+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:t,top:r}}const Mt=n=>n.ownerDocument||null,kh=n=>{var e;return((e=n.ownerDocument)===null||e===void 0?void 0:e.defaultView)||null},Oh=function(n,e,t){let{width:r,height:s}=t,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=r,n.height=s,i>1&&(n.setAttribute("width",(r*i).toString()),n.setAttribute("height",(s*i).toString()),e.scale(i,i))},ea=(n,e)=>{let{width:t,height:r}=e;t&&(n.style.width=typeof t=="number"?"".concat(t,"px"):t),r&&(n.style.height=typeof r=="number"?"".concat(r,"px"):r)};function kc(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=ct,n}class Eh{constructor(e){T(this,"_originalCanvasStyle",void 0),T(this,"lower",void 0);const t=this.createLowerCanvas(e);this.lower={el:t,ctx:t.getContext("2d")}}createLowerCanvas(e){const t=(r=e)&&r.getContext!==void 0?e:e&&wn().getElementById(e)||jt();var r;if(t.hasAttribute("data-fabric"))throw new zt("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=t.style.cssText,t.setAttribute("data-fabric","main"),t.classList.add("lower-canvas"),t}cleanupDOM(e){let{width:t,height:r}=e;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(t)),s.setAttribute("height","".concat(r)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(e,t){const{el:r,ctx:s}=this.lower;Oh(r,s,e,t)}setCSSDimensions(e){ea(this.lower.el,e)}calcOffset(){return function(e){var t;const r=e&&Mt(e),s={left:0,top:0};if(!r)return s;const i=((t=kh(e))===null||t===void 0?void 0:t.getComputedStyle(e,null))||{};s.left+=parseInt(i.borderLeftWidth,10)||0,s.top+=parseInt(i.borderTopWidth,10)||0,s.left+=parseInt(i.paddingLeft,10)||0,s.top+=parseInt(i.paddingTop,10)||0;let o={left:0,top:0};const a=r.documentElement;e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect());const l=Th(e);return{left:o.left+l.left-(a.clientLeft||0)+s.left,top:o.top+l.top-(a.clientTop||0)+s.top}}(this.lower.el)}dispose(){qt().dispose(this.lower.el),delete this.lower}}const Pb={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...st]};class xs extends bh(vh){get lowerCanvasEl(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.el}get contextContainer(){var e;return(e=this.elements.lower)===null||e===void 0?void 0:e.ctx}static getDefaults(){return xs.ownDefaults}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(t),this.initElements(e),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(e){this.elements=new Eh(e)}add(){const e=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=super.insertAt(e,...r);return r.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),i}remove(){const e=super.remove(...arguments);return e.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),e}_onObjectAdded(e){e.canvas&&e.canvas!==this&&(mr("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),e.canvas.remove(e)),e._set("canvas",this),e.setCoords(),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e){e._set("canvas",void 0),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?ph():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(e,t){return this.setDimensions({width:e},t)}setHeight(e,t){return this.setDimensions({height:e},t)}_setDimensionsImpl(e){let{cssOnly:t=!1,backstoreOnly:r=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t){const s=k({width:this.width,height:this.height},e);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}r||this.elements.setCSSDimensions(e),this.calcOffset()}setDimensions(e,t){this._setDimensionsImpl(e,t),t&&t.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(e){this.viewportTransform=e,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(e,t){const r=e,s=[...this.viewportTransform],i=ot(e,Dt(s));s[0]=t,s[3]=t;const o=ot(i,s);s[4]+=r.x-o.x,s[5]+=r.y-o.y,this.setViewportTransform(s)}setZoom(e){this.zoomToPoint(new D(0,0),e)}absolutePan(e){const t=[...this.viewportTransform];return t[4]=-e.x,t[5]=-e.y,this.setViewportTransform(t)}relativePan(e){return this.absolutePan(new D(-e.x-this.viewportTransform[4],-e.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(e){e.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=ii(()=>this.renderAndReset()))}calcViewportBoundaries(){const e=this.width,t=this.height,r=Dt(this.viewportTransform),s=ot({x:0,y:0},r),i=ot({x:e,y:t},r),o=s.min(i),a=s.max(i);return this.vptCoords={tl:o,tr:new D(a.x,o.y),bl:new D(o.x,a.y),br:a}}cancelRequestedRender(){this.nextRenderHandle&&(_b(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(e){}renderCanvas(e,t){if(this.destroyed)return;const r=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(e),e.imageSmoothingEnabled=this.imageSmoothingEnabled,e.patternQuality="best",this.fire("before:render",{ctx:e}),this._renderBackground(e),e.save(),e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this._renderObjects(e,t),e.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(e),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(e,s)),this._renderOverlay(e),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(e),this.fire("after:render",{ctx:e}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(e,t){const r=this.viewportTransform;e.save(),e.transform(...r),e.globalCompositeOperation="destination-in",t.transform(e),e.scale(1/t.zoomX,1/t.zoomY),e.drawImage(t._cacheCanvas,-t.cacheTranslationX,-t.cacheTranslationY),e.restore()}_renderObjects(e,t){for(let r=0,s=t.length;r<s;++r)t[r]&&t[r].render(e)}_renderBackgroundOrOverlay(e,t){const r=this["".concat(t,"Color")],s=this["".concat(t,"Image")],i=this.viewportTransform,o=this["".concat(t,"Vpt")];if(!r&&!s)return;const a=_t(r);if(r){if(e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(this.width,0),e.lineTo(this.width,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=a?r.toLive(e):r,o&&e.transform(...i),a){e.transform(1,0,0,1,r.offsetX||0,r.offsetY||0);const l=r.gradientTransform||r.patternTransform;l&&e.transform(...l)}e.fill(),e.restore()}if(s){e.save();const{skipOffscreen:l}=this;this.skipOffscreen=o,o&&e.transform(...i),s.render(e),this.skipOffscreen=l,e.restore()}}_renderBackground(e){this._renderBackgroundOrOverlay(e,"background")}_renderOverlay(e){this._renderBackgroundOrOverlay(e,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new D(this.width/2,this.height/2)}centerObjectH(e){return this._centerObject(e,new D(this.getCenterPoint().x,e.getCenterPoint().y))}centerObjectV(e){return this._centerObject(e,new D(e.getCenterPoint().x,this.getCenterPoint().y))}centerObject(e){return this._centerObject(e,this.getCenterPoint())}viewportCenterObject(e){return this._centerObject(e,this.getVpCenter())}viewportCenterObjectH(e){return this._centerObject(e,new D(this.getVpCenter().x,e.getCenterPoint().y))}viewportCenterObjectV(e){return this._centerObject(e,new D(e.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return ot(this.getCenterPoint(),Dt(this.viewportTransform))}_centerObject(e,t){e.setXY(t,K,K),e.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(e){return this.toDatalessObject(e)}toObject(e){return this._toObjectMethod("toObject",e)}toJSON(){return this.toObject()}toDatalessObject(e){return this._toObjectMethod("toDatalessObject",e)}_toObjectMethod(e,t){const r=this.clipPath,s=r&&!r.excludeFromExport?this._toObject(r,e,t):null;return k(k(k({version:Jo},On(this,t)),{},{objects:this._objects.filter(i=>!i.excludeFromExport).map(i=>this._toObject(i,e,t))},this.__serializeBgOverlay(e,t)),s?{clipPath:s}:null)}_toObject(e,t,r){let s;this.includeDefaultValues||(s=e.includeDefaultValues,e.includeDefaultValues=!1);const i=e[t](r);return this.includeDefaultValues||(e.includeDefaultValues=!!s),i}__serializeBgOverlay(e,t){const r={},s=this.backgroundImage,i=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return _t(o)?o.excludeFromExport||(r.background=o.toObject(t)):o&&(r.background=o),_t(a)?a.excludeFromExport||(r.overlay=a.toObject(t)):a&&(r.overlay=a),s&&!s.excludeFromExport&&(r.backgroundImage=this._toObject(s,e,t)),i&&!i.excludeFromExport&&(r.overlayImage=this._toObject(i,e,t)),r}toSVG(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.reviver=t;const r=[];return this._setSVGPreamble(r,e),this._setSVGHeader(r,e),this.clipPath&&r.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(r,"background"),this._setSVGBgOverlayImage(r,"backgroundImage",t),this._setSVGObjects(r,t),this.clipPath&&r.push(`</g>
`),this._setSVGBgOverlayColor(r,"overlay"),this._setSVGBgOverlayImage(r,"overlayImage",t),r.push("</svg>"),r.join("")}_setSVGPreamble(e,t){t.suppressPreamble||e.push('<?xml version="1.0" encoding="',t.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(e,t){const r=t.width||"".concat(this.width),s=t.height||"".concat(this.height),i=re.NUM_FRACTION_DIGITS,o=t.viewBox;let a;if(o)a='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const l=this.viewportTransform;a='viewBox="'.concat(Me(-l[4]/l[0],i)," ").concat(Me(-l[5]/l[3],i)," ").concat(Me(this.width/l[0],i)," ").concat(Me(this.height/l[3],i),'" ')}else a='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');e.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',a,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Jo,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(t),`</defs>
`)}createSVGClipPathMarkup(e){const t=this.clipPath;return t?(t.clipPathId="CLIPPATH_".concat(yr()),'<clipPath id="'.concat(t.clipPathId,`" >
`).concat(t.toClipPathSVG(e.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(e=>{const t=this["".concat(e,"Color")];if(_t(t)){const r=this["".concat(e,"Vpt")],s=this.viewportTransform,i={isType:()=>!1,width:this.width/(r?s[0]:1),height:this.height/(r?s[3]:1)};return t.toSVG(i,{additionalTransform:r?Si(s):""})}}).join("")}createSVGFontFacesMarkup(){const e=[],t={},r=re.fontPaths;this._objects.forEach(function i(o){e.push(o),si(o)&&o._objects.forEach(i)}),e.forEach(i=>{if(!(o=i)||typeof o._renderText!="function")return;var o;const{styles:a,fontFamily:l}=i;!t[l]&&r[l]&&(t[l]=!0,a&&Object.values(a).forEach(c=>{Object.values(c).forEach(u=>{let{fontFamily:h=""}=u;!t[h]&&r[h]&&(t[h]=!0)})}))});const s=Object.keys(t).map(i=>`		@font-face {
			font-family: '`.concat(i,`';
			src: url('`).concat(r[i],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(e,t){this.forEachObject(r=>{r.excludeFromExport||this._setSVGObject(e,r,t)})}_setSVGObject(e,t,r){e.push(t.toSVG(r))}_setSVGBgOverlayImage(e,t,r){const s=this[t];s&&!s.excludeFromExport&&s.toSVG&&e.push(s.toSVG(r))}_setSVGBgOverlayColor(e,t){const r=this["".concat(t,"Color")];if(r)if(_t(r)){const s=r.repeat||"",i=this.width,o=this.height,a=this["".concat(t,"Vpt")]?Si(Dt(this.viewportTransform)):"";e.push('<rect transform="'.concat(a," translate(").concat(i/2,",").concat(o/2,')" x="').concat(r.offsetX-i/2,'" y="').concat(r.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Tc(r)?i:r.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Tc(r)?o:r.source.height,'" fill="url(#SVGID_').concat(r.id,`)"></rect>
`))}else e.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',r,'"',`></rect>
`)}loadFromJSON(e,t){let{signal:r}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return Promise.reject(new zt("`json` is undefined"));const s=typeof e=="string"?JSON.parse(e):e,{objects:i=[],backgroundImage:o,background:a,overlayImage:l,overlay:c,clipPath:u}=s,h=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([os(i,{reviver:t,signal:r}),Ui({backgroundImage:o,backgroundColor:a,overlayImage:l,overlayColor:c,clipPath:u},{signal:r})]).then(d=>{let[f,p]=d;return this.clear(),this.add(...f),this.set(s),this.set(p),this.renderOnAddRemove=h,this})}clone(e){const t=this.toObject(e);return this.cloneWithoutData().loadFromJSON(t)}cloneWithoutData(){const e=Xt(this);return new this.constructor(e)}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:t="png",quality:r=1,multiplier:s=1,enableRetinaScaling:i=!1}=e,o=s*(i?this.getRetinaScaling():1);return xh(this.toCanvasElement(o,e),t,r)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:t,height:r,left:s,top:i,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=(t||this.width)*e,l=(r||this.height)*e,c=this.getZoom(),u=this.width,h=this.height,d=this.skipControlsDrawing,f=c*e,p=this.viewportTransform,g=[f,0,0,f,(p[4]-(s||0))*e,(p[5]-(i||0))*e],y=this.enableRetinaScaling,b=Xt({width:a,height:l}),w=o?this._objects.filter(v=>o(v)):this._objects;return this.enableRetinaScaling=!1,this.viewportTransform=g,this.width=a,this.height=l,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),w),this.viewportTransform=p,this.width=u,this.height=h,this.calcViewportBoundaries(),this.enableRetinaScaling=y,this.skipControlsDrawing=d,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),vi.cancelByCanvas(this),this.disposed=!0,new Promise((e,t)=>{const r=()=>{this.destroy(),e(!0)};r.kill=t,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?e(!1):this.nextRenderHandle?this.__cleanupTask=r:r()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(e=>e.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}T(xs,"ownDefaults",Pb);const Mb=["touchstart","touchmove","touchend"],Db=n=>{const e=Th(n.target),t=function(r){const s=r.changedTouches;return s&&s[0]?s[0]:r}(n);return new D(t.clientX+e.left,t.clientY+e.top)},ta=n=>Mb.includes(n.type)||n.pointerType==="touch",ra=n=>{n.preventDefault(),n.stopPropagation()},nr=n=>{let e=0,t=0,r=0,s=0;for(let i=0,o=n.length;i<o;i++){const{x:a,y:l}=n[i];(a>r||!i)&&(r=a),(a<e||!i)&&(e=a),(l>s||!i)&&(s=l),(l<t||!i)&&(t=l)}return{left:e,top:t,width:r-e,height:s-t}},Ab=["translateX","translateY","scaleX","scaleY"],Rb=(n,e)=>Ci(n,Ue(e,n.calcOwnMatrix())),Ci=(n,e)=>{const t=xi(e),{translateX:r,translateY:s,scaleX:i,scaleY:o}=t,a=we(t,Ab),l=new D(r,s);n.flipX=!1,n.flipY=!1,Object.assign(n,a),n.set({scaleX:i,scaleY:o}),n.setPositionByOrigin(l,K,K)},jb=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},Ph=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),rl=(n,e,t)=>{const r=n/2,s=e/2,i=[new D(-r,-s),new D(r,-s),new D(-r,s),new D(r,s)].map(a=>a.transform(t)),o=nr(i);return new D(o.width,o.height)},Gi=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:st;return Ue(Dt(arguments.length>1&&arguments[1]!==void 0?arguments[1]:st),n)},mn=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st;return n.transform(Gi(e,t))},Fb=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:st,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:st;return n.transform(Gi(e,t),!0)},Ib=(n,e,t)=>{const r=Gi(e,t);return Ci(n,Ue(r,n.calcOwnMatrix())),r},Mh=(n,e)=>{var t;const{transform:{target:r}}=e;(t=r.canvas)===null||t===void 0||t.fire("object:".concat(n),k(k({},e),{},{target:r})),r.fire(n,e)},Lb={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ne=n=>typeof n=="string"?Lb[n]:n-.5,_i="not-allowed";function Dh(n){return Ne(n.originX)===Ne(K)&&Ne(n.originY)===Ne(K)}function Oc(n){return .5-Ne(n)}const At=(n,e)=>n[e],Ah=(n,e,t,r)=>({e:n,transform:e,pointer:new D(t,r)});function Rh(n,e){const t=n.getTotalAngle()+Nr(Math.atan2(e.y,e.x))+360;return Math.round(t%360/45)}function nl(n,e,t,r,s){var i;let{target:o,corner:a}=n;const l=o.controls[a],c=((i=o.canvas)===null||i===void 0?void 0:i.getZoom())||1,u=o.padding/c,h=function(d,f,p,g){const y=d.getRelativeCenterPoint(),b=p!==void 0&&g!==void 0?d.translateToGivenOrigin(y,K,K,p,g):new D(d.left,d.top);return(d.angle?f.rotate(-je(d.angle),y):f).subtract(b)}(o,new D(r,s),e,t);return h.x>=u&&(h.x-=u),h.x<=-u&&(h.x+=u),h.y>=u&&(h.y-=u),h.y<=u&&(h.y+=u),h.x-=l.offsetX,h.y-=l.offsetY,h}const Bb=(n,e,t,r)=>{const{target:s,offsetX:i,offsetY:o}=e,a=t-i,l=r-o,c=!At(s,"lockMovementX")&&s.left!==a,u=!At(s,"lockMovementY")&&s.top!==l;return c&&s.set(le,a),u&&s.set(lt,l),(c||u)&&Mh(gh,Ah(n,e,t,r)),c||u};class jh{getSvgStyles(e){const t=this.fillRule?this.fillRule:"nonzero",r=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):ct,i=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=this.opacity!==void 0?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),d=as(We,this.fill);return[as(ut,this.stroke),"stroke-width: ",r,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",i,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",t,"; ","opacity: ",c,";",h,u].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(Si(r));return"".concat(s).concat(t,'" ')}_toSVG(e){return[""]}toSVG(e){return this._createBaseSVGMarkup(this._toSVG(e),{reviver:e})}toClipPathSVG(e){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(e),{reviver:e})}_createBaseClipPathSVGMarkup(e){let{reviver:t,additionalTransform:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(""),i=e.indexOf("COMMON_PARTS");return e[i]=s,t?t(e.join("")):e.join("")}_createBaseSVGMarkup(e){let{noStyle:t,reviver:r,withShadow:s,additionalTransform:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=t?"":'style="'.concat(this.getSvgStyles(),'" '),a=s?'style="'.concat(this.getSvgFilter(),'" '):"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,h=this.stroke,d=this.fill,f=this.shadow,p=[],g=e.indexOf("COMMON_PARTS");let y;l&&(l.clipPathId="CLIPPATH_".concat(yr()),y='<clipPath id="'.concat(l.clipPathId,`" >
`).concat(l.toClipPathSVG(r),`</clipPath>
`)),u&&p.push("<g ",a,this.getSvgCommons(),` >
`),p.push("<g ",this.getSvgTransform(!1),u?"":a+this.getSvgCommons(),` >
`);const b=[o,c,t?"":this.addPaintOrder()," ",i?'transform="'.concat(i,'" '):""].join("");return e[g]=b,_t(d)&&p.push(d.toSVG(this)),_t(h)&&p.push(h.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(y),p.push(e.join("")),p.push(`</g>
`),u&&p.push(`</g>
`),r?r(p.join("")):p.join("")}addPaintOrder(){return this.paintFirst!==We?' paint-order="'.concat(this.paintFirst,'" '):""}}function Ki(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Ec;const $r=String.raw(Ec||(Ec=vr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),Nb=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+$r+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+$r+"))?\\s+(.*)"),$b={cx:le,x:le,r:"radius",cy:lt,y:lt,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},bo="font-size",vo="clip-path";Ki(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]);Ki(["symbol","image","marker","pattern","view","svg"]);const Pc=Ki(["symbol","g","a","svg","clipPath","defs"]),Wb=new D(1,0),Fh=new D,Ih=(n,e)=>n.rotate(e),na=(n,e)=>new D(e).subtract(n),sa=n=>n.distanceFrom(Fh),ia=(n,e)=>Math.atan2(Jn(n,e),Vb(n,e)),zb=n=>ia(Wb,n),sl=n=>n.eq(Fh)?n:n.scalarDivide(sa(n)),Lh=function(n){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return sl(new D(-n.y,n.x).scalarMultiply(e?1:-1))},Jn=(n,e)=>n.x*e.y-n.y*e.x,Vb=(n,e)=>n.x*e.x+n.y*e.y,Mc=(n,e,t)=>{if(n.eq(e)||n.eq(t))return!0;const r=Jn(e,t),s=Jn(e,n),i=Jn(t,n);return r>=0?s>=0&&i<=0:!(s<=0&&i>=0)},Dc="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Ac=new RegExp("(?:\\s|^)"+Dc+Dc+"("+$r+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class sr{constructor(e){const t=typeof e=="string"?sr.parseShadow(e):e;Object.assign(this,sr.ownDefaults,t),this.id=yr()}static parseShadow(e){const t=e.trim(),[,r=0,s=0,i=0]=(Ac.exec(t)||[]).map(o=>parseFloat(o)||0);return{color:(t.replace(Ac,"")||"rgb(0,0,0)").trim(),offsetX:r,offsetY:s,blur:i}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(e){const t=Ih(new D(this.offsetX,this.offsetY),je(-e.angle)),r=new ue(this.color);let s=40,i=40;return e.width&&e.height&&(s=100*Me((Math.abs(t.x)+this.blur)/e.width,re.NUM_FRACTION_DIGITS)+20,i=100*Me((Math.abs(t.y)+this.blur)/e.height,re.NUM_FRACTION_DIGITS)+20),e.flipX&&(t.x*=-1),e.flipY&&(t.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(i,'%" height="').concat(100+2*i,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Me(this.blur?this.blur/2:0,re.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Me(t.x,re.NUM_FRACTION_DIGITS),'" dy="').concat(Me(t.y,re.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(r.toRgb(),'" flood-opacity="').concat(r.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const e={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},t=sr.ownDefaults;return this.includeDefaultValues?e:tl(e,(r,s)=>r!==t[s])}static async fromObject(e){return new this(e)}}T(sr,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),T(sr,"type","shadow"),W.setClass(sr,"shadow");const Sn=(n,e,t)=>Math.max(n,Math.min(e,t)),Hb=[lt,le,dt,wt,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Tn,kn],ur=[We,ut,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],qb={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:le,originY:lt,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:We,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Xb=(n,e,t,r)=>-t*Math.cos(n/r*ys)+t+e,Yb=()=>!1;class il{constructor(e){let{startValue:t,byValue:r,duration:s=500,delay:i=0,easing:o=Xb,onStart:a=ni,onChange:l=ni,onComplete:c=ni,abort:u=Yb,target:h}=e;T(this,"_state","pending"),T(this,"durationProgress",0),T(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=i,this.easing=o,this._onStart=a,this._onChange=l,this._onComplete=c,this._abort=u,this.target=h,this.startValue=t,this.byValue=r,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const e=t=>{this._state==="pending"&&(this.startTime=t||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>ii(e),this.delay):ii(e)}tick(e){const t=(e||+new Date)-this.startTime,r=Math.min(t,this.duration);this.durationProgress=r/this.duration;const{value:s,valueProgress:i}=this.calculate(r);this.value=Object.freeze(s),this.valueProgress=i,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):t>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),ii(this.tick)))}register(){vi.push(this)}unregister(){vi.remove(this)}abort(){this._state="aborted",this.unregister()}}const Ub=["startValue","endValue"];class Gb extends il{constructor(e){let{startValue:t=0,endValue:r=100}=e;super(k(k({},we(e,Ub)),{},{startValue:t,byValue:r-t}))}calculate(e){const t=this.easing(e,this.startValue,this.byValue,this.duration);return{value:t,valueProgress:Math.abs((t-this.startValue)/this.byValue)}}}const Kb=["startValue","endValue"];class Zb extends il{constructor(e){let{startValue:t=[0],endValue:r=[100]}=e;super(k(k({},we(e,Kb)),{},{startValue:t,byValue:r.map((s,i)=>s-t[i])}))}calculate(e){const t=this.startValue.map((r,s)=>this.easing(e,r,this.byValue[s],this.duration,s));return{value:t,valueProgress:Math.abs((t[0]-this.startValue[0])/this.byValue[0])}}}const Jb=["startValue","endValue","easing","onChange","onComplete","abort"],Qb=(n,e,t,r)=>e+t*(1-Math.cos(n/r*ys)),xo=n=>n&&((e,t,r)=>n(new ue(e).toRgba(),t,r));class ev extends il{constructor(e){let{startValue:t,endValue:r,easing:s=Qb,onChange:i,onComplete:o,abort:a}=e,l=we(e,Jb);const c=new ue(t).getSource(),u=new ue(r).getSource();super(k(k({},l),{},{startValue:c,byValue:u.map((h,d)=>h-c[d]),easing:s,onChange:xo(i),onComplete:xo(o),abort:xo(a)}))}calculate(e){const[t,r,s,i]=this.startValue.map((a,l)=>this.easing(e,a,this.byValue[l],this.duration,l)),o=[...[t,r,s].map(Math.round),Sn(0,i,1)];return{value:o,valueProgress:o.map((a,l)=>this.byValue[l]!==0?Math.abs((a-this.startValue[l])/this.byValue[l]):0).find(a=>a!==0)||0}}}function Bh(n){const e=(t=>Array.isArray(t.startValue)||Array.isArray(t.endValue))(n)?new Zb(n):new Gb(n);return e.start(),e}function tv(n){const e=new ev(n);return e.start(),e}class Pe{constructor(e){this.status=e,this.points=[]}includes(e){return this.points.some(t=>t.eq(e))}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.points=this.points.concat(t.filter(s=>!this.includes(s))),this}static isPointContained(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(t.eq(r))return e.eq(t);if(t.x===r.x)return e.x===t.x&&(s||e.y>=Math.min(t.y,r.y)&&e.y<=Math.max(t.y,r.y));if(t.y===r.y)return e.y===t.y&&(s||e.x>=Math.min(t.x,r.x)&&e.x<=Math.max(t.x,r.x));{const i=na(t,r),o=na(t,e).divide(i);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(e,t){const r=new D(e).setX(Math.min(e.x-1,...t.map(i=>i.x)));let s=0;for(let i=0;i<t.length;i++){const o=this.intersectSegmentSegment(t[i],t[(i+1)%t.length],e,r);if(o.includes(e))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(e,t,r,s){let i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const a=t.x-e.x,l=t.y-e.y,c=s.x-r.x,u=s.y-r.y,h=e.x-r.x,d=e.y-r.y,f=c*d-u*h,p=a*d-l*h,g=u*a-c*l;if(g!==0){const y=f/g,b=p/g;return(i||0<=y&&y<=1)&&(o||0<=b&&b<=1)?new Pe("Intersection").append(new D(e.x+y*a,e.y+y*l)):new Pe}if(f===0||p===0){const y=i||o||Pe.isPointContained(e,r,s)||Pe.isPointContained(t,r,s)||Pe.isPointContained(r,e,t)||Pe.isPointContained(s,e,t);return new Pe(y?"Coincident":void 0)}return new Pe("Parallel")}static intersectSegmentLine(e,t,r,s){return Pe.intersectLineLine(e,t,r,s,!1,!0)}static intersectSegmentSegment(e,t,r,s){return Pe.intersectLineLine(e,t,r,s,!1,!1)}static intersectLinePolygon(e,t,r){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const i=new Pe,o=r.length;for(let a,l,c,u=0;u<o;u++){if(a=r[u],l=r[(u+1)%o],c=Pe.intersectLineLine(e,t,a,l,s,!1),c.status==="Coincident")return c;i.append(...c.points)}return i.points.length>0&&(i.status="Intersection"),i}static intersectSegmentPolygon(e,t,r){return Pe.intersectLinePolygon(e,t,r,!1)}static intersectPolygonPolygon(e,t){const r=new Pe,s=e.length,i=[];for(let o=0;o<s;o++){const a=e[o],l=e[(o+1)%s],c=Pe.intersectSegmentPolygon(a,l,t);c.status==="Coincident"?(i.push(c),r.append(a,l)):r.append(...c.points)}return i.length>0&&i.length===e.length?new Pe("Coincident"):(r.points.length>0&&(r.status="Intersection"),r)}static intersectPolygonRectangle(e,t,r){const s=t.min(r),i=t.max(r),o=new D(i.x,s.y),a=new D(s.x,i.y);return Pe.intersectPolygonPolygon(e,[s,o,i,a])}}class rv extends vh{getX(){return this.getXY().x}setX(e){this.setXY(this.getXY().setX(e))}getY(){return this.getXY().y}setY(e){this.setXY(this.getXY().setY(e))}getRelativeX(){return this.left}setRelativeX(e){this.left=e}getRelativeY(){return this.top}setRelativeY(e){this.top=e}getXY(){const e=this.getRelativeXY();return this.group?ot(e,this.group.calcTransformMatrix()):e}setXY(e,t,r){this.group&&(e=ot(e,Dt(this.group.calcTransformMatrix()))),this.setRelativeXY(e,t,r)}getRelativeXY(){return new D(this.left,this.top)}setRelativeXY(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(e,t,r)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:e,tr:t,br:r,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),i=[e,t,r,s];if(this.group){const o=this.group.calcTransformMatrix();return i.map(a=>ot(a,o))}return i}intersectsWithRect(e,t){return Pe.intersectPolygonRectangle(this.getCoords(),e,t).status==="Intersection"}intersectsWithObject(e){const t=Pe.intersectPolygonPolygon(this.getCoords(),e.getCoords());return t.status==="Intersection"||t.status==="Coincident"||e.isContainedWithinObject(this)||this.isContainedWithinObject(e)}isContainedWithinObject(e){return this.getCoords().every(t=>e.containsPoint(t))}isContainedWithinRect(e,t){const{left:r,top:s,width:i,height:o}=this.getBoundingRect();return r>=e.x&&r+i<=t.x&&s>=e.y&&s+o<=t.y}isOverlapping(e){return this.intersectsWithObject(e)||this.isContainedWithinObject(e)||e.isContainedWithinObject(this)}containsPoint(e){return Pe.isPointInPolygon(e,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return!!this.getCoords().some(r=>r.x<=t.x&&r.x>=e.x&&r.y<=t.y&&r.y>=e.y)||!!this.intersectsWithRect(e,t)||this.containsPoint(e.midPointFrom(t))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:e,br:t}=this.canvas.vptCoords;return this.intersectsWithRect(e,t)?!0:this.getCoords().every(r=>(r.x>=t.x||r.x<=e.x)&&(r.y>=t.y||r.y<=e.y))&&this.containsPoint(e.midPointFrom(t))}getBoundingRect(){return nr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(e){this._set(dt,e),this._set(wt,e),this.setCoords()}scaleToWidth(e){const t=this.getBoundingRect().width/this.getScaledWidth();return this.scale(e/this.width/t)}scaleToHeight(e){const t=this.getBoundingRect().height/this.getScaledHeight();return this.scale(e/this.height/t)}getCanvasRetinaScaling(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.getRetinaScaling())||1}getTotalAngle(){return this.group?Nr(Sh(this.calcTransformMatrix())):this.angle}getViewportTransform(){var e;return((e=this.canvas)===null||e===void 0?void 0:e.viewportTransform)||st.concat()}calcACoords(){const e=vs({angle:this.angle}),{x:t,y:r}=this.getRelativeCenterPoint(),s=bs(t,r),i=Ue(s,e),o=this._getTransformedDimensions(),a=o.x/2,l=o.y/2;return{tl:ot({x:-a,y:-l},i),tr:ot({x:a,y:-l},i),bl:ot({x:-a,y:l},i),br:ot({x:a,y:l},i)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=[];return!e&&this.group&&(t=this.group.transformMatrixKey(e)),t.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ne(this.originX),Ne(this.originY)),t}calcTransformMatrix(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],t=this.calcOwnMatrix();if(e||!this.group)return t;const r=this.transformMatrixKey(e),s=this.matrixCache;return s&&s.key.every((i,o)=>i===r[o])?s.value:(this.group&&(t=Ue(this.group.calcTransformMatrix(!1),t)),this.matrixCache={key:r,value:t},t)}calcOwnMatrix(){const e=this.transformMatrixKey(!0),t=this.ownMatrixCache;if(t&&t.key===e)return t.value;const r=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:r.x,translateY:r.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},i=Ob(s);return this.ownMatrixCache={key:e,value:i},i}_getNonTransformedDimensions(){return new D(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(e){return this._getTransformedDimensions(e).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},e),r=t.strokeWidth;let s=r,i=0;this.strokeUniform&&(s=0,i=r);const o=t.width+s,a=t.height+s;let l;return l=t.skewX===0&&t.skewY===0?new D(o*t.scaleX,a*t.scaleY):rl(o,a,Yi(t)),l.scalarAdd(i)}translateToGivenOrigin(e,t,r,s,i){let o=e.x,a=e.y;const l=Ne(s)-Ne(t),c=Ne(i)-Ne(r);if(l||c){const u=this._getTransformedDimensions();o+=l*u.x,a+=c*u.y}return new D(o,a)}translateToCenterPoint(e,t,r){if(t===K&&r===K)return e;const s=this.translateToGivenOrigin(e,t,r,K,K);return this.angle?s.rotate(je(this.angle),e):s}translateToOriginPoint(e,t,r){const s=this.translateToGivenOrigin(e,K,K,t,r);return this.angle?s.rotate(je(this.angle),e):s}getCenterPoint(){const e=this.getRelativeCenterPoint();return this.group?ot(e,this.group.calcTransformMatrix()):e}getRelativeCenterPoint(){return this.translateToCenterPoint(new D(this.left,this.top),this.originX,this.originY)}getPointByOrigin(e,t){return this.translateToOriginPoint(this.getRelativeCenterPoint(),e,t)}setPositionByOrigin(e,t,r){const s=this.translateToCenterPoint(e,t,r),i=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:i.x,top:i.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),le,lt)}}const nv=["type"],sv=["extraParam"];let Kt=class ai extends rv{static getDefaults(){return ai.ownDefaults}get type(){const e=this.constructor.type;return e==="FabricObject"?"object":e.toLowerCase()}set type(e){mr("warn","Setting type has no effect",e)}constructor(e){super(),T(this,"_cacheContext",null),Object.assign(this,ai.ownDefaults),this.setOptions(e)}_createCacheCanvas(){this._cacheCanvas=jt(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(e){const t=e.width,r=e.height,s=re.maxCacheSideLimit,i=re.minCacheSideLimit;if(t<=s&&r<=s&&t*r<=re.perfLimitSizeTotal)return t<i&&(e.width=i),r<i&&(e.height=i),e;const o=t/r,[a,l]=Zn.limitDimsByArea(o),c=Sn(i,a,s),u=Sn(i,l,s);return t>c&&(e.zoomX/=t/c,e.width=c,e.capped=!0),r>u&&(e.zoomY/=r/u,e.height=u,e.capped=!0),e}_getCacheCanvasDimensions(){const e=this.getTotalObjectScaling(),t=this._getTransformedDimensions({skewX:0,skewY:0}),r=t.x*e.x/this.scaleX,s=t.y*e.y/this.scaleY;return{width:Math.ceil(r+2),height:Math.ceil(s+2),zoomX:e.x,zoomY:e.y,x:r,y:s}}_updateCacheCanvas(){const e=this._cacheCanvas,t=this._cacheContext,{width:r,height:s,zoomX:i,zoomY:o,x:a,y:l}=this._limitCacheSize(this._getCacheCanvasDimensions()),c=r!==e.width||s!==e.height,u=this.zoomX!==i||this.zoomY!==o;if(!e||!t)return!1;if(c||u){r!==e.width||s!==e.height?(e.width=r,e.height=s):(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height));const h=a/2,d=l/2;return this.cacheTranslationX=Math.round(e.width/2-h)+h,this.cacheTranslationY=Math.round(e.height/2-d)+d,t.translate(this.cacheTranslationX,this.cacheTranslationY),t.scale(i,o),this.zoomX=i,this.zoomY=o,!0}return!1}setOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(e)}transform(e){const t=this.group&&!this.group._transformDone||this.group&&this.canvas&&e===this.canvas.contextTop,r=this.calcTransformMatrix(!t);e.transform(r[0],r[1],r[2],r[3],r[4],r[5])}getObjectScaling(){if(!this.group)return new D(Math.abs(this.scaleX),Math.abs(this.scaleY));const e=xi(this.calcTransformMatrix());return new D(Math.abs(e.scaleX),Math.abs(e.scaleY))}getTotalObjectScaling(){const e=this.getObjectScaling();if(this.canvas){const t=this.canvas.getZoom(),r=this.getCanvasRetinaScaling();return e.scalarMultiply(t*r)}return e}getObjectOpacity(){let e=this.opacity;return this.group&&(e*=this.group.getObjectOpacity()),e}_constrainScale(e){return Math.abs(e)<this.minScaleLimit?e<0?-this.minScaleLimit:this.minScaleLimit:e===0?1e-4:e}_set(e,t){e!==dt&&e!==wt||(t=this._constrainScale(t)),e===dt&&t<0?(this.flipX=!this.flipX,t*=-1):e==="scaleY"&&t<0?(this.flipY=!this.flipY,t*=-1):e!=="shadow"||!t||t instanceof sr||(t=new sr(t));const r=this[e]!==t;return this[e]=t,r&&this.constructor.cacheProperties.includes(e)&&(this.dirty=!0),this.parent&&(this.dirty||r&&this.constructor.stateProperties.includes(e))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(e){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(e.save(),this._setupCompositeOperation(e),this.drawSelectionBackground(e),this.transform(e),this._setOpacity(e),this._setShadow(e),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(e)):(this._removeCacheCanvas(),this.drawObject(e,!1,{}),this.dirty=!1),e.restore())}drawSelectionBackground(e){}renderCache(e){if(e=e||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext){const{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i}=this,{width:o,height:a}=this._cacheCanvas;this.drawObject(this._cacheContext,e.forClipping,{zoomX:t,zoomY:r,cacheTranslationX:s,cacheTranslationY:i,width:o,height:a,parentClipPaths:[]}),this.dirty=!1}}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ut&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.objectCaching&&(!this.parent||!this.parent.isOnACache())||this.needsItsOwnCache(),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(e,t,r){e.save(),t.inverted?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="destination-in",e.setTransform(1,0,0,1,0,0),e.drawImage(r,0,0),e.restore()}drawObject(e,t,r){const s=this.fill,i=this.stroke;t?(this.fill="black",this.stroke="",this._setClippingProperties(e)):this._renderBackground(e),this._render(e),this._drawClipPath(e,this.clipPath,r),this.fill=s,this.stroke=i}createClipPathLayer(e,t){const r=Xt(t),s=r.getContext("2d");if(s.translate(t.cacheTranslationX,t.cacheTranslationY),s.scale(t.zoomX,t.zoomY),e._cacheCanvas=r,t.parentClipPaths.forEach(i=>{i.transform(s)}),t.parentClipPaths.push(e),e.absolutePositioned){const i=Dt(this.calcTransformMatrix());s.transform(i[0],i[1],i[2],i[3],i[4],i[5])}return e.transform(s),e.drawObject(s,!0,t),r}_drawClipPath(e,t,r){if(!t)return;t._transformDone=!0;const s=this.createClipPathLayer(t,r);this.drawClipPathOnCache(e,t,s)}drawCacheOnCanvas(e){e.scale(1/this.zoomX,1/this.zoomY),e.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let e=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const t=this._cacheCanvas,r=this._cacheContext;return!(!t||!r||e||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(t&&r&&!e&&(r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,t.width,t.height),r.restore()),!0)}_renderBackground(e){if(!this.backgroundColor)return;const t=this._getNonTransformedDimensions();e.fillStyle=this.backgroundColor,e.fillRect(-t.x/2,-t.y/2,t.x,t.y),this._removeShadow(e)}_setOpacity(e){this.group&&!this.group._transformDone?e.globalAlpha=this.getObjectOpacity():e.globalAlpha*=this.opacity}_setStrokeStyles(e,t){const r=t.stroke;r&&(e.lineWidth=t.strokeWidth,e.lineCap=t.strokeLineCap,e.lineDashOffset=t.strokeDashOffset,e.lineJoin=t.strokeLineJoin,e.miterLimit=t.strokeMiterLimit,_t(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?this._applyPatternForTransformedGradient(e,r):(e.strokeStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.strokeStyle=t.stroke)}_setFillStyles(e,t){let{fill:r}=t;r&&(_t(r)?(e.fillStyle=r.toLive(e),this._applyPatternGradientTransform(e,r)):e.fillStyle=r)}_setClippingProperties(e){e.globalAlpha=1,e.strokeStyle="transparent",e.fillStyle="#000000"}_setLineDash(e,t){t&&t.length!==0&&e.setLineDash(t)}_setShadow(e){if(!this.shadow)return;const t=this.shadow,r=this.canvas,s=this.getCanvasRetinaScaling(),[i,,,o]=(r==null?void 0:r.viewportTransform)||st,a=i*s,l=o*s,c=t.nonScaling?new D(1,1):this.getObjectScaling();e.shadowColor=t.color,e.shadowBlur=t.blur*re.browserShadowBlurConstant*(a+l)*(c.x+c.y)/4,e.shadowOffsetX=t.offsetX*a*c.x,e.shadowOffsetY=t.offsetY*l*c.y}_removeShadow(e){this.shadow&&(e.shadowColor="",e.shadowBlur=e.shadowOffsetX=e.shadowOffsetY=0)}_applyPatternGradientTransform(e,t){if(!_t(t))return{offsetX:0,offsetY:0};const r=t.gradientTransform||t.patternTransform,s=-this.width/2+t.offsetX||0,i=-this.height/2+t.offsetY||0;return t.gradientUnits==="percentage"?e.transform(this.width,0,0,this.height,s,i):e.transform(1,0,0,1,s,i),r&&e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),{offsetX:s,offsetY:i}}_renderPaintInOrder(e){this.paintFirst===ut?(this._renderStroke(e),this._renderFill(e)):(this._renderFill(e),this._renderStroke(e))}_render(e){}_renderFill(e){this.fill&&(e.save(),this._setFillStyles(e,this),this.fillRule==="evenodd"?e.fill("evenodd"):e.fill(),e.restore())}_renderStroke(e){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this.strokeUniform){const t=this.getObjectScaling();e.scale(1/t.x,1/t.y)}this._setLineDash(e,this.strokeDashArray),this._setStrokeStyles(e,this),e.stroke(),e.restore()}}_applyPatternForTransformedGradient(e,t){var r;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),i=this.getCanvasRetinaScaling(),o=s.x/this.scaleX/i,a=s.y/this.scaleY/i,l=Xt({width:Math.ceil(o),height:Math.ceil(a)}),c=l.getContext("2d");c&&(c.beginPath(),c.moveTo(0,0),c.lineTo(o,0),c.lineTo(o,a),c.lineTo(0,a),c.closePath(),c.translate(o/2,a/2),c.scale(s.zoomX/this.scaleX/i,s.zoomY/this.scaleY/i),this._applyPatternGradientTransform(c,t),c.fillStyle=t.toLive(e),c.fill(),e.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),e.scale(i*this.scaleX/s.zoomX,i*this.scaleY/s.zoomY),e.strokeStyle=(r=c.createPattern(l,"no-repeat"))!==null&&r!==void 0?r:"")}_findCenterFromElement(){return new D(this.left+this.width/2,this.top+this.height/2)}clone(e){const t=this.toObject(e);return this.constructor.fromObject(t)}cloneAsImage(e){const t=this.toCanvasElement(e);return new(W.getClass("image"))(t)}toCanvasElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=Ph(this),r=this.group,s=this.shadow,i=Math.abs,o=e.enableRetinaScaling?ph():1,a=(e.multiplier||1)*o,l=e.canvasProvider||(w=>new xs(w,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,e.withoutTransform&&jb(this),e.withoutShadow&&(this.shadow=null),e.viewportTransform&&Ib(this,this.getViewportTransform()),this.setCoords();const c=jt(),u=this.getBoundingRect(),h=this.shadow,d=new D;if(h){const w=h.blur,v=h.nonScaling?new D(1,1):this.getObjectScaling();d.x=2*Math.round(i(h.offsetX)+w)*i(v.x),d.y=2*Math.round(i(h.offsetY)+w)*i(v.y)}const f=u.width+d.x,p=u.height+d.y;c.width=Math.ceil(f),c.height=Math.ceil(p);const g=l(c);e.format==="jpeg"&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new D(g.width/2,g.height/2),K,K);const y=this.canvas;g._objects=[this],this.set("canvas",g),this.setCoords();const b=g.toCanvasElement(a||1,e);return this.set("canvas",y),this.shadow=s,r&&(this.group=r),this.set(t),this.setCoords(),g._objects=[],g.destroy(),b}toDataURL(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xh(this.toCanvasElement(e),e.format||"png",e.quality||1)}isType(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.constructor.type)||t.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(e){const{centeredRotation:t,originX:r,originY:s}=this;if(t){const{x:i,y:o}=this.getRelativeCenterPoint();this.originX=K,this.originY=K,this.left=i,this.top=o}if(this.set("angle",e),t){const{x:i,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),r,s);this.left=i,this.top=o,this.originX=r,this.originY=s}}setOnGroup(){}_setupCompositeOperation(e){this.globalCompositeOperation&&(e.globalCompositeOperation=this.globalCompositeOperation)}dispose(){vi.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&qt().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(e,t){return Object.entries(e).reduce((r,s)=>{let[i,o]=s;return r[i]=this._animate(i,o,t),r},{})}_animate(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=e.split("."),i=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:a,onChange:l,onComplete:c}=r,u=k(k({},r),{},{target:this,startValue:a??s.reduce((h,d)=>h[d],this),endValue:t,abort:o==null?void 0:o.bind(this),onChange:(h,d,f)=>{s.reduce((p,g,y)=>(y===s.length-1&&(p[g]=h),p[g]),this),l&&l(h,d,f)},onComplete:(h,d,f)=>{this.setCoords(),c&&c(h,d,f)}});return i?tv(u):Bh(u)}isDescendantOf(e){const{parent:t,group:r}=this;return t===e||r===e||!!t&&t.isDescendantOf(e)||!!r&&r!==t&&r.isDescendantOf(e)}getAncestors(){const e=[];let t=this;do t=t.parent,t&&e.push(t);while(t);return e}findCommonAncestors(e){if(this===e)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const t=this.getAncestors(),r=e.getAncestors();if(t.length===0&&r.length>0&&this===r[r.length-1])return{fork:[],otherFork:[e,...r.slice(0,r.length-1)],common:[this]};for(let s,i=0;i<t.length;i++){if(s=t[i],s===e)return{fork:[this,...t.slice(0,i)],otherFork:[],common:t.slice(i)};for(let o=0;o<r.length;o++){if(this===r[o])return{fork:[],otherFork:[e,...r.slice(0,o)],common:[this,...t]};if(s===r[o])return{fork:[this,...t.slice(0,i)],otherFork:[e,...r.slice(0,o)],common:t.slice(i)}}}return{fork:[this,...t],otherFork:[e,...r],common:[]}}hasCommonAncestors(e){const t=this.findCommonAncestors(e);return t&&!!t.common.length}isInFrontOf(e){if(this===e)return;const t=this.findCommonAncestors(e);if(t.fork.includes(e))return!0;if(t.otherFork.includes(this))return!1;const r=t.common[0]||this.canvas;if(!r)return;const s=t.fork.pop(),i=t.otherFork.pop(),o=r._objects.indexOf(s),a=r._objects.indexOf(i);return o>-1&&o>a}toObject(){const e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(ai.customProperties,this.constructor.customProperties||[]);let t;const r=re.NUM_FRACTION_DIGITS,{clipPath:s,fill:i,stroke:o,shadow:a,strokeDashArray:l,left:c,top:u,originX:h,originY:d,width:f,height:p,strokeWidth:g,strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:w,strokeUniform:v,strokeMiterLimit:S,scaleX:x,scaleY:O,angle:P,flipX:M,flipY:L,opacity:m,visible:E,backgroundColor:j,fillRule:R,paintFirst:I,globalCompositeOperation:F,skewX:B,skewY:$}=this;s&&!s.excludeFromExport&&(t=s.toObject(e.concat("inverted","absolutePositioned")));const z=ne=>Me(ne,r),N=k(k({},On(this,e)),{},{type:this.constructor.type,version:Jo,originX:h,originY:d,left:z(c),top:z(u),width:z(f),height:z(p),fill:wc(i)?i.toObject():i,stroke:wc(o)?o.toObject():o,strokeWidth:z(g),strokeDashArray:l&&l.concat(),strokeLineCap:y,strokeDashOffset:b,strokeLineJoin:w,strokeUniform:v,strokeMiterLimit:z(S),scaleX:z(x),scaleY:z(O),angle:z(P),flipX:M,flipY:L,opacity:z(m),shadow:a&&a.toObject(),visible:E,backgroundColor:j,fillRule:R,paintFirst:I,globalCompositeOperation:F,skewX:z(B),skewY:z($)},t?{clipPath:t}:null);return this.includeDefaultValues?N:this._removeDefaultValues(N)}toDatalessObject(e){return this.toObject(e)}_removeDefaultValues(e){const t=this.constructor.getDefaults(),r=Object.keys(t).length>0?t:Object.getPrototypeOf(this);return tl(e,(s,i)=>{if(i===le||i===lt||i==="type")return!0;const o=r[i];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(e){let t=we(e,nv),r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=r,i=we(r,sv);return Ui(t,i).then(o=>s?(delete o[s],new this(t[s],o)):new this(o))}static fromObject(e,t){return this._fromObject(e,t)}};T(Kt,"stateProperties",Hb),T(Kt,"cacheProperties",ur),T(Kt,"ownDefaults",qb),T(Kt,"type","FabricObject"),T(Kt,"colorProperties",[We,ut,"backgroundColor"]),T(Kt,"customProperties",[]),W.setClass(Kt),W.setClass(Kt,"object");const En=(n,e,t)=>(r,s,i,o)=>{const a=e(r,s,i,o);return a&&Mh(n,k(k({},Ah(r,s,i,o)),t)),a};function Pn(n){return(e,t,r,s)=>{const{target:i,originX:o,originY:a}=t,l=i.getRelativeCenterPoint(),c=i.translateToOriginPoint(l,o,a),u=n(e,t,r,s);return i.setPositionByOrigin(c,t.originX,t.originY),u}}const Rc=En(is,Pn((n,e,t,r)=>{const s=nl(e,e.originX,e.originY,t,r);if(Ne(e.originX)===Ne(K)||Ne(e.originX)===Ne(Re)&&s.x<0||Ne(e.originX)===Ne(le)&&s.x>0){const{target:i}=e,o=i.strokeWidth/(i.strokeUniform?i.scaleX:1),a=Dh(e)?2:1,l=i.width,c=Math.abs(s.x*a/i.scaleX)-o;return i.set("width",Math.max(c,1)),l!==i.width}return!1}));function iv(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?ut:We,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor);let u,h=e,d=t;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",i>o?(u=i,n.scale(1,o/i),d=t*i/o):o>i?(u=o,n.scale(i/o,1),h=e*o/i):u=i,n.beginPath(),n.arc(h,d,u/2,0,mi,!1),n[l](),c&&n.stroke(),n.restore()}function ov(n,e,t,r,s){r=r||{};const i=this.sizeX||r.cornerSize||s.cornerSize,o=this.sizeY||r.cornerSize||s.cornerSize,a=r.transparentCorners!==void 0?r.transparentCorners:s.transparentCorners,l=a?ut:We,c=!a&&(r.cornerStrokeColor||s.cornerStrokeColor),u=i/2,h=o/2;n.save(),n.fillStyle=r.cornerColor||s.cornerColor||"",n.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor||"",n.translate(e,t);const d=s.getTotalAngle();n.rotate(je(d)),n["".concat(l,"Rect")](-u,-h,i,o),c&&n.strokeRect(-u,-h,i,o),n.restore()}class Et{constructor(e){T(this,"visible",!0),T(this,"actionName",Xi),T(this,"angle",0),T(this,"x",0),T(this,"y",0),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"sizeX",0),T(this,"sizeY",0),T(this,"touchSizeX",0),T(this,"touchSizeY",0),T(this,"cursorStyle","crosshair"),T(this,"withConnection",!1),Object.assign(this,e)}shouldActivate(e,t,r,s){var i;let{tl:o,tr:a,br:l,bl:c}=s;return((i=t.canvas)===null||i===void 0?void 0:i.getActiveObject())===t&&t.isControlVisible(e)&&Pe.isPointInPolygon(r,[o,a,l,c])}getActionHandler(e,t,r){return this.actionHandler}getMouseDownHandler(e,t,r){return this.mouseDownHandler}getMouseUpHandler(e,t,r){return this.mouseUpHandler}cursorStyleHandler(e,t,r){return t.cursorStyle}getActionName(e,t,r){return t.actionName}getVisibility(e,t){var r,s;return(r=(s=e._controlsVisibility)===null||s===void 0?void 0:s[t])!==null&&r!==void 0?r:this.visible}setVisibility(e,t,r){this.visible=e}positionHandler(e,t,r,s){return new D(this.x*e.x+this.offsetX,this.y*e.y+this.offsetY).transform(t)}calcCornerCoords(e,t,r,s,i,o){const a=Qa([bs(r,s),vs({angle:e}),el((i?this.touchSizeX:this.sizeX)||t,(i?this.touchSizeY:this.sizeY)||t)]);return{tl:new D(-.5,-.5).transform(a),tr:new D(.5,-.5).transform(a),br:new D(.5,.5).transform(a),bl:new D(-.5,.5).transform(a)}}render(e,t,r,s,i){((s=s||{}).cornerStyle||i.cornerStyle)==="circle"?iv.call(this,e,t,r,s,i):ov.call(this,e,t,r,s,i)}}const av=(n,e,t)=>t.lockRotation?_i:e.cursorStyle,lv=En(mh,Pn((n,e,t,r)=>{let{target:s,ex:i,ey:o,theta:a,originX:l,originY:c}=e;const u=s.translateToOriginPoint(s.getRelativeCenterPoint(),l,c);if(At(s,"lockRotation"))return!1;const h=Math.atan2(o-u.y,i-u.x),d=Math.atan2(r-u.y,t-u.x);let f=Nr(d-h+a);if(s.snapAngle&&s.snapAngle>0){const g=s.snapAngle,y=s.snapThreshold||g,b=Math.ceil(f/g)*g,w=Math.floor(f/g)*g;Math.abs(f-w)<y?f=w:Math.abs(f-b)<y&&(f=b)}f<0&&(f=360+f),f%=360;const p=s.angle!==f;return s.angle=f,p}));function Nh(n,e){const t=e.canvas,r=n[t.uniScaleKey];return t.uniformScaling&&!r||!t.uniformScaling&&r}function $h(n,e,t){const r=At(n,"lockScalingX"),s=At(n,"lockScalingY");if(r&&s||!e&&(r||s)&&t||r&&e==="x"||s&&e==="y")return!0;const{width:i,height:o,strokeWidth:a}=n;return i===0&&a===0&&e!=="y"||o===0&&a===0&&e!=="x"}const cv=["e","se","s","sw","w","nw","n","ne","e"],Xn=(n,e,t)=>{const r=Nh(n,t);if($h(t,e.x!==0&&e.y===0?"x":e.x===0&&e.y!==0?"y":"",r))return _i;const s=Rh(t,e);return"".concat(cv[s],"-resize")};function ol(n,e,t,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const i=e.target,o=s.by,a=Nh(n,i);let l,c,u,h,d,f;if($h(i,o,a))return!1;if(e.gestureScale)c=e.scaleX*e.gestureScale,u=e.scaleY*e.gestureScale;else{if(l=nl(e,e.originX,e.originY,t,r),d=o!=="y"?Math.sign(l.x||e.signX||1):1,f=o!=="x"?Math.sign(l.y||e.signY||1):1,e.signX||(e.signX=d),e.signY||(e.signY=f),At(i,"lockScalingFlip")&&(e.signX!==d||e.signY!==f))return!1;if(h=i._getTransformedDimensions(),a&&!o){const y=Math.abs(l.x)+Math.abs(l.y),{original:b}=e,w=y/(Math.abs(h.x*b.scaleX/i.scaleX)+Math.abs(h.y*b.scaleY/i.scaleY));c=b.scaleX*w,u=b.scaleY*w}else c=Math.abs(l.x*i.scaleX/h.x),u=Math.abs(l.y*i.scaleY/h.y);Dh(e)&&(c*=2,u*=2),e.signX!==d&&o!=="y"&&(e.originX=Oc(e.originX),c*=-1,e.signX=d),e.signY!==f&&o!=="x"&&(e.originY=Oc(e.originY),u*=-1,e.signY=f)}const p=i.scaleX,g=i.scaleY;return o?(o==="x"&&i.set(dt,c),o==="y"&&i.set(wt,u)):(!At(i,"lockScalingX")&&i.set(dt,c),!At(i,"lockScalingY")&&i.set(wt,u)),p!==i.scaleX||g!==i.scaleY}const Es=En(qi,Pn((n,e,t,r)=>ol(n,e,t,r))),uv=En(qi,Pn((n,e,t,r)=>ol(n,e,t,r,{by:"x"}))),hv=En(qi,Pn((n,e,t,r)=>ol(n,e,t,r,{by:"y"}))),dv=["target","ex","ey","skewingSide"],So={x:{counterAxis:"y",scale:dt,skew:Tn,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:wt,skew:kn,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},fv=["ns","nesw","ew","nwse"],pv=(n,e,t)=>{if(e.x!==0&&At(t,"lockSkewingY")||e.y!==0&&At(t,"lockSkewingX"))return _i;const r=Rh(t,e)%4;return"".concat(fv[r],"-resize")};function Wh(n,e,t,r,s){const{target:i}=t,{counterAxis:o,origin:a,lockSkewing:l,skew:c,flip:u}=So[n];if(At(i,l))return!1;const{origin:h,flip:d}=So[o],f=Ne(t[h])*(i[d]?-1:1),p=-Math.sign(f)*(i[u]?-1:1),g=.5*-((i[c]===0&&nl(t,K,K,r,s)[n]>0||i[c]>0?1:-1)*p)+.5;return En(yh,Pn((b,w,v,S)=>function(x,O,P){let{target:M,ex:L,ey:m,skewingSide:E}=O,j=we(O,dv);const{skew:R}=So[x],I=P.subtract(new D(L,m)).divide(new D(M.scaleX,M.scaleY))[x],F=M[R],B=j[R],$=Math.tan(je(B)),z=x==="y"?M._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:M._getTransformedDimensions({scaleX:1,scaleY:1}).y,N=2*I*E/Math.max(z,1)+$,ne=Nr(Math.atan(N));M.set(R,ne);const ce=F!==M[R];if(ce&&x==="y"){const{skewX:Ie,scaleX:te}=M,J=M._getTransformedDimensions({skewY:F}),se=M._getTransformedDimensions(),ke=Ie!==0?J.x/se.x:1;ke!==1&&M.set(dt,ke*te)}return ce}(n,w,new D(v,S))))(e,k(k({},t),{},{[a]:g,skewingSide:p}),r,s)}const gv=(n,e,t,r)=>Wh("x",n,e,t,r),mv=(n,e,t,r)=>Wh("y",n,e,t,r);function Zi(n,e){return n[e.canvas.altActionKey]}const Ps=(n,e,t)=>{const r=Zi(n,t);return e.x===0?r?Tn:wt:e.y===0?r?kn:dt:""},ln=(n,e,t)=>Zi(n,t)?pv(0,e,t):Xn(n,e,t),jc=(n,e,t,r)=>Zi(n,e.target)?mv(n,e,t,r):uv(n,e,t,r),Fc=(n,e,t,r)=>Zi(n,e.target)?gv(n,e,t,r):hv(n,e,t,r),zh=()=>({ml:new Et({x:-.5,y:0,cursorStyleHandler:ln,actionHandler:jc,getActionName:Ps}),mr:new Et({x:.5,y:0,cursorStyleHandler:ln,actionHandler:jc,getActionName:Ps}),mb:new Et({x:0,y:.5,cursorStyleHandler:ln,actionHandler:Fc,getActionName:Ps}),mt:new Et({x:0,y:-.5,cursorStyleHandler:ln,actionHandler:Fc,getActionName:Ps}),tl:new Et({x:-.5,y:-.5,cursorStyleHandler:Xn,actionHandler:Es}),tr:new Et({x:.5,y:-.5,cursorStyleHandler:Xn,actionHandler:Es}),bl:new Et({x:-.5,y:.5,cursorStyleHandler:Xn,actionHandler:Es}),br:new Et({x:.5,y:.5,cursorStyleHandler:Xn,actionHandler:Es}),mtr:new Et({x:0,y:-.5,actionHandler:lv,cursorStyleHandler:av,offsetY:-40,withConnection:!0,actionName:Za})}),yv=()=>({mr:new Et({x:.5,y:0,actionHandler:Rc,cursorStyleHandler:ln,actionName:is}),ml:new Et({x:-.5,y:0,actionHandler:Rc,cursorStyleHandler:ln,actionName:is})}),bv=()=>k(k({},zh()),yv());class ls extends Kt{static getDefaults(){return k(k({},super.getDefaults()),ls.ownDefaults)}constructor(e){super(),Object.assign(this,this.constructor.createControls(),ls.ownDefaults),this.setOptions(e)}static createControls(){return{controls:zh()}}_updateCacheCanvas(){const e=this.canvas;if(this.noScaleCache&&e&&e._currentTransform){const t=e._currentTransform,r=t.target,s=t.action;if(this===r&&s&&s.startsWith(Xi))return!1}return super._updateCacheCanvas()}getActiveControl(){const e=this.__corner;return e?{key:e,control:this.controls[e],coord:this.oCoords[e]}:void 0}findControl(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const r=Object.entries(this.oCoords);for(let s=r.length-1;s>=0;s--){const[i,o]=r[s],a=this.controls[i];if(a.shouldActivate(i,this,e,t?o.touchCorner:o.corner))return this.__corner=i,{key:i,control:a,coord:this.oCoords[i]}}}calcOCoords(){const e=this.getViewportTransform(),t=this.getCenterPoint(),r=bs(t.x,t.y),s=vs({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),i=Ue(r,s),o=Ue(e,i),a=Ue(o,[1/e[0],0,0,1/e[3],0,0]),l=this.group?xi(this.calcTransformMatrix()):void 0;l&&(l.scaleX=Math.abs(l.scaleX),l.scaleY=Math.abs(l.scaleY));const c=this._calculateCurrentDimensions(l),u={};return this.forEachControl((h,d)=>{const f=h.positionHandler(c,a,this,h);u[d]=Object.assign(f,this._calcCornerCoords(h,f))}),u}_calcCornerCoords(e,t){const r=this.getTotalAngle();return{corner:e.calcCornerCoords(r,this.cornerSize,t.x,t.y,!1,this),touchCorner:e.calcCornerCoords(r,this.touchCornerSize,t.x,t.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(e){for(const t in this.controls)e(this.controls[t],t,this)}drawSelectionBackground(e){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;e.save();const t=this.getRelativeCenterPoint(),r=this._calculateCurrentDimensions(),s=this.getViewportTransform();e.translate(t.x,t.y),e.scale(1/s[0],1/s[3]),e.rotate(je(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore()}strokeBorders(e,t){e.strokeRect(-t.x/2,-t.y/2,t.x,t.y)}_drawBorders(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=k({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},r);e.save(),e.strokeStyle=s.borderColor,this._setLineDash(e,s.borderDashArray),this.strokeBorders(e,t),s.hasControls&&this.drawControlsConnectingLines(e,t),e.restore()}_renderControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:r,hasControls:s}=this,i=k({hasBorders:r,hasControls:s},t),o=this.getViewportTransform(),a=i.hasBorders,l=i.hasControls,c=Ue(o,this.calcTransformMatrix()),u=xi(c);e.save(),e.translate(u.translateX,u.translateY),e.lineWidth=this.borderScaleFactor,this.group===this.parent&&(e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(u.angle-=180),e.rotate(je(this.group?u.angle:this.angle)),a&&this.drawBorders(e,u,t),l&&this.drawControls(e,t),e.restore()}drawBorders(e,t,r){let s;if(r&&r.forActiveSelection||this.group){const i=rl(this.width,this.height,Yi(t)),o=this.isStrokeAccountedForInDimensions()?Ja:(this.strokeUniform?new D().scalarAdd(this.canvas?this.canvas.getZoom():1):new D(t.scaleX,t.scaleY)).scalarMultiply(this.strokeWidth);s=i.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(e,s,r)}drawControlsConnectingLines(e,t){let r=!1;e.beginPath(),this.forEachControl((s,i)=>{s.withConnection&&s.getVisibility(this,i)&&(r=!0,e.moveTo(s.x*t.x,s.y*t.y),e.lineTo(s.x*t.x+s.offsetX,s.y*t.y+s.offsetY))}),r&&e.stroke()}drawControls(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.save();const r=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:i,cornerColor:o}=this,a=k({cornerStrokeColor:s,cornerDashArray:i,cornerColor:o},t);e.setTransform(r,0,0,r,0,0),e.strokeStyle=e.fillStyle=a.cornerColor,this.transparentCorners||(e.strokeStyle=a.cornerStrokeColor),this._setLineDash(e,a.cornerDashArray),this.forEachControl((l,c)=>{if(l.getVisibility(this,c)){const u=this.oCoords[c];l.render(e,u.x,u.y,a,this)}}),e.restore()}isControlVisible(e){return this.controls[e]&&this.controls[e].getVisibility(this,e)}setControlVisible(e,t){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[e]=t}setControlsVisibility(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(e).forEach(t=>{let[r,s]=t;return this.setControlVisible(r,s)})}clearContextTop(e){if(!this.canvas)return;const t=this.canvas.contextTop;if(!t)return;const r=this.canvas.viewportTransform;t.save(),t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(t);const s=this.width+4,i=this.height+4;return t.clearRect(-s/2,-i/2,s,i),e||t.restore(),t}onDeselect(e){return!1}onSelect(e){return!1}shouldStartDragging(e){return!1}onDragStart(e){return!1}canDrop(e){return!1}renderDragSourceEffect(e){}renderDropTargetEffect(e){}}function Vh(n,e){return e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(r=>{r!=="constructor"&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t.prototype,r)||Object.create(null))})}),n}T(ls,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class Ze extends ls{}Vh(Ze,[jh]),W.setClass(Ze),W.setClass(Ze,"object");const vv=(n,e,t,r)=>{const s=2*(r=Math.round(r))+1,{data:i}=n.getImageData(e-r,t-r,s,s);for(let o=3;o<i.length;o+=4)if(i[o]>0)return!1;return!0};class Hh{constructor(e){this.options=e,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new D(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new D(1/this.options.scaleX,1/this.options.scaleY):new D(1,1)}createSideVector(e,t){const r=na(e,t);return this.options.strokeUniform?r.multiply(this.scale):r}projectOrthogonally(e,t,r){return this.applySkew(e.add(this.calcOrthogonalProjection(e,t,r)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(e){const t=new D(e);return t.y+=t.x*Math.tan(je(this.options.skewY)),t.x+=t.y*Math.tan(je(this.options.skewX)),t}scaleUnitVector(e,t){return e.multiply(this.strokeUniformScalar).scalarMultiply(t)}}const xv=new D;class yn extends Hh{static getOrthogonalRotationFactor(e,t){const r=t?ia(e,t):zb(e);return Math.abs(r)<ys?-1:1}constructor(e,t,r,s){super(s),T(this,"AB",void 0),T(this,"AC",void 0),T(this,"alpha",void 0),T(this,"bisector",void 0),this.A=new D(e),this.B=new D(t),this.C=new D(r),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=ia(this.AB,this.AC),this.bisector=sl(Ih(this.AB.eq(xv)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t),i=Lh(s),o=yn.getOrthogonalRotationFactor(i,this.bisector);return this.scaleUnitVector(i,r*o)}projectBevel(){const e=[];return(this.alpha%mi==0?[this.B]:[this.B,this.C]).forEach(t=>{e.push(this.projectOrthogonally(this.A,t)),e.push(this.projectOrthogonally(this.A,t,-this.strokeProjectionMagnitude))}),e}projectMiter(){const e=[],t=Math.abs(this.alpha),r=1/Math.sin(t/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*r),i=this.options.strokeUniform?sa(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return sa(s)/this.strokeProjectionMagnitude<=i&&e.push(this.applySkew(this.A.add(s))),e.push(...this.projectBevel()),e}projectRoundNoSkew(e,t){const r=[],s=new D(yn.getOrthogonalRotationFactor(this.bisector),yn.getOrthogonalRotationFactor(new D(this.bisector.y,this.bisector.x)));return[new D(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new D(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(i=>{Mc(i,e,t)&&r.push(this.A.add(i))}),r}projectRoundWithSkew(e,t){const r=[],{skewX:s,skewY:i,scaleX:o,scaleY:a,strokeUniform:l}=this.options,c=new D(Math.tan(je(s)),Math.tan(je(i))),u=this.strokeProjectionMagnitude,h=l?u/a/Math.sqrt(1/a**2+1/o**2*c.y**2):u/Math.sqrt(1+c.y**2),d=new D(Math.sqrt(Math.max(u**2-h**2,0)),h),f=l?u/Math.sqrt(1+c.x**2*(1/a)**2/(1/o+1/o*c.x*c.y)**2):u/Math.sqrt(1+c.x**2/(1+c.x*c.y)**2),p=new D(f,Math.sqrt(Math.max(u**2-f**2,0)));return[p,p.scalarMultiply(-1),d,d.scalarMultiply(-1)].map(g=>this.applySkew(l?g.multiply(this.strokeUniformScalar):g)).forEach(g=>{Mc(g,e,t)&&r.push(this.applySkew(this.A).add(g))}),r}projectRound(){const e=[];e.push(...this.projectBevel());const t=this.alpha%mi==0,r=this.applySkew(this.A),s=e[t?0:2].subtract(r),i=e[t?1:0].subtract(r),o=t?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),a=Jn(s,o)>0,l=a?s:i,c=a?i:s;return this.isSkewed()?e.push(...this.projectRoundWithSkew(l,c)):e.push(...this.projectRoundNoSkew(l,c)),e}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e,angle:this.alpha,bisector:this.bisector}))}}class Ic extends Hh{constructor(e,t,r){super(r),this.A=new D(e),this.T=new D(t)}calcOrthogonalProjection(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(e,t);return this.scaleUnitVector(Lh(s),r)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const e=[];if(!this.isSkewed()&&this.A.eq(this.T)){const t=new D(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.applySkew(this.A.add(t)),this.applySkew(this.A.subtract(t)))}else e.push(...new yn(this.A,this.T,this.T,this.options).projectRound());return e}projectSquare(){const e=[];if(this.A.eq(this.T)){const t=new D(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);e.push(this.A.add(t),this.A.subtract(t))}else{const t=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),r=this.scaleUnitVector(sl(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(r);e.push(s.add(t),s.subtract(t))}return e.map(t=>this.applySkew(t))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(e=>({originPoint:this.A,projectedPoint:e}))}}const Sv=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const r=[];if(n.length===0)return r;const s=n.reduce((i,o)=>(i[i.length-1].eq(o)||i.push(new D(o)),i),[new D(n[0])]);if(s.length===1)t=!0;else if(!t){const i=s[0],o=((a,l)=>{for(let c=a.length-1;c>=0;c--)if(l(a[c],c,a))return c;return-1})(s,a=>!a.eq(i));s.splice(o+1)}return s.forEach((i,o,a)=>{let l,c;o===0?(c=a[1],l=t?i:a[a.length-1]):o===a.length-1?(l=a[o-1],c=t?i:a[0]):(l=a[o-1],c=a[o+1]),t&&a.length===1?r.push(...new Ic(i,i,e).project()):!t||o!==0&&o!==a.length-1?r.push(...new yn(i,l,c,e).project()):r.push(...new Ic(i,o===0?c:l,e).project())}),r},al=n=>{const e={};return Object.keys(n).forEach(t=>{e[t]={},Object.keys(n[t]).forEach(r=>{e[t][r]=k({},n[t][r])})}),e},Cv=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),ll=n=>{const e=[];for(let t,r=0;r<n.length;r++)(t=_v(n,r))!==!1&&e.push(t);return e},_v=(n,e)=>{const t=n.charCodeAt(e);if(isNaN(t))return"";if(t<55296||t>57343)return n.charAt(e);if(55296<=t&&t<=56319){if(n.length<=e+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(e+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(e)+n.charAt(e+1)}if(e===0)throw"Low surrogate without preceding high surrogate";const r=n.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1},cl=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==e.fill||n.stroke!==e.stroke||n.strokeWidth!==e.strokeWidth||n.fontSize!==e.fontSize||n.fontFamily!==e.fontFamily||n.fontWeight!==e.fontWeight||n.fontStyle!==e.fontStyle||n.textBackgroundColor!==e.textBackgroundColor||n.deltaY!==e.deltaY||t&&(n.overline!==e.overline||n.underline!==e.underline||n.linethrough!==e.linethrough)},wv=(n,e)=>{const t=e.split(`
`),r=[];let s=-1,i={};n=al(n);for(let o=0;o<t.length;o++){const a=ll(t[o]);if(n[o])for(let l=0;l<a.length;l++){s++;const c=n[o][l];c&&Object.keys(c).length>0&&(cl(i,c,!0)?r.push({start:s,end:s+1,style:c}):r[r.length-1].end++),i=c||{}}else s+=a.length,i={}}return r},Tv=(n,e)=>{if(!Array.isArray(n))return al(n);const t=e.split(Ka),r={};let s=-1,i=0;for(let o=0;o<t.length;o++){const a=ll(t[o]);for(let l=0;l<a.length;l++)s++,n[i]&&n[i].start<=s&&s<n[i].end&&(r[o]=r[o]||{},r[o][l]=k({},n[i].style),s===n[i].end-1&&i++)}return r},xr=["display","transform",We,"fill-opacity","fill-rule","opacity",ut,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function Lc(n,e){const t=n.nodeName,r=n.getAttribute("class"),s=n.getAttribute("id"),i="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+t,"i"),e=e.replace(o,""),s&&e.length&&(o=new RegExp("#"+s+i,"i"),e=e.replace(o,"")),r&&e.length){const a=r.split(" ");for(let l=a.length;l--;)o=new RegExp("\\."+a[l]+i,"i"),e=e.replace(o,"")}return e.length===0}function kv(n,e){let t=!0;const r=Lc(n,e.pop());return r&&e.length&&(t=function(s,i){let o,a=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&i.length;)a&&(o=i.pop()),a=Lc(s=s.parentElement,o);return i.length===0}(n,e)),r&&t&&e.length===0}const Ov=n=>{var e;return(e=$b[n])!==null&&e!==void 0?e:n},Ev=new RegExp("(".concat($r,")"),"gi"),Pv=n=>n.replace(Ev," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var Bc,Nc,$c,Wc,zc,Vc,Hc;const nt="(".concat($r,")"),Mv=String.raw(Bc||(Bc=vr(["(skewX)(",")"],["(skewX)\\(","\\)"])),nt),Dv=String.raw(Nc||(Nc=vr(["(skewY)(",")"],["(skewY)\\(","\\)"])),nt),Av=String.raw($c||($c=vr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),nt,nt,nt),Rv=String.raw(Wc||(Wc=vr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),nt,nt),jv=String.raw(zc||(zc=vr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),nt,nt),Fv=String.raw(Vc||(Vc=vr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),nt,nt,nt,nt,nt,nt),ul="(?:".concat(Fv,"|").concat(jv,"|").concat(Av,"|").concat(Rv,"|").concat(Mv,"|").concat(Dv,")"),Iv="(?:".concat(ul,"*)"),Lv=String.raw(Hc||(Hc=vr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),Iv),Bv=new RegExp(Lv),Nv=new RegExp(ul),$v=new RegExp(ul,"g");function oa(n){const e=[];if(!(n=Pv(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!Bv.test(n))return[...st];for(const t of n.matchAll($v)){const r=Nv.exec(t[0]);if(!r)continue;let s=st;const i=r.filter(p=>!!p),[,o,...a]=i,[l,c,u,h,d,f]=a.map(p=>parseFloat(p));switch(o){case"translate":s=bs(l,c);break;case Za:s=vs({angle:l},{x:c,y:u});break;case Xi:s=el(l,c);break;case Tn:s=_h(l);break;case kn:s=wh(l);break;case"matrix":s=[l,c,u,h,d,f]}e.push(s)}return Qa(e)}function Wv(n,e,t,r){const s=Array.isArray(e);let i,o=e;if(n!==We&&n!==ut||e!==ct){if(n==="strokeUniform")return e==="non-scaling-stroke";if(n==="strokeDashArray")o=e===ct?null:e.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=t&&t.transformMatrix?Ue(t.transformMatrix,oa(e)):oa(e);else if(n==="visible")o=e!==ct&&e!=="hidden",t&&t.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(e),t&&t.opacity!==void 0&&(o*=t.opacity);else if(n==="textAnchor")o=e==="start"?le:e==="end"?Re:K;else if(n==="charSpacing")i=gn(e,r)/r*1e3;else if(n==="paintFirst"){const a=e.indexOf(We),l=e.indexOf(ut);o=We,(a>-1&&l>-1&&l<a||a===-1&&l>-1)&&(o=ut)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return e;if(n==="imageSmoothing")return e==="optimizeQuality";i=s?e.map(gn):gn(e,r)}}else o="";return!s&&isNaN(i)?o:i}function zv(n,e){const t=n.match(Nb);if(!t)return;const r=t[1],s=t[3],i=t[4],o=t[5],a=t[6];r&&(e.fontStyle=r),s&&(e.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),i&&(e.fontSize=gn(i)),a&&(e.fontFamily=a),o&&(e.lineHeight=o==="normal"?1:o)}function Vv(n,e){n.replace(/;\s*$/,"").split(";").forEach(t=>{if(!t)return;const[r,s]=t.split(":");e[r.trim().toLowerCase()]=s.trim()})}function Hv(n){const e={},t=n.getAttribute("style");return t&&(typeof t=="string"?Vv(t,e):function(r,s){Object.entries(r).forEach(i=>{let[o,a]=i;a!==void 0&&(s[o.toLowerCase()]=a)})}(t,e)),e}const qv={stroke:"strokeOpacity",fill:"fillOpacity"};function hr(n,e,t){if(!n)return{};let r,s={},i=Ga;n.parentNode&&Pc.test(n.parentNode.nodeName)&&(s=hr(n.parentElement,e,t),s.fontSize&&(r=i=gn(s.fontSize)));const o=k(k(k({},e.reduce((c,u)=>{const h=n.getAttribute(u);return h&&(c[u]=h),c},{})),function(c){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h={};for(const d in u)kv(c,d.split(" "))&&(h=k(k({},h),u[d]));return h}(n,t)),Hv(n));o[vo]&&n.setAttribute(vo,o[vo]),o[bo]&&(r=gn(o[bo],i),o[bo]="".concat(r));const a={};for(const c in o){const u=Ov(c),h=Wv(u,o[c],s,r);a[u]=h}a.font&&zv(a.font,a);const l=k(k({},s),a);return Pc.test(n.nodeName)?l:function(c){const u=Ze.getDefaults();return Object.entries(qv).forEach(h=>{let[d,f]=h;if(c[f]===void 0||c[d]==="")return;if(c[d]===void 0){if(!u[d])return;c[d]=u[d]}if(c[d].indexOf("url(")===0)return;const p=new ue(c[d]);c[d]=p.setAlpha(Me(p.getAlpha()*c[f],2)).toRgba()}),c}(l)}const Xv=["left","top","width","height","visible"],qh=["rx","ry"];class gt extends Ze{static getDefaults(){return k(k({},super.getDefaults()),gt.ownDefaults)}constructor(e){super(),Object.assign(this,gt.ownDefaults),this.setOptions(e),this._initRxRy()}_initRxRy(){const{rx:e,ry:t}=this;e&&!t?this.ry=e:t&&!e&&(this.rx=t)}_render(e){const{width:t,height:r}=this,s=-t/2,i=-r/2,o=this.rx?Math.min(this.rx,t/2):0,a=this.ry?Math.min(this.ry,r/2):0,l=o!==0||a!==0;e.beginPath(),e.moveTo(s+o,i),e.lineTo(s+t-o,i),l&&e.bezierCurveTo(s+t-fr*o,i,s+t,i+fr*a,s+t,i+a),e.lineTo(s+t,i+r-a),l&&e.bezierCurveTo(s+t,i+r-fr*a,s+t-fr*o,i+r,s+t-o,i+r),e.lineTo(s+o,i+r),l&&e.bezierCurveTo(s+fr*o,i+r,s,i+r-fr*a,s,i+r-a),e.lineTo(s,i+a),l&&e.bezierCurveTo(s,i+fr*a,s+fr*o,i,s+o,i),e.closePath(),this._renderPaintInOrder(e)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...qh,...e])}_toSVG(){const{width:e,height:t,rx:r,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-e/2,'" y="').concat(-t/2,'" rx="').concat(r,'" ry="').concat(s,'" width="').concat(e,'" height="').concat(t,`" />
`)]}static async fromElement(e,t,r){const s=hr(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,width:a=0,height:l=0,visible:c=!0}=s,u=we(s,Xv);return new this(k(k(k({},t),u),{},{left:i,top:o,width:a,height:l,visible:!!(c&&a&&l)}))}}T(gt,"type","Rect"),T(gt,"cacheProperties",[...ur,...qh]),T(gt,"ownDefaults",{rx:0,ry:0}),T(gt,"ATTRIBUTE_NAMES",[...xr,"x","y","rx","ry","width","height"]),W.setClass(gt),W.setSVGClass(gt);const tr="initialization",wi="added",hl="removed",Ti="imperative",Xh=(n,e)=>{const{strokeUniform:t,strokeWidth:r,width:s,height:i,group:o}=e,a=o&&o!==n?Gi(o.calcTransformMatrix(),n.calcTransformMatrix()):null,l=a?e.getRelativeCenterPoint().transform(a):e.getRelativeCenterPoint(),c=!e.isStrokeAccountedForInDimensions(),u=t&&c?Fb(new D(r,r),void 0,n.calcTransformMatrix()):Ja,h=!t&&c?r:0,d=rl(s+h,i+h,Qa([a,e.calcOwnMatrix()],!0)).add(u).scalarDivide(2);return[l.subtract(d),l.add(d)]};class Ji{calcLayoutResult(e,t){if(this.shouldPerformLayout(e))return this.calcBoundingBox(t,e)}shouldPerformLayout(e){let{type:t,prevStrategy:r,strategy:s}=e;return t===tr||t===Ti||!!r&&s!==r}shouldLayoutClipPath(e){let{type:t,target:{clipPath:r}}=e;return t!==tr&&r&&!r.absolutePositioned}getInitialSize(e,t){return t.size}calcBoundingBox(e,t){const{type:r,target:s}=t;if(r===Ti&&t.overrides)return t.overrides;if(e.length===0)return;const{left:i,top:o,width:a,height:l}=nr(e.map(h=>Xh(s,h)).reduce((h,d)=>h.concat(d),[])),c=new D(a,l),u=new D(i,o).add(c.scalarDivide(2));if(r===tr){const h=this.getInitialSize(t,{size:c,center:u});return{center:u,relativeCorrection:new D(0,0),size:h}}return{center:u.transform(s.calcOwnMatrix()),size:c}}}T(Ji,"type","strategy");class aa extends Ji{shouldPerformLayout(e){return!0}}T(aa,"type","fit-content"),W.setClass(aa);const Yv=["strategy"],Uv=["target","strategy","bubbles","prevStrategy"],Yh="layoutManager";class cs{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new aa;T(this,"strategy",void 0),this.strategy=e,this._subscriptions=new Map}performLayout(e){const t=k(k({bubbles:!0,strategy:this.strategy},e),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(t);const r=this.getLayoutResult(t);r&&this.commitLayout(t,r),this.onAfterLayout(t,r),this._prevLayoutStrategy=t.strategy}attachHandlers(e,t){const{target:r}=t;return[bi,gh,is,mh,qi,yh,yi,xb,Sb].map(s=>e.on(s,i=>this.performLayout(s===bi?{type:"object_modified",trigger:s,e:i,target:r}:{type:"object_modifying",trigger:s,e:i,target:r})))}subscribe(e,t){this.unsubscribe(e,t);const r=this.attachHandlers(e,t);this._subscriptions.set(e,r)}unsubscribe(e,t){(this._subscriptions.get(e)||[]).forEach(r=>r()),this._subscriptions.delete(e)}unsubscribeTargets(e){e.targets.forEach(t=>this.unsubscribe(t,e))}subscribeTargets(e){e.targets.forEach(t=>this.subscribe(t,e))}onBeforeLayout(e){const{target:t,type:r}=e,{canvas:s}=t;if(r===tr||r===wi?this.subscribeTargets(e):r===hl&&this.unsubscribeTargets(e),t.fire("layout:before",{context:e}),s&&s.fire("object:layout:before",{target:t,context:e}),r===Ti&&e.deep){const i=we(e,Yv);t.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(k(k({},i),{},{bubbles:!1,target:o})))}}getLayoutResult(e){const{target:t,strategy:r,type:s}=e,i=r.calcLayoutResult(e,t.getObjects());if(!i)return;const o=s===tr?new D:t.getRelativeCenterPoint(),{center:a,correction:l=new D,relativeCorrection:c=new D}=i,u=o.subtract(a).add(l).transform(s===tr?st:Dt(t.calcOwnMatrix()),!0).add(c);return{result:i,prevCenter:o,nextCenter:a,offset:u}}commitLayout(e,t){const{target:r}=e,{result:{size:s},nextCenter:i}=t;var o,a;r.set({width:s.x,height:s.y}),this.layoutObjects(e,t),e.type===tr?r.set({left:(o=e.x)!==null&&o!==void 0?o:i.x+s.x*Ne(r.originX),top:(a=e.y)!==null&&a!==void 0?a:i.y+s.y*Ne(r.originY)}):(r.setPositionByOrigin(i,K,K),r.setCoords(),r.set("dirty",!0))}layoutObjects(e,t){const{target:r}=e;r.forEachObject(s=>{s.group===r&&this.layoutObject(e,t,s)}),e.strategy.shouldLayoutClipPath(e)&&this.layoutObject(e,t,r.clipPath)}layoutObject(e,t,r){let{offset:s}=t;r.set({left:r.left+s.x,top:r.top+s.y})}onAfterLayout(e,t){const{target:r,strategy:s,bubbles:i,prevStrategy:o}=e,a=we(e,Uv),{canvas:l}=r;r.fire("layout:after",{context:e,result:t}),l&&l.fire("object:layout:after",{context:e,result:t,target:r});const c=r.parent;i&&c!=null&&c.layoutManager&&((a.path||(a.path=[])).push(r),c.layoutManager.performLayout(k(k({},a),{},{target:c}))),r.set("dirty",!0)}dispose(){const{_subscriptions:e}=this;e.forEach(t=>t.forEach(r=>r())),e.clear()}toObject(){return{type:Yh,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}W.setClass(cs,Yh);const Gv=["type","objects","layoutManager"];class Kv extends cs{performLayout(){}}class Ir extends bh(Ze){static getDefaults(){return k(k({},super.getDefaults()),Ir.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"_activeObjects",[]),T(this,"__objectSelectionTracker",void 0),T(this,"__objectSelectionDisposer",void 0),Object.assign(this,Ir.ownDefaults),this.setOptions(t),this.groupInit(e,t)}groupInit(e,t){var r;this._objects=[...e],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(r=t.layoutManager)!==null&&r!==void 0?r:new cs,this.layoutManager.performLayout({type:tr,target:this,targets:[...e],x:t.left,y:t.top})}canEnterGroup(e){return e===this||this.isDescendantOf(e)?(mr("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(e)===-1||(mr("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(e){return e.filter((t,r,s)=>this.canEnterGroup(t)&&s.indexOf(t)===r)}add(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(t),i=super.add(...s);return this._onAfterObjectsChange(wi,s),i}insertAt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];const i=this._filterObjectsBeforeEnteringGroup(r),o=super.insertAt(e,...i);return this._onAfterObjectsChange(wi,i),o}remove(){const e=super.remove(...arguments);return this._onAfterObjectsChange(hl,e),e}_onObjectAdded(e){this.enterGroup(e,!0),this.fire("object:added",{target:e}),e.fire("added",{target:this})}_onObjectRemoved(e,t){this.exitGroup(e,t),this.fire("object:removed",{target:e}),e.fire("removed",{target:this})}_onAfterObjectsChange(e,t){this.layoutManager.performLayout({type:e,targets:t,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(e,t){const r=this[e];return super._set(e,t),e==="canvas"&&r!==t&&(this._objects||[]).forEach(s=>{s._set(e,t)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(e,t){let{target:r}=t;const s=this._activeObjects;if(e)s.push(r),this._set("dirty",!0);else if(s.length>0){const i=s.indexOf(r);i>-1&&(s.splice(i,1),this._set("dirty",!0))}}_watchObject(e,t){e&&this._watchObject(!1,t),e?(t.on("selected",this.__objectSelectionTracker),t.on("deselected",this.__objectSelectionDisposer)):(t.off("selected",this.__objectSelectionTracker),t.off("deselected",this.__objectSelectionDisposer))}enterGroup(e,t){e.group&&e.group.remove(e),e._set("parent",this),this._enterGroup(e,t)}_enterGroup(e,t){t&&Ci(e,Ue(Dt(this.calcTransformMatrix()),e.calcTransformMatrix())),this._shouldSetNestedCoords()&&e.setCoords(),e._set("group",this),e._set("canvas",this.canvas),this._watchObject(!0,e);const r=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();r&&(r===e||e.isDescendantOf(r))&&this._activeObjects.push(e)}exitGroup(e,t){this._exitGroup(e,t),e._set("parent",void 0),e._set("canvas",void 0)}_exitGroup(e,t){e._set("group",void 0),t||(Ci(e,Ue(this.calcTransformMatrix(),e.calcTransformMatrix())),e.setCoords()),this._watchObject(!1,e);const r=this._activeObjects.length>0?this._activeObjects.indexOf(e):-1;r>-1&&this._activeObjects.splice(r,1)}shouldCache(){const e=Ze.prototype.shouldCache.call(this);if(e){for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return this.ownCaching=!1,!1}return e}willDrawShadow(){if(super.willDrawShadow())return!0;for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(e,t,r){this._renderBackground(e);for(let i=0;i<this._objects.length;i++){var s;const o=this._objects[i];(s=this.canvas)!==null&&s!==void 0&&s.preserveObjectStacking&&o.group!==this?(e.save(),e.transform(...Dt(this.calcTransformMatrix())),o.render(e),e.restore()):o.group===this&&o.render(e)}this._drawClipPath(e,this.clipPath,r)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(e=>e.setCoords())}triggerLayout(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(k({target:this,type:Ti},e))}render(e){this._transformDone=!0,super.render(e),this._transformDone=!1}__serializeObjects(e,t){const r=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const i=s.includeDefaultValues;s.includeDefaultValues=r;const o=s[e||"toObject"](t);return s.includeDefaultValues=i,o})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.layoutManager.toObject();return k(k(k({},super.toObject(["subTargetCheck","interactive",...e])),t.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:t}:{}),{},{objects:this.__serializeObjects("toObject",e)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(e=>{this._watchObject(!1,e),e.dispose()}),super.dispose()}_createSVGBgRect(e){if(!this.backgroundColor)return"";const t=gt.prototype._toSVG.call(this),r=t.indexOf("COMMON_PARTS");t[r]='for="group" ';const s=t.join("");return e?e(s):s}_toSVG(e){const t=["<g ","COMMON_PARTS",` >
`],r=this._createSVGBgRect(e);r&&t.push("		",r);for(let s=0;s<this._objects.length;s++)t.push("		",this._objects[s].toSVG(e));return t.push(`</g>
`),t}getSvgStyles(){const e=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",t=this.visible?"":" visibility: hidden;";return[e,this.getSvgFilter(),t].join("")}toClipPathSVG(e){const t=[],r=this._createSVGBgRect(e);r&&t.push("	",r);for(let s=0;s<this._objects.length;s++)t.push("	",this._objects[s].toClipPathSVG(e));return this._createBaseClipPathSVGMarkup(t,{reviver:e})}static fromObject(e,t){let{type:r,objects:s=[],layoutManager:i}=e,o=we(e,Gv);return Promise.all([os(s,t),Ui(o,t)]).then(a=>{let[l,c]=a;const u=new this(l,k(k(k({},o),c),{},{layoutManager:new Kv}));if(i){const h=W.getClass(i.type),d=W.getClass(i.strategy);u.layoutManager=new h(new d)}else u.layoutManager=new cs;return u.layoutManager.subscribeTargets({type:tr,target:u,targets:u.getObjects()}),u.setCoords(),u})}}T(Ir,"type","Group"),T(Ir,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),W.setClass(Ir);const Zv=(n,e)=>Math.min(e.width/n.width,e.height/n.height),Jv=(n,e)=>Math.max(e.width/n.width,e.height/n.height),la="\\s*,?\\s*",Nn="".concat(la,"(").concat($r,")"),Qv="".concat(Nn).concat(Nn).concat(Nn).concat(la,"([01])").concat(la,"([01])").concat(Nn).concat(Nn),ex={m:"l",M:"L"},tx=(n,e,t,r,s,i,o,a,l,c,u)=>{const h=lr(n),d=cr(n),f=lr(e),p=cr(e),g=t*s*f-r*i*p+o,y=r*s*f+t*i*p+a;return["C",c+l*(-t*s*d-r*i*h),u+l*(-r*s*d+t*i*h),g+l*(t*s*p+r*i*f),y+l*(r*s*p-t*i*f),g,y]},qc=(n,e,t,r)=>{const s=Math.atan2(e,n),i=Math.atan2(r,t);return i>=s?i-s:2*Math.PI-(s-i)};function Xc(n,e,t,r,s,i,o,a){let l;if(re.cachesBoundsOfCurve&&(l=[...arguments].join(),Zn.boundsOfCurveCache[l]))return Zn.boundsOfCurveCache[l];const c=Math.sqrt,u=Math.abs,h=[],d=[[0,0],[0,0]];let f=6*n-12*t+6*s,p=-3*n+9*t-9*s+3*o,g=3*t-3*n;for(let S=0;S<2;++S){if(S>0&&(f=6*e-12*r+6*i,p=-3*e+9*r-9*i+3*a,g=3*r-3*e),u(p)<1e-12){if(u(f)<1e-12)continue;const L=-g/f;0<L&&L<1&&h.push(L);continue}const x=f*f-4*g*p;if(x<0)continue;const O=c(x),P=(-f+O)/(2*p);0<P&&P<1&&h.push(P);const M=(-f-O)/(2*p);0<M&&M<1&&h.push(M)}let y=h.length;const b=y,w=Uh(n,e,t,r,s,i,o,a);for(;y--;){const{x:S,y:x}=w(h[y]);d[0][y]=S,d[1][y]=x}d[0][b]=n,d[1][b]=e,d[0][b+1]=o,d[1][b+1]=a;const v=[new D(Math.min(...d[0]),Math.min(...d[1])),new D(Math.max(...d[0]),Math.max(...d[1]))];return re.cachesBoundsOfCurve&&(Zn.boundsOfCurveCache[l]=v),v}const rx=(n,e,t)=>{let[r,s,i,o,a,l,c,u]=t;const h=((d,f,p,g,y,b,w)=>{if(p===0||g===0)return[];let v=0,S=0,x=0;const O=Math.PI,P=w*Ua,M=cr(P),L=lr(P),m=.5*(-L*d-M*f),E=.5*(-L*f+M*d),j=p**2,R=g**2,I=E**2,F=m**2,B=j*R-j*I-R*F;let $=Math.abs(p),z=Math.abs(g);if(B<0){const U=Math.sqrt(1-B/(j*R));$*=U,z*=U}else x=(y===b?-1:1)*Math.sqrt(B/(j*I+R*F));const N=x*$*E/z,ne=-x*z*m/$,ce=L*N-M*ne+.5*d,Ie=M*N+L*ne+.5*f;let te=qc(1,0,(m-N)/$,(E-ne)/z),J=qc((m-N)/$,(E-ne)/z,(-m-N)/$,(-E-ne)/z);b===0&&J>0?J-=2*O:b===1&&J<0&&(J+=2*O);const se=Math.ceil(Math.abs(J/O*2)),ke=[],Oe=J/se,Qe=8/3*Math.sin(Oe/4)*Math.sin(Oe/4)/Math.sin(Oe/2);let ge=te+Oe;for(let U=0;U<se;U++)ke[U]=tx(te,ge,L,M,$,z,ce,Ie,Qe,v,S),v=ke[U][5],S=ke[U][6],te=ge,ge+=Oe;return ke})(c-n,u-e,s,i,a,l,o);for(let d=0,f=h.length;d<f;d++)h[d][1]+=n,h[d][2]+=e,h[d][3]+=n,h[d][4]+=e,h[d][5]+=n,h[d][6]+=e;return h},nx=n=>{let e=0,t=0,r=0,s=0;const i=[];let o,a=0,l=0;for(const c of n){const u=[...c];let h;switch(u[0]){case"l":u[1]+=e,u[2]+=t;case"L":e=u[1],t=u[2],h=["L",e,t];break;case"h":u[1]+=e;case"H":e=u[1],h=["L",e,t];break;case"v":u[1]+=t;case"V":t=u[1],h=["L",e,t];break;case"m":u[1]+=e,u[2]+=t;case"M":e=u[1],t=u[2],r=u[1],s=u[2],h=["M",e,t];break;case"c":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t,u[5]+=e,u[6]+=t;case"C":a=u[3],l=u[4],e=u[5],t=u[6],h=["C",u[1],u[2],a,l,e,t];break;case"s":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"S":o==="C"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[3],t=u[4],h=["C",a,l,u[1],u[2],e,t],a=h[3],l=h[4];break;case"q":u[1]+=e,u[2]+=t,u[3]+=e,u[4]+=t;case"Q":a=u[1],l=u[2],e=u[3],t=u[4],h=["Q",a,l,e,t];break;case"t":u[1]+=e,u[2]+=t;case"T":o==="Q"?(a=2*e-a,l=2*t-l):(a=e,l=t),e=u[1],t=u[2],h=["Q",a,l,e,t];break;case"a":u[6]+=e,u[7]+=t;case"A":rx(e,t,u).forEach(d=>i.push(d)),e=u[6],t=u[7];break;case"z":case"Z":e=r,t=s,h=["Z"]}h?(i.push(h),o=h[0]):o=""}return i},ki=(n,e,t,r)=>Math.sqrt((t-n)**2+(r-e)**2),Uh=(n,e,t,r,s,i,o,a)=>l=>{const c=l**3,u=(f=>3*f**2*(1-f))(l),h=(f=>3*f*(1-f)**2)(l),d=(f=>(1-f)**3)(l);return new D(o*c+s*u+t*h+n*d,a*c+i*u+r*h+e*d)},Gh=n=>n**2,Kh=n=>2*n*(1-n),Zh=n=>(1-n)**2,sx=(n,e,t,r,s,i,o,a)=>l=>{const c=Gh(l),u=Kh(l),h=Zh(l),d=3*(h*(t-n)+u*(s-t)+c*(o-s)),f=3*(h*(r-e)+u*(i-r)+c*(a-i));return Math.atan2(f,d)},ix=(n,e,t,r,s,i)=>o=>{const a=Gh(o),l=Kh(o),c=Zh(o);return new D(s*a+t*l+n*c,i*a+r*l+e*c)},ox=(n,e,t,r,s,i)=>o=>{const a=1-o,l=2*(a*(t-n)+o*(s-t)),c=2*(a*(r-e)+o*(i-r));return Math.atan2(c,l)},Yc=(n,e,t)=>{let r=new D(e,t),s=0;for(let i=1;i<=100;i+=1){const o=n(i/100);s+=ki(r.x,r.y,o.x,o.y),r=o}return s},ax=(n,e)=>{let t,r=0,s=0,i={x:n.x,y:n.y},o=k({},i),a=.01,l=0;const c=n.iterator,u=n.angleFinder;for(;s<e&&a>1e-4;)o=c(r),l=r,t=ki(i.x,i.y,o.x,o.y),t+s>e?(r-=a,a/=2):(i=o,r+=a,s+=t);return k(k({},o),{},{angle:u(l)})},Jh=n=>{let e,t,r=0,s=0,i=0,o=0,a=0;const l=[];for(const c of n){const u={x:s,y:i,command:c[0],length:0};switch(c[0]){case"M":t=u,t.x=o=s=c[1],t.y=a=i=c[2];break;case"L":t=u,t.length=ki(s,i,c[1],c[2]),s=c[1],i=c[2];break;case"C":e=Uh(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t=u,t.iterator=e,t.angleFinder=sx(s,i,c[1],c[2],c[3],c[4],c[5],c[6]),t.length=Yc(e,s,i),s=c[5],i=c[6];break;case"Q":e=ix(s,i,c[1],c[2],c[3],c[4]),t=u,t.iterator=e,t.angleFinder=ox(s,i,c[1],c[2],c[3],c[4]),t.length=Yc(e,s,i),s=c[3],i=c[4];break;case"Z":t=u,t.destX=o,t.destY=a,t.length=ki(s,i,o,a),s=o,i=a}r+=t.length,l.push(t)}return l.push({length:r,x:s,y:i}),l},lx=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jh(n),r=0;for(;e-t[r].length>0&&r<t.length-2;)e-=t[r].length,r++;const s=t[r],i=e/s.length,o=n[r];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return k(k({},new D(s.x,s.y).lerp(new D(s.destX,s.destY),i)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return k(k({},new D(s.x,s.y).lerp(new D(o[1],o[2]),i)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return ax(s,e)}},cx=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Uc=new RegExp(Qv,"g"),ux=new RegExp($r,"gi"),hx={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},dx=n=>{var e;const t=[],r=(e=n.match(cx))!==null&&e!==void 0?e:[];for(const s of r){const i=s[0];if(i==="z"||i==="Z"){t.push([i]);continue}const o=hx[i.toLowerCase()];let a=[];if(i==="a"||i==="A"){Uc.lastIndex=0;for(let l=null;l=Uc.exec(s);)a.push(...l.slice(1))}else a=s.match(ux)||[];for(let l=0;l<a.length;l+=o){const c=new Array(o),u=ex[i];c[0]=l>0&&u?u:i;for(let h=0;h<o;h++)c[h+1]=parseFloat(a[l+h]);t.push(c)}}return t},fx=(n,e)=>n.map(t=>t.map((r,s)=>s===0||e===void 0?r:Me(r,e)).join(" ")).join(" ");function ca(n,e){const t=n.style;t&&e&&(typeof e=="string"?t.cssText+=";"+e:Object.entries(e).forEach(r=>{let[s,i]=r;return t.setProperty(s,i)}))}class px extends Eh{constructor(e){let{allowTouchScrolling:t=!1,containerClass:r=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),T(this,"upper",void 0),T(this,"container",void 0);const{el:s}=this.lower,i=this.createUpperCanvas();this.upper={el:i,ctx:i.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:t}),this.applyCanvasStyle(i,{allowTouchScrolling:t,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(r),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,i),this.container=o}createUpperCanvas(){const{el:e}=this.lower,t=jt();return t.className=e.className,t.classList.remove("lower-canvas"),t.classList.add("upper-canvas"),t.setAttribute("data-fabric","top"),t.style.cssText=e.style.cssText,t.setAttribute("draggable","true"),t}createContainerElement(){const e=wn().createElement("div");return e.setAttribute("data-fabric","wrapper"),ca(e,{position:"relative"}),kc(e),e}applyCanvasStyle(e,t){const{styles:r,allowTouchScrolling:s}=t;ca(e,k(k({},r),{},{"touch-action":s?"manipulation":ct})),kc(e)}setDimensions(e,t){super.setDimensions(e,t);const{el:r,ctx:s}=this.upper;Oh(r,s,e,t)}setCSSDimensions(e){super.setCSSDimensions(e),ea(this.upper.el,e),ea(this.container,e)}cleanupDOM(e){const t=this.container,{el:r}=this.lower,{el:s}=this.upper;super.cleanupDOM(e),t.removeChild(s),t.removeChild(r),t.parentNode&&t.parentNode.replaceChild(r,t)}dispose(){super.dispose(),qt().dispose(this.upper.el),delete this.upper,delete this.container}}class Qi extends xs{constructor(){super(...arguments),T(this,"targets",[]),T(this,"_hoveredTargets",[]),T(this,"_objectsToRender",void 0),T(this,"_currentTransform",null),T(this,"_groupSelector",null),T(this,"contextTopDirty",!1)}static getDefaults(){return k(k({},super.getDefaults()),Qi.ownDefaults)}get upperCanvasEl(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.el}get contextTop(){var e;return(e=this.elements.upper)===null||e===void 0?void 0:e.ctx}get wrapperEl(){return this.elements.container}initElements(e){this.elements=new px(e,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(e){this._objectsToRender=void 0,super._onObjectAdded(e)}_onObjectRemoved(e){this._objectsToRender=void 0,e===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[e]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[e]}),e.fire("deselected",{target:e})),e===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(e)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const e=this._activeObject;return!this.preserveObjectStacking&&e?this._objects.filter(t=>!t.group&&t!==e).concat(e):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(e){e.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(e),this.contextTopDirty=!0),e.restore()}renderTop(){const e=this.contextTop;this.clearContext(e),this.renderTopLayer(e),this.fire("after:render",{ctx:e})}setTargetFindTolerance(e){e=Math.round(e),this.targetFindTolerance=e;const t=this.getRetinaScaling(),r=Math.ceil((2*e+1)*t);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=r,this.pixelFindContext.scale(t,t)}isTargetTransparent(e,t,r){const s=this.targetFindTolerance,i=this.pixelFindContext;this.clearContext(i),i.save(),i.translate(-t+s,-r+s),i.transform(...this.viewportTransform);const o=e.selectionBackgroundColor;e.selectionBackgroundColor="",e.render(i),e.selectionBackgroundColor=o,i.restore();const a=Math.round(s*this.getRetinaScaling());return vv(i,a,a,a)}_isSelectionKeyPressed(e){const t=this.selectionKey;return!!t&&(Array.isArray(t)?!!t.find(r=>!!r&&e[r]===!0):e[t])}_shouldClearSelection(e,t){const r=this.getActiveObjects(),s=this._activeObject;return!!(!t||t&&s&&r.length>1&&r.indexOf(t)===-1&&s!==t&&!this._isSelectionKeyPressed(e)||t&&!t.evented||t&&!t.selectable&&s&&s!==t)}_shouldCenterTransform(e,t,r){if(!e)return;let s;return t===Xi||t===dt||t===wt||t===is?s=this.centeredScaling||e.centeredScaling:t===Za&&(s=this.centeredRotation||e.centeredRotation),s?!r:r}_getOriginFromCorner(e,t){const r={x:e.originX,y:e.originY};return t&&(["ml","tl","bl"].includes(t)?r.x=Re:["mr","tr","br"].includes(t)&&(r.x=le),["tl","mt","tr"].includes(t)?r.y=Qo:["bl","mb","br"].includes(t)&&(r.y=lt)),r}_setupCurrentTransform(e,t,r){var s;const i=t.group?mn(this.getScenePoint(e),void 0,t.group.calcTransformMatrix()):this.getScenePoint(e),{key:o="",control:a}=t.getActiveControl()||{},l=r&&a?(s=a.getActionHandler(e,t,a))===null||s===void 0?void 0:s.bind(a):Bb,c=((f,p,g,y)=>{if(!p||!f)return"drag";const b=y.controls[p];return b.getActionName(g,b,y)})(r,o,e,t),u=e[this.centeredKey],h=this._shouldCenterTransform(t,c,u)?{x:K,y:K}:this._getOriginFromCorner(t,o),d={target:t,action:c,actionHandler:l,actionPerformed:!1,corner:o,scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,offsetX:i.x-t.left,offsetY:i.y-t.top,originX:h.x,originY:h.y,ex:i.x,ey:i.y,lastX:i.x,lastY:i.y,theta:je(t.angle),width:t.width,height:t.height,shiftKey:e.shiftKey,altKey:u,original:k(k({},Ph(t)),{},{originX:h.x,originY:h.y})};this._currentTransform=d,this.fire("before:transform",{e,transform:d})}setCursor(e){this.upperCanvasEl.style.cursor=e}_drawSelection(e){const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new D(t,r).transform(this.viewportTransform),a=new D(t+s,r+i).transform(this.viewportTransform),l=this.selectionLineWidth/2;let c=Math.min(o.x,a.x),u=Math.min(o.y,a.y),h=Math.max(o.x,a.x),d=Math.max(o.y,a.y);this.selectionColor&&(e.fillStyle=this.selectionColor,e.fillRect(c,u,h-c,d-u)),this.selectionLineWidth&&this.selectionBorderColor&&(e.lineWidth=this.selectionLineWidth,e.strokeStyle=this.selectionBorderColor,c+=l,u+=l,h-=l,d-=l,Ze.prototype._setLineDash.call(this,e,this.selectionDashArray),e.strokeRect(c,u,h-c,d-u))}findTarget(e){if(this.skipTargetFind)return;const t=this.getViewportPoint(e),r=this._activeObject,s=this.getActiveObjects();if(this.targets=[],r&&s.length>=1){if(r.findControl(t,ta(e))||s.length>1&&this.searchPossibleTargets([r],t))return r;if(r===this.searchPossibleTargets([r],t)){if(this.preserveObjectStacking){const i=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,t);return e[this.altSelectionKey]&&o&&o!==r?(this.targets=i,r):o}return r}}return this.searchPossibleTargets(this._objects,t)}_pointIsInObjectSelectionArea(e,t){let r=e.getCoords();const s=this.getZoom(),i=e.padding/s;if(i){const[o,a,l,c]=r,u=Math.atan2(a.y-o.y,a.x-o.x),h=lr(u)*i,d=cr(u)*i,f=h+d,p=h-d;r=[new D(o.x-p,o.y-f),new D(a.x+f,a.y-p),new D(l.x+p,l.y+f),new D(c.x-f,c.y+p)]}return Pe.isPointInPolygon(t,r)}_checkTarget(e,t){return!!(e&&e.visible&&e.evented&&this._pointIsInObjectSelectionArea(e,mn(t,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing||!this.isTargetTransparent(e,t.x,t.y)))}_searchPossibleTargets(e,t){let r=e.length;for(;r--;){const s=e[r];if(this._checkTarget(s,t)){if(si(s)&&s.subTargetCheck){const i=this._searchPossibleTargets(s._objects,t);i&&this.targets.push(i)}return s}}}searchPossibleTargets(e,t){const r=this._searchPossibleTargets(e,t);if(r&&si(r)&&r.interactive&&this.targets[0]){const s=this.targets;for(let i=s.length-1;i>0;i--){const o=s[i];if(!si(o)||!o.interactive)return o}return s[0]}return r}getViewportPoint(e){return this._pointer?this._pointer:this.getPointer(e,!0)}getScenePoint(e){return this._absolutePointer?this._absolutePointer:this.getPointer(e)}getPointer(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const r=this.upperCanvasEl,s=r.getBoundingClientRect();let i=Db(e),o=s.width||0,a=s.height||0;o&&a||(lt in s&&Qo in s&&(a=Math.abs(s.top-s.bottom)),Re in s&&le in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),i.x=i.x-this._offset.left,i.y=i.y-this._offset.top,t||(i=mn(i,void 0,this.viewportTransform));const l=this.getRetinaScaling();l!==1&&(i.x/=l,i.y/=l);const c=o===0||a===0?new D(1,1):new D(r.width/o,r.height/a);return i.multiply(c)}_setDimensionsImpl(e,t){this._resetTransformEventData(),super._setDimensionsImpl(e,t),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=jt(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const e=this._activeObject;return Pr(e)?e.getObjects():e?[e]:[]}_fireSelectionEvents(e,t){let r=!1,s=!1;const i=this.getActiveObjects(),o=[],a=[];e.forEach(l=>{i.includes(l)||(r=!0,l.fire("deselected",{e:t,target:l}),a.push(l))}),i.forEach(l=>{e.includes(l)||(r=!0,l.fire("selected",{e:t,target:l}),o.push(l))}),e.length>0&&i.length>0?(s=!0,r&&this.fire("selection:updated",{e:t,selected:o,deselected:a})):i.length>0?(s=!0,this.fire("selection:created",{e:t,selected:o})):e.length>0&&(s=!0,this.fire("selection:cleared",{e:t,deselected:a})),s&&(this._objectsToRender=void 0)}setActiveObject(e,t){const r=this.getActiveObjects(),s=this._setActiveObject(e,t);return this._fireSelectionEvents(r,t),s}_setActiveObject(e,t){const r=this._activeObject;return r!==e&&!(!this._discardActiveObject(t,e)&&this._activeObject)&&!e.onSelect({e:t})&&(this._activeObject=e,Pr(e)&&r!==e&&e.set("canvas",this),e.setCoords(),!0)}_discardActiveObject(e,t){const r=this._activeObject;return!!r&&!r.onDeselect({e,object:t})&&(this._currentTransform&&this._currentTransform.target===r&&this.endCurrentTransform(e),Pr(r)&&r===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(e){const t=this.getActiveObjects(),r=this.getActiveObject();t.length&&this.fire("before:selection:cleared",{e,deselected:[r]});const s=this._discardActiveObject(e);return this._fireSelectionEvents(t,e),s}endCurrentTransform(e){const t=this._currentTransform;this._finalizeCurrentTransform(e),t&&t.target&&(t.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(e){const t=this._currentTransform,r=t.target,s={e,target:r,transform:t,action:t.action};r._scaling&&(r._scaling=!1),r.setCoords(),t.actionPerformed&&(this.fire("object:modified",s),r.fire(bi,s))}setViewportTransform(e){super.setViewportTransform(e);const t=this._activeObject;t&&t.setCoords()}destroy(){const e=this._activeObject;Pr(e)&&(e.removeAll(),e.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(e){const t=this._activeObject;t&&t._renderControls(e)}_toObject(e,t,r){const s=this._realizeGroupTransformOnObject(e),i=super._toObject(e,t,r);return e.set(s),i}_realizeGroupTransformOnObject(e){const{group:t}=e;if(t&&Pr(t)&&this._activeObject===t){const r=On(e,["angle","flipX","flipY",le,dt,wt,Tn,kn,lt]);return Rb(e,t.calcOwnMatrix()),r}return{}}_setSVGObject(e,t,r){const s=this._realizeGroupTransformOnObject(t);super._setSVGObject(e,t,r),t.set(s)}}T(Qi,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class gx{constructor(e){T(this,"targets",[]),T(this,"__disposer",void 0);const t=()=>{const{hiddenTextarea:s}=e.getActiveObject()||{};s&&s.focus()},r=e.upperCanvasEl;r.addEventListener("click",t),this.__disposer=()=>r.removeEventListener("click",t)}exitTextEditing(){this.target=void 0,this.targets.forEach(e=>{e.isEditing&&e.exitEditing()})}add(e){this.targets.push(e)}remove(e){this.unregister(e),an(this.targets,e)}register(e){this.target=e}unregister(e){e===this.target&&(this.target=void 0)}onMouseMove(e){var t;!((t=this.target)===null||t===void 0)&&t.isEditing&&this.target.updateSelectionOnMouseMove(e)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const mx=["target","oldTarget","fireCanvas","e"],pt={passive:!1},sn=(n,e)=>{const t=n.getViewportPoint(e),r=n.getScenePoint(e);return{viewportPoint:t,scenePoint:r,pointer:t,absolutePointer:r}},pr=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.addEventListener(...t)},bt=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return n.removeEventListener(...t)},yx={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class ua extends Qi{constructor(e){super(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),T(this,"_isClick",void 0),T(this,"textEditingManager",new gx(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(t=>{this[t]=this[t].bind(this)}),this.addOrRemove(pr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(e,t){const r=this.upperCanvasEl,s=this._getEventPrefix();e(kh(r),"resize",this._onResize),e(r,s+"down",this._onMouseDown),e(r,"".concat(s,"move"),this._onMouseMove,pt),e(r,"".concat(s,"out"),this._onMouseOut),e(r,"".concat(s,"enter"),this._onMouseEnter),e(r,"wheel",this._onMouseWheel),e(r,"contextmenu",this._onContextMenu),e(r,"dblclick",this._onDoubleClick),e(r,"dragstart",this._onDragStart),e(r,"dragend",this._onDragEnd),e(r,"dragover",this._onDragOver),e(r,"dragenter",this._onDragEnter),e(r,"dragleave",this._onDragLeave),e(r,"drop",this._onDrop),this.enablePointerEvents||e(r,"touchstart",this._onTouchStart,pt)}removeListeners(){this.addOrRemove(bt,"remove");const e=this._getEventPrefix(),t=Mt(this.upperCanvasEl);bt(t,"".concat(e,"up"),this._onMouseUp),bt(t,"touchend",this._onTouchEnd,pt),bt(t,"".concat(e,"move"),this._onMouseMove,pt),bt(t,"touchmove",this._onMouseMove,pt),clearTimeout(this._willAddMouseDown)}_onMouseWheel(e){this.__onMouseWheel(e)}_onMouseOut(e){const t=this._hoveredTarget,r=k({e},sn(this,e));this.fire("mouse:out",k(k({},r),{},{target:t})),this._hoveredTarget=void 0,t&&t.fire("mouseout",k({},r)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",k(k({},r),{},{target:s})),s&&s.fire("mouseout",k({},r))}),this._hoveredTargets=[]}_onMouseEnter(e){this._currentTransform||this.findTarget(e)||(this.fire("mouse:over",k({e},sn(this,e))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(e){this._isClick=!1;const t=this.getActiveObject();if(t&&t.onDragStart(e)){this._dragSource=t;const r={e,target:t};return this.fire("dragstart",r),t.fire("dragstart",r),void pr(this.upperCanvasEl,"drag",this._onDragProgress)}ra(e)}_renderDragEffects(e,t,r){let s=!1;const i=this._dropTarget;i&&i!==t&&i!==r&&(i.clearContextTop(),s=!0),t==null||t.clearContextTop(),r!==t&&(r==null||r.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),t&&(o.save(),t.transform(o),t.renderDragSourceEffect(e),o.restore(),s=!0),r&&(o.save(),r.transform(o),r.renderDropTargetEffect(e),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(e){const t=!!e.dataTransfer&&e.dataTransfer.dropEffect!==ct,r=t?this._activeObject:void 0,s={e,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:t,dropTarget:r};bt(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(e)}_onDragProgress(e){const t={e,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",t),this._dragSource&&this._dragSource.fire("drag",t)}findDragTargets(e){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(e)),targets:[...this.targets]}}_onDragOver(e){const t="dragover",{target:r,targets:s}=this.findDragTargets(e),i=this._dragSource,o={e,target:r,subTargets:s,dragSource:i,canDrop:!1,dropTarget:void 0};let a;this.fire(t,o),this._fireEnterLeaveEvents(r,o),r&&(r.canDrop(e)&&(a=r),r.fire(t,o));for(let l=0;l<s.length;l++){const c=s[l];c.canDrop(e)&&(a=c),c.fire(t,o)}this._renderDragEffects(e,i,a),this._dropTarget=a}_onDragEnter(e){const{target:t,targets:r}=this.findDragTargets(e),s={e,target:t,subTargets:r,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(t,s)}_onDragLeave(e){const t={e,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",t),this._fireEnterLeaveEvents(void 0,t),this._renderDragEffects(e,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(e){const{target:t,targets:r}=this.findDragTargets(e),s=this._basicEventHandler("drop:before",k({e,target:t,subTargets:r,dragSource:this._dragSource},sn(this,e)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(e){const t=this.findTarget(e),r=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e,target:t,subTargets:r});return this.stopContextMenu&&ra(e),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(e){this._cacheTransformEventData(e),this._handleEvent(e,"dblclick"),this._resetTransformEventData()}getPointerId(e){const t=e.changedTouches;return t?t[0]&&t[0].identifier:this.enablePointerEvents?e.pointerId:-1}_isMainEvent(e){return e.isPrimary===!0||e.isPrimary!==!1&&(e.type==="touchend"&&e.touches.length===0||!e.changedTouches||e.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(e){let t=!this.allowTouchScrolling;const r=this._activeObject;this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(e)),this.__onMouseDown(e),(this.isDrawingMode||r&&this._target===r)&&(t=!0),t&&e.preventDefault(),this._resetTransformEventData();const s=this.upperCanvasEl,i=this._getEventPrefix(),o=Mt(s);pr(o,"touchend",this._onTouchEnd,pt),t&&pr(o,"touchmove",this._onMouseMove,pt),bt(s,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(e){this.__onMouseDown(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();bt(t,"".concat(r,"move"),this._onMouseMove,pt);const s=Mt(t);pr(s,"".concat(r,"up"),this._onMouseUp),pr(s,"".concat(r,"move"),this._onMouseMove,pt)}_onTouchEnd(e){if(e.touches.length>0)return;this.__onMouseUp(e),this._resetTransformEventData(),delete this.mainTouchId;const t=this._getEventPrefix(),r=Mt(this.upperCanvasEl);bt(r,"touchend",this._onTouchEnd,pt),bt(r,"touchmove",this._onMouseMove,pt),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{pr(this.upperCanvasEl,"".concat(t,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(e){this.__onMouseUp(e),this._resetTransformEventData();const t=this.upperCanvasEl,r=this._getEventPrefix();if(this._isMainEvent(e)){const s=Mt(this.upperCanvasEl);bt(s,"".concat(r,"up"),this._onMouseUp),bt(s,"".concat(r,"move"),this._onMouseMove,pt),pr(t,"".concat(r,"move"),this._onMouseMove,pt)}}_onMouseMove(e){const t=this.getActiveObject();!this.allowTouchScrolling&&(!t||!t.shouldStartDragging(e))&&e.preventDefault&&e.preventDefault(),this.__onMouseMove(e)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(e){const t=this.getActiveObject();return!!t!=!!e||t&&e&&t!==e}__onMouseUp(e){var t;this._cacheTransformEventData(e),this._handleEvent(e,"up:before");const r=this._currentTransform,s=this._isClick,i=this._target,{button:o}=e;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(e,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(e);if(!this._isMainEvent(e))return;let a,l,c=!1;if(r&&(this._finalizeCurrentTransform(e),c=r.actionPerformed),!s){const u=i===this._activeObject;this.handleSelection(e),c||(c=this._shouldRender(i)||!u&&i===this._activeObject)}if(i){const u=i.findControl(this.getViewportPoint(e),ta(e)),{key:h,control:d}=u||{};if(l=h,i.selectable&&i!==this._activeObject&&i.activeOn==="up")this.setActiveObject(i,e),c=!0;else if(d){const f=d.getMouseUpHandler(e,i,d);f&&(a=this.getScenePoint(e),f.call(d,e,r,a.x,a.y))}i.isMoving=!1}if(r&&(r.target!==i||r.corner!==l)){const u=r.target&&r.target.controls[r.corner],h=u&&u.getMouseUpHandler(e,r.target,u);a=a||this.getScenePoint(e),h&&h.call(u,e,r,a.x,a.y)}this._setCursorFromEvent(e,i),this._handleEvent(e,"up"),this._groupSelector=null,this._currentTransform=null,i&&(i.__corner=void 0),c?this.requestRenderAll():s||(t=this._activeObject)!==null&&t!==void 0&&t.isEditing||this.renderTop()}_basicEventHandler(e,t){const{target:r,subTargets:s=[]}=t;this.fire(e,t),r&&r.fire(e,t);for(let i=0;i<s.length;i++)s[i]!==r&&s[i].fire(e,t);return t}_handleEvent(e,t){const r=this._target,s=this.targets||[],i=k(k({e,target:r,subTargets:s},sn(this,e)),{},{transform:this._currentTransform},t==="up:before"||t==="up"?{isClick:this._isClick,currentTarget:this.findTarget(e),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(t),i),r&&r.fire("mouse".concat(t),i);for(let o=0;o<s.length;o++)s[o]!==r&&s[o].fire("mouse".concat(t),i)}_onMouseDownInDrawingMode(e){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(e),this.requestRenderAll());const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(t,{e,pointer:t}),this._handleEvent(e,"down")}_onMouseMoveInDrawingMode(e){if(this._isCurrentlyDrawing){const t=this.getScenePoint(e);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(t,{e,pointer:t})}this.setCursor(this.freeDrawingCursor),this._handleEvent(e,"move")}_onMouseUpInDrawingMode(e){const t=this.getScenePoint(e);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e,pointer:t}):this._isCurrentlyDrawing=!1,this._handleEvent(e,"up")}__onMouseDown(e){this._isClick=!0,this._cacheTransformEventData(e),this._handleEvent(e,"down:before");let t=this._target;const{button:r}=e;if(r)return(this.fireMiddleClick&&r===1||this.fireRightClick&&r===2)&&this._handleEvent(e,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(e);if(!this._isMainEvent(e)||this._currentTransform)return;let s=this._shouldRender(t),i=!1;if(this.handleMultiSelection(e,t)?(t=this._activeObject,i=!0,s=!0):this._shouldClearSelection(e,t)&&this.discardActiveObject(e),this.selection&&(!t||!t.selectable&&!t.isEditing&&t!==this._activeObject)){const o=this.getScenePoint(e);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(t){const o=t===this._activeObject;t.selectable&&t.activeOn==="down"&&this.setActiveObject(t,e);const a=t.findControl(this.getViewportPoint(e),ta(e));if(t===this._activeObject&&(a||!i)){this._setupCurrentTransform(e,t,o);const l=a?a.control:void 0,c=this.getScenePoint(e),u=l&&l.getMouseDownHandler(e,t,l);u&&u.call(l,e,this._currentTransform,c.x,c.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(e,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=this._pointer=this._absolutePointer=void 0}_cacheTransformEventData(e){this._resetTransformEventData(),this._pointer=this.getViewportPoint(e),this._absolutePointer=mn(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(e)}__onMouseMove(e){if(this._isClick=!1,this._cacheTransformEventData(e),this._handleEvent(e,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(e);if(!this._isMainEvent(e))return;const t=this._groupSelector;if(t){const r=this.getScenePoint(e);t.deltaX=r.x-t.x,t.deltaY=r.y-t.y,this.renderTop()}else if(this._currentTransform)this._transformObject(e);else{const r=this.findTarget(e);this._setCursorFromEvent(e,r),this._fireOverOutEvents(e,r)}this.textEditingManager.onMouseMove(e),this._handleEvent(e,"move"),this._resetTransformEventData()}_fireOverOutEvents(e,t){const r=this._hoveredTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("mouse",{e,target:t,oldTarget:r,fireCanvas:!0});for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("mouse",{e,target:i[a],oldTarget:s[a]});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(e,t){const r=this._draggedoverTarget,s=this._hoveredTargets,i=this.targets,o=Math.max(s.length,i.length);this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:e,oldTarget:r,fireCanvas:!0}));for(let a=0;a<o;a++)this.fireSyntheticInOutEvents("drag",k(k({},t),{},{target:i[a],oldTarget:s[a]}));this._draggedoverTarget=e}fireSyntheticInOutEvents(e,t){let{target:r,oldTarget:s,fireCanvas:i,e:o}=t,a=we(t,mx);const{targetIn:l,targetOut:c,canvasIn:u,canvasOut:h}=yx[e],d=s!==r;if(s&&d){const f=k(k({},a),{},{e:o,target:s,nextTarget:r},sn(this,o));i&&this.fire(h,f),s.fire(c,f)}if(r&&d){const f=k(k({},a),{},{e:o,target:r,previousTarget:s},sn(this,o));i&&this.fire(u,f),r.fire(l,f)}}__onMouseWheel(e){this._cacheTransformEventData(e),this._handleEvent(e,"wheel"),this._resetTransformEventData()}_transformObject(e){const t=this.getScenePoint(e),r=this._currentTransform,s=r.target,i=s.group?mn(t,void 0,s.group.calcTransformMatrix()):t;r.shiftKey=e.shiftKey,r.altKey=!!this.centeredKey&&e[this.centeredKey],this._performTransformAction(e,r,i),r.actionPerformed&&this.requestRenderAll()}_performTransformAction(e,t,r){const{action:s,actionHandler:i,target:o}=t,a=!!i&&i(e,t,r.x,r.y);a&&o.setCoords(),s==="drag"&&a&&(t.target.isMoving=!0,this.setCursor(t.target.moveCursor||this.moveCursor)),t.actionPerformed=t.actionPerformed||a}_setCursorFromEvent(e,t){if(!t)return void this.setCursor(this.defaultCursor);let r=t.hoverCursor||this.hoverCursor;const s=Pr(this._activeObject)?this._activeObject:null,i=(!s||t.group!==s)&&t.findControl(this.getViewportPoint(e));if(i){const o=i.control;this.setCursor(o.cursorStyleHandler(e,o,t))}else t.subTargetCheck&&this.targets.concat().reverse().map(o=>{r=o.hoverCursor||r}),this.setCursor(r)}handleMultiSelection(e,t){const r=this._activeObject,s=Pr(r);if(r&&this._isSelectionKeyPressed(e)&&this.selection&&t&&t.selectable&&(r!==t||s)&&(s||!t.isDescendantOf(r)&&!r.isDescendantOf(t))&&!t.onSelect({e})&&!r.getActiveControl()){if(s){const i=r.getObjects();if(t===r){const o=this.getViewportPoint(e);if(!(t=this.searchPossibleTargets(i,o)||this.searchPossibleTargets(this._objects,o))||!t.selectable)return!1}t.group===r?(r.remove(t),this._hoveredTarget=t,this._hoveredTargets=[...this.targets],r.size()===1&&this._setActiveObject(r.item(0),e)):(r.multiSelectAdd(t),this._hoveredTarget=r,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(i,e)}else{r.isEditing&&r.exitEditing();const i=new(W.getClass("ActiveSelection"))([],{canvas:this});i.multiSelectAdd(r,t),this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents([r],e)}return!0}return!1}handleSelection(e){if(!this.selection||!this._groupSelector)return!1;const{x:t,y:r,deltaX:s,deltaY:i}=this._groupSelector,o=new D(t,r),a=o.add(new D(s,i)),l=o.min(a),c=o.max(a).subtract(l),u=this.collectObjects({left:l.x,top:l.y,width:c.x,height:c.y},{includeIntersecting:!this.selectionFullyContained}),h=o.eq(a)?u[0]?[u[0]]:[]:u.length>1?u.filter(d=>!d.onSelect({e})).reverse():u;if(h.length===1)this.setActiveObject(h[0],e);else if(h.length>1){const d=W.getClass("ActiveSelection");this.setActiveObject(new d(h,{canvas:this}),e)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Qh={x1:0,y1:0,x2:0,y2:0},bx=k(k({},Qh),{},{r1:0,r2:0}),cn=(n,e)=>isNaN(n)&&typeof e=="number"?e:n,vx=/^(\d+\.\d+)%|(\d+)%$/;function ed(n){return n&&vx.test(n)}function td(n,e){const t=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(ed(n)?100:1):NaN;return Sn(0,cn(t,e),1)}const xx=/\s*;\s*/,Sx=/\s*:\s*/;function Cx(n,e){let t,r;const s=n.getAttribute("style");if(s){const o=s.split(xx);o[o.length-1]===""&&o.pop();for(let a=o.length;a--;){const[l,c]=o[a].split(Sx).map(u=>u.trim());l==="stop-color"?t=c:l==="stop-opacity"&&(r=c)}}const i=new ue(t||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:td(n.getAttribute("offset"),0),color:i.toRgb(),opacity:cn(parseFloat(r||n.getAttribute("stop-opacity")||""),1)*i.getAlpha()*e}}function _x(n,e){const t=[],r=n.getElementsByTagName("stop"),s=td(e,1);for(let i=r.length;i--;)t.push(Cx(r[i],s));return t}function rd(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function nd(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function Ot(n,e){return n.getAttribute(e)}function wx(n,e){return function(t,r){let s,{width:i,height:o,gradientUnits:a}=r;return Object.keys(t).reduce((l,c)=>{const u=t[c];return u==="Infinity"?s=1:u==="-Infinity"?s=0:(s=typeof u=="string"?parseFloat(u):u,typeof u=="string"&&ed(u)&&(s*=.01,a==="pixels"&&(c!=="x1"&&c!=="x2"&&c!=="r2"||(s*=i),c!=="y1"&&c!=="y2"||(s*=o)))),l[c]=s,l},{})}(rd(n)==="linear"?function(t){return{x1:Ot(t,"x1")||0,y1:Ot(t,"y1")||0,x2:Ot(t,"x2")||"100%",y2:Ot(t,"y2")||0}}(n):function(t){return{x1:Ot(t,"fx")||Ot(t,"cx")||"50%",y1:Ot(t,"fy")||Ot(t,"cy")||"50%",r1:0,x2:Ot(t,"cx")||"50%",y2:Ot(t,"cy")||"50%",r2:Ot(t,"r")||"50%"}}(n),k(k({},e),{},{gradientUnits:nd(n)}))}class Ms{constructor(e){const{type:t="linear",gradientUnits:r="pixels",coords:s={},colorStops:i=[],offsetX:o=0,offsetY:a=0,gradientTransform:l,id:c}=e||{};Object.assign(this,{type:t,gradientUnits:r,coords:k(k({},t==="radial"?bx:Qh),s),colorStops:i,offsetX:o,offsetY:a,gradientTransform:l,id:c?"".concat(c,"_").concat(yr()):yr()})}addColorStop(e){for(const t in e){const r=new ue(e[t]);this.colorStops.push({offset:parseFloat(t),color:r.toRgb(),opacity:r.getAlpha()})}return this}toObject(e){return k(k({},On(this,e)),{},{type:this.type,coords:k({},this.coords),colorStops:this.colorStops.map(t=>k({},t)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(e){let{additionalTransform:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[],s=this.gradientTransform?this.gradientTransform.concat():st.concat(),i=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(h=>k({},h)).sort((h,d)=>h.offset-d.offset);let a=-this.offsetX,l=-this.offsetY;var c;i==="objectBoundingBox"?(a/=e.width,l/=e.height):(a+=e.width/2,l+=e.height/2),(c=e)&&typeof c._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(a-=e.pathOffset.x,l-=e.pathOffset.y),s[4]-=a,s[5]-=l;const u=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(i,'"'),'gradientTransform="'.concat(t?t+" ":"").concat(Si(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:h,y1:d,x2:f,y2:p}=this.coords;r.push("<linearGradient ",u,' x1="',h,'" y1="',d,'" x2="',f,'" y2="',p,`">
`)}else if(this.type==="radial"){const{x1:h,y1:d,x2:f,y2:p,r1:g,r2:y}=this.coords,b=g>y;r.push("<radialGradient ",u,' cx="',b?h:f,'" cy="',b?d:p,'" r="',b?g:y,'" fx="',b?f:h,'" fy="',b?p:d,`">
`),b&&(o.reverse(),o.forEach(v=>{v.offset=1-v.offset}));const w=Math.min(g,y);if(w>0){const v=w/Math.max(g,y);o.forEach(S=>{S.offset+=v*(1-S.offset)})}}return o.forEach(h=>{let{color:d,offset:f,opacity:p}=h;r.push("<stop ",'offset="',100*f+"%",'" style="stop-color:',d,p!==void 0?";stop-opacity: "+p:";",`"/>
`)}),r.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),r.join("")}toLive(e){const{x1:t,y1:r,x2:s,y2:i,r1:o,r2:a}=this.coords,l=this.type==="linear"?e.createLinearGradient(t,r,s,i):e.createRadialGradient(t,r,o,s,i,a);return this.colorStops.forEach(c=>{let{color:u,opacity:h,offset:d}=c;l.addColorStop(d,h!==void 0?new ue(u).setAlpha(h).toRgba():u)}),l}static async fromObject(e){const{colorStops:t,gradientTransform:r}=e;return new this(k(k({},e),{},{colorStops:t?t.map(s=>k({},s)):void 0,gradientTransform:r?[...r]:void 0}))}static fromElement(e,t,r){const s=nd(e),i=t._findCenterFromElement();return new this(k({id:e.getAttribute("id")||void 0,type:rd(e),coords:wx(e,{width:r.viewBoxWidth||r.width,height:r.viewBoxHeight||r.height}),colorStops:_x(e,r.opacity),gradientUnits:s,gradientTransform:oa(e.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:t.width/2-i.x,offsetY:t.height/2-i.y}:{offsetX:0,offsetY:0}))}}T(Ms,"type","Gradient"),W.setClass(Ms,"gradient"),W.setClass(Ms,"linear"),W.setClass(Ms,"radial");const Tx=["type","source","patternTransform"];class Co{get type(){return"pattern"}set type(e){mr("warn","Setting type has no effect",e)}constructor(e){T(this,"repeat","repeat"),T(this,"offsetX",0),T(this,"offsetY",0),T(this,"crossOrigin",""),this.id=yr(),Object.assign(this,e)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(e){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?e.createPattern(this.source,this.repeat):null}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:t,crossOrigin:r}=this;return k(k({},On(this,e)),{},{type:"pattern",source:this.sourceToString(),repeat:t,crossOrigin:r,offsetX:Me(this.offsetX,re.NUM_FRACTION_DIGITS),offsetY:Me(this.offsetY,re.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(e){let{width:t,height:r}=e;const{source:s,repeat:i,id:o}=this,a=cn(this.offsetX/t,0),l=cn(this.offsetY/r,0),c=i==="repeat-y"||i==="no-repeat"?1+Math.abs(a||0):cn(s.width/t,0),u=i==="repeat-x"||i==="no-repeat"?1+Math.abs(l||0):cn(s.height/r,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(a,'" y="').concat(l,'" width="').concat(c,'" height="').concat(u,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(e,t){let{type:r,source:s,patternTransform:i}=e,o=we(e,Tx);const a=await oi(s,k(k({},t),{},{crossOrigin:o.crossOrigin}));return new this(k(k({},o),{},{patternTransform:i&&i.slice(0),source:a}))}}T(Co,"type","Pattern"),W.setClass(Co),W.setClass(Co,"pattern");const kx=["path","left","top"],Ox=["d"];class Mr extends Ze{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:r,left:s,top:i}=t,o=we(t,kx);super(),Object.assign(this,Mr.ownDefaults),this.setOptions(o),this._setPath(e||[],!0),typeof s=="number"&&this.set(le,s),typeof i=="number"&&this.set(lt,i)}_setPath(e,t){this.path=nx(Array.isArray(e)?e:dx(e)),this.setBoundingBox(t)}_findCenterFromElement(){const e=this._calcBoundsFromPath();return new D(e.left+e.width/2,e.top+e.height/2)}_renderPathCommands(e){const t=-this.pathOffset.x,r=-this.pathOffset.y;e.beginPath();for(const s of this.path)switch(s[0]){case"L":e.lineTo(s[1]+t,s[2]+r);break;case"M":e.moveTo(s[1]+t,s[2]+r);break;case"C":e.bezierCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r,s[5]+t,s[6]+r);break;case"Q":e.quadraticCurveTo(s[1]+t,s[2]+r,s[3]+t,s[4]+r);break;case"Z":e.closePath()}}_render(e){this._renderPathCommands(e),this._renderPaintInOrder(e)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{path:this.path.map(t=>t.slice())})}toDatalessObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=this.toObject(e);return this.sourcePath&&(delete t.path,t.sourcePath=this.sourcePath),t}_toSVG(){const e=fx(this.path,re.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(e,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const e=re.NUM_FRACTION_DIGITS;return" translate(".concat(Me(-this.pathOffset.x,e),", ").concat(Me(-this.pathOffset.y,e),")")}toClipPathSVG(e){const t=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}toSVG(e){const t=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:e,additionalTransform:t})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{width:t,height:r,pathOffset:s}=this._calcDimensions();this.set({width:t,height:r,pathOffset:s}),e&&this.setPositionByOrigin(s,K,K)}_calcBoundsFromPath(){const e=[];let t=0,r=0,s=0,i=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],i=o[2],e.push({x:t,y:r},{x:s,y:i});break;case"M":s=o[1],i=o[2],t=s,r=i;break;case"C":e.push(...Xc(s,i,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],i=o[6];break;case"Q":e.push(...Xc(s,i,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],i=o[4];break;case"Z":s=t,i=r}return nr(e)}_calcDimensions(){const e=this._calcBoundsFromPath();return k(k({},e),{},{pathOffset:new D(e.left+e.width/2,e.top+e.height/2)})}static fromObject(e){return this._fromObject(e,{extraParam:"path"})}static async fromElement(e,t,r){const s=hr(e,this.ATTRIBUTE_NAMES,r),{d:i}=s;return new this(i,k(k(k({},we(s,Ox)),t),{},{left:void 0,top:void 0}))}}T(Mr,"type","Path"),T(Mr,"cacheProperties",[...ur,"path","fillRule"]),T(Mr,"ATTRIBUTE_NAMES",[...xr,"d"]),W.setClass(Mr),W.setSVGClass(Mr);const Ex=["left","top","radius"],sd=["radius","startAngle","endAngle","counterClockwise"];class Zt extends Ze{static getDefaults(){return k(k({},super.getDefaults()),Zt.ownDefaults)}constructor(e){super(),Object.assign(this,Zt.ownDefaults),this.setOptions(e)}_set(e,t){return super._set(e,t),e==="radius"&&this.setRadius(t),this}_render(e){e.beginPath(),e.arc(0,0,this.radius,je(this.startAngle),je(this.endAngle),this.counterClockwise),this._renderPaintInOrder(e)}getRadiusX(){return this.get("radius")*this.get(dt)}getRadiusY(){return this.get("radius")*this.get(wt)}setRadius(e){this.radius=e,this.set({width:2*e,height:2*e})}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...sd,...e])}_toSVG(){const e=(this.endAngle-this.startAngle)%360;if(e===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:t}=this,r=je(this.startAngle),s=je(this.endAngle),i=lr(r)*t,o=cr(r)*t,a=lr(s)*t,l=cr(s)*t,c=e>180?1:0,u=this.counterClockwise?0:1;return['<path d="M '.concat(i," ").concat(o," A ").concat(t," ").concat(t," 0 ").concat(c," ").concat(u," ").concat(a," ").concat(l,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(e,t,r){const s=hr(e,this.ATTRIBUTE_NAMES,r),{left:i=0,top:o=0,radius:a=0}=s;return new this(k(k({},we(s,Ex)),{},{radius:a,left:i-a,top:o-a}))}static fromObject(e){return super._fromObject(e)}}T(Zt,"type","Circle"),T(Zt,"cacheProperties",[...ur,...sd]),T(Zt,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),T(Zt,"ATTRIBUTE_NAMES",["cx","cy","r",...xr]),W.setClass(Zt),W.setSVGClass(Zt);const Px=["x1","y1","x2","y2"],Mx=["x1","y1","x2","y2"],ha=["x1","x2","y1","y2"];class Qt extends Ze{constructor(){let[e,t,r,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Qt.ownDefaults),this.setOptions(i),this.x1=e,this.x2=r,this.y1=t,this.y2=s,this._setWidthHeight();const{left:o,top:a}=i;typeof o=="number"&&this.set(le,o),typeof a=="number"&&this.set(lt,a)}_setWidthHeight(){const{x1:e,y1:t,x2:r,y2:s}=this;this.width=Math.abs(r-e),this.height=Math.abs(s-t);const{left:i,top:o,width:a,height:l}=nr([{x:e,y:t},{x:r,y:s}]),c=new D(i+a/2,o+l/2);this.setPositionByOrigin(c,K,K)}_set(e,t){return super._set(e,t),ha.includes(e)&&this._setWidthHeight(),this}_render(e){e.beginPath();const t=this.calcLinePoints();e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2),e.lineWidth=this.strokeWidth;const r=e.strokeStyle;var s;_t(this.stroke)?e.strokeStyle=this.stroke.toLive(e):e.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:e.fillStyle,this.stroke&&this._renderStroke(e),e.strokeStyle=r}_findCenterFromElement(){return new D((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),this.calcLinePoints())}_getNonTransformedDimensions(){const e=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(e.y-=this.strokeWidth),this.height===0&&(e.x-=this.strokeWidth)),e}calcLinePoints(){const{x1:e,x2:t,y1:r,y2:s,width:i,height:o}=this,a=e<=t?-1:1,l=r<=s?-1:1;return{x1:a*i/2,x2:a*-i/2,y1:l*o/2,y2:l*-o/2}}_toSVG(){const{x1:e,x2:t,y1:r,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(e,'" y1="').concat(r,'" x2="').concat(t,'" y2="').concat(s,`" />
`)]}static async fromElement(e,t,r){const s=hr(e,this.ATTRIBUTE_NAMES,r),{x1:i=0,y1:o=0,x2:a=0,y2:l=0}=s;return new this([i,o,a,l],we(s,Px))}static fromObject(e){let{x1:t,y1:r,x2:s,y2:i}=e,o=we(e,Mx);return this._fromObject(k(k({},o),{},{points:[t,r,s,i]}),{extraParam:"points"})}}T(Qt,"type","Line"),T(Qt,"cacheProperties",[...ur,...ha]),T(Qt,"ATTRIBUTE_NAMES",xr.concat(ha)),W.setClass(Qt),W.setSVGClass(Qt);class Ar extends Ze{static getDefaults(){return k(k({},super.getDefaults()),Ar.ownDefaults)}constructor(e){super(),Object.assign(this,Ar.ownDefaults),this.setOptions(e)}_render(e){const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,r),e.lineTo(0,-r),e.lineTo(t,r),e.closePath(),this._renderPaintInOrder(e)}_toSVG(){const e=this.width/2,t=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-e," ").concat(t,",0 ").concat(-t,",").concat(e," ").concat(t),'" />']}}T(Ar,"type","Triangle"),T(Ar,"ownDefaults",{width:100,height:100}),W.setClass(Ar),W.setSVGClass(Ar);const id=["rx","ry"];class Jt extends Ze{static getDefaults(){return k(k({},super.getDefaults()),Jt.ownDefaults)}constructor(e){super(),Object.assign(this,Jt.ownDefaults),this.setOptions(e)}_set(e,t){switch(super._set(e,t),e){case"rx":this.rx=t,this.set("width",2*t);break;case"ry":this.ry=t,this.set("height",2*t)}return this}getRx(){return this.get("rx")*this.get(dt)}getRy(){return this.get("ry")*this.get(wt)}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...id,...e])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(e){e.beginPath(),e.save(),e.transform(1,0,0,this.ry/this.rx,0,0),e.arc(0,0,this.rx,0,mi,!1),e.restore(),this._renderPaintInOrder(e)}static async fromElement(e,t,r){const s=hr(e,this.ATTRIBUTE_NAMES,r);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function Dx(n){if(!n)return[];const e=n.replace(/,/g," ").trim().split(/\s+/),t=[];for(let r=0;r<e.length;r+=2)t.push({x:parseFloat(e[r]),y:parseFloat(e[r+1])});return t}T(Jt,"type","Ellipse"),T(Jt,"cacheProperties",[...ur,...id]),T(Jt,"ownDefaults",{rx:0,ry:0}),T(Jt,"ATTRIBUTE_NAMES",[...xr,"cx","cy","rx","ry"]),W.setClass(Jt),W.setSVGClass(Jt);const Ax=["left","top"],od={exactBoundingBox:!1};class at extends Ze{static getDefaults(){return k(k({},super.getDefaults()),at.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),T(this,"strokeDiff",void 0),Object.assign(this,at.ownDefaults),this.setOptions(t),this.points=e;const{left:r,top:s}=t;this.initialized=!0,this.setBoundingBox(!0),typeof r=="number"&&this.set(le,r),typeof s=="number"&&this.set(lt,s)}isOpen(){return!0}_projectStrokeOnPoints(e){return Sv(this.points,e,this.isOpen())}_calcDimensions(e){e=k({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},e||{});const t=this.exactBoundingBox?this._projectStrokeOnPoints(e).map(c=>c.projectedPoint):this.points;if(t.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new D,strokeOffset:new D,strokeDiff:new D};const r=nr(t),s=Yi(k(k({},e),{},{scaleX:1,scaleY:1})),i=nr(this.points.map(c=>ot(c,s,!0))),o=new D(this.scaleX,this.scaleY);let a=r.left+r.width/2,l=r.top+r.height/2;return this.exactBoundingBox&&(a-=l*Math.tan(je(this.skewX)),l-=a*Math.tan(je(this.skewY))),k(k({},r),{},{pathOffset:new D(a,l),strokeOffset:new D(i.left,i.top).subtract(new D(r.left,r.top)).multiply(o),strokeDiff:new D(r.width,r.height).subtract(new D(i.width,i.height)).multiply(o)})}_findCenterFromElement(){const e=nr(this.points);return new D(e.left+e.width/2,e.top+e.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(e){const{left:t,top:r,width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}=this._calcDimensions();this.set({width:s,height:i,pathOffset:o,strokeOffset:a,strokeDiff:l}),e&&this.setPositionByOrigin(new D(t+s/2,r+i/2),K,K)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new D(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(e).some(a=>this.strokeUniform||this.constructor.layoutProperties.includes(a))){var t,r;const{width:a,height:l}=this._calcDimensions(e);o=new D((t=e.width)!==null&&t!==void 0?t:a,(r=e.height)!==null&&r!==void 0?r:l)}else{var s,i;o=new D((s=e.width)!==null&&s!==void 0?s:this.width,(i=e.height)!==null&&i!==void 0?i:this.height)}return o.multiply(new D(e.scaleX||this.scaleX,e.scaleY||this.scaleY))}return super._getTransformedDimensions(e)}_set(e,t){const r=this.initialized&&this[e]!==t,s=super._set(e,t);return this.exactBoundingBox&&r&&((e===dt||e===wt)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(e))&&this.setDimensions(),s}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject(e)),{},{points:this.points.map(t=>{let{x:r,y:s}=t;return{x:r,y:s}})})}_toSVG(){const e=[],t=this.pathOffset.x,r=this.pathOffset.y,s=re.NUM_FRACTION_DIGITS;for(let i=0,o=this.points.length;i<o;i++)e.push(Me(this.points[i].x-t,s),",",Me(this.points[i].y-r,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(e.join(""),`" />
`)]}_render(e){const t=this.points.length,r=this.pathOffset.x,s=this.pathOffset.y;if(t&&!isNaN(this.points[t-1].y)){e.beginPath(),e.moveTo(this.points[0].x-r,this.points[0].y-s);for(let i=0;i<t;i++){const o=this.points[i];e.lineTo(o.x-r,o.y-s)}!this.isOpen()&&e.closePath(),this._renderPaintInOrder(e)}}complexity(){return this.points.length}static async fromElement(e,t,r){return new this(Dx(e.getAttribute("points")),k(k({},we(hr(e,this.ATTRIBUTE_NAMES,r),Ax)),t))}static fromObject(e){return this._fromObject(e,{extraParam:"points"})}}T(at,"ownDefaults",od),T(at,"type","Polyline"),T(at,"layoutProperties",[Tn,kn,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),T(at,"cacheProperties",[...ur,"points"]),T(at,"ATTRIBUTE_NAMES",[...xr]),W.setClass(at),W.setSVGClass(at);class Rr extends at{isOpen(){return!1}}T(Rr,"ownDefaults",od),T(Rr,"type","Polygon"),W.setClass(Rr),W.setSVGClass(Rr);const ad=["fontSize","fontWeight","fontFamily","fontStyle"],ld=["underline","overline","linethrough"],cd=[...ad,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],ud=[...cd,...ld,"textBackgroundColor","direction"],Rx=[...ad,...ld,ut,"strokeWidth",We,"deltaY","textBackgroundColor"],jx={_reNewline:Ka,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:le,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:le,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Wt="justify",Oi="justify-left",Qn="justify-right",es="justify-center";class hd extends Ze{isEmptyStyles(e){if(!this.styles||e!==void 0&&!this.styles[e])return!0;const t=e===void 0?this.styles:{line:this.styles[e]};for(const r in t)for(const s in t[r])for(const i in t[r][s])return!1;return!0}styleHas(e,t){if(!this.styles||t!==void 0&&!this.styles[t])return!1;const r=t===void 0?this.styles:{0:this.styles[t]};for(const s in r)for(const i in r[s])if(r[s][i][e]!==void 0)return!0;return!1}cleanStyle(e){if(!this.styles)return!1;const t=this.styles;let r,s,i=0,o=!0,a=0;for(const l in t){r=0;for(const c in t[l]){const u=t[l][c]||{};i++,u[e]!==void 0?(s?u[e]!==s&&(o=!1):s=u[e],u[e]===this[e]&&delete u[e]):o=!1,Object.keys(u).length!==0?r++:delete t[l][c]}r===0&&delete t[l]}for(let l=0;l<this._textLines.length;l++)a+=this._textLines[l].length;o&&i===a&&(this[e]=s,this.removeStyle(e))}removeStyle(e){if(!this.styles)return;const t=this.styles;let r,s,i;for(s in t){for(i in r=t[s],r)delete r[i][e],Object.keys(r[i]).length===0&&delete r[i];Object.keys(r).length===0&&delete t[s]}}_extendStyles(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);this._getLineStyle(r)||this._setLineStyle(r);const i=tl(k(k({},this._getStyleDeclaration(r,s)),t),o=>o!==void 0);this._setStyleDeclaration(r,s,i)}getSelectionStyles(e,t,r){const s=[];for(let i=e;i<(t||e);i++)s.push(this.getStyleAtPosition(i,r));return s}getStyleAtPosition(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e);return t?this.getCompleteStyleDeclaration(r,s):this._getStyleDeclaration(r,s)}setSelectionStyles(e,t,r){for(let s=t;s<(r||t);s++)this._extendStyles(s,e);this._forceClearCache=!0}_getStyleDeclaration(e,t){var r;const s=this.styles&&this.styles[e];return s&&(r=s[t])!==null&&r!==void 0?r:{}}getCompleteStyleDeclaration(e,t){return k(k({},On(this,this.constructor._styleProperties)),this._getStyleDeclaration(e,t))}_setStyleDeclaration(e,t,r){this.styles[e][t]=r}_deleteStyleDeclaration(e,t){delete this.styles[e][t]}_getLineStyle(e){return!!this.styles[e]}_setLineStyle(e){this.styles[e]={}}_deleteLineStyle(e){delete this.styles[e]}}T(hd,"_styleProperties",Rx);const Fx=/  +/g,Ix=/"/g;function _o(n,e,t,r,s){return"		".concat(function(i,o){let{left:a,top:l,width:c,height:u}=o,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:re.NUM_FRACTION_DIGITS;const d=as(We,i,!1),[f,p,g,y]=[a,l,c,u].map(b=>Me(b,h));return"<rect ".concat(d,' x="').concat(f,'" y="').concat(p,'" width="').concat(g,'" height="').concat(y,'"></rect>')}(n,{left:e,top:t,width:r,height:s}),`
`)}const Lx=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let wo;class rt extends hd{static getDefaults(){return k(k({},super.getDefaults()),rt.ownDefaults)}constructor(e,t){super(),T(this,"__charBounds",[]),Object.assign(this,rt.ownDefaults),this.setOptions(t),this.styles||(this.styles={}),this.text=e,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const e=this.path;e&&(e.segmentsInfo=Jh(e.path))}_splitText(){const e=this._splitTextIntoLines(this.text);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Wt)&&this.enlargeSpaces()}enlargeSpaces(){let e,t,r,s,i,o,a;for(let l=0,c=this._textLines.length;l<c;l++)if((this.textAlign===Wt||l!==c-1&&!this.isEndOfWrapping(l))&&(s=0,i=this._textLines[l],t=this.getLineWidth(l),t<this.width&&(a=this.textLines[l].match(this._reSpacesAndTabs)))){r=a.length,e=(this.width-t)/r;for(let u=0;u<=i.length;u++)o=this.__charBounds[l][u],this._reSpaceAndTab.test(i[u])?(o.width+=e,o.kernedWidth+=e,o.left+=s,s+=e):o.left+=s}}isEndOfWrapping(e){return e===this._textLines.length-1}missingNewlineOffset(e){return 1}get2DCursorLocation(e,t){const r=t?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<r.length;s++){if(e<=r[s].length)return{lineIndex:s,charIndex:e};e-=r[s].length+this.missingNewlineOffset(s,t)}return{lineIndex:s-1,charIndex:r[s-1].length<e?r[s-1].length:e}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const e=super._getCacheCanvasDimensions(),t=this.fontSize;return e.width+=t*e.zoomX,e.height+=t*e.zoomY,e}_render(e){const t=this.path;t&&!t.isNotVisible()&&t._render(e),this._setTextStyles(e),this._renderTextLinesBackground(e),this._renderTextDecoration(e,"underline"),this._renderText(e),this._renderTextDecoration(e,"overline"),this._renderTextDecoration(e,"linethrough")}_renderText(e){this.paintFirst===ut?(this._renderTextStroke(e),this._renderTextFill(e)):(this._renderTextFill(e),this._renderTextStroke(e))}_setTextStyles(e,t,r){if(e.textBaseline="alphabetic",this.path)switch(this.pathAlign){case K:e.textBaseline="middle";break;case"ascender":e.textBaseline=lt;break;case"descender":e.textBaseline=Qo}e.font=this._getFontDeclaration(t,r)}calcTextWidth(){let e=this.getLineWidth(0);for(let t=1,r=this._textLines.length;t<r;t++){const s=this.getLineWidth(t);s>e&&(e=s)}return e}_renderTextLine(e,t,r,s,i,o){this._renderChars(e,t,r,s,i,o)}_renderTextLinesBackground(e){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const t=e.fillStyle,r=this._getLeftOffset();let s=this._getTopOffset();for(let i=0,o=this._textLines.length;i<o;i++){const a=this.getHeightOfLine(i);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",i)){s+=a;continue}const l=this._textLines[i].length,c=this._getLineLeftOffset(i);let u,h,d=0,f=0,p=this.getValueOfPropertyAt(i,0,"textBackgroundColor");for(let g=0;g<l;g++){const y=this.__charBounds[i][g];h=this.getValueOfPropertyAt(i,g,"textBackgroundColor"),this.path?(e.save(),e.translate(y.renderLeft,y.renderTop),e.rotate(y.angle),e.fillStyle=h,h&&e.fillRect(-y.width/2,-a/this.lineHeight*(1-this._fontSizeFraction),y.width,a/this.lineHeight),e.restore()):h!==p?(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=p,p&&e.fillRect(u,s,d,a/this.lineHeight),f=y.left,d=y.width,p=h):d+=y.kernedWidth}h&&!this.path&&(u=r+c+f,this.direction==="rtl"&&(u=this.width-u-d),e.fillStyle=h,e.fillRect(u,s,d,a/this.lineHeight)),s+=a}e.fillStyle=t,this._removeShadow(e)}_measureChar(e,t,r,s){const i=Zn.getFontCache(t),o=this._getFontDeclaration(t),a=r+e,l=r&&o===this._getFontDeclaration(s),c=t.fontSize/this.CACHE_FONT_SIZE;let u,h,d,f;if(r&&i[r]!==void 0&&(d=i[r]),i[e]!==void 0&&(f=u=i[e]),l&&i[a]!==void 0&&(h=i[a],f=h-d),u===void 0||d===void 0||h===void 0){const p=function(){return wo||(wo=Xt({width:0,height:0}).getContext("2d")),wo}();this._setTextStyles(p,t,!0),u===void 0&&(f=u=p.measureText(e).width,i[e]=u),d===void 0&&l&&r&&(d=p.measureText(r).width,i[r]=d),l&&h===void 0&&(h=p.measureText(a).width,i[a]=h,f=h-d)}return{width:u*c,kernedWidth:f*c}}getHeightOfChar(e,t){return this.getValueOfPropertyAt(e,t,"fontSize")}measureLine(e){const t=this._measureLine(e);return this.charSpacing!==0&&(t.width-=this._getWidthOfCharSpacing()),t.width<0&&(t.width=0),t}_measureLine(e){let t,r,s=0;const i=this.pathSide===Re,o=this.path,a=this._textLines[e],l=a.length,c=new Array(l);this.__charBounds[e]=c;for(let u=0;u<l;u++){const h=a[u];r=this._getGraphemeBox(h,e,u,t),c[u]=r,s+=r.kernedWidth,t=h}if(c[l]={left:r?r.left+r.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let u=0;const h=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case le:u=i?h-s:0;break;case K:u=(h-s)/2;break;case Re:u=i?0:h-s}u+=this.pathStartOffset*(i?-1:1);for(let d=i?l-1:0;i?d>=0:d<l;i?d--:d++)r=c[d],u>h?u%=h:u<0&&(u+=h),this._setGraphemeOnPath(u,r),u+=r.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(e,t){const r=e+t.kernedWidth/2,s=this.path,i=lx(s.path,r,s.segmentsInfo);t.renderLeft=i.x-s.pathOffset.x,t.renderTop=i.y-s.pathOffset.y,t.angle=i.angle+(this.pathSide===Re?Math.PI:0)}_getGraphemeBox(e,t,r,s,i){const o=this.getCompleteStyleDeclaration(t,r),a=s?this.getCompleteStyleDeclaration(t,r-1):{},l=this._measureChar(e,o,s,a);let c,u=l.kernedWidth,h=l.width;this.charSpacing!==0&&(c=this._getWidthOfCharSpacing(),h+=c,u+=c);const d={width:h,left:0,height:o.fontSize,kernedWidth:u,deltaY:o.deltaY};if(r>0&&!i){const f=this.__charBounds[t][r-1];d.left=f.left+f.width+l.kernedWidth-l.width}return d}getHeightOfLine(e){if(this.__lineHeights[e])return this.__lineHeights[e];let t=this.getHeightOfChar(e,0);for(let r=1,s=this._textLines[e].length;r<s;r++)t=Math.max(this.getHeightOfChar(e,r),t);return this.__lineHeights[e]=t*this.lineHeight*this._fontSizeMult}calcTextHeight(){let e,t=0;for(let r=0,s=this._textLines.length;r<s;r++)e=this.getHeightOfLine(r),t+=r===s-1?e/this.lineHeight:e;return t}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(e,t){e.save();let r=0;const s=this._getLeftOffset(),i=this._getTopOffset();for(let o=0,a=this._textLines.length;o<a;o++){const l=this.getHeightOfLine(o),c=l/this.lineHeight,u=this._getLineLeftOffset(o);this._renderTextLine(t,e,this._textLines[o],s+u,i+r+c,o),r+=l}e.restore()}_renderTextFill(e){(this.fill||this.styleHas(We))&&this._renderTextCommon(e,"fillText")}_renderTextStroke(e){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(e),e.save(),this._setLineDash(e,this.strokeDashArray),e.beginPath(),this._renderTextCommon(e,"strokeText"),e.closePath(),e.restore())}_renderChars(e,t,r,s,i,o){const a=this.getHeightOfLine(o),l=this.textAlign.includes(Wt),c=this.path,u=!l&&this.charSpacing===0&&this.isEmptyStyles(o)&&!c,h=this.direction==="ltr",d=this.direction==="ltr"?1:-1,f=t.direction;let p,g,y,b,w,v="",S=0;if(t.save(),f!==this.direction&&(t.canvas.setAttribute("dir",h?"ltr":"rtl"),t.direction=h?"ltr":"rtl",t.textAlign=h?le:Re),i-=a*this._fontSizeFraction/this.lineHeight,u)return this._renderChar(e,t,o,0,r.join(""),s,i),void t.restore();for(let x=0,O=r.length-1;x<=O;x++)b=x===O||this.charSpacing||c,v+=r[x],y=this.__charBounds[o][x],S===0?(s+=d*(y.kernedWidth-y.width),S+=y.width):S+=y.kernedWidth,l&&!b&&this._reSpaceAndTab.test(r[x])&&(b=!0),b||(p=p||this.getCompleteStyleDeclaration(o,x),g=this.getCompleteStyleDeclaration(o,x+1),b=cl(p,g,!1)),b&&(c?(t.save(),t.translate(y.renderLeft,y.renderTop),t.rotate(y.angle),this._renderChar(e,t,o,x,v,-S/2,0),t.restore()):(w=s,this._renderChar(e,t,o,x,v,w,i)),v="",p=g,s+=d*S,S=0);t.restore()}_applyPatternGradientTransformText(e){const t=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=Xt({width:t,height:r}),i=s.getContext("2d");return s.width=t,s.height=r,i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(t,r),i.lineTo(0,r),i.closePath(),i.translate(t/2,r/2),i.fillStyle=e.toLive(i),this._applyPatternGradientTransform(i,e),i.fill(),i.createPattern(s,"no-repeat")}handleFiller(e,t,r){let s,i;return _t(r)?r.gradientUnits==="percentage"||r.gradientTransform||r.patternTransform?(s=-this.width/2,i=-this.height/2,e.translate(s,i),e[t]=this._applyPatternGradientTransformText(r),{offsetX:s,offsetY:i}):(e[t]=r.toLive(e),this._applyPatternGradientTransform(e,r)):(e[t]=r,{offsetX:0,offsetY:0})}_setStrokeStyles(e,t){let{stroke:r,strokeWidth:s}=t;return e.lineWidth=s,e.lineCap=this.strokeLineCap,e.lineDashOffset=this.strokeDashOffset,e.lineJoin=this.strokeLineJoin,e.miterLimit=this.strokeMiterLimit,this.handleFiller(e,"strokeStyle",r)}_setFillStyles(e,t){let{fill:r}=t;return this.handleFiller(e,"fillStyle",r)}_renderChar(e,t,r,s,i,o,a){const l=this._getStyleDeclaration(r,s),c=this.getCompleteStyleDeclaration(r,s),u=e==="fillText"&&c.fill,h=e==="strokeText"&&c.stroke&&c.strokeWidth;if(h||u){if(t.save(),t.font=this._getFontDeclaration(c),l.textBackgroundColor&&this._removeShadow(t),l.deltaY&&(a+=l.deltaY),u){const d=this._setFillStyles(t,c);t.fillText(i,o-d.offsetX,a-d.offsetY)}if(h){const d=this._setStrokeStyles(t,c);t.strokeText(i,o-d.offsetX,a-d.offsetY)}t.restore()}}setSuperscript(e,t){this._setScript(e,t,this.superscript)}setSubscript(e,t){this._setScript(e,t,this.subscript)}_setScript(e,t,r){const s=this.get2DCursorLocation(e,!0),i=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),a={fontSize:i*r.size,deltaY:o+i*r.baseline};this.setSelectionStyles(a,e,t)}_getLineLeftOffset(e){const t=this.getLineWidth(e),r=this.width-t,s=this.textAlign,i=this.direction,o=this.isEndOfWrapping(e);let a=0;return s===Wt||s===es&&!o||s===Qn&&!o||s===Oi&&!o?0:(s===K&&(a=r/2),s===Re&&(a=r),s===es&&(a=r/2),s===Qn&&(a=r),i==="rtl"&&(s===Re||s===Wt||s===Qn?a=0:s===le||s===Oi?a=-r:s!==K&&s!==es||(a=-r/2)),a)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(e){if(this.__lineWidths[e]!==void 0)return this.__lineWidths[e];const{width:t}=this.measureLine(e);return this.__lineWidths[e]=t,t}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(e,t,r){var s;return(s=this._getStyleDeclaration(e,t)[r])!==null&&s!==void 0?s:this[r]}_renderTextDecoration(e,t){if(!this[t]&&!this.styleHas(t))return;let r=this._getTopOffset();const s=this._getLeftOffset(),i=this.path,o=this._getWidthOfCharSpacing(),a=this.offsets[t];for(let l=0,c=this._textLines.length;l<c;l++){const u=this.getHeightOfLine(l);if(!this[t]&&!this.styleHas(t,l)){r+=u;continue}const h=this._textLines[l],d=u/this.lineHeight,f=this._getLineLeftOffset(l);let p,g,y=0,b=0,w=this.getValueOfPropertyAt(l,0,t),v=this.getValueOfPropertyAt(l,0,We);const S=r+d*(1-this._fontSizeFraction);let x=this.getHeightOfChar(l,0),O=this.getValueOfPropertyAt(l,0,"deltaY");for(let M=0,L=h.length;M<L;M++){const m=this.__charBounds[l][M];p=this.getValueOfPropertyAt(l,M,t),g=this.getValueOfPropertyAt(l,M,We);const E=this.getHeightOfChar(l,M),j=this.getValueOfPropertyAt(l,M,"deltaY");if(i&&p&&g)e.save(),e.fillStyle=v,e.translate(m.renderLeft,m.renderTop),e.rotate(m.angle),e.fillRect(-m.kernedWidth/2,a*E+j,m.kernedWidth,this.fontSize/15),e.restore();else if((p!==w||g!==v||E!==x||j!==O)&&b>0){let R=s+f+y;this.direction==="rtl"&&(R=this.width-R-b),w&&v&&(e.fillStyle=v,e.fillRect(R,S+a*x+O,b,this.fontSize/15)),y=m.left,b=m.width,w=p,v=g,x=E,O=j}else b+=m.kernedWidth}let P=s+f+y;this.direction==="rtl"&&(P=this.width-P-b),e.fillStyle=g,p&&g&&e.fillRect(P,S+a*x+O,b-o,this.fontSize/15),r+=u}this._removeShadow(e)}_getFontDeclaration(){let{fontFamily:e=this.fontFamily,fontStyle:t=this.fontStyle,fontWeight:r=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const o=e.includes("'")||e.includes('"')||e.includes(",")||rt.genericFonts.includes(e.toLowerCase())?e:'"'.concat(e,'"');return[t,r,"".concat(i?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(e){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(e)))}graphemeSplit(e){return ll(e)}_splitTextIntoLines(e){const t=e.split(this._reNewline),r=new Array(t.length),s=[`
`];let i=[];for(let o=0;o<t.length;o++)r[o]=this.graphemeSplit(t[o]),i=i.concat(r[o],s);return i.pop(),{_unwrappedLines:r,lines:t,graphemeText:i,graphemeLines:r}}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return k(k({},super.toObject([...ud,...e])),{},{styles:wv(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(e,t){const{textLayoutProperties:r}=this.constructor;super.set(e,t);let s=!1,i=!1;if(typeof e=="object")for(const o in e)o==="path"&&this.setPathInfo(),s=s||r.includes(o),i=i||o==="path";else s=r.includes(e),i=e==="path";return i&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(e,t,r){const s=hr(e,rt.ATTRIBUTE_NAMES,r),i=k(k({},t),s),{textAnchor:o=le,textDecoration:a="",dx:l=0,dy:c=0,top:u=0,left:h=0,fontSize:d=Ga,strokeWidth:f=1}=i,p=we(i,Lx),g=new this((e.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),k({left:h+l,top:u+c,underline:a.includes("underline"),overline:a.includes("overline"),linethrough:a.includes("line-through"),strokeWidth:0,fontSize:d},p)),y=g.getScaledHeight()/g.height,b=((g.height+g.strokeWidth)*g.lineHeight-g.height)*y,w=g.getScaledHeight()+b;let v=0;return o===K&&(v=g.getScaledWidth()/2),o===Re&&(v=g.getScaledWidth()),g.set({left:g.left-v,top:g.top-(w-g.fontSize*(.07+g._fontSizeFraction))/g.lineHeight,strokeWidth:f}),g}static fromObject(e){return this._fromObject(k(k({},e),{},{styles:Tv(e.styles||{},e.text)}),{extraParam:"text"})}}T(rt,"textLayoutProperties",cd),T(rt,"cacheProperties",[...ur,...ud]),T(rt,"ownDefaults",jx),T(rt,"type","Text"),T(rt,"genericFonts",["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),T(rt,"ATTRIBUTE_NAMES",xr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),Vh(rt,[class extends jh{_toSVG(){const n=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:e,textSpans:t}=n;const r=this.getSvgTextDecoration(this);return[e.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(Ix,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",r?'text-decoration="'.concat(r,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.join(""),`</text>
`]}_getSVGTextAndBg(n,e){const t=[],r=[];let s,i=n;this.backgroundColor&&r.push(..._o(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,a=this._textLines.length;o<a;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+s,i),this._setSVGTextLineText(t,o,e+s,i),i+=this.getHeightOfLine(o);return{textSpans:t,textBgRects:r}}_createTextCharSpan(n,e,t,r){const s=this.getSvgSpanStyles(e,n!==n.trim()||!!n.match(Fx)),i=s?'style="'.concat(s,'"'):"",o=e.deltaY,a=o?' dy="'.concat(Me(o,re.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Me(t,re.NUM_FRACTION_DIGITS),'" y="').concat(Me(r,re.NUM_FRACTION_DIGITS),'" ').concat(a).concat(i,">").concat(Cv(n),"</tspan>")}_setSVGTextLineText(n,e,t,r){const s=this.getHeightOfLine(e),i=this.textAlign.includes(Wt),o=this._textLines[e];let a,l,c,u,h,d="",f=0;r+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let p=0,g=o.length-1;p<=g;p++)h=p===g||this.charSpacing,d+=o[p],c=this.__charBounds[e][p],f===0?(t+=c.kernedWidth-c.width,f+=c.width):f+=c.kernedWidth,i&&!h&&this._reSpaceAndTab.test(o[p])&&(h=!0),h||(a=a||this.getCompleteStyleDeclaration(e,p),l=this.getCompleteStyleDeclaration(e,p+1),h=cl(a,l,!0)),h&&(u=this._getStyleDeclaration(e,p),n.push(this._createTextCharSpan(d,u,t,r)),d="",a=l,this.direction==="rtl"?t-=f:t+=f,f=0)}_setSVGTextLineBg(n,e,t,r){const s=this._textLines[e],i=this.getHeightOfLine(e)/this.lineHeight;let o,a=0,l=0,c=this.getValueOfPropertyAt(e,0,"textBackgroundColor");for(let u=0;u<s.length;u++){const{left:h,width:d,kernedWidth:f}=this.__charBounds[e][u];o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==c?(c&&n.push(..._o(c,t+l,r,a,i)),l=h,a=d,c=o):a+=f}o&&n.push(..._o(c,t+l,r,a,i))}_getSVGLineTopOffset(n){let e,t=0;for(e=0;e<n;e++)t+=this.getHeightOfLine(e);const r=this.getHeightOfLine(e);return{lineTop:t,offset:(this._fontSizeMult-this._fontSizeFraction)*r/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,e){const{fontFamily:t,strokeWidth:r,stroke:s,fill:i,fontSize:o,fontStyle:a,fontWeight:l,deltaY:c}=n,u=this.getSvgTextDecoration(n);return[s?as(ut,s):"",r?"stroke-width: ".concat(r,"; "):"",t?"font-family: ".concat(t.includes("'")||t.includes('"')?t:"'".concat(t,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",a?"font-style: ".concat(a,"; "):"",l?"font-weight: ".concat(l,"; "):"",u&&"text-decoration: ".concat(u,"; "),i?as(We,i):"",c?"baseline-shift: ".concat(-c,"; "):"",e?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(e=>n[e.replace("-","")]).join(" ")}}]),W.setClass(rt),W.setSVGClass(rt);class Bx{constructor(e){T(this,"target",void 0),T(this,"__mouseDownInPlace",!1),T(this,"__dragStartFired",!1),T(this,"__isDraggingOver",!1),T(this,"__dragStartSelection",void 0),T(this,"__dragImageDisposer",void 0),T(this,"_dispose",void 0),this.target=e;const t=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{t.forEach(r=>r()),this._dispose=void 0}}isPointerOverSelection(e){const t=this.target,r=t.getSelectionStartFromPointer(e);return t.isEditing&&r>=t.selectionStart&&r<=t.selectionEnd&&t.selectionStart<t.selectionEnd}start(e){return this.__mouseDownInPlace=this.isPointerOverSelection(e)}isActive(){return this.__mouseDownInPlace}end(e){const t=this.isActive();return t&&!this.__dragStartFired&&(this.target.setCursorByClick(e),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,t}getDragStartSelection(){return this.__dragStartSelection}setDragImage(e,t){var r;let{selectionStart:s,selectionEnd:i}=t;const o=this.target,a=o.canvas,l=new D(o.flipX?-1:1,o.flipY?-1:1),c=o._getCursorBoundaries(s),u=new D(c.left+c.leftOffset,c.top+c.topOffset).multiply(l).transform(o.calcTransformMatrix()),h=a.getScenePoint(e).subtract(u),d=o.getCanvasRetinaScaling(),f=o.getBoundingRect(),p=u.subtract(new D(f.left,f.top)),g=a.viewportTransform,y=p.add(h).transform(g,!0),b=o.backgroundColor,w=al(o.styles);o.backgroundColor="";const v={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(v,0,s),o.setSelectionStyles(v,i,o.text.length),o.dirty=!0;const S=o.toCanvasElement({enableRetinaScaling:a.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=b,o.styles=w,o.dirty=!0,ca(S,{position:"fixed",left:"".concat(-S.width,"px"),border:ct,width:"".concat(S.width/d,"px"),height:"".concat(S.height/d,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{S.remove()},Mt(e.target||this.target.hiddenTextarea).body.appendChild(S),(r=e.dataTransfer)===null||r===void 0||r.setDragImage(S,y.x,y.y)}onDragStart(e){this.__dragStartFired=!0;const t=this.target,r=this.isActive();if(r&&e.dataTransfer){const s=this.__dragStartSelection={selectionStart:t.selectionStart,selectionEnd:t.selectionEnd},i=t._text.slice(s.selectionStart,s.selectionEnd).join(""),o=k({text:t.text,value:i},s);e.dataTransfer.setData("text/plain",i),e.dataTransfer.setData("application/fabric",JSON.stringify({value:i,styles:t.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),e.dataTransfer.effectAllowed="copyMove",this.setDragImage(e,o)}return t.abortCursorAnimation(),r}canDrop(e){if(this.target.editable&&!this.target.getActiveControl()&&!e.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const t=this.target.getSelectionStartFromPointer(e),r=this.__dragStartSelection;return t<r.selectionStart||t>r.selectionEnd}return!0}return!1}targetCanDrop(e){return this.target.canDrop(e)}dragEnterHandler(e){let{e:t}=e;const r=this.targetCanDrop(t);!this.__isDraggingOver&&r&&(this.__isDraggingOver=!0)}dragOverHandler(e){const{e:t}=e,r=this.targetCanDrop(t);!this.__isDraggingOver&&r?this.__isDraggingOver=!0:this.__isDraggingOver&&!r&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(t.preventDefault(),e.canDrop=!0,e.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(e){var t;const{e:r}=e,s=r.defaultPrevented;this.__isDraggingOver=!1,r.preventDefault();let i=(t=r.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain");if(i&&!s){const o=this.target,a=o.canvas;let l=o.getSelectionStartFromPointer(r);const{styles:c}=r.dataTransfer.types.includes("application/fabric")?JSON.parse(r.dataTransfer.getData("application/fabric")):{},u=i[Math.max(0,i.length-1)],h=0;if(this.__dragStartSelection){const d=this.__dragStartSelection.selectionStart,f=this.__dragStartSelection.selectionEnd;l>d&&l<=f?l=d:l>f&&(l-=f-d),o.removeChars(d,f),delete this.__dragStartSelection}o._reNewline.test(u)&&(o._reNewline.test(o._text[l])||l===o._text.length)&&(i=i.trimEnd()),e.didDrop=!0,e.dropTarget=o,o.insertChars(i,c,l),a.setActiveObject(o),o.enterEditing(r),o.selectionStart=Math.min(l+h,o._text.length),o.selectionEnd=Math.min(o.selectionStart+i.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(yi,{index:l+h,action:"drop"}),a.fire("text:changed",{target:o}),a.contextTopDirty=!0,a.requestRenderAll()}}dragEndHandler(e){let{e:t}=e;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var r;const s=this.target,i=this.target.canvas,{selectionStart:o,selectionEnd:a}=this.__dragStartSelection,l=((r=t.dataTransfer)===null||r===void 0?void 0:r.dropEffect)||ct;l===ct?(s.selectionStart=o,s.selectionEnd=a,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),l==="move"&&(s.removeChars(o,a),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(yi,{index:o,action:"dragend"}),i.fire("text:changed",{target:s}),i.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Gc=/[ \n\.,;!\?\-]/;class Nx extends rt{constructor(){super(...arguments),T(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(e){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(e)}_animateCursor(e){let{toValue:t,duration:r,delay:s,onComplete:i}=e;return Bh({startValue:this._currentCursorOpacity,endValue:t,duration:r,delay:s,onComplete:i,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(e){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(e||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var e;(e=this._currentTickCompleteState)===null||e===void 0||e.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(e){this.abortCursorAnimation(),this._tick(e?0:this.cursorDelay)}abortCursorAnimation(){let e=!1;[this._currentTickState,this._currentTickCompleteState].forEach(t=>{t&&!t.isDone()&&(e=!0,t.abort())}),this._currentCursorOpacity=1,e&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(e=>!e||e.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(e){let t=0,r=e-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r--;for(;/\S/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findWordBoundaryRight(e){let t=0,r=e;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)t++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}findLineBoundaryLeft(e){let t=0,r=e-1;for(;!/\n/.test(this._text[r])&&r>-1;)t++,r--;return e-t}findLineBoundaryRight(e){let t=0,r=e;for(;!/\n/.test(this._text[r])&&r<this._text.length;)t++,r++;return e+t}searchWordBoundary(e,t){const r=this._text;let s=e>0&&this._reSpace.test(r[e])&&(t===-1||!Ka.test(r[e-1]))?e-1:e,i=r[s];for(;s>0&&s<r.length&&!Gc.test(i);)s+=t,i=r[s];return t===-1&&Gc.test(i)&&s++,s}selectWord(e){e=e||this.selectionStart;const t=this.searchWordBoundary(e,-1),r=Math.max(t,this.searchWordBoundary(e,1));this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(e){e=e||this.selectionStart;const t=this.findLineBoundaryLeft(e),r=this.findLineBoundaryRight(e);return this.selectionStart=t,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(e){!this.isEditing&&this.editable&&(this.enterEditingImpl(),this.fire("editing:entered",e?{e}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e}),this.canvas.requestRenderAll()))}enterEditingImpl(){this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick()}updateSelectionOnMouseMove(e){if(this.getActiveControl())return;const t=this.hiddenTextarea;Mt(t).activeElement!==t&&t.focus();const r=this.getSelectionStartFromPointer(e),s=this.selectionStart,i=this.selectionEnd;(r===this.__selectionStartOnMouseDown&&s!==i||s!==r&&i!==r)&&(r>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=r):(this.selectionStart=r,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===i||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(e,t,r){const s=r.slice(0,e),i=this.graphemeSplit(s).length;if(e===t)return{selectionStart:i,selectionEnd:i};const o=r.slice(e,t);return{selectionStart:i,selectionEnd:i+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(e,t,r){const s=r.slice(0,e).join("").length;return e===t?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+r.slice(e,t).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const e=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=e.selectionStart,this.hiddenTextarea.selectionEnd=e.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const e=this.hiddenTextarea;this.text=e.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const t=this.fromStringToGraphemeSelection(e.selectionStart,e.selectionEnd,e.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const e=this._calcTextareaPosition();this.hiddenTextarea.style.left=e.left,this.hiddenTextarea.style.top=e.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const e=this.inCompositionMode?this.compositionStart:this.selectionStart,t=this._getCursorBoundaries(e),r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex,o=this.getValueOfPropertyAt(s,i,"fontSize")*this.lineHeight,a=t.leftOffset,l=this.getCanvasRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,h=c.height/l,d=u-o,f=h-o,p=new D(t.left+a,t.top+t.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new D(c.clientWidth/u,c.clientHeight/h));return p.x<0&&(p.x=0),p.x>d&&(p.x=d),p.y<0&&(p.y=0),p.y>f&&(p.y=f),p.x+=this.canvas._offset.left,p.y+=this.canvas._offset.top,{left:"".concat(p.x,"px"),top:"".concat(p.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const e=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditingImpl(){this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords())}exitEditing(){const e=this._textBeforeEdit!==this.text;return this.exitEditingImpl(),this.fire("editing:exited"),e&&this.fire(bi),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),e&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const e in this.styles)this._textLines[e]||delete this.styles[e]}removeStyleFromTo(e,t){const{lineIndex:r,charIndex:s}=this.get2DCursorLocation(e,!0),{lineIndex:i,charIndex:o}=this.get2DCursorLocation(t,!0);if(r!==i){if(this.styles[r])for(let a=s;a<this._unwrappedTextLines[r].length;a++)delete this.styles[r][a];if(this.styles[i])for(let a=o;a<this._unwrappedTextLines[i].length;a++){const l=this.styles[i][a];l&&(this.styles[r]||(this.styles[r]={}),this.styles[r][s+a-o]=l)}for(let a=r+1;a<=i;a++)delete this.styles[a];this.shiftLineStyles(i,r-i)}else if(this.styles[r]){const a=this.styles[r],l=o-s;for(let c=s;c<o;c++)delete a[c];for(const c in this.styles[r]){const u=parseInt(c,10);u>=o&&(a[u-l]=a[c],delete a[c])}}}shiftLineStyles(e,t){const r=Object.assign({},this.styles);for(const s in this.styles){const i=parseInt(s,10);i>e&&(this.styles[i+t]=r[i],r[i-t]||delete this.styles[i])}}insertNewlineStyleObject(e,t,r,s){const i={},o=this._unwrappedTextLines[e].length,a=o===t;let l=!1;r||(r=1),this.shiftLineStyles(e,r);const c=this.styles[e]?this.styles[e][t===0?t:t-1]:void 0;for(const h in this.styles[e]){const d=parseInt(h,10);d>=t&&(l=!0,i[d-t]=this.styles[e][h],a&&t===0||delete this.styles[e][h])}let u=!1;for(l&&!a&&(this.styles[e+r]=i,u=!0),(u||o>t)&&r--;r>0;)s&&s[r-1]?this.styles[e+r]={0:k({},s[r-1])}:c?this.styles[e+r]={0:k({},c)}:delete this.styles[e+r],r--;this._forceClearCache=!0}insertCharStyleObject(e,t,r,s){this.styles||(this.styles={});const i=this.styles[e],o=i?k({},i):{};r||(r=1);for(const l in o){const c=parseInt(l,10);c>=t&&(i[c+r]=o[c],o[c-r]||delete i[c])}if(this._forceClearCache=!0,s){for(;r--;)Object.keys(s[r]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][t+r]=k({},s[r]));return}if(!i)return;const a=i[t?t-1:1];for(;a&&r--;)this.styles[e][t+r]=k({},a)}insertNewStyleBlock(e,t,r){const s=this.get2DCursorLocation(t,!0),i=[0];let o,a=0;for(let l=0;l<e.length;l++)e[l]===`
`?(a++,i[a]=0):i[a]++;for(i[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,i[0],r),r=r&&r.slice(i[0]+1)),a&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+i[0],a),o=1;o<a;o++)i[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,i[o],r):r&&this.styles[s.lineIndex+o]&&r[0]&&(this.styles[s.lineIndex+o][0]=r[0]),r=r&&r.slice(i[o]+1);i[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,i[o],r)}removeChars(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e+1;this.removeStyleFromTo(e,t),this._text.splice(e,t-e),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:r;s>r&&this.removeStyleFromTo(r,s);const i=this.graphemeSplit(e);this.insertNewStyleBlock(i,r,t),this._text=[...this._text.slice(0,r),...i,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(e,t,r){r<=e?(t===e?this._selectionDirection=le:this._selectionDirection===Re&&(this._selectionDirection=le,this.selectionEnd=e),this.selectionStart=r):r>e&&r<t?this._selectionDirection===Re?this.selectionEnd=r:this.selectionStart=r:(t===e?this._selectionDirection=Re:this._selectionDirection===le&&(this._selectionDirection=Re,this.selectionStart=t),this.selectionEnd=r)}}class $x extends Nx{initHiddenTextarea(){const e=this.canvas&&Mt(this.canvas.getElement())||wn(),t=e.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[a,l]=o;return t.setAttribute(a,l)});const{top:r,left:s,fontSize:i}=this._calcTextareaPosition();t.style.cssText="position: absolute; top: ".concat(r,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(i,";"),(this.hiddenTextareaContainer||e.body).appendChild(t),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[a,l]=o;return t.addEventListener(a,this[l].bind(this))}),this.hiddenTextarea=t}blur(){this.abortCursorAnimation()}onKeyDown(e){if(!this.isEditing)return;const t=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(e.keyCode in t)this[t[e.keyCode]](e);else{if(!(e.keyCode in this.ctrlKeysMapDown)||!e.ctrlKey&&!e.metaKey)return;this[this.ctrlKeysMapDown[e.keyCode]](e)}e.stopImmediatePropagation(),e.preventDefault(),e.keyCode>=33&&e.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(e){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:e.keyCode in this.ctrlKeysMapUp&&(e.ctrlKey||e.metaKey)&&(this[this.ctrlKeysMapUp[e.keyCode]](e),e.stopImmediatePropagation(),e.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(e){const t=this.fromPaste;if(this.fromPaste=!1,e&&e.stopPropagation(),!this.isEditing)return;const r=()=>{this.updateFromTextArea(),this.fire(yi),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void r();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,i=this._text.length,o=s.length,a=this.selectionStart,l=this.selectionEnd,c=a!==l;let u,h,d,f,p=o-i;const g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),y=a>g.selectionStart;c?(h=this._text.slice(a,l),p+=l-a):o<i&&(h=y?this._text.slice(l+p,l):this._text.slice(a,a-p));const b=s.slice(g.selectionEnd-p,g.selectionEnd);if(h&&h.length&&(b.length&&(u=this.getSelectionStyles(a,a+1,!1),u=b.map(()=>u[0])),c?(d=a,f=l):y?(d=l-h.length,f=l):(d=l,f=l+h.length),this.removeStyleFromTo(d,f)),b.length){const{copyPasteData:w}=qt();t&&b.join("")===w.copiedText&&!re.disableStyleCopyPaste&&(u=w.copiedTextStyle),this.insertNewStyleBlock(b,a,u)}r()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(e){let{target:t}=e;const{selectionStart:r,selectionEnd:s}=t;this.compositionStart=r,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:e}=qt();e.copiedText=this.getSelectedText(),re.disableStyleCopyPaste?e.copiedTextStyle=void 0:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(e,t){let r,s=this._getLineLeftOffset(e);return t>0&&(r=this.__charBounds[e][t-1],s+=r.left+r.width),s}getDownCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===this._textLines.length-1||e.metaKey||e.keyCode===34)return this._text.length-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i+1,a);return this._textLines[i].slice(o).length+l+1+this.missingNewlineOffset(i)}_getSelectionForOffset(e,t){return e.shiftKey&&this.selectionStart!==this.selectionEnd&&t?this.selectionEnd:this.selectionStart}getUpCursorOffset(e,t){const r=this._getSelectionForOffset(e,t),s=this.get2DCursorLocation(r),i=s.lineIndex;if(i===0||e.metaKey||e.keyCode===33)return-r;const o=s.charIndex,a=this._getWidthBeforeCursor(i,o),l=this._getIndexOnLine(i-1,a),c=this._textLines[i].slice(0,o),u=this.missingNewlineOffset(i-1);return-this._textLines[i-1].length+l-c.length+(1-u)}_getIndexOnLine(e,t){const r=this._textLines[e];let s,i,o=this._getLineLeftOffset(e),a=0;for(let l=0,c=r.length;l<c;l++)if(s=this.__charBounds[e][l].width,o+=s,o>t){i=!0;const u=o-s,h=o,d=Math.abs(u-t);a=Math.abs(h-t)<d?l:l-1;break}return i||(a=r.length-1),a}moveCursorDown(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",e)}moveCursorUp(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",e)}_moveCursorUpOrDown(e,t){const r=this["get".concat(e,"CursorOffset")](t,this._selectionDirection===Re);if(t.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0){const s=this.text.length;this.selectionStart=Sn(0,this.selectionStart,s),this.selectionEnd=Sn(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(e){const t=this._selectionDirection===le?this.selectionStart+e:this.selectionEnd+e;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,t),e!==0}moveCursorWithoutShift(e){return e<0?(this.selectionStart+=e,this.selectionEnd=this.selectionStart):(this.selectionEnd+=e,this.selectionStart=this.selectionEnd),e!==0}moveCursorLeft(e){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",e)}_move(e,t,r){let s;if(e.altKey)s=this["findWordBoundary".concat(r)](this[t]);else{if(!e.metaKey&&e.keyCode!==35&&e.keyCode!==36)return this[t]+=r==="Left"?-1:1,!0;s=this["findLineBoundary".concat(r)](this[t])}return s!==void 0&&this[t]!==s&&(this[t]=s,!0)}_moveLeft(e,t){return this._move(e,t,"Left")}_moveRight(e,t){return this._move(e,t,"Right")}moveCursorLeftWithoutShift(e){let t=!0;return this._selectionDirection=le,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(t=this._moveLeft(e,"selectionStart")),this.selectionEnd=this.selectionStart,t}moveCursorLeftWithShift(e){return this._selectionDirection===Re&&this.selectionStart!==this.selectionEnd?this._moveLeft(e,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=le,this._moveLeft(e,"selectionStart")):void 0}moveCursorRight(e){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",e)}_moveCursorLeftOrRight(e,t){const r="moveCursor".concat(e).concat(t.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[r](t)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(e){return this._selectionDirection===le&&this.selectionStart!==this.selectionEnd?this._moveRight(e,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Re,this._moveRight(e,"selectionEnd")):void 0}moveCursorRightWithoutShift(e){let t=!0;return this._selectionDirection=Re,this.selectionStart===this.selectionEnd?(t=this._moveRight(e,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,t}}const To=n=>!!n.button;class Wx extends $x{constructor(){super(...arguments),T(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new Bx(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(e){return this.draggableTextDelegate.onDragStart(e)}canDrop(e){return this.draggableTextDelegate.canDrop(e)}onMouseDown(e){if(!this.canvas)return;this.__newClickTime=+new Date;const t=e.pointer;this.isTripleClick(t)&&(this.fire("tripleclick",e),ra(e.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=t,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(e){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===e.x&&this.__lastPointer.y===e.y}doubleClickHandler(e){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(e.e))}tripleClickHandler(e){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(e.e))}_mouseDownHandler(e){let{e:t}=e;this.canvas&&this.editable&&!To(t)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(t)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(e){let{e:t}=e;this.canvas&&this.editable&&!To(t)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(e){let{e:t,transform:r}=e;const s=this.draggableTextDelegate.end(t);if(this.canvas){this.canvas.textEditingManager.unregister(this);const i=this.canvas._activeObject;if(i&&i!==this)return}!this.editable||this.group&&!this.group.interactive||r&&r.actionPerformed||To(t)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(e){const t=this.getSelectionStartFromPointer(e),r=this.selectionStart,s=this.selectionEnd;e.shiftKey?this.setSelectionStartEndWithShift(r,s,t):(this.selectionStart=t,this.selectionEnd=t),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(e){const t=this.canvas.getScenePoint(e).transform(Dt(this.calcTransformMatrix())).add(new D(-this._getLeftOffset(),-this._getTopOffset()));let r=0,s=0,i=0;for(let c=0;c<this._textLines.length&&r<=t.y;c++)r+=this.getHeightOfLine(c),i=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1));let o=Math.abs(this._getLineLeftOffset(i));const a=this._textLines[i].length,l=this.__charBounds[i];for(let c=0;c<a;c++){const u=o+l[c].kernedWidth;if(t.x<=u){Math.abs(t.x-u)<=Math.abs(t.x-o)&&s++;break}o=u,s++}return Math.min(this.flipX?a-s:s,this._text.length)}}const Ds="moveCursorUp",As="moveCursorDown",Rs="moveCursorLeft",js="moveCursorRight",Fs="exitEditing",zx=k({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Fs,27:Fs,33:Ds,34:As,35:js,36:Rs,37:Rs,38:Ds,39:js,40:As},keysMapRtl:{9:Fs,27:Fs,33:Ds,34:As,35:Rs,36:js,37:js,38:Ds,39:Rs,40:As},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class rr extends Wx{static getDefaults(){return k(k({},super.getDefaults()),rr.ownDefaults)}get type(){const e=super.type;return e==="itext"?"i-text":e}constructor(e,t){super(e,k(k({},rr.ownDefaults),t)),this.initBehavior()}_set(e,t){return this.isEditing&&this._savedProps&&e in this._savedProps?(this._savedProps[e]=t,this):(e==="canvas"&&(this.canvas instanceof ua&&this.canvas.textEditingManager.remove(this),t instanceof ua&&t.textEditingManager.add(this)),super._set(e,t))}setSelectionStart(e){e=Math.max(e,0),this._updateAndFire("selectionStart",e)}setSelectionEnd(e){e=Math.min(e,this.text.length),this._updateAndFire("selectionEnd",e)}_updateAndFire(e,t){this[e]!==t&&(this._fireSelectionChanged(),this[e]=t),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,r=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(e,t,r)}setSelectionStyles(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(e,t,r)}get2DCursorLocation(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(e,t)}render(e){super.render(e),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(e){const t=this.isEditing;this.isEditing=!1;const r=super.toCanvasElement(e);return this.isEditing=t,r}renderCursorOrSelection(){if(!this.isEditing)return;const e=this.clearContextTop(!0);if(!e)return;const t=this._getCursorBoundaries();this.selectionStart!==this.selectionEnd||this.inCompositionMode?this.renderSelection(e,t):this.renderCursor(e,t),this.canvas.contextTopDirty=!0,e.restore()}_getCursorBoundaries(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1?arguments[1]:void 0;const r=this._getLeftOffset(),s=this._getTopOffset(),i=this._getCursorBoundariesOffsets(e,t);return{left:r,top:s,leftOffset:i.left,topOffset:i.top}}_getCursorBoundariesOffsets(e,t){return t?this.__getCursorBoundariesOffsets(e):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(e)}__getCursorBoundariesOffsets(e){let t=0,r=0;const{charIndex:s,lineIndex:i}=this.get2DCursorLocation(e);for(let c=0;c<i;c++)t+=this.getHeightOfLine(c);const o=this._getLineLeftOffset(i),a=this.__charBounds[i][s];a&&(r=a.left),this.charSpacing!==0&&s===this._textLines[i].length&&(r-=this._getWidthOfCharSpacing());const l={top:t,left:o+(r>0?r:0)};return this.direction==="rtl"&&(this.textAlign===Re||this.textAlign===Wt||this.textAlign===Qn?l.left*=-1:this.textAlign===le||this.textAlign===Oi?l.left=o-(r>0?r:0):this.textAlign!==K&&this.textAlign!==es||(l.left=o-(r>0?r:0))),l}renderCursorAt(e){this._renderCursor(this.canvas.contextTop,this._getCursorBoundaries(e,!0),e)}renderCursor(e,t){this._renderCursor(e,t,this.selectionStart)}getCursorRenderingData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._getCursorBoundaries(e);const r=this.get2DCursorLocation(e),s=r.lineIndex,i=r.charIndex>0?r.charIndex-1:0,o=this.getValueOfPropertyAt(s,i,"fontSize"),a=this.getObjectScaling().x*this.canvas.getZoom(),l=this.cursorWidth/a,c=this.getValueOfPropertyAt(s,i,"deltaY"),u=t.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-o*(1-this._fontSizeFraction);return{color:this.cursorColor||this.getValueOfPropertyAt(s,i,"fill"),opacity:this._currentCursorOpacity,left:t.left+t.leftOffset-l/2,top:u+t.top+c,width:l,height:o}}_renderCursor(e,t,r){const{color:s,opacity:i,left:o,top:a,width:l,height:c}=this.getCursorRenderingData(r,t);e.fillStyle=s,e.globalAlpha=i,e.fillRect(o,a,l,c)}renderSelection(e,t){const r={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(e,r,t)}renderDragSourceEffect(){const e=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,e,this._getCursorBoundaries(e.selectionStart,!0))}renderDropTargetEffect(e){const t=this.getSelectionStartFromPointer(e);this.renderCursorAt(t)}_renderSelection(e,t,r){const s=t.selectionStart,i=t.selectionEnd,o=this.textAlign.includes(Wt),a=this.get2DCursorLocation(s),l=this.get2DCursorLocation(i),c=a.lineIndex,u=l.lineIndex,h=a.charIndex<0?0:a.charIndex,d=l.charIndex<0?0:l.charIndex;for(let f=c;f<=u;f++){const p=this._getLineLeftOffset(f)||0;let g=this.getHeightOfLine(f),y=0,b=0,w=0;if(f===c&&(b=this.__charBounds[c][h].left),f>=c&&f<u)w=o&&!this.isEndOfWrapping(f)?this.width:this.getLineWidth(f)||5;else if(f===u)if(d===0)w=this.__charBounds[u][d].left;else{const P=this._getWidthOfCharSpacing();w=this.__charBounds[u][d-1].left+this.__charBounds[u][d-1].width-P}y=g,(this.lineHeight<1||f===u&&this.lineHeight>1)&&(g/=this.lineHeight);let v=r.left+p+b,S=g,x=0;const O=w-b;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",S=1,x=g):e.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Re||this.textAlign===Wt||this.textAlign===Qn?v=this.width-v-O:this.textAlign===le||this.textAlign===Oi?v=r.left+p-w:this.textAlign!==K&&this.textAlign!==es||(v=r.left+p-w)),e.fillRect(v,r.top+r.topOffset+x,O,S),r.topOffset+=y}}getCurrentCharFontSize(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,"fontSize")}getCurrentCharColor(){const e=this._getCurrentCharIndex();return this.getValueOfPropertyAt(e.l,e.c,We)}_getCurrentCharIndex(){const e=this.get2DCursorLocation(this.selectionStart,!0),t=e.charIndex>0?e.charIndex-1:0;return{l:e.lineIndex,c:t}}dispose(){this.exitEditingImpl(),this.draggableTextDelegate.dispose(),super.dispose()}}T(rr,"ownDefaults",zx),T(rr,"type","IText"),W.setClass(rr),W.setClass(rr,"i-text");class jr extends rr{static getDefaults(){return k(k({},super.getDefaults()),jr.ownDefaults)}constructor(e,t){super(e,k(k({},jr.ownDefaults),t))}static createControls(){return{controls:bv()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Wt)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(e){let t=0,r=0,s=0;const i={};for(let o=0;o<e.graphemeLines.length;o++)e.graphemeText[s]===`
`&&o>0?(r=0,s++,t++):!this.splitByGrapheme&&this._reSpaceAndTab.test(e.graphemeText[s])&&o>0&&(r++,s++),i[o]={line:t,offset:r},s+=e.graphemeLines[o].length,r+=e.graphemeLines[o].length;return i}styleHas(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[t];r&&(t=r.line)}return super.styleHas(e,t)}isEmptyStyles(e){if(!this.styles)return!0;let t,r=0,s=e+1,i=!1;const o=this._styleMap[e],a=this._styleMap[e+1];o&&(e=o.line,r=o.offset),a&&(s=a.line,i=s===e,t=a.offset);const l=e===void 0?this.styles:{line:this.styles[e]};for(const c in l)for(const u in l[c]){const h=parseInt(u,10);if(h>=r&&(!i||h<t))for(const d in l[c][u])return!1}return!0}_getStyleDeclaration(e,t){if(this._styleMap&&!this.isWrapping){const r=this._styleMap[e];if(!r)return{};e=r.line,t=r.offset+t}return super._getStyleDeclaration(e,t)}_setStyleDeclaration(e,t,r){const s=this._styleMap[e];super._setStyleDeclaration(s.line,s.offset+t,r)}_deleteStyleDeclaration(e,t){const r=this._styleMap[e];super._deleteStyleDeclaration(r.line,r.offset+t)}_getLineStyle(e){const t=this._styleMap[e];return!!this.styles[t.line]}_setLineStyle(e){const t=this._styleMap[e];super._setLineStyle(t.line)}_wrapText(e,t){this.isWrapping=!0;const r=this.getGraphemeDataForRender(e),s=[];for(let i=0;i<r.wordsData.length;i++)s.push(...this._wrapLine(i,t,r));return this.isWrapping=!1,s}getGraphemeDataForRender(e){const t=this.splitByGrapheme,r=t?"":" ";let s=0;return{wordsData:e.map((i,o)=>{let a=0;const l=t?this.graphemeSplit(i):this.wordSplit(i);return l.length===0?[{word:[],width:0}]:l.map(c=>{const u=t?[c]:this.graphemeSplit(c),h=this._measureWord(u,o,a);return s=Math.max(h,s),a+=u.length+r.length,{word:u,width:h}})}),largestWordWidth:s}}_measureWord(e,t){let r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=0;for(let o=0,a=e.length;o<a;o++)i+=this._getGraphemeBox(e[o],t,o+s,r,!0).kernedWidth,r=e[o];return i}wordSplit(e){return e.split(this._wordJoiners)}_wrapLine(e,t,r){let{largestWordWidth:s,wordsData:i}=r,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const a=this._getWidthOfCharSpacing(),l=this.splitByGrapheme,c=[],u=l?"":" ";let h=0,d=[],f=0,p=0,g=!0;t-=o;const y=Math.max(t,s,this.dynamicMinWidth),b=i[e];let w;for(f=0,w=0;w<b.length;w++){const{word:v,width:S}=b[w];f+=v.length,h+=p+S-a,h>y&&!g?(c.push(d),d=[],h=S,g=!0):h+=a,g||l||d.push(u),d=d.concat(v),p=l?0:this._measureWord([u],e,f),f++,g=!1}return w&&c.push(d),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-a+o),c}isEndOfWrapping(e){return!this._styleMap[e+1]||this._styleMap[e+1].line!==this._styleMap[e].line}missingNewlineOffset(e,t){return this.splitByGrapheme&&!t?this.isEndOfWrapping(e)?1:0:1}_splitTextIntoLines(e){const t=super._splitTextIntoLines(e),r=this._wrapText(t.lines,this.width),s=new Array(r.length);for(let i=0;i<r.length;i++)s[i]=r[i].join("");return t.lines=s,t.graphemeLines=r,t}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const e=new Map;for(const t in this._styleMap){const r=parseInt(t,10);if(this._textLines[r]){const s=this._styleMap[t].line;e.set("".concat(s),!0)}}for(const t in this.styles)e.has(t)||delete this.styles[t]}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...e])}}T(jr,"type","Textbox"),T(jr,"textLayoutProperties",[...rr.textLayoutProperties,"width"]),T(jr,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),W.setClass(jr);class Kc extends Ji{shouldPerformLayout(e){return!!e.target.clipPath&&super.shouldPerformLayout(e)}shouldLayoutClipPath(){return!1}calcLayoutResult(e,t){const{target:r}=e,{clipPath:s,group:i}=r;if(!s||!this.shouldPerformLayout(e))return;const{width:o,height:a}=nr(Xh(r,s)),l=new D(o,a);if(s.absolutePositioned)return{center:mn(s.getRelativeCenterPoint(),void 0,i?i.calcTransformMatrix():void 0),size:l};{const c=s.getRelativeCenterPoint().transform(r.calcOwnMatrix(),!0);if(this.shouldPerformLayout(e)){const{center:u=new D,correction:h=new D}=this.calcBoundingBox(t,e)||{};return{center:u.add(c),correction:h.subtract(c),size:l}}return{center:r.getRelativeCenterPoint().add(c),size:l}}}}T(Kc,"type","clip-path"),W.setClass(Kc);class Zc extends Ji{getInitialSize(e,t){let{target:r}=e,{size:s}=t;return new D(r.width||s.x,r.height||s.y)}}T(Zc,"type","fixed"),W.setClass(Zc);class Vx extends cs{subscribeTargets(e){const t=e.target;e.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{r.layoutManager.subscribeTargets({target:r,targets:[t]})})}unsubscribeTargets(e){const t=e.target,r=t.getObjects();e.targets.reduce((s,i)=>(i.parent&&s.add(i.parent),s),new Set).forEach(s=>{!r.some(i=>i.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[t]})})}}class Fr extends Ir{static getDefaults(){return k(k({},super.getDefaults()),Fr.ownDefaults)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Fr.ownDefaults),this.setOptions(t);const{left:r,top:s,layoutManager:i}=t;this.groupInit(e,{left:r,top:s,layoutManager:i??new Vx})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.multiSelectionStacking==="selection-order"?this.add(...t):t.forEach(s=>{const i=this._objects.findIndex(a=>a.isInFrontOf(s)),o=i===-1?this.size():i;this.insertAt(o,s)})}canEnterGroup(e){return this.getObjects().some(t=>t.isDescendantOf(e)||e.isDescendantOf(t))?(mr("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(e)}enterGroup(e,t){e.parent&&e.parent===e.group?e.parent._exitGroup(e):e.group&&e.parent!==e.group&&e.group.remove(e),this._enterGroup(e,t)}exitGroup(e,t){this._exitGroup(e,t),e.parent&&e.parent._enterGroup(e,!0)}_onAfterObjectsChange(e,t){super._onAfterObjectsChange(e,t);const r=new Set;t.forEach(s=>{const{parent:i}=s;i&&r.add(i)}),e===hl?r.forEach(s=>{s._onAfterObjectsChange(wi,t)}):r.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(e,t,r){e.save(),e.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=k(k({hasControls:!1},r),{},{forActiveSelection:!0});for(let i=0;i<this._objects.length;i++)this._objects[i]._renderControls(e,s);super._renderControls(e,t),e.restore()}}T(Fr,"type","ActiveSelection"),T(Fr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),W.setClass(Fr),W.setClass(Fr,"activeSelection");class Hx{constructor(){T(this,"resources",{})}applyFilters(e,t,r,s,i){const o=i.getContext("2d");if(!o)return;o.drawImage(t,0,0,r,s);const a={sourceWidth:r,sourceHeight:s,imageData:o.getImageData(0,0,r,s),originalEl:t,originalImageData:o.getImageData(0,0,r,s),canvasEl:i,ctx:o,filterBackend:this};e.forEach(c=>{c.applyTo(a)});const{imageData:l}=a;return l.width===r&&l.height===s||(i.width=l.width,i.height=l.height),o.putImageData(l,0,0),a}}class dd{constructor(){let{tileSize:e=re.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};T(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),T(this,"resources",{}),this.tileSize=e,this.setupGLContext(e,e),this.captureGPUInfo()}setupGLContext(e,t){this.dispose(),this.createWebGLCanvas(e,t)}createWebGLCanvas(e,t){const r=Xt({width:e,height:t}),s=r.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=r,this.gl=s)}applyFilters(e,t,r,s,i,o){const a=this.gl,l=i.getContext("2d");if(!a||!l)return;let c;o&&(c=this.getCachedTexture(o,t));const u={originalWidth:t.width||t.naturalWidth||0,originalHeight:t.height||t.naturalHeight||0,sourceWidth:r,sourceHeight:s,destinationWidth:r,destinationHeight:s,context:a,sourceTexture:this.createTexture(a,r,s,c?void 0:t),targetTexture:this.createTexture(a,r,s),originalTexture:c||this.createTexture(a,r,s,c?void 0:t),passes:e.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:i},h=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,h),e.forEach(d=>{d&&d.applyTo(u)}),function(d){const f=d.targetCanvas,p=f.width,g=f.height,y=d.destinationWidth,b=d.destinationHeight;p===y&&g===b||(f.width=y,f.height=b)}(u),this.copyGLTo2D(a,u),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(u.sourceTexture),a.deleteTexture(u.targetTexture),a.deleteFramebuffer(h),l.setTransform(1,0,0,1,0,0),u}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(e,t,r,s,i){const{NEAREST:o,TEXTURE_2D:a,RGBA:l,UNSIGNED_BYTE:c,CLAMP_TO_EDGE:u,TEXTURE_MAG_FILTER:h,TEXTURE_MIN_FILTER:d,TEXTURE_WRAP_S:f,TEXTURE_WRAP_T:p}=e,g=e.createTexture();return e.bindTexture(a,g),e.texParameteri(a,h,i||o),e.texParameteri(a,d,i||o),e.texParameteri(a,f,u),e.texParameteri(a,p,u),s?e.texImage2D(a,0,l,l,c,s):e.texImage2D(a,0,l,t,r,0,l,c,null),g}getCachedTexture(e,t,r){const{textureCache:s}=this;if(s[e])return s[e];{const i=this.createTexture(this.gl,t.width,t.height,t,r);return i&&(s[e]=i),i}}evictCachesForKey(e){this.textureCache[e]&&(this.gl.deleteTexture(this.textureCache[e]),delete this.textureCache[e])}copyGLTo2D(e,t){const r=e.canvas,s=t.targetCanvas,i=s.getContext("2d");if(!i)return;i.translate(0,s.height),i.scale(1,-1);const o=r.height-s.height;i.drawImage(r,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(e,t){const r=t.targetCanvas.getContext("2d"),s=t.destinationWidth,i=t.destinationHeight,o=s*i*4;if(!r)return;const a=new Uint8Array(this.imageBuffer,0,o),l=new Uint8ClampedArray(this.imageBuffer,0,o);e.readPixels(0,0,s,i,e.RGBA,e.UNSIGNED_BYTE,a);const c=new ImageData(l,s,i);r.putImageData(c,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const e=this.gl,t={renderer:"",vendor:""};if(!e)return t;const r=e.getExtension("WEBGL_debug_renderer_info");if(r){const s=e.getParameter(r.UNMASKED_RENDERER_WEBGL),i=e.getParameter(r.UNMASKED_VENDOR_WEBGL);s&&(t.renderer=s.toLowerCase()),i&&(t.vendor=i.toLowerCase())}return this.gpuInfo=t,t}}let ko;function qx(){const{WebGLProbe:n}=qt();return n.queryWebGL(jt()),re.enableGLFiltering&&n.isSupported(re.textureSize)?new dd({tileSize:re.textureSize}):new Hx}function Oo(){return!ko&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(ko=qx()),ko}const Xx=["filters","resizeFilter","src","crossOrigin","type"],fd=["cropX","cropY"];class xt extends Ze{static getDefaults(){return k(k({},super.getDefaults()),xt.ownDefaults)}constructor(e,t){super(),T(this,"_lastScaleX",1),T(this,"_lastScaleY",1),T(this,"_filterScalingX",1),T(this,"_filterScalingY",1),this.filters=[],Object.assign(this,xt.ownDefaults),this.setOptions(t),this.cacheKey="texture".concat(yr()),this.setElement(typeof e=="string"?(this.canvas&&Mt(this.canvas.getElement())||wn()).getElementById(e):e,t)}getElement(){return this._element}setElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=e,this._originalElement=e,this._setWidthHeight(t),e.classList.add(xt.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(e){const t=Oo(!1);t instanceof dd&&t.evictCachesForKey(e)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(e=>{const t=this[e];t&&qt().dispose(t),this[e]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const e=this.getElement();return e?{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}:{width:0,height:0}}_stroke(e){if(!this.stroke||this.strokeWidth===0)return;const t=this.width/2,r=this.height/2;e.beginPath(),e.moveTo(-t,-r),e.lineTo(t,-r),e.lineTo(t,r),e.lineTo(-t,r),e.lineTo(-t,-r),e.closePath()}toObject(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];return this.filters.forEach(r=>{r&&t.push(r.toObject())}),k(k({},super.toObject([...fd,...e])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:t},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const e=[],t=this._element,r=-this.width/2,s=-this.height/2;let i=[],o=[],a="",l="";if(!t)return[];if(this.hasCrop()){const c=yr();i.push('<clipPath id="imageCrop_'+c+`">
`,'	<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),a=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l=' image-rendering="optimizeSpeed"'),e.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(r-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(t.width||t.naturalWidth,'" height="').concat(t.height||t.naturalHeight,'"').concat(l).concat(a,`></image>
`)),this.stroke||this.strokeDashArray){const c=this.fill;this.fill=null,o=['	<rect x="'.concat(r,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=c}return i=this.paintFirst!==We?i.concat(o,e):i.concat(e,o),i}getSrc(e){const t=e?this._element:this._originalElement;return t?t.toDataURL?t.toDataURL():this.srcFromAttribute?t.getAttribute("src")||"":t.src:this.src||""}getSvgSrc(e){return this.getSrc(e)}setSrc(e){let{crossOrigin:t,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oi(e,{crossOrigin:t,signal:r}).then(s=>{t!==void 0&&this.set({crossOrigin:t}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const e=this.resizeFilter,t=this.minimumScaleTrigger,r=this.getTotalObjectScaling(),s=r.x,i=r.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!e||s>t&&i>t)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=i);const a=Xt(o),{width:l,height:c}=o;this._element=a,this._lastScaleX=e.scaleX=s,this._lastScaleY=e.scaleY=i,Oo().applyFilters([e],o,l,c,this._element),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height}applyFilters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(e=e.filter(i=>i&&!i.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),e.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const t=this._originalElement,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;if(this._element===this._originalElement){const i=Xt({width:r,height:s});this._element=i,this._filteredEl=i}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,r,s),this._lastScaleX=1,this._lastScaleY=1);Oo().applyFilters(e,this._originalElement,r,s,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(e){e.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(e),this._renderPaintInOrder(e)}drawCacheOnCanvas(e){e.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(e)}shouldCache(){return this.needsItsOwnCache()}_renderFill(e){const t=this._element;if(!t)return;const r=this._filterScalingX,s=this._filterScalingY,i=this.width,o=this.height,a=Math.max(this.cropX,0),l=Math.max(this.cropY,0),c=t.naturalWidth||t.width,u=t.naturalHeight||t.height,h=a*r,d=l*s,f=Math.min(i*r,c-h),p=Math.min(o*s,u-d),g=-i/2,y=-o/2,b=Math.min(i,c/r-a),w=Math.min(o,u/s-l);t&&e.drawImage(t,h,d,f,p,g,y,b,w)}_needsResize(){const e=this.getTotalObjectScaling();return e.x!==this._lastScaleX||e.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:e,height:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.getOriginalSize();this.width=e||r.width,this.height=t||r.height}parsePreserveAspectRatioAttribute(){const e=Eb(this.preserveAspectRatio||""),t=this.width,r=this.height,s={width:t,height:r};let i,o=this._element.width,a=this._element.height,l=1,c=1,u=0,h=0,d=0,f=0;return!e||e.alignX===ct&&e.alignY===ct?(l=t/o,c=r/a):(e.meetOrSlice==="meet"&&(l=c=Zv(this._element,s),i=(t-o*l)/2,e.alignX==="Min"&&(u=-i),e.alignX==="Max"&&(u=i),i=(r-a*c)/2,e.alignY==="Min"&&(h=-i),e.alignY==="Max"&&(h=i)),e.meetOrSlice==="slice"&&(l=c=Jv(this._element,s),i=o-t/l,e.alignX==="Mid"&&(d=i/2),e.alignX==="Max"&&(d=i),i=a-r/c,e.alignY==="Mid"&&(f=i/2),e.alignY==="Max"&&(f=i),o=t/l,a=r/c)),{width:o,height:a,scaleX:l,scaleY:c,offsetLeft:u,offsetTop:h,cropX:d,cropY:f}}static fromObject(e,t){let{filters:r,resizeFilter:s,src:i,crossOrigin:o,type:a}=e,l=we(e,Xx);return Promise.all([oi(i,k(k({},t),{},{crossOrigin:o})),r&&os(r,t),s&&os([s],t),Ui(l,t)]).then(c=>{let[u,h=[],[d]=[],f={}]=c;return new this(u,k(k({},l),{},{src:i,filters:h,resizeFilter:d},f))})}static fromURL(e){let{crossOrigin:t=null,signal:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return oi(e,{crossOrigin:t,signal:r}).then(i=>new this(i,s))}static async fromElement(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;const s=hr(e,this.ATTRIBUTE_NAMES,r);return this.fromURL(s["xlink:href"],t,s).catch(i=>(mr("log","Unable to parse Image",i),null))}}T(xt,"type","Image"),T(xt,"cacheProperties",[...ur,...fd]),T(xt,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),T(xt,"CSS_CANVAS","canvas-img"),T(xt,"ATTRIBUTE_NAMES",[...xr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),W.setClass(xt),W.setSVGClass(xt);Ki(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);const eo=n=>n.webgl!==void 0,dl="precision highp float",Yx=`
    `.concat(dl,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),Ux=["type"],Gx=["type"],Kx=new RegExp(dl,"g");class ze{get type(){return this.constructor.type}constructor(){let e=we(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ux);Object.assign(this,this.constructor.defaults,e)}getFragmentSource(){return Yx}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=qt();s!=="highp"&&(t=t.replace(Kx,dl.replace("highp",s)));const i=e.createShader(e.VERTEX_SHADER),o=e.createShader(e.FRAGMENT_SHADER),a=e.createProgram();if(!i||!o||!a)throw new zt("Vertex, fragment shader or program creation error");if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new zt("Vertex shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(i)));if(e.shaderSource(o,t),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS))throw new zt("Fragment shader compile error for ".concat(this.type,": ").concat(e.getShaderInfoLog(o)));if(e.attachShader(a,i),e.attachShader(a,o),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw new zt('Shader link error for "'.concat(this.type,'" ').concat(e.getProgramInfoLog(a)));const l=this.getUniformLocations(e,a)||{};return l.uStepW=e.getUniformLocation(a,"uStepW"),l.uStepH=e.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:this.getAttributeLocations(e,a),uniformLocations:l}}getAttributeLocations(e,t){return{aPosition:e.getAttribLocation(t,"aPosition")}}getUniformLocations(e,t){const r=this.constructor.uniformLocations,s={};for(let i=0;i<r.length;i++)s[r[i]]=e.getUniformLocation(t,r[i]);return s}sendAttributeData(e,t,r){const s=t.aPosition,i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}_setupFrameBuffer(e){const t=e.context;if(e.passes>1){const r=e.destinationWidth,s=e.destinationHeight;e.sourceWidth===r&&e.sourceHeight===s||(t.deleteTexture(e.targetTexture),e.targetTexture=e.filterBackend.createTexture(t,r,s)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.targetTexture,0)}else t.bindFramebuffer(t.FRAMEBUFFER,null),t.finish()}_swapTextures(e){e.passes--,e.pass++;const t=e.targetTexture;e.targetTexture=e.sourceTexture,e.sourceTexture=t}isNeutralState(e){return!1}applyTo(e){eo(e)?(this._setupFrameBuffer(e),this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){}getCacheKey(){return this.type}retrieveShader(e){const t=this.getCacheKey();return e.programCache[t]||(e.programCache[t]=this.createProgram(e.context)),e.programCache[t]}applyToWebGL(e){const t=e.context,r=this.retrieveShader(e);e.pass===0&&e.originalTexture?t.bindTexture(t.TEXTURE_2D,e.originalTexture):t.bindTexture(t.TEXTURE_2D,e.sourceTexture),t.useProgram(r.program),this.sendAttributeData(t,r.attributeLocations,e.aPosition),t.uniform1f(r.uniformLocations.uStepW,1/e.sourceWidth),t.uniform1f(r.uniformLocations.uStepH,1/e.sourceHeight),this.sendUniformData(t,r.uniformLocations),t.viewport(0,0,e.destinationWidth,e.destinationHeight),t.drawArrays(t.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(e,t,r){e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,t),e.activeTexture(e.TEXTURE0)}unbindAdditionalTexture(e,t){e.activeTexture(t),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0)}sendUniformData(e,t){}createHelpLayer(e){if(!e.helpLayer){const{sourceWidth:t,sourceHeight:r}=e,s=Xt({width:t,height:r});e.helpLayer=s}}toObject(){const e=Object.keys(this.constructor.defaults||{});return k({type:this.type},e.reduce((t,r)=>(t[r]=this[r],t),{}))}toJSON(){return this.toObject()}static async fromObject(e,t){return new this(we(e,Gx))}}T(ze,"type","BaseFilter"),T(ze,"uniformLocations",[]);const Zx={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class Is extends ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(Zx[this.mode],`
        }
      }
      `)}applyTo2d(e){let{imageData:{data:t}}=e;const r=new ue(this.color).getSource(),s=this.alpha,i=r[0]*s,o=r[1]*s,a=r[2]*s,l=1-s;for(let c=0;c<t.length;c+=4){const u=t[c],h=t[c+1],d=t[c+2];let f,p,g;switch(this.mode){case"multiply":f=u*i/255,p=h*o/255,g=d*a/255;break;case"screen":f=255-(255-u)*(255-i)/255,p=255-(255-h)*(255-o)/255,g=255-(255-d)*(255-a)/255;break;case"add":f=u+i,p=h+o,g=d+a;break;case"difference":f=Math.abs(u-i),p=Math.abs(h-o),g=Math.abs(d-a);break;case"subtract":f=u-i,p=h-o,g=d-a;break;case"darken":f=Math.min(u,i),p=Math.min(h,o),g=Math.min(d,a);break;case"lighten":f=Math.max(u,i),p=Math.max(h,o),g=Math.max(d,a);break;case"overlay":f=i<128?2*u*i/255:255-2*(255-u)*(255-i)/255,p=o<128?2*h*o/255:255-2*(255-h)*(255-o)/255,g=a<128?2*d*a/255:255-2*(255-d)*(255-a)/255;break;case"exclusion":f=i+u-2*i*u/255,p=o+h-2*o*h/255,g=a+d-2*a*d/255;break;case"tint":f=i+u*l,p=o+h*l,g=a+d*l}t[c]=f,t[c+1]=p,t[c+2]=g}}sendUniformData(e,t){const r=new ue(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,e.uniform4fv(t.uColor,r)}}T(Is,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),T(Is,"type","BlendColor"),T(Is,"uniformLocations",["uColor"]),W.setClass(Is);const Jx={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Qx=["type","image"];class Ls extends ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return Jx[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(e){const t=e.context,r=this.createTexture(e.filterBackend,this.image);this.bindAdditionalTexture(t,r,t.TEXTURE1),super.applyToWebGL(e),this.unbindAdditionalTexture(t,t.TEXTURE1)}createTexture(e,t){return e.getCachedTexture(t.cacheKey,t.getElement())}calculateMatrix(){const e=this.image,{width:t,height:r}=e.getElement();return[1/e.scaleX,0,0,0,1/e.scaleY,0,-e.left/t,-e.top/r,1]}applyTo2d(e){let{imageData:{data:t,width:r,height:s},filterBackend:{resources:i}}=e;const o=this.image;i.blendImage||(i.blendImage=jt());const a=i.blendImage,l=a.getContext("2d");a.width!==r||a.height!==s?(a.width=r,a.height=s):l.clearRect(0,0,r,s),l.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),l.drawImage(o.getElement(),0,0,r,s);const c=l.getImageData(0,0,r,s).data;for(let u=0;u<t.length;u+=4){const h=t[u],d=t[u+1],f=t[u+2],p=t[u+3],g=c[u],y=c[u+1],b=c[u+2],w=c[u+3];switch(this.mode){case"multiply":t[u]=h*g/255,t[u+1]=d*y/255,t[u+2]=f*b/255,t[u+3]=p*w/255;break;case"mask":t[u+3]=w}}}sendUniformData(e,t){const r=this.calculateMatrix();e.uniform1i(t.uImage,1),e.uniformMatrix3fv(t.uTransformMatrix,!1,r)}toObject(){return k(k({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(e,t){let{type:r,image:s}=e,i=we(e,Qx);return xt.fromObject(s,t).then(o=>new this(k(k({},i),{},{image:o})))}}T(Ls,"type","BlendImage"),T(Ls,"defaults",{mode:"multiply",alpha:1}),T(Ls,"uniformLocations",["uTransformMatrix","uImage"]),W.setClass(Ls);class Bs extends ze{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(e){eo(e)?(this.aspectRatio=e.sourceWidth/e.sourceHeight,e.passes++,this._setupFrameBuffer(e),this.horizontal=!0,this.applyToWebGL(e),this._swapTextures(e),this._setupFrameBuffer(e),this.horizontal=!1,this.applyToWebGL(e),this._swapTextures(e)):this.applyTo2d(e)}applyTo2d(e){e.imageData=this.simpleBlur(e)}simpleBlur(e){let{ctx:t,imageData:r,filterBackend:{resources:s}}=e;const{width:i,height:o}=r;s.blurLayer1||(s.blurLayer1=jt(),s.blurLayer2=jt());const a=s.blurLayer1,l=s.blurLayer2;a.width===i&&a.height===o||(l.width=a.width=i,l.height=a.height=o);const c=a.getContext("2d"),u=l.getContext("2d"),h=15,d=.06*this.blur*.5;let f,p,g,y;for(c.putImageData(r,0,0),u.clearRect(0,0,i,o),y=-15;y<=h;y++)f=(Math.random()-.5)/4,p=y/h,g=d*p*i+f,u.globalAlpha=1-Math.abs(p),u.drawImage(a,g,f),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);for(y=-15;y<=h;y++)f=(Math.random()-.5)/4,p=y/h,g=d*p*o+f,u.globalAlpha=1-Math.abs(p),u.drawImage(a,f,g),c.drawImage(l,0,0),u.globalAlpha=1,u.clearRect(0,0,l.width,l.height);t.drawImage(a,0,0);const b=t.getImageData(0,0,a.width,a.height);return c.globalAlpha=1,c.clearRect(0,0,a.width,a.height),b}sendUniformData(e,t){const r=this.chooseRightDelta();e.uniform2fv(t.uDelta,r)}isNeutralState(){return this.blur===0}chooseRightDelta(){let e=1;const t=[0,0];this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio);const r=e*this.blur*.12;return this.horizontal?t[0]=r:t[1]=r,t}}T(Bs,"type","Blur"),T(Bs,"defaults",{blur:0}),T(Bs,"uniformLocations",["uDelta"]),W.setClass(Bs);class Ns extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.round(255*this.brightness);for(let s=0;s<t.length;s+=4)t[s]+=r,t[s+1]+=r,t[s+2]+=r}isNeutralState(){return this.brightness===0}sendUniformData(e,t){e.uniform1f(t.uBrightness,this.brightness)}}T(Ns,"type","Brightness"),T(Ns,"defaults",{brightness:0}),T(Ns,"uniformLocations",["uBrightness"]),W.setClass(Ns);const pd={matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0};class un extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(e){const t=e.imageData.data,r=this.matrix,s=this.colorsOnly;for(let i=0;i<t.length;i+=4){const o=t[i],a=t[i+1],l=t[i+2];if(t[i]=o*r[0]+a*r[1]+l*r[2]+255*r[4],t[i+1]=o*r[5]+a*r[6]+l*r[7]+255*r[9],t[i+2]=o*r[10]+a*r[11]+l*r[12]+255*r[14],!s){const c=t[i+3];t[i]+=c*r[3],t[i+1]+=c*r[8],t[i+2]+=c*r[13],t[i+3]=o*r[15]+a*r[16]+l*r[17]+c*r[18]+255*r[19]}}}sendUniformData(e,t){const r=this.matrix,s=[r[0],r[1],r[2],r[3],r[5],r[6],r[7],r[8],r[10],r[11],r[12],r[13],r[15],r[16],r[17],r[18]],i=[r[4],r[9],r[14],r[19]];e.uniformMatrix4fv(t.uColorMatrix,!1,s),e.uniform4fv(t.uConstants,i)}toObject(){return k(k({},super.toObject()),{},{matrix:[...this.matrix]})}}function Vr(n,e){var t;const r=(T(t=class extends un{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),T(t,"defaults",{colorsOnly:!1,matrix:e}),t);return W.setClass(r,n),r}T(un,"type","ColorMatrix"),T(un,"defaults",pd),T(un,"uniformLocations",["uColorMatrix","uConstants"]),W.setClass(un);Vr("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]);Vr("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]);Vr("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]);Vr("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]);Vr("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]);Vr("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]);Vr("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Jc extends ze{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.subFilters=e.subFilters||[]}applyTo(e){eo(e)&&(e.passes+=this.subFilters.length-1),this.subFilters.forEach(t=>{t.applyTo(e)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(e=>e.toObject())}}isNeutralState(){return!this.subFilters.some(e=>!e.isNeutralState())}static fromObject(e,t){return Promise.all((e.subFilters||[]).map(r=>W.getClass(r.type).fromObject(r,t))).then(r=>new this({subFilters:r}))}}T(Jc,"type","Composed"),W.setClass(Jc);class $s extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(e){let{imageData:{data:t}}=e;const r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(let i=0;i<t.length;i+=4)t[i]=s*(t[i]-128)+128,t[i+1]=s*(t[i+1]-128)+128,t[i+2]=s*(t[i+2]-128)+128}sendUniformData(e,t){e.uniform1f(t.uContrast,this.contrast)}}T($s,"type","Contrast"),T($s,"defaults",{contrast:0}),T($s,"uniformLocations",["uContrast"]),W.setClass($s);const eS={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ws extends ze{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return eS[this.getCacheKey()]}applyTo2d(e){const t=e.imageData,r=t.data,s=this.matrix,i=Math.round(Math.sqrt(s.length)),o=Math.floor(i/2),a=t.width,l=t.height,c=e.ctx.createImageData(a,l),u=c.data,h=this.opaque?1:0;let d,f,p,g,y,b,w,v,S,x,O,P,M;for(O=0;O<l;O++)for(x=0;x<a;x++){for(y=4*(O*a+x),d=0,f=0,p=0,g=0,M=0;M<i;M++)for(P=0;P<i;P++)w=O+M-o,b=x+P-o,w<0||w>=l||b<0||b>=a||(v=4*(w*a+b),S=s[M*i+P],d+=r[v]*S,f+=r[v+1]*S,p+=r[v+2]*S,h||(g+=r[v+3]*S));u[y]=d,u[y+1]=f,u[y+2]=p,u[y+3]=h?r[y+3]:g}e.imageData=c}sendUniformData(e,t){e.uniform1fv(t.uMatrix,this.matrix)}toObject(){return k(k({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}T(Ws,"type","Convolute"),T(Ws,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),T(Ws,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),W.setClass(Ws);const gd="Gamma";class zs extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.gamma=e.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.gamma,s=1/r[0],i=1/r[1],o=1/r[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const a=this.rgbValues;for(let l=0;l<256;l++)a.r[l]=255*Math.pow(l/255,s),a.g[l]=255*Math.pow(l/255,i),a.b[l]=255*Math.pow(l/255,o);for(let l=0;l<t.length;l+=4)t[l]=a.r[t[l]],t[l+1]=a.g[t[l+1]],t[l+2]=a.b[t[l+2]]}sendUniformData(e,t){e.uniform3fv(t.uGamma,this.gamma)}isNeutralState(){const{gamma:e}=this;return e[0]===1&&e[1]===1&&e[2]===1}toObject(){return{type:gd,gamma:this.gamma.concat()}}}T(zs,"type",gd),T(zs,"defaults",{gamma:[1,1,1]}),T(zs,"uniformLocations",["uGamma"]),W.setClass(zs);const tS={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Vs extends ze{applyTo2d(e){let{imageData:{data:t}}=e;for(let r,s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2];switch(this.mode){case"average":r=(i+o+a)/3;break;case"lightness":r=(Math.min(i,o,a)+Math.max(i,o,a))/2;break;case"luminosity":r=.21*i+.72*o+.07*a}t[s+2]=t[s+1]=t[s]=r}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return tS[this.mode]}sendUniformData(e,t){e.uniform1i(t.uMode,1)}isNeutralState(){return!1}}T(Vs,"type","Grayscale"),T(Vs,"defaults",{mode:"average"}),T(Vs,"uniformLocations",["uMode"]),W.setClass(Vs);const rS=k(k({},pd),{},{rotation:0});class Eo extends un{calculateMatrix(){const e=this.rotation*Math.PI,t=lr(e),r=cr(e),s=1/3,i=Math.sqrt(s)*r,o=1-t;this.matrix=[t+o/3,s*o-i,s*o+i,0,0,s*o+i,t+s*o,s*o-i,0,0,s*o-i,s*o+i,t+s*o,0,0,0,0,0,1,0]}isNeutralState(){return this.rotation===0}applyTo(e){this.calculateMatrix(),super.applyTo(e)}toObject(){return{type:this.type,rotation:this.rotation}}}T(Eo,"type","HueRotation"),T(Eo,"defaults",rS),W.setClass(Eo);class Hs extends ze{applyTo2d(e){let{imageData:{data:t}}=e;for(let r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2],this.alpha&&(t[r+3]=255-t[r+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(e,t){e.uniform1i(t.uInvert,Number(this.invert)),e.uniform1i(t.uAlpha,Number(this.alpha))}}T(Hs,"type","Invert"),T(Hs,"defaults",{alpha:!1,invert:!0}),T(Hs,"uniformLocations",["uInvert","uAlpha"]),W.setClass(Hs);class qs extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=this.noise;for(let s=0;s<t.length;s+=4){const i=(.5-Math.random())*r;t[s]+=i,t[s+1]+=i,t[s+2]+=i}}sendUniformData(e,t){e.uniform1f(t.uNoise,this.noise/255),e.uniform1f(t.uSeed,Math.random())}isNeutralState(){return this.noise===0}}T(qs,"type","Noise"),T(qs,"defaults",{noise:0}),T(qs,"uniformLocations",["uNoise","uSeed"]),W.setClass(qs);class Xs extends ze{applyTo2d(e){let{imageData:{data:t,width:r,height:s}}=e;for(let i=0;i<s;i+=this.blocksize)for(let o=0;o<r;o+=this.blocksize){const a=4*i*r+4*o,l=t[a],c=t[a+1],u=t[a+2],h=t[a+3];for(let d=i;d<Math.min(i+this.blocksize,s);d++)for(let f=o;f<Math.min(o+this.blocksize,r);f++){const p=4*d*r+4*f;t[p]=l,t[p+1]=c,t[p+2]=u,t[p+3]=h}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(e,t){e.uniform1f(t.uBlocksize,this.blocksize)}}T(Xs,"type","Pixelate"),T(Xs,"defaults",{blocksize:4}),T(Xs,"uniformLocations",["uBlocksize"]),W.setClass(Xs);class Ys extends ze{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=255*this.distance,s=new ue(this.color).getSource(),i=[s[0]-r,s[1]-r,s[2]-r],o=[s[0]+r,s[1]+r,s[2]+r];for(let a=0;a<t.length;a+=4){const l=t[a],c=t[a+1],u=t[a+2];l>i[0]&&c>i[1]&&u>i[2]&&l<o[0]&&c<o[1]&&u<o[2]&&(t[a+3]=0)}}sendUniformData(e,t){const r=new ue(this.color).getSource(),s=this.distance,i=[0+r[0]/255-s,0+r[1]/255-s,0+r[2]/255-s,1],o=[r[0]/255+s,r[1]/255+s,r[2]/255+s,1];e.uniform4fv(t.uLow,i),e.uniform4fv(t.uHigh,o)}}T(Ys,"type","RemoveColor"),T(Ys,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),T(Ys,"uniformLocations",["uLow","uHigh"]),W.setClass(Ys);class Us extends ze{sendUniformData(e,t){e.uniform2fv(t.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),e.uniform1fv(t.uTaps,this.taps)}getFilterWindow(){const e=this.tempScale;return Math.ceil(this.lanczosLobes/e)}getCacheKey(){const e=this.getFilterWindow();return"".concat(this.type,"_").concat(e)}getFragmentSource(){const e=this.getFilterWindow();return this.generateShader(e)}getTaps(){const e=this.lanczosCreate(this.lanczosLobes),t=this.tempScale,r=this.getFilterWindow(),s=new Array(r);for(let i=1;i<=r;i++)s[i-1]=e(i*t);return s}generateShader(e){const t=new Array(e);for(let r=1;r<=e;r++)t[r-1]="".concat(r,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(e,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(t.map((r,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(r,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(r,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(e){e.passes++,this.width=e.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=e.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),e.destinationWidth=this.dW,super.applyTo(e),e.sourceWidth=e.destinationWidth,this.height=e.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),e.destinationHeight=this.dH,super.applyTo(e),e.sourceHeight=e.destinationHeight}applyTo(e){eo(e)?this.applyToForWebgl(e):this.applyTo2d(e)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(e){return t=>{if(t>=e||t<=-e)return 0;if(t<11920929e-14&&t>-11920929e-14)return 1;const r=(t*=Math.PI)/e;return Math.sin(t)/t*Math.sin(r)/r}}applyTo2d(e){const t=e.imageData,r=this.scaleX,s=this.scaleY;this.rcpScaleX=1/r,this.rcpScaleY=1/s;const i=t.width,o=t.height,a=Math.round(i*r),l=Math.round(o*s);let c;c=this.resizeType==="sliceHack"?this.sliceByTwo(e,i,o,a,l):this.resizeType==="hermite"?this.hermiteFastResize(e,i,o,a,l):this.resizeType==="bilinear"?this.bilinearFiltering(e,i,o,a,l):this.resizeType==="lanczos"?this.lanczosResize(e,i,o,a,l):new ImageData(a,l),e.imageData=c}sliceByTwo(e,t,r,s,i){const o=e.imageData,a=.5;let l=!1,c=!1,u=t*a,h=r*a;const d=e.filterBackend.resources;let f=0,p=0;const g=t;let y=0;d.sliceByTwo||(d.sliceByTwo=jt());const b=d.sliceByTwo;(b.width<1.5*t||b.height<r)&&(b.width=1.5*t,b.height=r);const w=b.getContext("2d");for(w.clearRect(0,0,1.5*t,r),w.putImageData(o,0,0),s=Math.floor(s),i=Math.floor(i);!l||!c;)t=u,r=h,s<Math.floor(u*a)?u=Math.floor(u*a):(u=s,l=!0),i<Math.floor(h*a)?h=Math.floor(h*a):(h=i,c=!0),w.drawImage(b,f,p,t,r,g,y,u,h),f=g,p=y,y+=h;return w.getImageData(f,p,s,i)}lanczosResize(e,t,r,s,i){const o=e.imageData.data,a=e.ctx.createImageData(s,i),l=a.data,c=this.lanczosCreate(this.lanczosLobes),u=this.rcpScaleX,h=this.rcpScaleY,d=2/this.rcpScaleX,f=2/this.rcpScaleY,p=Math.ceil(u*this.lanczosLobes/2),g=Math.ceil(h*this.lanczosLobes/2),y={},b={x:0,y:0},w={x:0,y:0};return function v(S){let x,O,P,M,L,m,E,j,R,I,F;for(b.x=(S+.5)*u,w.x=Math.floor(b.x),x=0;x<i;x++){for(b.y=(x+.5)*h,w.y=Math.floor(b.y),L=0,m=0,E=0,j=0,R=0,O=w.x-p;O<=w.x+p;O++)if(!(O<0||O>=t)){I=Math.floor(1e3*Math.abs(O-b.x)),y[I]||(y[I]={});for(let B=w.y-g;B<=w.y+g;B++)B<0||B>=r||(F=Math.floor(1e3*Math.abs(B-b.y)),y[I][F]||(y[I][F]=c(Math.sqrt(Math.pow(I*d,2)+Math.pow(F*f,2))/1e3)),P=y[I][F],P>0&&(M=4*(B*t+O),L+=P,m+=P*o[M],E+=P*o[M+1],j+=P*o[M+2],R+=P*o[M+3]))}M=4*(x*s+S),l[M]=m/L,l[M+1]=E/L,l[M+2]=j/L,l[M+3]=R/L}return++S<s?v(S):a}(0)}bilinearFiltering(e,t,r,s,i){let o,a,l,c,u,h,d,f,p,g,y,b,w,v=0;const S=this.rcpScaleX,x=this.rcpScaleY,O=4*(t-1),P=e.imageData.data,M=e.ctx.createImageData(s,i),L=M.data;for(d=0;d<i;d++)for(f=0;f<s;f++)for(u=Math.floor(S*f),h=Math.floor(x*d),p=S*f-u,g=x*d-h,w=4*(h*t+u),y=0;y<4;y++)o=P[w+y],a=P[w+4+y],l=P[w+O+y],c=P[w+O+4+y],b=o*(1-p)*(1-g)+a*p*(1-g)+l*g*(1-p)+c*p*g,L[v++]=b;return M}hermiteFastResize(e,t,r,s,i){const o=this.rcpScaleX,a=this.rcpScaleY,l=Math.ceil(o/2),c=Math.ceil(a/2),u=e.imageData.data,h=e.ctx.createImageData(s,i),d=h.data;for(let f=0;f<i;f++)for(let p=0;p<s;p++){const g=4*(p+f*s);let y=0,b=0,w=0,v=0,S=0,x=0,O=0;const P=(f+.5)*a;for(let M=Math.floor(f*a);M<(f+1)*a;M++){const L=Math.abs(P-(M+.5))/c,m=(p+.5)*o,E=L*L;for(let j=Math.floor(p*o);j<(p+1)*o;j++){let R=Math.abs(m-(j+.5))/l;const I=Math.sqrt(E+R*R);I>1&&I<-1||(y=2*I*I*I-3*I*I+1,y>0&&(R=4*(j+M*t),O+=y*u[R+3],w+=y,u[R+3]<255&&(y=y*u[R+3]/250),v+=y*u[R],S+=y*u[R+1],x+=y*u[R+2],b+=y))}}d[g]=v/b,d[g+1]=S/b,d[g+2]=x/b,d[g+3]=O/w}return h}}T(Us,"type","Resize"),T(Us,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),T(Us,"uniformLocations",["uDelta","uTaps"]),W.setClass(Us);class Gs extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.saturation;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a);t[s]+=l!==i?(l-i)*r:0,t[s+1]+=l!==o?(l-o)*r:0,t[s+2]+=l!==a?(l-a)*r:0}}sendUniformData(e,t){e.uniform1f(t.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}T(Gs,"type","Saturation"),T(Gs,"defaults",{saturation:0}),T(Gs,"uniformLocations",["uSaturation"]),W.setClass(Gs);class Ks extends ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(e){let{imageData:{data:t}}=e;const r=-this.vibrance;for(let s=0;s<t.length;s+=4){const i=t[s],o=t[s+1],a=t[s+2],l=Math.max(i,o,a),c=(i+o+a)/3,u=2*Math.abs(l-c)/255*r;t[s]+=l!==i?(l-i)*u:0,t[s+1]+=l!==o?(l-o)*u:0,t[s+2]+=l!==a?(l-a)*u:0}}sendUniformData(e,t){e.uniform1f(t.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}T(Ks,"type","Vibrance"),T(Ks,"defaults",{vibrance:0}),T(Ks,"uniformLocations",["uVibrance"]),W.setClass(Ks);const Xe={_prefix:"on_",_listeners:{},evtName:function(n){return this._prefix+n},register:function(n,e,t){const r=this.evtName(n);typeof this._listeners[r]>"u"&&(this._listeners[r]=[]),this._listeners[r].push([t||this,e])},unregister:function(n,e){const t=this.evtName(n);if(typeof e>"u")delete this._listeners[t];else for(let r=0;r<this._listeners[t].length;r++)this._listeners[t][r][1]===e&&this._listeners[t].splice(r,1)},emit:function(n,...e){const t=this.evtName(n);if(typeof this._listeners[t]<"u")for(let r=0,s=this._listeners[t].length;r<s;r++)this._listeners[t][r][1].call(this._listeners[t][r][0],n,...e)}},nS=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e),l={x:a.x,y:a.y},c=[...r,l];if(s(c),c.length>0){const u=new Qt([c[c.length-1].x,c[c.length-1].y,a.x,a.y],{stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1});e.add(u),o([...i,u])}},sS=(n,e,t,r,s,i,o,a)=>{r(!0),nS(n,e,t,s,i,o,a)},iS=(n,e,t,r)=>{if(t&&r.length>0){const s=e.getScenePoint(n.e);r[r.length-1].set({x2:s.x,y2:s.y}),e.renderAll()}},oS=(n,e,t,r,s,i,o,a)=>{if(r.length>2){const l=Wr(),c=new Rr(r,{fill:"transparent",stroke:e,strokeWidth:2,selectable:!1,hasControls:!0,hoverCursor:"default",id:l});n.add(c),a(c.id,X.Polygon,c),s([]);for(const u of i)n.remove(u);o([]),t(!1)}},aS=(n,e,t)=>{const r=Wr(),s=new Rr(e.points,{top:e.top+10,left:e.left+10,fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return n.add(s),t(r,X.Polygon,s),s},lS=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e),l={x:a.x,y:a.y},c=[...r,l];if(s(c),c.length>0){const u=new Qt([c[c.length-1].x,c[c.length-1].y,a.x,a.y],{stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!1});e.add(u),o([...i,u])}},cS=(n,e,t,r,s,i,o,a)=>{r(!0),lS(n,e,t,s,i,o,a)},uS=(n,e,t,r)=>{if(t&&r.length>0){const s=e.getScenePoint(n.e);r[r.length-1].set({x2:s.x,y2:s.y}),e.renderAll()}},hS=(n,e,t,r,s,i,o,a)=>{if(r.length>2){const l=Wr(),c=new at(r,{fill:"transparent",stroke:e,strokeWidth:2,selectable:!1,hasControls:!0,lockRotation:!1,id:l});n.add(c),a(l,X.Polyline,c),s([]);for(const u of i)n.remove(u);o([]),t(!1)}},dS=(n,e,t)=>{const r=Wr(),s=new at(e.points,{top:e.top+10,left:e.left+10,fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return n.add(s),t(r,X.Polyline,s),s},fS=(n,e,t,r,s,i,o)=>{const a=e.getScenePoint(n.e);r(a.x),s(a.y);const l=Wr(),c=new gt({left:a.x,top:a.y,originX:"left",originY:"top",width:0,height:0,fill:"transparent",stroke:t,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:l});e.add(c),i(c),o(!0)},pS=(n,e,t,r,s,i)=>{if(i&&s){const o=e.getScenePoint(n.e);s.set({width:Math.abs(t-o.x),height:Math.abs(r-o.y)}),t>o.x&&s.set({left:o.x}),r>o.y&&s.set({top:o.y}),e.renderAll()}},gS=(n,e,t,r,s)=>{e(!1),t.setCoords(),s(t.id,X.Rectangle,t),r(null),n.defaultCursor="default"},mS=(n,e,t)=>{const r=Wr(),s=new gt({left:e.left+10,top:e.top+10,originX:"left",originY:"top",width:e.width,height:e.height,fill:"transparent",stroke:e.stroke,strokeWidth:e.strokeWidth,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:r});return n.add(s),t(r,X.Rectangle,s),s},yS=n=>{const[e,t]=C.useState({width:0,height:0});return C.useEffect(()=>{const r=new Image;r.src=n,r.onload=()=>{t({width:r.width,height:r.height})}},[n]),{imageSize:e,isReady:e.width>0}},bS=n=>{const e=C.useRef(null),[t,r]=C.useState({width:0,height:0}),{imageSize:s,isReady:i}=yS(n);return C.useEffect(()=>{if(e.current){const o=()=>{const a=e.current.offsetWidth;a<s.width?r({width:a,height:a*(s.height/s.width)}):r({width:s.width,height:s.height})};s.width>0&&e.current&&o()}},[s,e.current]),{imageSize:s,canvasSize:t,wrapperRef:e,isReady:i}},vS=(n,e,t,r,s,i)=>{if(Kn("info",i??!1,"Loading initial shapes data",s,n.current),s!=null&&s.rois){const o=[],a=[];s.rois.forEach(l=>{var h,d,f;Kn("info",i??!1,"Loading initial shape",l);const c=Wr();let u;switch(l.type){case X.Rectangle:u=new gt({left:l.shape.left,top:l.shape.top,originX:"left",originY:"top",width:l.shape.width,height:l.shape.height,fill:"transparent",stroke:l.shape.color,strokeWidth:2,strokeUniform:!0,selectable:!1,hasControls:!0,hoverCursor:"default",id:c}),(h=n.current)==null||h.add(u);break;case X.Polygon:u=new Rr(l.shape.points,{top:l.shape.top+10,left:l.shape.left+10,fill:"transparent",stroke:l.shape.color,strokeWidth:2,selectable:!1,hasControls:!0,hoverCursor:"default",id:c}),(d=n.current)==null||d.add(u);break;case X.Polyline:u=new at(l.shape.points,{top:l.shape.top+10,left:l.shape.left+10,fill:"transparent",stroke:l.shape.color,strokeWidth:2,selectable:!1,hasControls:!0,hoverCursor:"default",id:c}),(f=n.current)==null||f.add(u);break}o.push({id:c,parameters:l.parameters}),a.push({id:c,type:l.type,shape:u})}),e(a),r({...t,rois:o})}},xS=n=>{const{configuration:e,activeTool:t,activeColor:r,shapes:s,addShape:i}=_n(),{notify:o,strings:a}=C.useContext(He),[l,c]=C.useState(!1),[u,h]=C.useState(null),[d,f]=C.useState(0),[p,g]=C.useState(0),[y]=C.useState({x:0,y:0}),[b,w]=C.useState([]),[v,S]=C.useState([]),x=C.useCallback(P=>{Xe.emit("canvas:shapeSelected",P.selected??null)},[]),O=C.useCallback(()=>{Xe.emit("canvas:shapeSelected",null)},[]);C.useEffect(()=>{if(!n)return;t===X.Pointer?(n.selection=!0,n.getObjects().forEach(E=>{E.selectable=!0}),n.renderAll()):(n.selection=!1,n.discardActiveObject(),Xe.emit("canvas:shapeSelected",null),n.renderAll());const P=E=>{switch(t){case X.Rectangle:if(!pn(e,X.Rectangle,s,o,a.cannotDrawMoreRectangles))return;fS(E,n,r,f,g,h,c);break;case X.Polygon:if(!pn(e,X.Polygon,s,o,a.cannotDrawMorePolygons))return;sS(E,n,r,c,b,w,v,S);break;case X.Polyline:if(!pn(e,X.Polyline,s,o,a.cannotDrawMorePolylines))return;cS(E,n,r,c,b,w,v,S);break}},M=E=>{switch(t){case X.Rectangle:pS(E,n,d,p,u,l);break;case X.Polygon:iS(E,n,l,v);break;case X.Polyline:uS(E,n,l,v);break}},L=()=>{switch(t){case X.Rectangle:gS(n,c,u,h,i);break}},m=()=>{switch(t){case X.Polygon:oS(n,r,c,b,w,v,S,i);break;case X.Polyline:hS(n,r,c,b,w,v,S,i);break}};return n.on("mouse:down",P),n.on("mouse:move",M),n.on("mouse:up",L),n.on("mouse:dblclick",m),n.on("selection:created",x),n.on("selection:updated",x),n.on("selection:cleared",O),()=>{n.off("mouse:down",P),n.off("mouse:move",M),n.off("mouse:up",L),n.off("mouse:dblclick",m),n.off("selection:created",x),n.off("selection:updated",x),n.off("selection:cleared",O)}},[t,r,l,u,d,p,y,v,b,n,i,x,O,e,o,a,s])},SS=n=>{const{configuration:e,shapes:t,addShape:r,setActiveTool:s}=_n(),{notify:i,strings:o}=C.useContext(He);C.useEffect(()=>{const a=(u,h)=>{const d=n==null?void 0:n.getObjects().find(f=>f.id===h);d&&(n==null||n.remove(d))},l=(u,h)=>{const d=n==null?void 0:n.getObjects().find(p=>p.id===h);let f;switch(d==null?void 0:d.type){case X.Polygon:if(!pn(e,X.Polygon,t,i,o.cannotDrawMorePolygons))return;f=aS(n,d,r),Xe.emit("canvas:selectShape",f.id);break;case X.Polyline:if(!pn(e,X.Polyline,t,i,o.cannotDrawMorePolylines))return;f=dS(n,d,r),Xe.emit("canvas:selectShape",f.id);break;case X.Rectangle:if(!pn(e,X.Rectangle,t,i,o.cannotDrawMoreRectangles))return;f=mS(n,d,r),Xe.emit("canvas:selectShape",f.id);break}},c=(u,h)=>{const d=n==null?void 0:n.getObjects().find(f=>f.id===h);d&&(n==null||n.discardActiveObject(),n==null||n.setActiveObject(d),n==null||n.requestRenderAll(),s(X.Pointer))};return Xe.register("canvas:removeShape",a),Xe.register("canvas:copyShape",l),Xe.register("canvas:selectShape",c),()=>{Xe.unregister("canvas:removeShape",a),Xe.unregister("canvas:copyShape",l),Xe.unregister("canvas:selectShape",c)}},[s,n,r,e,t,i,o])},CS=n=>{const[e,t]=C.useState({}),[r,s]=C.useState(n.reduce((o,a)=>({...o,[a.codename]:a.value}),{}));return{fields:r,setField:o=>a=>{s({...r,[o]:a})},setFields:s,errors:e,setErrors:t}},md=({canvasSize:n,initialData:e})=>{const{metadata:t,setMetadata:r,addShapes:s,id:i}=_n(),{enableLogs:o}=C.useContext(He),[a,l]=C.useState(!1),c=C.useRef(null);return xS(c.current),SS(c.current),C.useEffect(()=>(n.width!==0&&n.height!==0&&!a&&(c.current=new ua(`react-cam-roi-canvas-${i}`),c.current.setDimensions({width:n.width,height:n.height}),vS(c,s,t,r,e,o),l(!0)),()=>{var u;(u=c.current)==null||u.dispose()}),[n.width,n.height]),_.jsx("canvas",{id:`react-cam-roi-canvas-${i}`,style:{width:`${n.width}px`,height:`${n.height}px`}})};md.__docgenInfo={description:"",methods:[],displayName:"Canvas"};const _S="_canvasWrapper_52cqe_1",wS={canvasWrapper:_S},li=({value:n,onChange:e,parameter:t,errors:r})=>{var u,h;const{TextField:s,NumberField:i,BoolField:o,EnumField:a,strings:l}=C.useContext(He),c={required:t.required,label:`${t.label}${t.unit?` (${t.unit})`:""}`,error:!!r[t.codename],helperText:r[t.codename]?l[r[t.codename]]:t.description};switch(t.type){case"string":return(u=t.options)!=null&&u.length?_.jsx(a,{value:n,onChange:d=>e(d),options:t.options,multiple:t.multiple,...c}):_.jsx(s,{type:"text",value:n,onChange:d=>e(d),...c});case"int":case"float":return(h=t.options)!=null&&h.length?_.jsx(a,{value:n,onChange:d=>e(d),options:t.options,multiple:t.multiple,...c}):_.jsx(i,{value:n,onChange:d=>e(d),...c});case"bool":return _.jsx(o,{value:n,onChange:d=>e(d),...c});default:return null}};li.__docgenInfo={description:"",methods:[],displayName:"ParameterField",props:{value:{required:!0,tsType:{name:"T"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: T) => void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"void"}}},description:""},parameter:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  codename: string
  label: string
  description: string
  unit: string
  type: DataTypeEnum
  options: { value: number | string; label: string }[]
  multiple?: boolean
  required: boolean
  value: number | string | boolean | string[] | number[] | null
}`,signature:{properties:[{key:"codename",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!0}},{key:"unit",value:{name:"string",required:!0}},{key:"type",value:{name:"DataTypeEnum",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ value: number | string; label: string }",signature:{properties:[{key:"value",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ value: number | string; label: string }[]",required:!0}},{key:"multiple",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!0}},{key:"value",value:{name:"union",raw:"number | string | boolean | string[] | number[] | null",elements:[{name:"number"},{name:"string"},{name:"boolean"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"Array",elements:[{name:"number"}],raw:"number[]"},{name:"null"}],required:!0}}]}},description:""},errors:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""}}};const TS="_form_mzru3_1",kS={form:TS},fl=({title:n,onClose:e,parameters:t,data:r,onSubmit:s})=>{const{Modal:i}=C.useContext(He),{fields:o,setField:a,errors:l,setErrors:c}=CS(r),u=()=>{ab(t,o,c)&&s([...t.map(h=>({codename:h.codename,value:o[h.codename]}))])};return _.jsx(i,{onClose:e,title:n,isOpen:!0,maxWidth:"sm",onSubmit:u,children:_.jsx("div",{className:q("form",kS,null),children:t.map(h=>{switch(h.type){case"string":return _.jsx(li,{value:String(o[h.codename]),onChange:a(h.codename),parameter:h,errors:l},h.codename);case"int":case"float":return _.jsx(li,{value:o[h.codename],onChange:a(h.codename),parameter:h,errors:l},h.codename);case"bool":return _.jsx(li,{value:o[h.codename],onChange:a(h.codename),parameter:h,errors:l},h.codename);default:return null}})})})};fl.__docgenInfo={description:"",methods:[],displayName:"ParametersModalForm"};const Qc={"shapes-table":"_shapes-table_2eugv_1","shapes-table-light":"_shapes-table-light_2eugv_20","shapes-table-dark":"_shapes-table-dark_2eugv_25","shapes-row-selected-light":"_shapes-row-selected-light_2eugv_30","shapes-row-selected-dark":"_shapes-row-selected-dark_2eugv_34"},yd=()=>{var P,M,L;const{strings:n,Typography:e,IconButton:t,DeleteIcon:r,AnnotateIcon:s,SelectIcon:i,CopyIcon:o,themeMode:a}=C.useContext(He),{shapes:l,removeShape:c,configuration:u,metadata:h,setMetadata:d}=_n(),[f,p]=C.useState([]),[g,y]=C.useState({isOpen:!1,shapeId:""});C.useEffect(()=>{const m=(E,j)=>p((j==null?void 0:j.map(R=>R.id))??[]);return Xe.register("canvas:shapeSelected",m),()=>{Xe.unregister("canvas:shapeSelected",m)}},[l]);const b=m=>()=>{Xe.emit("canvas:copyShape",m)},w=m=>()=>{Xe.emit("canvas:removeShape",m),c(m)},v=m=>()=>{Xe.emit("canvas:selectShape",m)},S=m=>()=>{y({isOpen:!0,shapeId:m})},x=m=>E=>{d({...h,rois:[...h.rois.filter(j=>j.id!==m),{id:m,parameters:E}]}),y({isOpen:!1,shapeId:""})},O=a==="light"?"black":"white";return _.jsxs(_.Fragment,{children:[_.jsxs("table",{className:q("shapes-table",Qc,a),children:[Object.keys(l).length>0&&_.jsx("thead",{children:_.jsxs("tr",{children:[_.jsx("th",{children:_.jsx(e,{style:{fontWeight:"bold"},children:n.id})}),_.jsx("th",{children:_.jsx(e,{style:{fontWeight:"bold"},children:n.type})}),_.jsx("th",{})]})}),_.jsx("tbody",{children:Object.keys(l).map(m=>_.jsxs("tr",{className:f.indexOf(m)>-1?q("shapes-row-selected",Qc,a):"",children:[_.jsx("td",{children:_.jsx("div",{children:_.jsx(e,{children:m.substring(0,6)})})}),_.jsx("td",{children:_.jsx(e,{children:n[l[m].type]})}),_.jsxs("td",{children:[_.jsx(t,{onClick:v(m),children:_.jsx(i,{color:O})}),_.jsx(t,{onClick:b(m),children:_.jsx(o,{color:O})}),_.jsx(t,{onClick:S(m),disabled:!u.rois.find(E=>E.type===l[m].type),children:_.jsx(s,{color:O})}),_.jsx(t,{onClick:w(m),children:_.jsx(r,{color:O})})]})]},m))})]}),g.isOpen&&_.jsx(fl,{parameters:((P=u.rois.find(m=>m.type===l[g.shapeId].type))==null?void 0:P.parameters)??[],data:((M=h.rois.find(m=>m.id===g.shapeId))==null?void 0:M.parameters)??((L=u.rois.find(m=>m.type===l[g.shapeId].type))==null?void 0:L.parameters)??[],title:n.mainParametersMetadata,onClose:()=>y({isOpen:!1,shapeId:""}),onSubmit:x(g.shapeId)})]})};yd.__docgenInfo={description:"",methods:[],displayName:"ShapesList"};const bd=({color:n="black",style:e={height:"32px"}})=>_.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:_.jsx("path",{fill:n,d:"M13.3891,20.923l-3.1995-6.8869-3.47,4.8454V4.077l11.5606,9.0859h-5.9695l3.1679,6.7828-2.0893.9773h-.0002Z"})});bd.__docgenInfo={description:"",methods:[],displayName:"PointerIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const vd=({color:n="black",style:e={height:"32px"}})=>_.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:_.jsx("path",{fill:n,d:"M17.3836,17.058v-2.9301h2.1705v4.341l-9.7673,4.341-7.5967-7.5968L6.5311,5.4459h4.341v2.1705h-2.9301l-3.1472,7.1627,5.4263,5.4263,7.1627-3.1472M22.8099,5.4459v2.1705h-3.2558v3.2558h-2.1705v-3.2558h-3.2558v-2.1705h3.2558v-3.2558h2.1705v3.2558h3.2558Z"})});vd.__docgenInfo={description:"",methods:[],displayName:"PolygonIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const xd=({color:n="black",style:e={height:"32px"}})=>_.jsxs("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:[_.jsx("polygon",{fill:n,points:"20.5216 8.6492 20.5216 5.4658 18.3992 5.4658 18.3992 8.6492 15.2159 8.6492 15.2159 10.7715 18.3992 10.7715 18.3992 13.955 20.5216 13.955 20.5216 10.7715 23.705 10.7715 23.705 8.6492 20.5216 8.6492"}),_.jsx("polygon",{fill:n,points:"12.3027 17.2 7.011 14.4951 7.011 11.5067 8.9251 9.2929 13.103 9.2929 13.103 3.577 7.3871 3.577 7.3871 7.7797 4.7908 10.7826 1.295 10.7826 1.295 16.4985 6.2004 16.4985 12.3027 19.6175 12.3027 21.423 18.0186 21.423 18.0186 15.7071 12.3027 15.7071 12.3027 17.2"})]});xd.__docgenInfo={description:"",methods:[],displayName:"PolylineIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const Sd=({color:n="black",style:e={height:"32px"}})=>_.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25",children:_.jsx("path",{fill:n,d:"M19.5541,7.0738h3.2558v2.1705h-3.2558v3.2558h-2.1705v-3.2558h-3.2558v-2.1705h3.2558v-3.2558h2.1705v3.2558M17.3836,19.0115v-3.2558h2.1705v5.4263H2.1901V7.0738h8.682v2.1705h-6.5115v9.7673h13.023,0Z"})});Sd.__docgenInfo={description:"",methods:[],displayName:"RectangleIcon",props:{color:{defaultValue:{value:"'black'",computed:!1},required:!1},style:{defaultValue:{value:"{ height: '32px' }",computed:!1},required:!1}}};const OS="_colorpickerWrapper_15gxc_1",Po={colorpickerWrapper:OS,"colorpicker-button":"_colorpicker-button_15gxc_7","colorpicker-button-active":"_colorpicker-button-active_15gxc_15"},Cd=({style:n})=>{const{pickerColors:e,themeMode:t}=C.useContext(He),{activeColor:r,setActiveColor:s}=_n();return _.jsx("div",{style:n,className:Po.colorpickerWrapper,children:e.map(i=>_.jsx("div",{onClick:()=>s(i),className:`${q("colorpicker-button",Po,t)} ${r===i?q("colorpicker-button-active",Po,t):""}`,style:{backgroundColor:i}},i))})};Cd.__docgenInfo={description:"",methods:[],displayName:"ColorPicker"};const ES="_toolbar_e1brt_1",$n={"toolbar-info":"_toolbar-info_e1brt_1","toolbar-info-light":"_toolbar-info-light_e1brt_4","toolbar-info-dark":"_toolbar-info-dark_e1brt_8",toolbar:ES,"toolbar-light":"_toolbar-light_e1brt_19","toolbar-dark":"_toolbar-dark_e1brt_23","toolbar-helper":"_toolbar-helper_e1brt_27","toolbar-helper-light":"_toolbar-helper-light_e1brt_31","toolbar-helper-dark":"_toolbar-helper-dark_e1brt_36","toolbar-spacer":"_toolbar-spacer_e1brt_41","toolbar-spacer-light":"_toolbar-spacer-light_e1brt_47","toolbar-spacer-dark":"_toolbar-spacer-dark_e1brt_51"},_d=()=>{var S,x;const{IconButton:n,themeMode:e,primaryColor:t,Typography:r,strings:s}=C.useContext(He),{activeTool:i,setActiveTool:o,configuration:a,metadata:l,setMetadata:c,onSubmit:u}=_n(),[h,d]=C.useState({isOpen:!1}),f=O=>O===i?t:e==="light"?"black":"white",p=O=>()=>o(O),g=O=>{c({...l,parameters:O}),d({isOpen:!1})},y=(S=a.options)==null?void 0:S.hideForbiddenTools,b=a.rois.find(O=>O.type===X.Polyline),w=a.rois.find(O=>O.type===X.Polygon),v=a.rois.find(O=>O.type===X.Rectangle);return _.jsxs(_.Fragment,{children:[((x=a.options)==null?void 0:x.description)&&_.jsx("div",{className:q("toolbar-info",$n,e),children:_.jsx(r,{children:a.options.description})}),_.jsxs("div",{className:q("toolbar",$n,e),children:[go(a)&&_.jsxs(_.Fragment,{children:[_.jsx(n,{onClick:p(X.Pointer),children:_.jsx(bd,{color:f(X.Pointer)})}),(!y||b)&&_.jsx(n,{onClick:p(X.Polyline),disabled:!b,children:_.jsx(xd,{color:f(X.Polyline)})}),(!y||w)&&_.jsx(n,{onClick:p(X.Polygon),disabled:!w,children:_.jsx(vd,{color:f(X.Polygon)})}),(!y||v)&&_.jsx(n,{onClick:p(X.Rectangle),disabled:!v,children:_.jsx(Sd,{color:f(X.Rectangle)})}),_.jsx(Cd,{style:{marginLeft:"auto",marginRight:".5rem"}})]}),go(a)&&gc(a)&&_.jsx("div",{className:q("toolbar-spacer",$n,e)}),gc(a)&&_.jsx(n,{onClick:()=>d({isOpen:!0}),children:_.jsx(Va,{color:f(X.Rectangle)})}),_.jsx("div",{className:q("toolbar-spacer",$n,e)}),_.jsx(n,{onClick:u,children:_.jsx(qa,{color:f(X.Rectangle)})})]}),go(a)&&_.jsx("div",{className:q("toolbar-helper",$n,e),children:_.jsxs(r,{children:[s[i],": ",s[`${i}HelpText`]]})}),h.isOpen&&_.jsx(fl,{parameters:a.parameters,data:l.parameters,title:s.mainParametersMetadata,onClose:()=>d({isOpen:!1}),onSubmit:g})]})};_d.__docgenInfo={description:"",methods:[],displayName:"Toolbar"};const wd=({imageUrl:n,configuration:e,onSubmit:t,initialData:r,id:s})=>{var m;const{themeMode:i,enableLogs:o,pickerColors:a,strings:l,notify:c}=C.useContext(He),{imageSize:u,canvasSize:h,wrapperRef:d,isReady:f}=bS(n),[p,g]=C.useState(X.Pointer),[y,b]=C.useState(a[0]),[w,v]=C.useState({parameters:[...e.parameters.map(E=>{const j=r==null?void 0:r.parameters.find(R=>R.codename===R.codename);return{codename:E.codename,value:j?j.value:E.value}})??[]],rois:[]}),[S,x]=C.useState({}),O=C.useCallback((E,j,R)=>x({...S,[E]:{type:j,shape:R}}),[S]),P=C.useCallback(E=>x({...S,...E.reduce((j,R)=>({...j,[R.id]:R}),{})}),[S]),M=C.useCallback(E=>{const j={...S};delete j[E],x(j),v({...w,rois:w.rois.filter(R=>R.id!==E)})},[S,w]),L=C.useCallback(()=>{var R;const[E,j]=lb(e,S,w,l);E?t({parameters:((R=w.parameters)==null?void 0:R.map(I=>({codename:I.codename,value:I.value})))??[],rois:Object.keys(S).map(I=>{var F,B;return{parameters:((B=(F=w.rois.find($=>$.id===I))==null?void 0:F.parameters)==null?void 0:B.map($=>({codename:$.codename,value:$.value})))??[],type:S[I].type,shape:cb(S[I].shape,S[I].shape.type)}})}):c.error(l.invalidSubmission+`
`+j.map(I=>`- ${I}`).join(`
`))},[t,e,S,w,l,c]);return Kn("info",o,"react-cam-roi","active tool",p),Kn("info",o,"react-cam-roi","canvas size",h),Kn("info",o,"react-cam-roi","metadata",w),f?_.jsx(th,{id:s,hideForbiddenTools:((m=e.options)==null?void 0:m.hideForbiddenTools)??!1,activeTool:p,setActiveTool:g,activeColor:y,setActiveColor:b,shapes:S,addShape:O,addShapes:P,removeShape:M,configuration:e,metadata:w,setMetadata:v,onSubmit:L,children:_.jsxs("div",{style:{maxWidth:"100%",width:`${u.width}px`},ref:d,children:[_.jsx(_d,{}),_.jsx("div",{className:q("canvasWrapper",wS,i),style:{width:`${h.width}px`,height:`${h.height}px`,backgroundImage:`url(${n})`},children:_.jsx(md,{canvasSize:h,initialData:r})}),_.jsx(yd,{})]})}):_.jsx(fh,{})};wd.__docgenInfo={description:"",methods:[],displayName:"RoiEditor"};const PS={parameters:[{codename:"analytics_1",label:"Analytics param 1",description:"This is some descriptive text",unit:"s",type:qn.Integer,options:[{value:7,label:"Seven"},{value:10,label:"Ten"}],multiple:!0,required:!0,value:10},{codename:"analytics_2",label:"Analytics param 2",description:"This is some descriptive text",unit:"s",type:qn.Boolean,options:[],required:!0,value:""}],rois:[{role:"invasion_area",type:X.Polygon,multiplicity:{operator:Pt.Eq,threshold:1},parameters:[{codename:"threshold",label:"Alert threshold",description:"Threshold used for triggering alarms",unit:"%",type:qn.Integer,options:[],required:!0,value:null}]},{role:"limit",type:X.Polyline,multiplicity:{operator:Pt.Gte,threshold:1},parameters:[{codename:"height",label:"Limit height",description:"Height of the limit",unit:"m",type:qn.Float,options:[],required:!0,value:null}]}],options:{hideForbiddenTools:!1,description:"Draw a polygon and one or more polylines."}},MS={parameters:[{codename:"analytics_1",value:"seven"},{codename:"analytics_2",value:10},{codename:"analytics_3",value:!0}],rois:[{parameters:[{codename:"threshold",value:9}],type:"polygon",shape:{points:[{x:169,y:211.203125},{x:292,y:350.203125},{x:338,y:110.203125},{x:221,y:105.203125},{x:221,y:105.203125}],top:104.203125,left:168,color:"#ffffff"}},{parameters:[{codename:"height",value:6.8}],type:"polyline",shape:{points:[{x:511,y:42.203125},{x:486,y:173.203125},{x:672,y:168.203125},{x:626,y:55.203125},{x:626,y:55.203125}],top:41.203125,left:485,color:"#ff9900"}}]},NS={title:"ReactCamRoi/ROI Editor",component:wd,decorators:[(n,e)=>_.jsx(Xa,{themeMode:e.globals.theme,children:_.jsx(n,{})})],args:{id:"id",imageUrl:"https://placecats.com/800/600",configuration:PS,initialData:MS,onSubmit:n=>{console.log("output",n)}},parameters:{layout:"centered"},tags:["autodocs"]},Zs={args:{id:"default"}},DS=({onChange:n,...e})=>_.jsx(Qu,{...e,onChange:t=>n(t.target.value),variant:"outlined"}),AS=({onChange:n,...e})=>_.jsx(Qu,{...e,onChange:t=>n(t.target.value),variant:"outlined"}),RS=({onChange:n,checked:e,...t})=>_.jsx(Jy,{...t,control:_.jsx(xy,{checked:e,onChange:r=>n(r.target.checked)})}),Js={decorators:[(n,e)=>_.jsxs("div",{children:[_.jsx("h3",{children:"Example using some MUI components"}),_.jsx("p",{children:"TextField, Checkbox, IconButton. Dark mode is not configured in this example."}),_.jsx(Xa,{themeMode:e.globals.theme,IconButton:Fm,Typography:Yo,TextField:DS,NumberField:AS,BoolField:RS,children:_.jsx(n,{})})]})],args:{id:"mui"}};var eu,tu,ru;Zs.parameters={...Zs.parameters,docs:{...(eu=Zs.parameters)==null?void 0:eu.docs,source:{originalSource:`{
  args: {
    id: 'default'
  }
}`,...(ru=(tu=Zs.parameters)==null?void 0:tu.docs)==null?void 0:ru.source}}};var nu,su,iu;Js.parameters={...Js.parameters,docs:{...(nu=Js.parameters)==null?void 0:nu.docs,source:{originalSource:`{
  decorators: [(Story, context) => {
    return <div>
          <h3>Example using some MUI components</h3>
          <p>TextField, Checkbox, IconButton. Dark mode is not configured in this example.</p>
          <UiProvider themeMode={context.globals.theme} IconButton={IconButton} Typography={Typography} TextField={CustomTextField} NumberField={CustomNumberField} BoolField={CustomBoolField}>
            <Story />
          </UiProvider>
        </div>;
  }],
  args: {
    id: 'mui'
  }
}`,...(iu=(su=Js.parameters)==null?void 0:su.docs)==null?void 0:iu.source}}};const $S=["Default","Mui"];export{Zs as Default,Js as Mui,$S as __namedExportsOrder,NS as default};
